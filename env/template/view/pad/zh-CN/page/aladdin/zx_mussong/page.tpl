{%extends 'c_base.tpl'%} {%block name="data_modifier"%} {%if $extData.resourceid&&$extData.resourceid lt 5999%}{%$extData.feData.fm='alop'%}{%/if%}{%if $tplData.songs[0]%}{%$songData = $tplData.songs[0]%}{%else%}{%$songData = $tplData.songs%}{%/if%}{%if $tplData.songs[0].copyright == "0"%} {%$escaped_headtitle = $tplData.title|cat:"在线试听高音质歌曲免费下载_百度音乐"%}{%else%} {%$escaped_headtitle = $tplData.title|cat:"在线试听正版歌曲免费下载_百度音乐"%}{%/if%}{%$tplData.title=$escaped_headtitle%}{%$tplData.showurl="music.baidu.com"%}{%if !$songData.morelink%}{%$extData.feData.hasShowURLGap=true%}{%/if%}{%/block%}{%block name='content'%}{%$escaped_imgPanelHeight={%fe_fn_c_get_img_height%}%}{%$escaped_imgHeight={%fe_fn_c_get_img_height rate=1.18%}%}<style type="text/css" data-merge>{%fe_fn_c_css css='btn'%}.op-zx-mussong-box{position:relative;overflow:hidden}.op-zx-mussong-volume-p{position:relative}.op-zx-mussong-volume{cursor:pointer}.op-zx-mussong-volume-slider{position:absolute;bottom:18px;_bottom:22px;left:0;width:17px;height:54px;padding:5px 0;background:#f6f6f6;cursor:default;z-index:1}.op-zx-mussong-volume-slider.op-zx-mussong-inactive{visibility:hidden}.op-zx-mussong-volume-slider .tangram-slider{margin:0 auto;width:3px;height:100%}.op-zx-mussong-volume-slider .tangram-slider-progressbar{{%*i*%}width:100%;height:100%;background:#1cb7fd}.op-zx-mussong-volume-slider .tangram-progressbar-bar{background:#d9d9d9;overflow:hidden}.op-zx-mussong-volume-slider .tangram-slider-thumb{margin-left:-4px;width:9px;height:4px;border:1px solid #999;background:#fff;cursor:pointer;overflow:hidden}.op-zx-mussong-photo{border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;overflow:hidden}.op-zx-mussong-songname{display:inline-block;font-size:1.08em;fo{%*i*%}nt-weight:normal}.op-zx-mussong-ctrl{border-spacing:0;border-collapse:collapse}.op-zx-mussong-ctrl td{font-size:1em;line-height:1.54;white-space:nowrap}.op-zx-mussong-ctrl .op-zx-mussong-td-normal{white-space:normal}.op-zx-mussong-playback{position:relative;width:216px;height:4px;background-color:#e0e0e0}.op-zx-mussong-playback div{height:100%}.op-zx-mussong-playback-buffer{z-index:1;position:absolute;top:0;background-color:#b8b8b8;overflow:hidden}.op-zx-mussong-playback .tangram-slider{z-index:{%*i*%}2}.op-zx-mussong-playback .tangram-slider-thumb{width:10px;height:10px;margin-top:-4px;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;border:1px solid #999;background-color:#fff;overflow:hidden;cursor:pointer;width:8px\9}.op-zx-mussong-playback .tangram-slider-thumb:hover{background-color:#f5f5f5}.op-zx-mussong-playback .tangram-slider-progressbar,.op-zx-mussong-playback .tangram-progressbar{overflow:hidden}.op-zx-mussong-playback .t{%*i*%}angram-progressbar-bar{background-color:#389cff}.op-zx-mussong-lrc{position:relative;border-top:1px solid #ebebeb;overflow:hidden}.op-zx-mussong-lrc-expand .op-zx-mussong-lrc-content{height:180px}.op-zx-mussong-lrc-content{height:120px;overflow-y:hidden}.op-zx-mussong-lrc-content .ui-lrc-sentence:first-child{font-weight:bold}.op-zx-mussong-lrc-content .ui-lrc-current{color:#1370f2}.op-zx-mussong-lrc-scrollbar{position:absolute;right:0;top:0}.op-zx-mussong-lrc .opui-scroll-ctrl-scroll{height:100%{%*i*%}}.op-zx-mussong-from{float:right}.op-zx-mussong-coinpic{position:relative;top:0;_top:2px;width:12px;height:12px;display:inline-block;background:url(http://www.baidu.com/aladdin/img/zx_mussong/earth.png) no-repeat}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(360deg)}}@-ms-keyframes rotate{from{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(360deg)}}@keyframes {%*i*%}rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.op-zx-mussong-img-mask{position:absolute;top:0;left:0;width:100%;height:100%;background:url(http://www.baidu.com/aladdin/img/zxmusic/6nMask-2.png) no-repeat;_background-image:url(http://www.baidu.com/aladdin/img/zxmusic/6nMask-2.gif);background:rgba(0,0,0,0);border-radius:50%;border:1px solid rgba(204,204,204,0.2);box-sizing:border-box}.op-zx-mussong-volume-slider-c{background:#f6f6f6;padding:5px 0}.op-zx-mussong-volume-range,.op-z{%*i*%}x-mussong-volume-bar,.op-zx-mussong-volume-proccess{cursor:default}.op-zx-mussong-volume-range{position:relative}.op-zx-mussong-img-ani{animation:rotate 10s linear infinite;-webkit-animation:rotate 10s linear infinite;-moz-animation:rotate 10s linear infinite;-ms-animation:rotate 10s linear infinite}.op-zx-mussong-img-paused{animation-play-state:paused;-webkit-animation-play-state:paused;-moz-animation-play-state:paused;-ms-animation-play-state:paused}.op-zx-mussong-font{font-size:.9em}</style><s{%*i*%}tyle>.op-zx-mussong-play-large{position:absolute;left:{%($escaped_imgPanelHeight-52)/2%}px;top:{%($escaped_imgPanelHeight-52)/2%}px}</style><div class="op-zx-mussong c-row c-border"> <div class="c-span6"> <div style="position:relative;" data-click="{fm:'baha'}"> <div class="op-zx-mussong-img-p"> <div class="c-img c-img6 op-zx-mussong-photo" style="height:{%$escaped_imgPanelHeight%}px;"> <img class="op-zx-mussong-img" src="{%if !$songData.albumpicurl || strpos($songData.albumpicurl, "album_default_90.png")%}http://www.baidu.com/aladdin/img/zxmusic/muscover.png{%else%}{%$songData.albumpicurl%}{%/if%}" style="width:{%$escaped_imgHeight%}px;height:{%$escaped_imgHeight%}px;margin-left:-{%($escaped_imgHeight-$escaped_imgPanelHeight)/2%}px;margin-top:-{%($escaped_imgHeight-$escaped_imgPanelHeight)/2%}px;"/> </div> </div> <div class="op-zx-mussong-img-mask" style="_height:{%$escaped_imgPanelHeight%}px;"></div> <a hidefocus="true" href="javascript:;" class="c-icon c-icon-play-black-large op-zx-mussong-play op-zx-mussong-play-large"></a> <a hidefocus="true" href="javascript:;" class="c-icon c-icon-stop-black-large op-zx-mussong-pause op-zx-mussong-play-large" style="display:none;"></a> </div> </div> <div class="c-span18 c-span-last op-zx-mussong-box" songid="{%$songData.songid|escape%}"> {%$escaped_song = $songData.song%} <div class="c-gap-bottom"> {%if $tplData.songs[0].copyright == "0"%} <div class="op-zx-mussong-from c-gray">该歌曲资源来自互联网</div> {%/if%} {%if $tplData.songs[0].copyright == "0"%}<span class="op-zx-mussong-coinpic c-gap-icon-right-small"></span>{%/if%}<a target="_blank" class="op-zx-mussong-songname" href="{%fe_fn_c_enc_url url=$tplData.titleurl%}">{%$escaped_song|limitlen:42|escape%}</a> </div> <div class="c-gap-bottom"> {%$singers = explode(',',$songData.singer)%} {%$singerurlprefix = 'http://music.baidu.com/artist/'%} {%$singerids = explode(',',$songData.singerid)%} 歌手：{%if !$singers[0]%}--{%/if%} {%foreach $singers as $item%} {%$singerurl = $singerurlprefix|cat:$singerids[$item@index]%} {%if $item@index > 2%}{%break%}{%/if%} {%if $item@index > 0%}/ {%/if%}{%if $item%}<a target="_blank" href="{%fe_fn_c_enc_url url=$singerurl|cat:'?fm=altg3'%}" class="op-zx-mussong-singer">{%$item|limitlen:10|escape%}</a>{%/if%} {%/foreach%} <span class="c-gap-left-small">专辑：</span>{%if $songData.album && $songData.albumurl%}《<a target="_blank" href="{%fe_fn_c_enc_url url=$songData.albumurl|cat:'?fm=altg3'%}" class="op-zx-mussong-album">{%$songData.album|limitlen:12|escape%}</a>》{%else%}--{%/if%} </div> <table class="op-zx-mussong-ctrl"> <tr> <td> <a hidefocus="true" href="javascript:;" class="c-icon c-icon-play-circle-middle op-zx-mussong-play op-zx-mussong-play-normal OP_LOG_BTN" data-click="{fm:'beha'}"></a> <a hidefocus="true" href="javascript:;" class="c-icon c-icon-stop-circle-middle op-zx-mussong-pause op-zx-mussong-pause-normal OP_LOG_BTN" data-click="{fm:'beha'}" style="display:none;"></a> </td> <td><div class="op-zx-mussong-playback c-gap-icon-left-small c-gap-icon-right-small{%*i*%} OP_LOG_BTN" data-click="{fm:'beha'}"><div class="op-zx-mussong-playback-buffer" style="width:0%;"></div></div></td> <td class="op-zx-mussong-time c-gray">00:00</td> <td> <div class="c-gap-left-small op-zx-mussong-volume-p"> <div class="c-icon c-icon-horn op-zx-mussong-volume OP_LOG_BTN" data-click="{fm:'beha'}"></div> <div class="op-zx-mussong-volume-slider op-zx-mussong-inactive OP_LOG_BTN" data-click="{fm:'beha'}"> </div> </div> </td> {%if $songData.downloadurl%}<td class="op-zx-mussong-td-normal"><span class="c-gap-left"><a target="_blank" href="{%fe_fn_c_enc_url url=$songData.downloadurl|cat:'?fm=altg3'%}" class="c-btn c-btn-mini op-zx-mussong-font"><i class="c-icon c-icon-download-noborder c-gap-icon-right-small"></i>下载</a></span></td>{%/if%} </tr> </table> <div class="op-zx-mussong-lrc c-gap-top" data-click="{fm:'beha'}"> <div class="c-gap-top" style="position:relative;"> <div class="op-zx-mussong-lrc-content"></div> </div> </div> </div></div>{%if $songData.morelink%}<div class="c-gap-top-small"><a target="_blank" href="{%fe_fn_c_enc_url url=$songData.morelink|cat:'?fm=altg3'%}">更多歌手演唱的《{%$escaped_song|limitlen:50|highlight:0%}》<span>&gt;&gt;</span></a></div>{%/if%}<script >
    A.setup({'songid':'{%$songData.songid|escape:"javascript"%}',imgW:'{%$escaped_imgPanelHeight%}',imgH:'{%$escaped_imgPanelHeight%}'});
</script><script data-merge>A.setup(function(){var _this = this;var zmmouseupfn;var zmclickfn;var songid = _this.data.songid;var urlparam = document.location.href.match(/(^|&)zxmsap=([^&]*)(&|$)/);var autoplay = urlparam && decodeURIComponent(urlparam[2]||'');var bd_mbox,lrcScrollbar,playback_slider,playbackOnChange, buffered, lrcloaded, playClicked, $dom_playback_thumb,volumeSlider,volume_slider,imgTimer,imgDeg=0,rotationStop=false,isIE6=false,imgActiveClass="op-zx-mussong-img-ani",imgPausedCla{%*i*%}ss="op-zx-mussong-img-paused";var $dom_container = _this.find('.op-zx-mussong'),$dom_plays = _this.find('.op-zx-mussong-play'),$dom_pauses = _this.find('.op-zx-mussong-pause'),$dom_playback_slider = _this.find('.op-zx-mussong-playback').eq(0),$dom_playback_buffer = _this.find('.op-zx-mussong-playback-buffer').eq(0),$dom_time = _this.find('.op-zx-mussong-time').eq(0),$dom_photo = _this.find('.op-zx-mussong-img-p').eq(0),dom_img = _this.find('.op-zx-mussong-photo').get(0),$dom_volume_btn = _this.f{%*i*%}ind('.op-zx-mussong-volume').eq(0),$dom_volume_slider = _this.find('.op-zx-mussong-volume-slider').eq(0),dom_volume_range = _this.find('.op-zx-mussong-volume-range').get(0),dom_volume_bar = _this.find('.op-zx-mussong-volume-bar').get(0),dom_volume_proccess = _this.find('.op-zx-mussong-volume-proccess').get(0),dom_volume_thumb = _this.find('.op-zx-mussong-volume-thumb').get(0),$dom_lrc = _this.find('.op-zx-mussong-lrc').eq(0),$dom_lrc_content = _this.find('.op-zx-mussong-lrc-content').eq(0);A.use{%*i*%}('slider',function(){playback_slider = new A.ui.slider({'disabled':true});playback_slider.render($dom_playback_slider.get(0));$dom_playback_thumb = $dom_playback_slider.find('.tangram-slider-thumb').eq(0);});function imgRotation($dPhoto, activeClass, pausedClass, dImg){$dPhoto.addClass(activeClass).removeClass(pausedClass);rotationStop=false;if(/MSIE/g.test(window.navigator.userAgent)){var pattern=window.navigator.userAgent.match(/MSIE\s*(\d+)/);if(pattern && pattern[1] && parseInt(pattern[1])>9{%*i*%}){return false;}var rotate=function(deg){if(rotationStop){return false;}deg+=1;imgDeg=deg;var pDeg=deg*2*Math.PI/360,dx=-_this.data.imgW/2*Math.cos(pDeg)+_this.data.imgH/2*Math.sin(pDeg)+_this.data.imgW/2, dy=-_this.data.imgW/2*Math.sin(pDeg)-_this.data.imgH/2*Math.cos(pDeg)+_this.data.imgH/2, m11=Math.cos(pDeg), m12=-Math.sin(pDeg), m21=Math.sin(pDeg), m22=Math.cos(pDeg); dImg.style.filter=['progid:DXImageTransform.Microsoft.Matrix(Dx=', dx, ', Dy=', dy, ', M11=', m11, ', M12=', m12, ', M21=', {%*i*%}m21, ', M22=', m22,');'].join('');imgTimer=setTimeout(function(){rotate(imgDeg);}, 30);};rotate(imgDeg);}}function imgRotationPaused($dPhoto, pausedClass, dImg){$dPhoto.addClass(pausedClass);if(imgTimer){rotationStop=true;clearTimeout(imgTimer);}}function numberPad(source, length) {var pre = "",negative = (source < 0),string = String(Math.abs(source));if (string.length < length) {pre = (new Array(length - string.length + 1)).join('0');}return (negative ? "-" : "") + pre + string;};A.use('musicpl{%*i*%}ayer',function(){A.use('scrollbarv',function(){function convertTime(time){var minute, second;time = Math.round(time / 1000);minute = Math.floor(time / 60);second = time % 60;return numberPad(minute, 2) + ':' + numberPad(second, 2);}bd_mbox = new A.ui.musicplayer(songid, {forcePlay : (autoplay ? true : false),lrcElem : $dom_lrc_content.get(0),onPlayStateChange : function(e){if(e === "pre-buffer" || e ==="buffering" || e === 'play'){ $dom_plays.each(function(i, v){$(v).hide();$dom_pauses.eq(i).sho{%*i*%}w();imgRotation($dom_photo, imgActiveClass, imgPausedClass, dom_img);});}else{$dom_plays.each(function(i, v){$(v).show();$dom_pauses.eq(i).hide();imgRotationPaused($dom_photo, imgPausedClass, dom_img);});}},onPositionChange : function(e, percent){if(!playbackOnChange){playback_slider.update({'value':percent});}if($dom_time.html()=='00:00'){$dom_time.html(convertTime(bd_mbox.getTotalTime())); }},onProgressChange : function(e){if(!buffered){$dom_playback_buffer.width(e + '%');}if(e == 100){buffere{%*i*%}d = 1; }},onChangeCurSong : function(song){if(!bd_mbox){return false;}$dom_time.html(convertTime(bd_mbox.getTotalTime()));bds.event && bds.event.on('zhixin.zx_mussong_mbox_pause',function(){bd_mbox.pause();});},onChangeLyric : function(){if(!lrcloaded){lrcScrollbar = A.ui.scrollbarv({content : $dom_lrc_content.get(0)});lrcScrollbar.render();lrcloaded = 1;}if(autoplay){playback_slider.enable();expandLrc();}},onInitFail : function(firstEngine){$dom_plays.click(function(e){if(firstEngine.engineType{%*i*%}=='fmp_mp3'){alert('需要安装flash插件');}});}});function expandLrc(){if(!$dom_lrc_content.hasClass('no-lrc') && $dom_lrc_content.children().get(0).offsetHeight > $dom_lrc_content.get(0).offsetHeight){$dom_lrc.addClass('op-zx-mussong-lrc-expand');lrcScrollbar && lrcScrollbar.render();}}$dom_plays.each(function(i, v){var $dom_play=$(v),$dom_pause=$dom_pauses.eq(i);$dom_play.click(function(e){bd_mbox.pause();bd_mbox.play();if(!playClicked){playback_slider.enable();expandLrc();playClicked = 1;}});$dom_pau{%*i*%}se.click(function(e){bd_mbox.pause();});});$dom_playback_slider.mousedown(function(e){playbackOnChange = 1;});zmmouseupfn = function(e){if(playbackOnChange == 1){playbackOnChange = 0;var percentage = playback_slider.getValue();bd_mbox.setPercent(+percentage);}};$(document).on('mouseup',zmmouseupfn);A.use('slider', function(){var vol0=50;volume_slider = new A.ui.slider({'layout':'vertical','value':vol0});volume_slider.render($dom_volume_slider.get(0));bd_mbox.setVolume(vol0);zmclickfn = function({%*i*%}e){$dom_volume_slider.addClass('op-zx-mussong-inactive');};$(document).on('click',zmclickfn);$dom_volume_slider.click(function(e){e.stopPropagation(e);});$dom_volume_btn.click(function(e){e.stopPropagation(e);$dom_volume_slider.toggleClass('op-zx-mussong-inactive');});$dom_volume_slider.mousemove(function(e){var vol = 100 - volume_slider.getValue();bd_mbox.setVolume(+vol);});});$dom_lrc_content.on('mousewheel',function(e){bd_mbox.blockLrcScroll(false);});});});this.dispose = function(){clearTime{%*i*%}out(imgTimer);$(document).unbind('mouseup',zmmouseupfn);$(document).unbind('click',zmclickfn);bd_mbox&&bd_mbox.dispose&&bd_mbox.dispose();lrcScrollbar&&lrcScrollbar.dispose&&lrcScrollbar.dispose(); };});</script><!--[if lt IE 7]><script>document.execCommand("BackgroundImageCache",false,true);</script><![endif]-->{%/block%}