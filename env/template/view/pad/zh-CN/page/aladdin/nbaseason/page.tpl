{%extends 'c_base.tpl'%} {%block name='content'%}<style data-merge>{%fe_fn_c_css css='tabs'%}{%fe_fn_c_css css='img'%}{%fe_fn_c_css css='dropdown2'%}.op-nbaseason-content{padding-top:9px}.op-nbaseason-table{width:100%;border-collapse:separate;margin:-9px 0;color:#333}.op-nbaseason-table td{border-bottom:1px solid #f3f3f3;text-align:left;height:32px;padding:3px 0;font-size:14px;white-space:nowrap;line-height:32px}.op-nbaseason-table a{text-decoration:none}.op-nbaseason-td-first{width:110px;text-indent:10px}.op-nbaseason-td-status{width:45px}.op-nbaseason-table a{position:relative;*top:1px}.op-nbaseason-status0,.op-nbaseason-status1,.op-nbasea{%*i*%}son-status2{display:block;width:45px;height:16px;text-align:center;color:#fff;background:#3276c5;line-height:16px;overflow:hidden;*line-height:18px}.op-nbaseason-status1{background:#e33737}.op-nbaseason-status2{background:#bbb}.op-nbaseason-player1,.op-nbaseason-player2{width:72px;padding-right:8px;text-align:right}.op-nbaseason-player2{padding:0 0 0 8px;text-align:left}.op-nbaseason-score{width:58px;text-align:center}.op-nbaseason-td-content span{display:block;float:left;height:30px;line-height{%*i*%}:30px}.op-nbaseason-td-content .op-nbaseason-logobox{width:28px;text-align:center}.op-nbaseason-logobox img{width:28px}.op-nbaseason-showmore{text-align:center;margin:9px 0 -9px 0;padding:8px 0;cursor:pointer;zoom:1}.op-nbaseason-table .op-nbaseason-td-linkbox{width:65px;text-align:right}.op-nbaseason-table .op-nbaseason-td-linkbox1{width:80px}.op-nbaseason-td-linkbox1 a{display:inline-block}.op-nbaseason-bottom-line{overflow:hidden;background:#fff;height:1px;margin:8px 0 -9px 0}.op-nbaseason-li{%*i*%}ve{padding-bottom:10px;border-bottom:1px solid #f3f3f3;margin-bottom:8px;font-size:14px}.op-nbaseason-live-player1,.op-nbaseason-live-player2,.op-nbaseason-live-curscore{float:left;width:128px}.op-nbaseason-live-player2{text-align:right}.op-nbaseason-live-curscore{text-align:center;margin-top:-2px}.op-nbaseason-live-status{margin:0 auto;cursor:default;text-decoration:none}.op-nbaseason-live-title{margin:0;text-align:center;font-weight:normal;font-size:14px}.op-nbaseason-live p{white-space:nowrap{%*i*%};color:#666}.op-nbaseason-live p strong{font-size:24px;font-weight:normal;color:#333;font-family:Microsoft Yahei}.op-nbaseason-live-score{font-size:34px;height:33px;line-height:32px;position:relative;top:-2px;color:#333;white-space:nowrap;letter-spacing:-1px}.op-nbaseason-live-curscore .op-nbaseason-status1{padding-left:12px;background:url(http://www.baidu.com/aladdin/img/nbaseason/nbaicon1.png) no-repeat 1px 0 #e33737;background-position:1px 0;cursor:pointer}.op-nbaseason .op-nbaseason-videoico{%*i*%}n{background:url(http://www.baidu.com/aladdin/img/nbaseason/nbaicon1.png) no-repeat 0 -38px;padding-left:22px;margin-left:-11px;display:inline-block;line-height:1}.op-nbaseason-live-vsinfo{padding:15px 0;height:55px}.op-nbaseason-live-linkbox{text-align:center;line-height:1}.op-nbaseason-live-linkbox a{text-decoration:none;margin:0 8px;zoom:1}.op-nbaseason-team{width:135px;float:right}.op-nbaseason-morelink a{color:#666}.op-nbaseason-team{height:20px;outline:0}.op-nbaseason-list-hide .op-nbaseas{%*i*%}on-hidden-tr{display:none}.op-nbaseason-hidemore{visibility:hidden;height:0;overflow:hidden}.op-nbaseason-morelink-box{float:left}.op-nbaseason-morelink-box a{zoom:1}.op-nbaseason-team .c-dropdown2{line-height:1.54;display:block}.op-nbaseason-team .c-dropdown2,.op-nbaseason-team .c-dropdown2 .c-dropdown2-btn,.op-nbaseason-team .c-dropdown2 .c-dropdown2-btn-group,.op-nbaseason-team .c-dropdown2 .c-dropdown2-btn-icon,.op-nbaseason-team .c-dropdown2-btn-icon-border{height:20px;line-height:1.54}.op-{%*i*%}nbaseason-team .c-dropdown2-btn-icon,.op-nbaseason-team .c-dropdown2-btn-icon-border{width:20px}.op-nbaseason-team .c-dropdown2-option{text-indent:10px}.op-nbaseason-team .c-dropdown2-option a{display:block;color:#333!important;text-decoration:none;width:100%;height:20px}.op-nbaseason-playoffs-left,.op-nbaseason-playoffs-right{float:left;width:222px}.op-nbaseason-playoffs-left .op-nbaseason-playoffs-float{float:left}.op-nbaseason-playoffs-right,.op-nbaseason-playoffs-right .op-nbaseason-playoffs{%*i*%}-float{float:right}.op-nbaseason-playoffs-team{display:block;width:25px;height:25px;margin-right:2px;_display:inline}.op-nbaseason-playoffs-right .op-nbaseason-playoffs-team{margin:0 0 0 2px}.op-nbaseason-playoffs-level1{width:70px}.op-nbaseason-playoffs-level2{width:60px}.op-nbaseason-playoffs-level3{width:35px;_width:37px}.op-nbaseason-playoffs-level4{width:52px;_width:54px}.op-nbaseason-playoffs-team img{width:25px;height:25px}.op-nbaseason-level1item{margin-bottom:8px}.op-nbaseason-level1ite{%*i*%}m p{height:34px;line-height:25px;width:70px;padding-top:2px}.op-nbaseason-playoffs-rank,.op-nbaseason-playoffs-score{display:block}.op-nbaseason-playoffs-rank{color:#999;margin-right:3px;font-size:.92em;width:22px;text-align:right;white-space:nowrap}.op-nbaseason-playoffs-level3 .op-nbaseason-playoffs-score{width:8px}.op-nbaseason-playoffs-score{font-weight:bold;font-size:1.15em;position:relative;top:1px}.op-nbaseason-playoffs-gray{color:#ccc}.op-nbaseason-level2item p,.op-nbaseason-level3item p{%*i*%},.op-nbaseason-playoffs-level4 p,.op-nbaseason-playoffs-logo{background:url('http://www.baidu.com/aladdin/img/nbaseason/nbaplayoff.png') no-repeat}.op-nbaseason-level2item p{height:25px;margin:12px 0 42px 0;padding:6px 0 7px;width:42px;padding-left:19px;line-height:25px}.op-nbaseason-playoffs-right .op-nbaseason-level2item p{padding-left:0;padding-right:19px;background-position:17px -50px}.op-nbaseason-playoffs-noteam{width:25px;height:25px;margin-right:2px}.op-nbaseason-playoffs-right .op-nbase{%*i*%}ason-playoffs-noteam{margin:0 0 0 2px}.op-nbaseason-level3item p{margin:30px 0 76px 0;height:25px;padding:29px 0;background-position:80px 0;_background-position:-78px 0;line-height:25px;_padding-left:2px;_overflow:hidden}.op-nbaseason-playoffs-right .op-nbaseason-level3item p{background-position:-70px -100px;_padding:29px 2px 29px 0}.op-nbaseason-playoffs-level4 p{padding:56px 0;height:50px;background-position:-151px 0;margin-top:70px;_padding-left:2px;_overflow:hidden;_background-position:-149p{%*i*%}x 0}.op-nbaseason-playoffs-right .op-nbaseason-playoffs-level4 p{background-position:2px -100px;_padding:56px 2px 56px 0}.op-nbaseason-playoffs-level4 .op-nbaseason-playoffs-score{display:none}.op-nbaseason-playoffs-level4 .op-nbaseason-playoffs-team,.op-nbaseason-playoffs-level4 .op-nbaseason-playoffs-noteam,.op-nbaseason-playoffs-level4 .op-nbaseason-playoffs-team img{width:50px;height:50px}.op-nbaseason-playoffs{height:310px;overflow:hidden;position:relative}.op-nbaseason-playoffs-mid{text-al{%*i*%}ign:center;width:110px;position:absolute;left:50%;margin-left:-55px;z-index:-1}.op-nbaseason-playoffs-logo{background-position:-78px -194px;height:68px}.op-nbaseason-playoffs-midscore{margin-top:70px}.op-nbaseason-playoffs-hover .op-nbaseason-playoffs-team{border:2px solid #2c99fe;margin:-2px 0 -2px -2px;cursor:pointer}.op-nbaseason-playoffs-right .op-nbaseason-playoffs-hover .op-nbaseason-playoffs-team{margin:-2px -2px -2px 0;border-color:#ff3f42}.op-nbaseason-playoffs-team-result{border-top:1p{%*i*%}x solid #f5f5f5;padding-top:10px;display:none}.op-nbaseason-result-name{text-align:center;display:block;font-size:1.54em;font-family:Microsoft Yahei;white-space:nowrap;word-wrap:normal;_width:100%;_overflow:hidden}.op-nbaseason-playoffs-history{display:inline-block;width:113px;padding-left:15px}.op-nbaseason-result-score{height:40px;line-height:40px;text-align:center;font-size:2em}.op-nbaseason-playoffs-history a{text-decoration:underline}.op-nbaseason-result-mid{position:relative;height:110px}.{%*i*%}op-nbaseason-result-pos{*position:absolute;*left:0;*top:50%;width:100%;display:table;*display:block}.op-nbaseason-result-pos-in{*position:relative;*top:-50%;display:table-cell;height:110px;*height:auto;vertical-align:middle}</style><style>.op-nbaseason-playoffs-team-result img{height:{%fe_fn_c_get_img_height col=4 border="1"%}px}</style><div class="op-nbaseason c-border"> {%* 计算默认下标 *%} {%if $tplData.showtabindex && !$tplData.tab.tr && $tplData.showtabindex <= $tplData.tab|count %} {%$showtabindex = $tplData.showtabindex%} {%else%} {%$showtabindex = 1%} {%/if%} {%$showtabindex = $showtabindex - 1%} {%* 处理只有一个标签的情况 *%} {%if $tplData.tab.tr%} {%$tplData.tab = array($tplData.tab)%} {%/if%} {%* tab 标签 *%} <ul class="c-tabs-nav op-nbaseason-tab c-tabs-nav-movetop"{%if $tplData.tab|@count == 1%} style="display:none"{%/if%}> {%foreach $tplData.tab as $item%} {%if $item.title%} {%if !$item@first%}<li class="c-tabs-nav-sep" style="visibility:hidden"></li>{%/if%} <li class="c-tabs-nav-li OP_LOG_BTN{%if $item@index == $showtabindex%} c-tabs-nav-selected{%/if%}" data-click="{'fm':'beha'}" data-index="{%$item@index%}">{%$item.title|escape:'html'%}</li> {%/if%} {%/foreach%} </ul> {%foreach $tplData.tab as $item%} {%* 计算最多显示多少条数据 *%} {%if $item.live%} {%$maxCount = 4%} {%else%} {%$maxCount = 8%} {%/if%} {%if $item@index != $showtabindex%} <div class="c-tabs-content op-nbaseason-content op-nbaseason-list-hide" style="display:none"></div> {%else%} <div class="c-tabs-content op-nbaseason-content op-nbaseason-list-hide" hasBuild="true"> {%if !$item.playoffs%} {%if $item.live%} <div class="op-nbaseason-live c-clearfix" data-date="{%$item.live[0].date|escape:'html'%}"> <h5 class="op-nbaseason-live-title">{%$item.live[0].title|escape:'html'%}</h5> <div class="c-span4"> <div class="op-nbaseason-live-imgbox"> <a href="{%$item.live[0].player1url%}" target="_blank"><img class="c-img c-img4" src="{%$item.live[0].player1logo%}" /></a> </div> </div> <div class="c-span16"> <div class="op-nbaseason-live-vsinfo c-clearfix"> <div class="op-nbaseason-live-player1"> <p><strong class="c-gap-right-small">{%$item.live[0].player1|escape:'html'%}</strong>{%$item.live[0].player1location|escape:'html'%}</p> <p>{%$item.live[0].player1info|escape:'html'%}</p> </div> <div class="op-nbaseason-live-curscore"> <div class="op-nbaseason-live-score">{%if $item.live[0].score == 'VS'%}<strong>VS</strong>{%else%}{%$item.live[0].score|escape:'html'%}{%/if%}</div> <a href="javascript:;" {%if $item.live[0].status == 1%}onclick="window.open('{%$item.live[0].liveurl%}')"{%else%}data-click="{'fm':'beha'}"{%/if%} class="op-nbaseason-status{%$item.live[0].status%} op-nbaseason-live-status">{%$tplData.statuslist[0]["st{%$item.live[0].status%}"]|escape:'html'%}</a> </div> <div class="op-nbaseason-live-player2"> <p>{%$item.live[0].player2location|escape:'html'%}<strong class="c-gap-left-small">{%$item.live[0].player2|escape:'html'%}</strong></p> <p>{%$item.live[0].player2info|escape:'html'%}</p> </div> </div> {%if $item.livelink%} <div class="op-nbaseason-live-linkbox"> {%foreach $item.livelink as $ls%}<a href="{%$ls.url%}" {%if $tplData.videoicon && $ls.videoicon %}class="op-nbaseason-videoicon"{%/if%} hidefocus="true" target="_blank">{%$ls.text|escape:'html'%}</a>{%/foreach%}</div> {%/if%} </div> <div class="c-span4 c-span-last"> <div class="op-nbaseason-live-imgbox"> <a href="{%$item.live[0].player2url%}" target="_blank"><img class="c-img c-img4" src="{%$item.live[0].player2logo%}" /></a> </div> </div> </div> {%/if%} <table class="op-nbaseason-table" cellspacing="0"> {%foreach array_slice( $item.tr, 0, $maxCount ) as $ls%} <tr> <td class="op-nbaseason-td-status"> {%if isSet($ls.status)%} <span class="op-nbaseason-status{%$ls.status%}">{%$tplData.statuslist[0]["st{%$ls.status%}"]|escape:'html'%}</span> {%/if%} </td> <td class="op-nbaseason-td-first">{%$ls.time|escape:'html'%}</td> <td class="op-nbaseason-td-content"> {%if $ls.content%} {%$ls.content|escape:'html'%} {%elseif $ls.player1 && $ls.player1logo && $ls.score && $ls.player2 && $ls.player2logo%} <span class="op-nbaseason-player1">{%if $ls.player1url%}<a hidefocus="true" href="{%$ls.player1url%}" target="_blank">{%/if%}{%$ls.player1|escape:'html'%}{%if $ls.player1url%}</a>{%/if%}</span> <span class="op-nbaseason-logobox"><img data-click="{'fm':'beha'}" src="{%$ls.player1logo%}" /></span> <span class="op-nbaseason-score">{%$ls.score|escape:'html'%}</span> <span class="op-nbaseason-logobox"><img data-click="{'fm':'beha'}" src="{%$ls.player2logo%}" /></span> <span class="op-nbaseason-player2">{%if $ls.player2url%}<a hidefocus="true" href="{%$ls.player2url%}" target="_blank">{%/if%}{%$ls.player2|escape:'html'%}{%if $ls.player2url%}</a>{%/if%}</span> {%/if%} </td> <td class="op-nbaseason-td-linkbox op-nbaseason-td-linkbox1"> {%if $ls.link1text%} {%if $ls.link1url%} <a hidefocus="true" {%if $tplData.videoicon && $ls.videoicon%}class="op-nbaseason-videoicon"{%/if%} href="{%$ls.link1url%}" target="_blank">{%$ls.link1text|escape:'html'%}</a> {%else%} {%$ls.link1text%} {%/if%} {%/if%} </td> <td class="op-nbaseason-td-linkbox"> {%if $ls.link2text%} {%if $ls.link2url%} <a hidefocus="true" href="{%$ls.link2url%}" target="_blank">{%$ls.link2text|escape:'html'%}</a> {%else%} {%$ls.link2text%} {%/if%} {%/if%} </td> </tr> {%/foreach%} </table> {%if $item.tr|count > $maxCount%} {%* 写在一行的原因是 IE6 会把 span 前的空格当字符处理，而其它浏览器会忽略 *%} <div class="op-nbaseason-showmore OP_LOG_BTN" data-click="{'fm':'beha'}" op-nbaseason-data="{'showtext':'{%$tplData.morebtn[0].showtext%}', 'hidetext':'{%$tplData.morebtn[0].hidetext|escape:'html'%}','index':'{%$item@index%}', 'maxCount': '{%$maxCount|escape:'html'%}'}">{%$tplData.morebtn[0].showtext|escape:'html'%}<span class="c-icon c-gap-icon-left-small c-icon-chevron-bottom"></span></div> {%else%} <div class="op-nbaseason-bottom-line"></div> {%/if%} {%/if%} </div> {%/if%} {%/foreach%}</div>{%$curTab = $tplData.tab["{%$showtabindex%}"]%}<div class="op-nbaseason-morelink {%if !$curTab.bottomlink%}op-nbaseason-hidemore{%/if%} c-gap-top-small c-clearfix"> <div class="op-nbaseason-morelink-box"> {%if $curTab.bottomlink%} {%foreach $curTab.bottomlink as $item%}<a href="{%$item.url%}" class="c-gap-right" target="_blank">{%$item.text|escape:'html'%}</a>{%/foreach%} {%/if%} </div> {%if $tplData.teammatch%} <div class="op-nbaseason-team"> <div class="c-dropdown2 op-nbaseason-dropdown"> <div class="c-dropdown2-btn-group"> <div class="c-dropdown2-btn">按球队查看赛程</div> <div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> <li data-value="default" data-selected="selected" class="c-dropdown2-option">按球队查看赛程</li> {%foreach $tplData.teammatch as $item%} <li data-value="{%$item.url%}"  class="c-dropdown2-option"><a href="{%$item.url%}" data-click="{'fm':'alop'}" target="_blank" class="OP_LOG_BTN">{%$item.name|escape:'html'%}</a></li> {%/foreach%} </ul> </div> </div> </div> </div> {%/if%}</div><script >
    A.setup({
        'sourceId': '{%$extData.resourceid%}',
        'query': '{%str_replace($extData.resourceid|cat:'_','',$extData.fetchkey)%}',
        'morebtn': {%json_encode($tplData.morebtn[0])%},
        'statusList': {%json_encode($tplData.statuslist[0])%},
        'videoicon': '{%if $tplData.videoicon%}{%$tplData.videoicon|escape:'javascript'%}{%/if%}'
        {%if $tplData.tab[$showtabindex].playoffs%}
        ,'playoffs': {%json_encode($tplData.tab[$showtabindex])%}
        {%/if%}
    });
</script><script data-merge>A.setup(function(){var _this = this,srcid = _this.data.sourceId,query = _this.data.query,statusList = _this.data.statusList,morebtn = _this.data.morebtn,videoicon = _this.data.videoicon,$showMoreBtn = _this.find( '.op-nbaseason-showmore' ),$bottomLink = _this.find( '.op-nbaseason-morelink' ),$bottomLinkBox = _this.find( '.op-nbaseason-morelink-box' ),$dropdown = _this.find( '.op-nbaseason-dropdown' ),teamList,bindMore,buildMoreBtn,buildBottomLink,buildTable,buildTabHt{%*i*%}ml,getHiddenList,showPlayoffs,playoffsList,hasRenderPlayoffs,data,drop,tabs;document.execCommand('BackgroundImageCache', false, true);data = {_cache: null,_fetched: false,getData: function( callback ) {if ( this._cache != null ) {typeof callback == 'function' && callback( this._cache );} else {this.ajax( callback );}},ajax: function( callback ) {var self = this;_this.ajax( query, srcid, {success: function( d ) {var data;try {data = d[0];if ( !data.tab[0] ) {data.tab = [ data.tab ];}self._cache ={%*i*%} data;typeof callback == 'function' && callback( data );} catch ( e ) {self.ajaxError();};},error: function() {self.ajaxError();}});},ajaxError: function() {}};buildTable = function( tr, maxCount ) {var fragment = document.createDocumentFragment(),div = fragment.appendChild( document.createElement( 'div' ) ),trTpl = '<tr #{trClass}>\<td class="op-nbaseason-td-status">\#{status}\</td>\<td class="op-nbaseason-td-first">#{time}</td>\<td class="op-nbaseason-td-content">\#{content}\</td>\<td class="o{%*i*%}p-nbaseason-td-linkbox op-nbaseason-td-linkbox1">\#{link1}\</td>\<td class="op-nbaseason-td-linkbox">\#{link2}\</td>\</tr>',contentTpl = '<span class="op-nbaseason-player1">#{player1}</span>\<span class="op-nbaseason-logobox"><img data-click="{\'fm\':\'beha\'}" src="#{player1logo}" /></span>\<span class="op-nbaseason-score">#{score}</span>\<span class="op-nbaseason-logobox"><img data-click="{\'fm\':\'beha\'}" src="#{player2logo}" /></span>\<span class="op-nbaseason-player2">#{player2}</span>',re{%*i*%}t = [],i, l, content, buildLink, status;buildLink = function( text, url, classname ) {if ( !text ) {return '';}if ( url ) {return '<a class="' + ( classname || '' ) + '" hidefocus="true" href="' + url +'" target="_blank">' + text +'</a>';}return text;};for ( i = 0, l = tr.length; i < l; i++ ) {content = status = '';if ( tr[i].content ) {content = tr[i].content;} else if ( tr[i].player1logo && tr[i].player1 && tr[i].score && tr[i].player2logo && tr[i].player2 ) {content = $.format( contentTpl, {p{%*i*%}layer1logo: tr[i].player1logo,player2logo: tr[i].player2logo,score: tr[i].score,player1: buildLink( tr[i].player1, tr[i].player1url ),player2: buildLink( tr[i].player2, tr[i].player2url )});}if ( 'status' in tr[i] ) {status = $.format( '<span class="op-nbaseason-status#{status}">#{statusText}</span>', {status: tr[i].status,statusText: statusList[ 'st' + tr[i].status ]});}ret.push( $.format( trTpl, {trClass: i >= maxCount ? 'class="op-nbaseason-hidden-tr"' : '',time: tr[i].time,content: content,l{%*i*%}ink1: buildLink( tr[i].link1text, tr[i].link1url, tr[i].videoicon && videoicon && 'op-nbaseason-videoicon' ),link2: buildLink( tr[i].link2text, tr[i].link2url ),status: status}));}div.innerHTML = '<table class="op-nbaseason-table" cellspacing="0">' + ret.join( '' ) + '</table>';return div.firstChild;};getHiddenList = function( container, index, maxCount ) {data.getData(function( data ) {var table = $(container).find( '.op-nbaseason-table')[0],newTable = buildTable( data.tab[ index ].tr, maxCount{%*i*%} );table.style.display = 'none';container.insertBefore( newTable, table );container.removeChild( table );table = null;});};bindMore = function( morebtn ) {var container;morebtn = $( morebtn );morebtn.on('click', function() {var status = this.getAttribute( 'status' ),container = this.parentNode,data = ( new Function( 'return ' + this.getAttribute( 'op-nbaseason-data' ) ) )();if ( status && status == 'show' ) {$(container).addClass('op-nbaseason-list-hide' );this.innerHTML = data.showtext + '<span{%*i*%} class="c-icon c-gap-icon-left-small c-icon-chevron-bottom"></span>';this.setAttribute( 'status', 'hide' );} else {$(container).removeClass( 'op-nbaseason-list-hide' );this.innerHTML = data.hidetext + '<span class="c-icon c-gap-icon-left-small c-icon-chevron-top"></span>';this.setAttribute( 'status', 'show' );if ( !status ) {getHiddenList( container, data.index, data.maxCount );}}});};buildMoreBtn = function( container, maxCount, index ) {var showmore = document.createElement( 'div' ),btnAttr = {%*i*%}"{'showtext':'#{showtext}','hidetext':'#{hidetext}','index':'#{index}','maxCount':'#{maxCount}'}";if ( maxCount === +maxCount ) {showmore.className = 'op-nbaseason-showmore OP_LOG_BTN';showmore.setAttribute( 'data-click', "{'fm':'beha'}" );showmore.setAttribute( 'status', 'hide' );showmore.setAttribute( 'op-nbaseason-data', $.format( btnAttr, {showtext: morebtn.showtext,hidetext: morebtn.hidetext,index: index,maxCount: maxCount}));showmore.innerHTML = morebtn.showtext + '<span class="c-icon c-ga{%*i*%}p-icon-left-small c-icon-chevron-bottom"></span>';} else {showmore.className = 'op-nbaseason-bottom-line';}container.appendChild( showmore );bindMore( showmore );};buildBottomLink = function( tab ) {var i, l, links = tab.bottomlink, ret = [];if ( links ) {$bottomLink.removeClass('op-nbaseason-hidemore' );for ( i = 0, l = links.length; i < l; i++ ) {ret.push( '<a href="' + links[i].url + '" target="_blank" class="c-gap-right">' + links[i].text + '</a>' );}$bottomLinkBox.html( ret.join( '' ) );} e{%*i*%}lse {$bottomLink.addClass('op-nbaseason-hidemore' );}};buildTabHtml = function( container, index ) {data.getData(function( data ) {if ( data.tab[ index ][ 'leftTeam' ] ) {showPlayoffs( container, data.tab[ index ] );return;}var curTab = data.tab[ index ],liveTpl = '<div class="op-nbaseason-live c-clearfix" data-date="#{date}">\<h5 class="op-nbaseason-live-title">#{title}</h5>\<div class="c-span4">\<div class="op-nbaseason-live-imgbox">\<a href="#{player1url}" target="_blank"><img class="c-img c-{%*i*%}img4" src="#{player1logo}" /></a>\</div>\</div>\<div class="c-span16">\<div class="op-nbaseason-live-vsinfo c-clearfix">\<div class="op-nbaseason-live-player1">\<p><strong class="c-gap-right-small">#{player1}</strong>#{player1location}</p>\<p>#{player1info}</p>\</div>\<div class="op-nbaseason-live-curscore">\<div class="op-nbaseason-live-score">#{livescore}</div>\<a href="javascript:;" #{liveclick} class="op-nbaseason-status#{status} op-nbaseason-live-status">#{statusText}</a>\</div>\<div class={%*i*%}"op-nbaseason-live-player2">\<p>#{player2location}<strong class="c-gap-left-small">#{player2}</strong></p>\<p>#{player2info}</p>\</div>\</div>\#{livelink}\</div>\<div class="c-span4 c-span-last">\<div class="op-nbaseason-live-imgbox">\<a href="#{player2url}" target="_blank"><img class="c-img c-img4" src="#{player2logo}" /></a>\</div>\</div>\</div>',livelink = [],maxCount = 8,i, l, live;if ( curTab.live && curTab.livelink ) {livelink.push( '<div class="op-nbaseason-live-linkbox"> ' );for ( i = 0,{%*i*%} l = curTab.livelink.length; i < l; i++ ) {livelink.push( '<a ' + ( videoicon && curTab.livelink[i].videoicon ? 'class="op-nbaseason-videoicon"' : '' ) + 'href="' + curTab.livelink[i].url + '" hidefocus="true" target="_blank">' + curTab.livelink[i].text + '</a>' );}livelink.push( '</div>' );}if ( curTab.live ) {maxCount = 4;live = $.extend( {statusText: statusList[ 'st' + curTab.live[0].status ],livelink: livelink.join( '' ),livescore: curTab.live[0].score == 'VS' ? '<strong>VS</strong>' : curTa{%*i*%}b.live[0].score,liveclick: curTab.live[0].status == '1' ? 'onclick="window.open(\'' + curTab.live[0].liveurl + '\')"' : 'data-click="{\'fm\':\'beha\'}"'}, curTab.live[0] );container.innerHTML = $.format( liveTpl, live );}container.appendChild( buildTable( curTab.tr, maxCount ) );buildMoreBtn( container, curTab.tr.length > maxCount ? maxCount : false, index );buildBottomLink( curTab );});};if ( $showMoreBtn ) {bindMore( $showMoreBtn );}if ( $dropdown && $dropdown.length ) {A.use('dropdown21', fun{%*i*%}ction() {drop = A.ui.dropdown21( $dropdown.get(0), {type: 'custom',height: 200});});}showPlayoffs = function( container, data ) {var tails = [ null, 'st', 'nd' ],hoverEvent,renderLevel,renderTeam,renderMatch,renderDirection,renderAll,renderMatchDetail,$leftTeamCon,$rightTeamCon,$teamMatchResult,$oldEle,firstRender = true;if ( hasRenderPlayoffs ) {return;}hasRenderPlayoffs = true;if ( !teamList ) {teamList = {'left': [],'right': []};$.each( { 'left': data.leftTeam, 'right': data.rightTeam }, func{%*i*%}tion( name, value ) {$.each( value.team, function( i, v ) {teamList[ name ][ v.rank ] = v;});});}renderMatchDetail = function( team1, team2, history, score ) {var historyHtm,renderHistory,tpl = '<div class="c-span4">\<a href="#{team1url}" target="_blank"><img class="c-img c-img4" src="#{team1img}" /></a>\<span class="op-nbaseason-result-name">#{team1name}</span>\</div>\<div class="c-span16 op-nbaseason-result-mid">\<div class="op-nbaseason-result-pos">\<div class="op-nbaseason-result-pos-in">\<d{%*i*%}iv class="op-nbaseason-result-history">#{history}</div>\<div class="op-nbaseason-result-score">#{score}</div>\</div>\</div>\</div>\<div class="c-span4 c-span-last">\<a href="#{team2url}" target="_blank"><img class="c-img c-img4" src="#{team2img}" /></a>\<span class="op-nbaseason-result-name">#{team2name}</span>\</div>';if ( history && history.length ) {historyHtm = [];renderHistory = function( name, url ) {return url ? '<a href="' + url +'" class="c-gray" target="_blank">' + name + '</a>' : name{%*i*%};};$.each( history, function( i, v ) {historyHtm.push( '<span class="op-nbaseason-playoffs-history c-gray">' + v.date + '：' + renderHistory( v.score, v.url ) + '</span>' );});}$teamMatchResult.html( $.format( tpl, {team1url: team1.url,team1img: team1.largeImg,team1name: team1.name,history: historyHtm && historyHtm.join( '' ),team2url: team2.url,team2img: team2.largeImg,team2name: team2.name,score: score}));$teamMatchResult.show();};hoverEvent = function( $links, $parent, upteam, downteam, histor{%*i*%}y, score ) {$links.on( 'mouseover', function(){$oldEle && $oldEle.removeClass( 'op-nbaseason-playoffs-hover' );$parent.addClass( 'op-nbaseason-playoffs-hover' );$oldEle = $parent;renderMatchDetail( upteam, downteam, history, score );});if ( firstRender ) {firstRender = false;setTimeout(function() {$links.trigger( 'mouseover' );}, 0);}};renderTeam = function( data, direction, showRank ) {if ( data instanceof Array ) {data = data[0];}if ( !data ) {data = {};}var tpl = '<p>' +( showRank ? '<span cl{%*i*%}ass="op-nbaseason-playoffs-rank op-nbaseason-playoffs-float">#{rank}</span>' :'') +( data.team ? '<span class="op-nbaseason-playoffs-team op-nbaseason-playoffs-float"><img src="#{img}" /></span>' :'<span class="op-nbaseason-playoffs-noteam op-nbaseason-playoffs-float"></span>' ) +'<span class="op-nbaseason-playoffs-score op-nbaseason-playoffs-float">#{score}</span>\</p>';return $.format( tpl, {rank: data.team ? data.team + ( tails[ data.team ] || 'th' ) : '',img: data.team && teamList[ direction{%*i*%} ][ data.team ].img,score: ( data.team && data.score ) || '<span class="op-nbaseason-playoffs-gray">0</span>'});};renderMatch = function( matchData, direction, showRank, level ) {var $div = $( document.createElement( 'div' ) ),divHtml = [],check,$links,$parent,upteam,downteam;check = function( name ) {return matchData.upteam && matchData.downteam && matchData.upteam[0][ name ] && matchData.downteam[0][ name ];};$div.addClass( 'op-nbaseason-level' + level + 'item' );divHtml.push( renderTeam( matc{%*i*%}hData.upteam, direction, showRank ) );divHtml.push( renderTeam( matchData.downteam, direction, showRank ) );$div.html( divHtml.join( '' ) );if ( check( 'team' ) && check( 'score' ) ) {$links = $( '.op-nbaseason-playoffs-team', $div );$parent = $links.closest( 'div' );upteam = matchData.upteam[0];downteam = matchData.downteam[0];hoverEvent( $links, $parent, teamList[ direction ][ upteam.team ], teamList[ direction ][ downteam.team ], matchData.history,upteam.score + ' - ' + downteam.score);}retur{%*i*%}n $div;};renderLevel = function( dataList, direction, level ) {var levelDiv = document.createElement( 'div' );levelDiv.className = 'op-nbaseason-playoffs-level' + level + ' op-nbaseason-playoffs-float';if ( !dataList.length ) {dataList = [ dataList ];}$.each( dataList, function( i, v ) {if ( level != 4 ) {levelDiv.appendChild( renderMatch( v, direction, level == 1, level ).get(0) );} else {levelDiv.appendChild( $( renderTeam( v, direction, 0 ) ).get(0) );}});return levelDiv;};renderDirection = f{%*i*%}unction( data, direction ) {var frag = document.createDocumentFragment(),i;for( i = 1; i < 4; i++ ) {frag.appendChild( renderLevel( data[ 'level' + i + 'match' ], direction, i ) );}frag.appendChild( renderLevel( data.level4, direction, 4 ) );return frag;};renderAll = function() {var tpl = '<div class="op-nbaseason-playoffs c-clearfix">\<div class="op-nbaseason-playoffs-left"></div>\<div class="op-nbaseason-playoffs-mid">\<div class="op-nbaseason-playoffs-logo"></div>\<div class="op-nbaseason-pla{%*i*%}yoffs-midscore op-nbaseason-playoffs-score">#{midscore}</div>\</div>\<div class="op-nbaseason-playoffs-right"></div>\</div>\<div class="op-nbaseason-playoffs-team-result c-row"></div>',$finalItem,$finalItemParent,leftFinalTeam,rightFinalTeam,showFinalFlag,finalScore;leftFinalTeam = data.leftTeam.level4[0];rightFinalTeam = data.rightTeam.level4[0];if ( leftFinalTeam && leftFinalTeam.score && rightFinalTeam.score ) {finalScore = leftFinalTeam.score + ' - ' + rightFinalTeam.score;showFinalFlag = tr{%*i*%}ue;} else {finalScore = '<span class="op-nbaseason-playoffs-gray">0 - 0</span>'; }container.innerHTML = $.format( tpl, {midscore: finalScore});$leftTeamCon = $( '.op-nbaseason-playoffs-left', container );$righTeamCon = $( '.op-nbaseason-playoffs-right', container );$teamMatchResult = $( '.op-nbaseason-playoffs-team-result', container );$leftTeamCon.append( renderDirection( data.leftTeam, 'left' ) );$righTeamCon.append( renderDirection( data.rightTeam, 'right' ) );if ( showFinalFlag ) {$finalItem{%*i*%}Parent = _this.find( '.op-nbaseason-playoffs-level4' );$finalItem = $( '.op-nbaseason-playoffs-team', $finalItemParent );hoverEvent( $finalItem, $finalItemParent, teamList.left[ leftFinalTeam.team ], teamList.right[ rightFinalTeam.team ], data.finalHistory,leftFinalTeam.score + ' - ' + rightFinalTeam.score);} };renderAll();};A.use('tabs5', function(){var tabChange, playoffsData;tabChange = function( index, container ) {if ( container.getAttribute( 'hasBuild' ) == 'true' ) {data.getData(function({%*i*%} data ) {buildBottomLink( data.tab[ index ] );});return;}container.setAttribute( 'hasBuild', 'true' );buildTabHtml( container, index );};tabs = A.ui.tabs5(_this.find('.op-nbaseason')[0], { onChange: tabChange });if ( playoffsData = _this.data.playoffs ) {showPlayoffs( _this.find( '.op-nbaseason-content[hasbuild=true]' )[0], playoffsData );} bds.ready(function() {data.getData();});});this.dispose = function(){drop&&drop.dispose&&drop.dispose();tabs&&tabs.dispose&&tabs.dispose();};});</script>{%/block%}