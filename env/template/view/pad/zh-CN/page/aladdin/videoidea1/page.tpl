{%extends 'base.tpl'%} {%block name='content'%}{%$FE_GBVAR.wrapper_prefix%}<style>.op_videoidea1_main{width:100%}.op_videoidea1_title{background:#f1f1f1;height:32px;font-weight:bold;padding-left:19px;font-size:1.1em}.op_videoidea1_up{position:absolute;margin-left:575px;line-height:32px;width:37px;cursor:pointer;width:37px;background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 30px -124px}.op_videoidea1_down{background-position:30px -144px}.op_videoidea1_item{background:#fff url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no{%*i*%}-repeat right -171px;height:18px;border:1px solid #adadad;-webkit-border-radius:2px;border-radius:2px;padding:0 15px 0 5px;font-size:1.1em;display:inline-block;float:left;margin:0 10px 10px 0;cursor:pointer;line-height:18px}.op_videoidea1_top{background:#f8f8f8;padding:0 20px 10px 20px;font-size:1.1em}.op_videoidea1_condition{padding-top:3px}.op_videoidea1_tags div{line-height:42px;height:42px}.op_videoidea1_tag{margin:0 4px;color:#00c;cursor:pointer;padding:1px 4px 3px;*padding:3px 4px 2px}.op_{%*i*%}videoidea1_select{background-color:#67a5eb;color:#fff;-webkit-border-radius:2px;border-radius:2px}.op_videoidea1_fresh{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat -18px -189px;*background-position-y:-188px;padding-left:14px;color:#666;white-space:nowrap;margin:0 10px 12px 0;display:inline-block}.op_videoidea1_type,.op_videoidea1_area{border-bottom:1px dashed #b6b6b6}.op_videoidea1_line{width:594px;height:1px;background:#bbb;overflow:hidden}.op_videoidea1_{%*i*%}content{background-color:#f1f1f1;padding:0 0 10px;font-size:1.1em}.op_videoidea1_content_s{height:272px;overflow:hidden;position:relative}.op_videoidea1_cntab{padding:0 20px;border-bottom:1px solid #d5d5d5;background-color:#f8f8f8;font-size:1.2em}.op_videoidea1_cntab span{position:relative;top:1px;color:#00c;padding:4px 15px 3px;display:inline-block;cursor:pointer}.op_videoidea1_cntab span.op_videoidea1_cntab_sel{font-weight:bold;color:#000;background:#f1f1f1 url("http://www.baidu.com/aladdin/im{%*i*%}g/videoidea/videoidea.png") no-repeat 87px -185px;border:solid 1px;border-color:#d5d5d5 #d5d5d5 #f1f1f1 #d5d5d5}.op_videoidea1_maincnt{padding:0 0 10px 30px}.op_videoidea1_cntwrap{*padding-top:15px}.op_videoidea1_detailcnt{height:230px;float:left;position:relative;margin:15px 16px 0 0;*margin-top:0;cursor:pointer}.op_videoidea1_detailcnt a{text-decoration:none}.op_videoidea1_detailbgall{width:130px;height:200px}.op_videoidea1_detailbg{width:120px;height:160px;padding:5px;background-color:#fff;bo{%*i*%}rder:1px solid #dcdcdc}.op_videoidea1_detailbg_h{height:208px}.op_videoidea1_cntimg{width:120px;height:160px;overflow:hidden;z-index:4}.op_videoidea1_imgwrap{position:absolute;top:6px;left:6px;overflow:hidden;z-index:4;width:120px;height:160px}.op_videoidea1_detailbg_h .op_videoidea1_imgwrap{height:83px}.op_videoidea1_imgangle{position:absolute;top:5px;left:5px;width:31px;height:31px;color:#fff;padding:1px 2px;font-weight:bold;cursor:pointer}.op_videoidea1_imgwrap .op_videoidea1_imgangle{top:0;l{%*i*%}eft:0}.op_videoidea1_new{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat -40px -55px}.op_videoidea1_hot{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 -55px}.op_videoidea1_othera{font-family:simsun}.op_videoidea1_name{width:120px;text-align:center;line-height:26px;height:26px;position:absolute;top:175px;color:#00c}.op_videoidea1_detailbg_h .op_videoidea1_name{font-weight:bold}.op_videoidea1_play{position:absolute;top:28{%*i*%}px;left:47px;width:30px;height:30px;background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 -92px;z-index:1;display:none;filter:alpha(opacity=90);-moz-opacity:.90;-khtml-opacity:.90;opacity:.90;cursor:pointer}.op_videoidea1_detailbg_h .op_videoidea1_play{display:block;z-index:5}.op_videoidea1_star{position:absolute;top:195px;left:17px}.op_videoidea1_star span{display:inline-block;height:24px;line-height:24px;float:left}.op_videoidea1_starbg{width:75px;background:ur{%*i*%}l("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 5px;margin-right:4px}.op_videoidea1_starft{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 -23px}.op_videoidea1_lastdiv{clear:both}.op_videoidea1_morebtn{text-align:center;background:#fff url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 314px -146px;border:1px solid #e0e0e0;margin:0 0 0 30px;width:574px;height:30px;line-height:30px;cursor:pointer;font-weight:b{%*i*%}old}.op_videoidea1_morebtn_wait{color:gray;background:#fff url("http://www.baidu.com/aladdin/img/videoidea/loading.gif") no-repeat 314px 6px;font-weight:normal}.op_videoidea1_noresult{padding:100px 0 100px 135px}.op_videoidea1_noresult div{height:30px;line-height:30px;font-size:1.2em;background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat -36px -92px;padding-left:40px}.op_videoidea1_load{padding:100px 0 100px 218px}.op_videoidea1_load div{height:30px;line-height:30px{%*i*%};font-size:1.2em;background:url("http://www.baidu.com/aladdin/img/videoidea/loading_L.gif") no-repeat;padding-left:40px}.op_videoidea1_hidden{display:none}.op_videoidea1_bold{font-weight:bold}</style><font size="-1"> <div class="op_videoidea1_main"> <div class="op_videoidea1_title"> <div class="op_videoidea1_up OP_LOG_BTN" style="display:none;">收起</div> <span style="line-height:32px;position:absolute;">热门结果</span> </div> <div class="op_videoidea1_top"> <div class="op_videoidea1_tags"> <div class{%*i*%}="op_videoidea1_type"> <span style="font-weight:bold;">按类型：</span> <span class="op_videoidea1_tag op_videoidea1_all OP_LOG_BTN">全部</span>| <span class="op_videoidea1_tag OP_LOG_BTN">爱情</span>| <span class="op_videoidea1_tag OP_LOG_BTN">喜剧</span>| <span class="op_videoidea1_tag OP_LOG_BTN">动作</span>| <span class="op_videoidea1_tag OP_LOG_BTN">剧情</span>| <span class="op_videoidea1_tag OP_LOG_BTN">科幻</span>| <span class="op_videoidea1_tag OP_LOG_BTN">恐怖</span>| <span class="op_videoidea1_tag OP_LOG{%*i*%}_BTN">伦理</span>| <span class="op_videoidea1_tag OP_LOG_BTN">惊悚</span>| <span class="op_videoidea1_tag OP_LOG_BTN">战争</span> </div> <div class="op_videoidea1_area"> <span style="font-weight:bold;">按地区：</span> <span class="op_videoidea1_tag op_videoidea1_all OP_LOG_BTN">全部</span>| <span class="op_videoidea1_tag OP_LOG_BTN">大陆</span>| <span class="op_videoidea1_tag OP_LOG_BTN">香港</span>| <span class="op_videoidea1_tag OP_LOG_BTN">台湾</span>| <span class="op_videoidea1_tag OP_LOG_BTN">美国</span>| <spa{%*i*%}n class="op_videoidea1_tag OP_LOG_BTN">韩国</span>| <span class="op_videoidea1_tag OP_LOG_BTN">日本</span>| <span class="op_videoidea1_tag OP_LOG_BTN">泰国</span>| <span class="op_videoidea1_tag OP_LOG_BTN">英国</span>| <span class="op_videoidea1_tag OP_LOG_BTN">其他</span> </div> <div class="op_videoidea1_time"> <span style="font-weight:bold;">按年代：</span> <span class="op_videoidea1_tag op_videoidea1_all OP_LOG_BTN">全部</span>| <span class="op_videoidea1_tag OP_LOG_BTN">2012</span>| <span class="op_videoid{%*i*%}ea1_tag OP_LOG_BTN">2011</span>| <span class="op_videoidea1_tag OP_LOG_BTN">2010</span>| <span class="op_videoidea1_tag OP_LOG_BTN">00年代</span>| <span class="op_videoidea1_tag OP_LOG_BTN">90年代</span>| <span class="op_videoidea1_tag OP_LOG_BTN">80年代</span>| <span class="op_videoidea1_tag OP_LOG_BTN">更早</span> </div> </div> <div class="op_videoidea1_condition"> <span style="font-weight:bold;float:left;margin-right:10px;">当前筛选条件：</span> <a class="op_videoidea1_fresh" href="###">重新筛选</a> <div style={%*i*%}"clear:both;"></div> </div> <div class="op_videoidea1_line"></div> </div> <div class="op_videoidea1_content"> <div class="op_videoidea1_cntab"> <span class="op_videoidea1_cntab_sel OP_LOG_BTN">最热电影</span> <span class="OP_LOG_BTN">最新电影</span> <span class="OP_LOG_BTN">用户好评</span> </div> <div class="op_videoidea1_maincnt"> <div class="op_videoidea1_cntwrap" data-index="0"> <div class="op_videoidea1_lastdiv"></div> </div> <div class="op_videoidea1_cntwrap op_videoidea1_hidden" data-index="1"> <div c{%*i*%}lass="op_videoidea1_lastdiv"></div> </div> <div class="op_videoidea1_cntwrap op_videoidea1_hidden" data-index="2"> <div class="op_videoidea1_lastdiv"></div> </div> </div> <div class="op_videoidea1_load op_videoidea1_hidden"> <div>正在努力的为您加载...</div> </div> <div class="op_videoidea1_noresult op_videoidea1_hidden"> <div>抱歉，没有找到符合条件的电影，请尝试其它分类。</div> </div> <div class="op_videoidea1_morebtn OP_LOG_BTN">查看更多</div> </div> <div class="op_videoidea1_tempdata" style="display:none;"></div> </div></font><s{%*i*%}cript >
    A.setup({'data':[{%$loop_maxcount=count($tplData.result)%}{%for $op_loop_count=0 to 12%}{%if $op_loop_count<$loop_maxcount%}{'isNew': '{%$tplData.result[$op_loop_count]['isNew']%}','isHot':'{%$tplData.result[$op_loop_count]['isHot']%}','poster':'{%$tplData.result[$op_loop_count]['poster']%}','videoLink':'{%$tplData.result[$op_loop_count]['videoLink']%}','rate':'{%$tplData.result[$op_loop_count]['rate']%}','displayTime':'{%$tplData.result[$op_loop_count]['displayTime']%}','title':'{%$tplData.result[$op_loop_count]['title']%}','displayTitle':'{%$tplData.result[$op_loop_count]['displayTitle']%}','directors':'{%$tplData.result[$op_loop_count]['directors']%}','displayDirector':'{%$tplData.result[$op_loop_count]['displayDirector']%}','actors':'{%$tplData.result[$op_loop_count]['actors']%}','displayActor':'{%$tplData.result[$op_loop_count]['displayActor']%}'},{%else%}{%break%}{%/if%}{%/for%}{}].slice(0, -1)});
    A.setup({'tags':[{%$loop_maxcount=count($tplData.QueryTags)%}{%for $op_loop_count=0 to 30%}{%if $op_loop_count<$loop_maxcount%}'{%$tplData.QueryTags[$op_loop_count]%}',{%else%}{%break%}{%/if%}{%/for%}{}].slice(0, -1)});
</script><script>A.init(function(){var T = A.baidu, _this = this,upbtn = _this.qq('op_videoidea1_up'),fresh = _this.qq('op_videoidea1_fresh'),tags = _this.q('op_videoidea1_tag'),cnt = _this.qq('op_videoidea1_content'),noresult = _this.qq('op_videoidea1_noresult'),load = _this.qq('op_videoidea1_load'),cntabs = _this.qq('op_videoidea1_cntab').getElementsByTagName('span'),morebtn = _this.qq('op_videoidea1_morebtn'),urlData = _this.qq('op_videoidea1_tempdata'),index = 0, tStamp = 0, pageindex = 1, p{%*i*%}n = 0, nomoreresult = false, up = true, hotnum = 0, newnum = 0;initDisplay();function initDisplay(){var tagslen = _this.data.tags.length,badTags = ['电影','片'],tagMark = {'time':true,'type':true,'area':true};for(var i = 0; i < tagslen; i++){var badTag = false;for(var k = 0;k <badTags.length; k++){if( _this.data.tags[i] == badTags[k]){badTag = true;break;}}if (badTag) {continue;}var isIn = false;for(var j = 0;j < tags.length; j++){if (_this.data.tags[i] == tags[j].innerHTML){T.dom.addClass(tags[j],{%*i*%} 'op_videoidea1_select');var tagtype = tags[j].parentNode.className.split('_')[2];createItem(tags[j].innerHTML, tagtype);isIn = true;tagMark[tagtype] = false;}}if (!isIn) {createItem(_this.data.tags[i], '');}}if (tagMark['type'])T.dom.addClass(T.dom.q('op_videoidea1_all', _this.qq('op_videoidea1_type'))[0], 'op_videoidea1_select');if (tagMark['time'])T.dom.addClass(T.dom.q('op_videoidea1_all', _this.qq('op_videoidea1_time'))[0], 'op_videoidea1_select');if (tagMark['area'])T.dom.addClass(T.dom.q({%*i*%}'op_videoidea1_all', _this.qq('op_videoidea1_area'))[0], 'op_videoidea1_select');var tempData = {'disp_data':_this.data.data,'listNum':_this.data.data.length},arr = [tempData],data = {'status':'0','t':'0','data':arr};addCnt(data);ifCond();}T.event.on(morebtn, 'click', function(){if (T.dom.hasClass(this, 'op_videoidea1_morebtn_wait')) {return;} else {T.dom.addClass(this, 'op_videoidea1_morebtn_wait');getData();}});T.event.on(upbtn, 'click',function(){if (!up) {up = true;this.innerHTML = '收起';T.do{%*i*%}m.removeClass(this, 'op_videoidea1_down');T.dom.removeClass(cnt, 'op_videoidea1_content_s');if (!nomoreresult) { T.dom.removeClass(morebtn, 'op_videoidea1_hidden');}} else {up = false;this.innerHTML = '展开';T.dom.addClass(this, 'op_videoidea1_down');T.dom.addClass(cnt, 'op_videoidea1_content_s');}});T.each(cntabs, function(el, i){T.event.on(el, 'click', function(){if(!T.dom.hasClass(this, 'op_videoidea1_cntab_sel')){T.dom.removeClass(_this.qq('op_videoidea1_cntab_sel'), 'op_videoidea1_cntab_sel'){%*i*%};T.dom.addClass(this, 'op_videoidea1_cntab_sel');index = i;T.each(_this.q('op_videoidea1_cntwrap'), function(el, i){if (i == index) {T.dom.removeClass(el, 'op_videoidea1_hidden');} else if ( !T.dom.hasClass(el, 'op_videoidea1_hidden') ){T.dom.addClass(el, 'op_videoidea1_hidden');}});initData();getData();}});});T.each(tags, function(el, i){T.event.on(el, 'click', function(){var thisWrap = this.parentNode,type = thisWrap.className.split('_')[2],otherTags = T.dom.q('op_videoidea1_select', thisWrap){%*i*%},items = _this.q('op_videoidea1_item');if (!T.dom.hasClass(this, 'op_videoidea1_select')) {T.each(otherTags, function(el, i){T.dom.removeClass(el, 'op_videoidea1_select');});T.each(items, function(el,i){if ( el.getAttribute('data-type') == type) {T.dom.remove(el);}});T.dom.addClass(this, 'op_videoidea1_select');if (!T.dom.hasClass(this, 'op_videoidea1_all')) {createItem(this.innerHTML, type);}initData();getData();ifCond();} else {if (!T.dom.hasClass(this, 'op_videoidea1_all')){T.dom.removeClass({%*i*%}this, 'op_videoidea1_select');var itemlen = items.length;for (var i = 0; i < itemlen; i++){if (items[i].getAttribute('data-cont') == this.innerHTML) {T.dom.remove(items[i]);}}if(T.dom.q('op_videoidea1_select', thisWrap)[0] == undefined){T.dom.addClass(T.dom.q('op_videoidea1_all', thisWrap)[0], 'op_videoidea1_select');}initData();getData();ifCond();}}});});function createItem(cnt, type){var item = document.createElement('div');item.className = 'op_videoidea1_item OP_LOG_BTN';item.innerHTML = cnt;{%*i*%}item.setAttribute('data-type', type);item.setAttribute('data-cont', cnt);T.event.on(item, 'click', function(){if (type) {var typewrap = _this.qq('op_videoidea1_' + type),typetags = T.dom.q('op_videoidea1_select', typewrap),hasOther = true;T.each(typetags, function(el, i){if( el.innerHTML == item.getAttribute('data-cont') ){T.dom.removeClass(el, 'op_videoidea1_select');} else {hasOther = false;}});if (hasOther) {T.dom.addClass(T.dom.q('op_videoidea1_all', typewrap)[0], 'op_videoidea1_select');}}T{%*i*%}.dom.remove(item);initData();getData();ifCond();});T.dom.insertBefore(item, fresh);}T.event.on(fresh, 'click', function(){var items = _this.q('op_videoidea1_item'),selectTags = _this.q('op_videoidea1_select'),tagAll = _this.q('op_videoidea1_all');T.each(items, function(el){T.dom.remove(el);});T.each(selectTags, function(el){T.dom.removeClass(el, 'op_videoidea1_select');});T.each(tagAll, function(el){T.dom.addClass(el, 'op_videoidea1_select');});T.dom.addClass(morebtn, 'op_videoidea1_hidden');ini{%*i*%}tData();getData();ifCond();});function ifCond() {var items = _this.q('op_videoidea1_item'),cond = _this.qq('op_videoidea1_condition');if ( items.length < 1 ) {if (!T.dom.hasClass(cond, 'op_videoidea1_hidden')) {T.dom.addClass(cond, 'op_videoidea1_hidden');}} else {T.dom.removeClass(cond, 'op_videoidea1_hidden');}}function addCnt(data){T.dom.addClass(load, 'op_videoidea1_hidden');if ( tStamp != data.t) {return;}if (data.status == '0' && data.data[0].disp_data) {var len = data.data[0].disp_data.le{%*i*%}ngth;if (len > 0) {if (len < 12) {T.dom.addClass(morebtn, 'op_videoidea1_hidden');nomoreresult = true;} else {if (up) {T.dom.removeClass(morebtn, 'op_videoidea1_hidden');}nomoreresult = false;}for(var i = 0; i < len && i < 12; i ++){createCntItem(data.data[0].disp_data[i]);}if (pn >= 36 || data.data[0].listNum == (pn+12)) {T.dom.addClass(morebtn, 'op_videoidea1_hidden');}T.dom.removeClass(morebtn, 'op_videoidea1_morebtn_wait');T.dom.addClass(noresult, 'op_videoidea1_hidden');} else {T.dom.addCla{%*i*%}ss(morebtn, 'op_videoidea1_hidden');T.dom.removeClass(noresult, 'op_videoidea1_hidden');}} else {T.dom.removeClass(noresult, 'op_videoidea1_hidden');} }function createCntItem(data){var cnt = document.createElement('div');cnt.className = 'op_videoidea1_detailcnt OP_LOG_BTN';cnt.setAttribute('data-src',data.videoLink);var cntbg = document.createElement('div');cntbg.className = 'op_videoidea1_detailbgall';var bgHtml = ['<div class="op_videoidea1_detailbg"><div class="op_videoidea1_imgwrap" style="b{%*i*%}ackground:url(',data.poster,');">'];if (data.isHot == 'true' && hotnum < 6) {bgHtml.push('<span class="op_videoidea1_imgangle op_videoidea1_hot">热</span></div>');hotnum++;} else if (data.isNew == 'true' && newnum < 6) {bgHtml.push('<span class="op_videoidea1_imgangle op_videoidea1_new">新</span></div>');newnum++;} else {bgHtml.push('</div>');}var downHtml = [ '<div class="op_videoidea1_name"><span title="',data.title,'">',data.displayTitle,'</span></div><div class="op_videoidea1_star"><span class{%*i*%}="op_videoidea1_starbg"><span class="op_videoidea1_starft" style="width:',data.rate*10,'%"></span></span><span>',data.rate,'</span></div></div>'];bgHtml = bgHtml.concat(downHtml);cntbg.innerHTML = bgHtml.join('');cnt.appendChild(cntbg);T.event.on(cnt, 'click', function(event){var url = cnt.getAttribute('data-src');urlData.innerHTML = url;window.open(urlData.childNodes[0].nodeValue,'_blank');});var lastdiv = T.dom.q('op_videoidea1_lastdiv',_this.q('op_videoidea1_cntwrap')[index])[0];T.dom.insertB{%*i*%}efore(cnt, lastdiv);}function getData(){if (pn >= 48) {return;}var type = [],sortkey,time_more,url = 'http://opendata.baidu.com/api.php?resource_id=6690&format=json&rn=12&from_mid=1&sort_type=1&ie=utf-8&oe=utf-8&type=#{0}&sort_key=#{1}&pn=#{2}&query=#{3}&time_more=#{4}&t=#{5}',items = _this.q('op_videoidea1_item');tStamp = new Date().getTime();pn = pageindex++*12;T.each(items, function(el, i){var cont = el.getAttribute('data-cont');if (cont == '更早') {time_more = '1900_1979';} else {type.push(con{%*i*%}t);}});switch (index) {case 0:sortkey = '';break;case 1:sortkey = '12';break;case 2:sortkey = '11';break;}T.dom.removeClass(load, 'op_videoidea1_hidden');T.dom.addClass(noresult, 'op_videoidea1_hidden');T.sio.callByServer(T.format(url, encodeURIComponent(type.join(',')), sortkey, pn, encodeURIComponent('电影'), time_more, tStamp), addCnt, {'queryField':'cb','charset':'utf-8'});}function initData(){pageindex = 0;hotnum = 0;newnum = 0;pn = 0;nomoreresult = false;T.dom.removeClass(morebtn, 'op_videoi{%*i*%}dea1_morebtn_wait');T.dom.addClass(morebtn, 'op_videoidea1_hidden');_this.q('op_videoidea1_cntwrap')[index].innerHTML = '<div class="op_videoidea1_lastdiv"></div>';}});</script>{%$FE_GBVAR.wrapper_suffix%}{%/block%}