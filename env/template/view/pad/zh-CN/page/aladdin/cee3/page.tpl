{%extends 'c_base.tpl'%} {%block name='content'%}<style type="text/css" data-merge>{%fe_fn_c_css css='table'%}{%fe_fn_c_css css='dropdown2'%}.op_cee3_tb tfoot td{height:66px;*height:67px}.op_cee3_local{display:inline-block;*vertical-align:middle;*padding-top:3px;padding-bottom:3px;width:100px}</style><table class="c-table op_cee3_tb"> <thead> <tr> <th colspan="6">{%$tplData.info|escape:'html'%}<span class="op_cee3_local c-gap-left-small"></span></th> </tr> <tr class="c-table-nohihead"> {%for $index=1 to 6%} <th>{%$tplData.th[0]["col{%$index%}"]|escape:'html'%}</th> {%/for%} </tr> </thead></table>{%if $tplData.more[0]['txt']%}<div class="c-gap-top-small"><a href="{%$tplData.more[0]['moreUrlLink']|escape:'html'%}" target="_blank">{%$tplData.more[0]['txt']|escape:'html'%}</a></div>{%/if%}<script type="text/javascript" >
    A.setup({
        'selectedCity': '{%if $extData.AutoExtendedLocation%}{%$extData.AutoExtendedLocation|escape:'javascript'%}{%/if%}',
        'scoreline': {%json_encode($tplData.scoreline)%}
    });
</script><script type="text/javascript" data-merge>A.setup(function() {var _this = this,selectedCity = _this.data.selectedCity,tb = _this.find('.op_cee3_tb')[0],sel = _this.find('.op_cee3_local')[0],op_cee3_empty_data = _this.find('.op_cee3_empty_data')[0],tbodys = [],scoreline = _this.data.scoreline,citys = [],localData = [],curCity,dpdown,lastCity,hasCurCity=false;curCity = selectedCity || '北京';for(var i = 0, l = scoreline.length; i < l; i++){if(i > 799){break;}var prov = scoreline[i]['local']{%*i*%}; if(!localData[prov]){var tmp = {text:prov, value:prov};if(prov == curCity){tmp.selected = 1;hasCurCity=true;}citys.push(tmp);localData[prov] = [];}localData[prov].push(scoreline[i]);}if(!hasCurCity){curCity=citys[0].value;}function buildTbody(key, data){if(tbodys[key]){$(tbodys[key]).show();return;}var tbody = document.createElement('tbody'),tmp = document.createElement('div'),html = [];for(var i=0, l=data.length; i<l; i++){html.push('<tr>');for(index in data[i]){if(data[i].hasOwnProperty(inde{%*i*%}x)){ if(index != "local"){html.push('<td>' + data[i][index] + '</td>');}}}html.push('</tr>');}tmp.innerHTML = '<table><tbody>' + html.join('') + '<tbody></table>';tbody = tmp.firstChild.firstChild;tbodys[key] = tbody;tb.appendChild(tbody);}buildTbody(curCity, localData[curCity]);A.use('dropdown21', function(){dpdown = A.ui.dropdown21(citys, {appendTo:sel, onchange:function(e){curCity = e.item.value;oldCity = e.oldItem.value;buildTbody(curCity, localData[curCity]);$(tbodys[oldCity]).hide();}});}){%*i*%};this.dispose = function(){dpdown&&dpdown.dispose&&dpdown.dispose();};});</script>{%/block%}