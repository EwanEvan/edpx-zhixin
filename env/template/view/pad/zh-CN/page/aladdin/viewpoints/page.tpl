{%extends 'c_base.tpl'%} {%block name='title'%}{%/block%}{%block name='foot'%}{%/block%}{%block name='content'%}<style>{%fe_fn_c_css css='img'%}.op_viewpoints_main{overflow:auto}.op_viewpoints_main a,.op_viewpoints_feedback a,.op_viewpoints_ext a{text-decoration:none}.op_viewpoints_main a:hover,.op_viewpoints_feedback a:hover,.op_viewpoints_ext a:hover{text-decoration:underline}.op_viewpoints_sep{color:#ccc;margin:0 8px}.op_viewpoints_title,.op_viewpoints_title a{color:#666;font-size:1.07em;font-weight:bold}.op_viewpoints_area{padding-bottom:20px}.op_viewpoints_view{font-family:"Microsoft YaHei",SimHei;{%if $tplData.view[0].content|string_display_len < 30%}font-size:1.84em;{%elseif $tplData.view[0].content|string_display_len < 72%}font-size:1.53em;{%elseif $tplData.view[0].content|string_display_len < 138%}font-size:1.23em;{%else%}font-size:1.07em;{%/if%}}.op_viewpoints_detail{color:#333}.op_viewpoints_detail_more{font-family:SimSun;white-space:nowrap;color:#00c}.op_viewpoints_detail_more a{color:#00c}.op_viewpoints_feedback{color:#999;font-size:.92em;text-align:right;margin:-15px 0 -3px 0}.op_viewpoints_feedback a{color:#999}.op_viewpoints_ext{border-top:1px solid #e8e9eb}.op_viewpoints_ext_title{color:#666;font-weight:bold}.op_viewpoints_ext_body{margin-bottom:-5px}.op_viewpoints_answer{position:relative;border-top:1px solid #edeff0;padding-to{%*i*%}p:5px;margin-left:15px}.op_viewpoints_answer_first{border-top:0 none;margin-top:-5px}.op_viewpoints_answer_icon{position:absolute;top:8px;left:-17px;vertical-align:baseline}.op_viewpoints_answer_showall{display:inline-block;white-space:nowrap}.op_viewpoints_answer_info,.op_viewpoints_answer_info a{color:#999}.op_viewpoints_more_answer{text-align:center;border-top:1px solid #e8e9eb;margin-bottom:-3px}.op_viewpoints_more_answer_btn{color:#00C;cursor:pointer}</style><div class="c-border"> <div clas{%*i*%}s="op_viewpoints_main c-row"> <p class="op_viewpoints_title c-gap-bottom-small"><a href="{%$tplData.url|escape:'html'%}" target="_blank">{%$tplData.title|limitlen:60|escape:'html'%}</a>：</p> {%if $tplData.view[0].pic%} <div class="op_viewpoints_img c-span3"> <img class="c-img c-img3" src="{%$tplData.view[0].pic%}"/> </div> {%/if%} <div class="op_viewpoints_area {%if $tplData.view[0].pic%}c-span21{%else%}c-span24{%/if%} c-span-last"> {%if $tplData.view[0].content%} <p class="op_viewpoints_view c-gap-bottom-small"> {%preg_replace("/\[url\s(.*?)\](.*?)\[\/url\]/", "<a href=\"$1\" target=\"_blank\">$2</a>", $tplData.view[0].content|limit_ubburl:200|escape:'html')%} </p> {%/if%} {%if $tplData.view[0].detail%} <p class="op_viewpoints_detail"> {%$tplData.view[0].detail|limitlen:190|escape:'html'%}<span class="op_viewpoints_detail_more c-gap-left-small"><a href="{%$tplData.url|escape:'html'%}" target="_blank">详情&gt;&gt;</a></span> </p> {%/if%} {%if $tplData.summary%} <div class="op_viewpoints_summary c-gap-top-small"> {%foreach array_slice($tplData.summary, 0, 5) as $item%} <p>{%preg_replace("/\[url\s(.*?)\](.*?)\[\/url\]/", "<a href=\"$1\" target=\"_blank\">$2</a>", $item.content|escape:'html')%}</p> {%/foreach%} </div> {%/if%} </div> </div>  <div class="op_viewpoints_feedback"> {%if $tplData.source%}来自<a class="op_viewpoints_feedback_source" href="{%$tplData.source[0].sourceurl|escape:'html'%}" target="_blank">{%$tplData.source[0].sourcetitle|escape:'html'%}</a><span class="op_viewpoints_sep">|</span>{%/if%}<a class="op_viewpoints_feedback_a" href="javascript:;" data-click="{info:'报错'}">报错</a> </div> {%if $tplData.answer%}  <div class="op_viewpoints_ext c-gap-top"> <p class="c-gap-top-small c-gap-bottom-small op_viewpoints_ext_title">相关网友讨论：</p> <div class="op_viewpoints_ext_body"> {%foreach array_slice($tplData.answer, 0, 2) as $item%} {%$answerLimitlen = ($item.content|string_display_len > 226) ? 200 : 226%} <div class="op_viewpoints_answer c-gap-bottom-small {%if $item@first%}op_viewpoints_answer_first{%/if%}"> <i class="c-icon c-icon-circle-blue-s op_viewpoints_answer_icon"></i> <p class="op_viewpoints_answer_content"><span class="c-gap-right-small">{%$item.content|limitlen:$answerLimitlen|escape:'html'%}</span>{%if $item.content|string_display_len > $answerLimitlen%}<a href="javascript:;" class="op_viewpoints_answer_showall OP_LOG_BTN" data-click="{fm:'beha'}" content="{%$item.content|escape:'html'%}">显示全部<i class="c-icon c-icon-triangle-down-blue"></i></a>{%/if%}</p> <p class="op_viewpoints_answer_info">{%if $item.source && $item.sourceurl%}来自<a href="{%$item.sourceurl|escape:'html'%}" target="_blank">{%$item.source|escape:'html'%}</a>{%/if%}{%if $item.date%}<span class="op_viewpoints_sep">|</span>{%$item.date|escape:'html'%}{%/if%}{%if $item.original && $item.originalurl%}<span class="op_viewpoints_sep">|</span>原问题：<a href="{%$item.originalurl|escape:'html'%}" target="_blank">{%$item.original|escape:'html'%}</a>{%/if%}</p> </div> {%/foreach%} </div> {%if count($tplData.answer) > 2%} <div class="op_viewpoints_more_answer c-gap-top"> <p class="op_viewpoints_more_answer_btn c-gap-top-small OP_LOG_BTN" data-click="{fm:'beha'}">展开更多<i class="c-icon c-icon-triangle-down-blue"></i></p> </div> {%/if%} </div> {%/if%}</div><script type="text/javascript" >
    A.setup({
        OriginQuery: "{%str_replace($extData.resourceid|cat:'_', '', $extData.fetchkey)|escape:'html'|escape:'javascript'%}",
        AnswerNum: "{%count($tplData.answer)|escape:'javascript'%}"     //answer总数
    });
</script><script data-merge>A.setup(function(){var Ala = this,ajaxFinished = false;var srcid = Ala.srcid, originQuery = encodeURIComponent(Ala.data.OriginQuery),answerNum = Ala.data.AnswerNum,apn = 2, arn = 5; var $dom_moreAnswer = Ala.find('.op_viewpoints_more_answer');Ala.find('.op_viewpoints_feedback_a').on('click', function(){$(this).replaceWith('<span>感谢反馈</span>');});bindShowallEvent();function bindShowallEvent(){Ala.find('.op_viewpoints_answer_showall').on('click', function(){$(this).pare{%*i*%}nt().html($(this).attr('content'));});}Ala.find('.op_viewpoints_more_answer_btn').on('click', function(){asyncGetData(apn, arn);});function asyncGetData(pn, rn){var url = 'http://opendata.baidu.com/api.php?resource_id=' + srcid + '&format=json&ie=utf-8&oe=utf-8&query=' + originQuery + '&apn=' + pn + '&arn=' + rn + '&co=answer';$.ajax({dataType : 'jsonp',scriptCharset : 'utf-8',jsonp : 'cb',timeout : 6000,url : url,success : initData});}function initData(data){ if (ajaxFinished) return;if (data.s{%*i*%}tatus == '0' && data.data[0].answer) { var dispData = data.data[0].answer,dispHtml = [];for (var i = 0; i < dispData.length; i++) {var answerLimitlen = ($.getByteLength(dispData[i].content) > 226) ? 200 : 226;dispHtml = dispHtml.concat(['<div class="op_viewpoints_answer c-gap-bottom-small">','<i class="c-icon c-icon-circle-blue-s op_viewpoints_answer_icon"></i>','<p class="op_viewpoints_answer_content">','<span class="c-gap-right-small">' + $.subByte(dispData[i].content, answerLimitlen) + '</spa{%*i*%}n>',$.getByteLength(dispData[i].content) > answerLimitlen ? '<a href="javascript:;" class="op_viewpoints_answer_showall OP_LOG_BTN" data-click="{fm:\'beha\'}" content="' + dispData[i].content + '">显示全部<i class="c-icon c-icon-triangle-down-blue"></i></a>' : '','</p>','<p class="op_viewpoints_answer_info">',(dispData[i].sourceurl && dispData[i].source) ? '来自<a href="' + dispData[i].sourceurl + '" target="_blank">' + dispData[i].source + '</a>' : '',dispData[i].date ? '<span class="op_viewpoints_se{%*i*%}p">|</span>' + dispData[i].date : '',(dispData[i].originalurl && dispData[i].original) ? '<span class="op_viewpoints_sep">|</span>原问题：<a href="' + dispData[i].originalurl + '" target="_blank">' + dispData[i].original + '</a>' : '','</p>','</div>']);};showData(dispHtml.join(''));}}function showData(data){ var $dom_dataArea = Ala.find('.op_viewpoints_ext_body');$dom_dataArea.append(data);bindShowallEvent(); apn += arn; if (answerNum <= apn) {$dom_moreAnswer.remove();};}this.dispose = function(){if{%*i*%}(!ajaxFinished){ajaxFinished = true;}};});</script>{%/block%}