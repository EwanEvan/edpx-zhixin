{%extends 'c_base.tpl'%} {%block name='data_modifier'%} {%$tplData.showurl='forex.hexun.com/'%}{%$extData.feData.hasBorder=true%}{%/block%}{%block name='title'%}{%/block%}{%block name='content'%}<style data-merge>{%fe_fn_c_css css='tool'%}{%fe_fn_c_css css='btn'%}{%fe_fn_c_css css='input'%}{%fe_fn_c_css css='dropdown2'%}.op_exrate_sub_title{font-family:"微软雅黑" arial;font-size:1.23em}.op_exrate_result{font-family:"微软雅黑" arial;font-size:1.69em}.op_exrate_table .c-dropdown2{width:120px}.op_exrate_table .c-dropdown2-option{padding-left:10px}.op_exrate_table td{vertical-align:top}.op_exrate_table td.op_exrate_td_sp{vertical-align:middle;font-weight:bold}.op_exrate_errors span{display:none;color:#f00}</style><div> <div class="c-row"> <div class="c-span3"> <i class="c-tool c-tool-rate"></i> </div> <div class="c-span21 {%*i*%}c-span-last"> <div class="op_exrate_sub_title">货币兑换</div> <div class="op_exrate_result"> {%if $tplData.number1%}<div>{%$tplData.number1|escape:'html'%}{%$tplData.currency1|escape:'html'%}={%$tplData.number2|escape:'html'%}{%$tplData.currency2|escape:'html'%}</div>{%/if%} {%if $tplData.content2Mini%} {%if $tplData.content1Mini%}<div>{%$tplData.content1Mini|escape:'html'%}</div>{%/if%} <div>{%$tplData.content2Mini|escape:'html'%}</div> {%/if%} </div> </div> </div> <div class="c-gap-top"> <table class="op_exrate_table" cellpadding="0" cellspacing="0"> <tr> <td><input class="c-input c-input-mini c-gap-right op_exrate_txt" type="text" value="{%if $tplData.number1%}{%$tplData.number1%}{%else%}1{%/if%}" maxlength="13"></td> <td> <div class="c-dropdown2 c-gap-right op_exrate_from OP_LOG_BTN"  data-click="{fm:'beha'}"> <div class="c-dropdown2-btn-group"> <div class="c-dropdown2-btn">{%if $tplData.currency1%}{%$tplData.currency1%}{%else%}所持货币类型{%/if%}</div> <div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> </ul> </div> </div> </div> </td> <td class="op_exrate_td_sp"><span class="c-gap-right">兑换为</span></td> <td> <div class="c-dropdown2 c-gap-right op_exrate_to OP_LOG_BTN"  data-click="{fm:'beha'}"> <div class="c-dropdown2-btn-group"> <div class="c-drop{%*i*%}down2-btn">{%if $tplData.currency2%}{%$tplData.currency2%}{%else%}兑换货币类型{%/if%}</div> <div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> </ul> </div> </div> </div> </td> <td><a href="#" onclick="return false;"  class="c-btn c-btn-primary op_exrate_exchange">转换</a></td> </tr> <tr class="op_exrate_errors"> <td>{%if $tplData.errcode=='2'%}<span class="op_exrate_txt_e" style="display:inline;">超出计算范围</span>{%else%}<span class="op_exrate_txt_e"></span>{%/if%}</td> <td><span class="op_exrate_from_e"></span></td> <td></td> <td><span class="op_exrate_to_e"></span></td> <td></td> </tr> </table> </div> {%if $tplData.support%} <div class="c-gap-top" style="color:#666;">{%$tplData.support|escape:'html'%}</div> {%/if%} {%if $tplData.link[0]['linkcontent']%} <div class="c-gap-top-small"> {%if $tplData.link[0]['linkurl']%}<a href="{%$tplData.link[0]['linkurl']%}" target="_blank">{%/if%}{%$tplData.link[0]['linkcontent']|escape:'html'%}{%if $tplData.link[0]['linkurl']%}&gt;&gt;</a>{%/if%} </div> {%/if%}</div><script >
A.setup({
    currency1 : '{%if $tplData.currency1%}{%$tplData.currency1|escape:'html'%}{%/if%}',
    currency2 : '{%if $tplData.currency2%}{%$tplData.currency2|escape:'html'%}{%/if%}',
    errcode : '{%if $tplData.errcode%}{%$tplData.errcode%}{%/if%}',
    number1 : '{%if $tplData.number1%}{%$tplData.number1|escape:'html'%}{%/if%}'
});
</script><script>A.setup(function() {var _this = this;var $btn = _this.find('.op_exrate_exchange');var txt = _this.find('.op_exrate_txt')[0];var txt_e = _this.find('.op_exrate_txt_e')[0];var cur1_e = _this.find('.op_exrate_from_e')[0];var cur2_e = _this.find('.op_exrate_to_e')[0];var resultDOM = _this.find('.op_exrate_result')[0];(function(){var m = document.uniqueID && document.compatMode && !window.XMLHttpRequest && document.execCommand;try{if(!!m){m("BackgroundImageCache", false, true) }}catc{%*i*%}h(oh){};})();var cur1Container = _this.find('.op_exrate_from')[0];var cur2Container = _this.find('.op_exrate_to')[0];var cur1={value:_this.data.currency1};var cur2={value:_this.data.currency2};var cur1ListOptions=[];var cur2ListOptions=[];var currencyArray = ['阿联迪拉姆|AED|阿联酋迪拉姆', '阿根廷披索|ARS|阿根廷披索', '奥币|ATS|奥地利先令', '澳元|AUD|澳元', '孟加拉塔卡|BDT|孟加拉塔卡', '比法郎|BEF|比利时法郎', '保加利亚列弗|BGN|保加利亚列弗', '巴林第纳尔|BHD|巴林第纳尔', '百慕大元|BMD|百慕大元', '玻币|BOB|玻利维亚诺', '巴西币|BRL|巴西雷亚尔', '缅元|BUK|缅甸缅元', '普拉|BWP|博茨瓦纳普拉', '加元|CAD|加元', '{%*i*%}瑞郎|CHF|瑞士法郎', '智利币|CLP|智利披索', '离岸人民币|CNH|离岸人民币', '人民币|CNY|人民币元', '哥伦比亚披索|COP|哥伦比亚披索', '古巴披索|CUP|古巴披索', '捷克币|CZK|捷克克鲁', '马克|DEM|德国马克', '丹麦币|DKK|丹麦克朗', '埃及镑|EGP|埃及镑', '西币|ESP|西班牙比塞塔', '欧元|EUR|欧元', '芬兰币|FIM|芬兰马克', '法法郎|FRF|法国法郎', '英镑|GBP|英镑', '迦纳塞地|GHC|迦纳塞地', '希腊德拉克马|GRD|希腊德拉克马', '危地马拉格查尔|GTQ|危地马拉格查尔', '港币|HKD|港币', '克罗地亚库纳|HRK|克罗地亚库纳', '匈牙利币|HUF|匈牙利福林', '印尼盾|IDR|印度尼西亚盾', '爱尔兰镑|IEP|爱尔兰镑', '以色列谢克尔|ILS|以色列谢克尔', '印度币|INR|印度卢比', '冰岛克朗|ISK|冰岛克朗', '意大利里拉|ITL|意大利里拉', '牙买加元|JMD|牙买加元', '约旦第纳尔|JOD|约旦第纳尔', '日元{%*i*%}|JPY|日元', '韩元|KER|韩元', '肯尼亚先令|KES|肯尼亚先令', '科威特第纳尔|KWD|科威特第纳尔', '哈萨克腾格|KZT|哈萨克腾格', '寮国基普|LAK|老挝基普', '黎巴嫩镑|LBP|黎巴嫩镑', '斯里兰卡卢比|LKR|斯里兰卡卢比', '立陶宛利达|LTL|立陶宛利达', '拉脱维亚拉特|LVL|拉脱维亚拉特', '摩洛哥迪拉姆|MAD|摩洛哥迪拉姆', '蒙古图格里克|MNT|蒙古图格里克', '澳门元|MOP|澳门帕塔卡', '毛里求斯卢比|MUR|毛里求斯卢比', '墨披索|MXN|墨西哥披索', '马币|MYR|马来西亚林吉特', '尼日利亚第纳尔|NGN|尼日利亚第纳尔', '荷兰币|NLG|荷兰盾', '挪威币|NOK|挪威克朗', '纽币|NZD|纽元', '阿曼里亚尔|OMR|阿曼里亚尔', '巴拿马巴尔博亚|PAB|巴拿马巴尔博亚', '秘鲁币|PEN|秘鲁新索尔', '菲律宾披索|PHP|菲律宾披索', '巴基斯坦卢比|PKR|巴基斯坦卢比', '波兰币|PLN|波兰罗提', '葡币|PTE|葡萄牙埃斯库多', '巴拉圭瓜拉尼|{%*i*%}PYG|巴拉圭瓜拉尼', '卡达里亚尔|QAR|卡达里亚尔', '罗马尼亚列伊|RON|罗马尼亚列伊', '卢布|RUB|俄罗斯卢布', '沙亚币|SAR|沙特阿拉伯里亚尔', '瑞典币|SEK|瑞典克朗', '新加坡元|SGD|新加坡元', '索马里先令|SOS|索马里先令', '泰铢|THB|泰铢', '突尼西亚第纳尔|TND|突尼西亚第纳尔', '土耳其里拉|TRY|土耳其里拉', '台币|TWD|台币', '坦桑尼亚先令|TZS|坦桑尼亚先令', '美元|USD|美元', '乌拉圭披索|UYU|乌拉圭披索', '委内瑞拉博利瓦|VEB|委内瑞拉博利瓦', '越南盾|VND|越南盾', '南非币|ZAR|南非兰德', '津巴布韦元|ZWD|津巴布韦元'];for (var i = 0, len = currencyArray.length; i < len; i++) {var items = currencyArray[i].split('|');cur1ListOptions.push(['<li class="c-dropdown2-option" data-value="{%*i*%}',items[2],'"',_this.data.currency1===items[2]?' data-selected="selected"':'','>',items[1],items[2],'</li>'].join(''));cur2ListOptions.push(['<li class="c-dropdown2-option" data-value="',items[2],'"',_this.data.currency2===items[2]?' data-selected="selected"':'','>',items[1],items[2],'</li>'].join(''));}cur1Container.getElementsByTagName('ul')[0].innerHTML=cur1ListOptions.join('');cur2Container.getElementsByTagName('ul')[0].innerHTML=cur2ListOptions.join('');var exrateJSON = {};exrateJSON.getDat{%*i*%}a = function(data) {var html=[];data.number1&&html.push(['<div>',data.number1,data.currency1,'=',data.number2,data.currency2,'</div>'].join(''));if(data.content2Mini){data.content1Mini&&html.push(['<div>',data.content1Mini,'</div>'].join(''));html.push(['<div>',data.content2Mini,'</div>'].join(''));}resultDOM.innerHTML = html.join('');};exrateJSON.errorData = function() {resultDOM.innerHTML = '<div style="color:#f00;">抱歉！系统暂未查询到您输入的币种兑换数据</div>';};function getResult(query) {var resourceId = _thi{%*i*%}s.srcid;_this.ajax(query, resourceId, {success: function(data) {if (data && data[0]) {exrateJSON.getData(data[0]);}else {exrateJSON.errorData();}},error: function() {exrateJSON.errorData();},timeout: function() {exrateJSON.errorData();}});}function trim(s) {var trimer = new RegExp('[\\s\\t\\xa0\\u3000]+', 'g');return s.replace(trimer, '');}function checkOpt(c1, c2, err1, err2) {var enable = false;if (!c1.getValue()) {err1.innerHTML = '请选择货币类型';err1.style.display = 'inline';}else if (c1.getValue({%*i*%}) === c2.getValue()) {err1.innerHTML = '请选择不同的货币单位';err1.style.display = 'inline';}else {err1.style.display = 'none';if (c2.getValue()) {err2.style.display = 'none';}enable = true;}return enable;}function checkVal(o, err) {var enable = false;var val = trim(o.value);if (val === '') {o.value = val = 1;}if (parseFloat(val) === 0 || isNaN(val)) {err.innerHTML = '请输入有效数字';err.style.display = 'inline';}else {var floatValue = parseFloat(val);if (floatValue < 0.0001 || floatValue > 1000000000) {err.inne{%*i*%}rHTML = '超出计算范围';err.style.display = 'inline';}else {err.style.display = 'none';enable = true;}}return enable;}$(txt).blur(function(){checkVal(txt, txt_e);});$btn.click(function(){var s1 = checkVal(txt, txt_e),s2 = checkOpt(cur1, cur2, cur1_e, cur2_e),s3 = checkOpt(cur2, cur1, cur2_e, cur1_e);if (s1 && s2 && s3) {var floatValue = parseFloat(trim(txt.value));var query = floatValue + cur1.getValue() + '等于多少' + cur2.getValue();getResult(query);}});A.use('dropdown21',function(){cur1 = A.ui.dropdown2{%*i*%}1(cur1Container,{onchange : function(e){checkOpt(cur1, cur2, cur1_e, cur2_e);},type: 'custom',width:118,height:158 });cur2 = A.ui.dropdown21(cur2Container,{onchange : function(e){checkOpt(cur2, cur1, cur2_e, cur1_e);},type: 'custom',width:118,height:158 });}); this.dispose = function(){cur1&&cur1.dispose&&cur1.dispose();cur2&&cur2.dispose&&cur2.dispose();};});</script>{%/block%}