{%extends 'c_base.tpl'%} {%block name='data_modifier'%}{%$extData.feData.hasBorder=true%}{%/block%}{%block name='content'%}<style data-merge>{%fe_fn_c_css css='btn'%}.op_guahaokv_container{position:relative}.op_guahaokv_questiontip{font-size:.923em;color:#888}.op_guahaokv_questionsign{position:absolute;top:13px;right:9px;color:#828282;width:230px}.op_guahaokv_question{font-size:1.154em;line-height:22px}.op_guahaokv_qutip{display:inline-block;color:#000;float:left}.op_guahaokv_qunum{color:#000}.op_guahaokv_qutext{display:inline-block;color:#000;float:left;width:430px}.op_guahaokv_setup .op_guahaokv_judge{display:inline-block;width:76px;height:22px;line-height{%*i*%}:22px;border-top:1px solid #5b85bf;border-bottom:1px solid #5b85bf;background-color:#378bff;text-align:center;color:#fff;text-decoration:none;cursor:pointer}.op_guahaokv_back{color:#00c;text-decoration:underline;font-size:.923em;cursor:pointer}.op_guahaokv_standardtip1{font-size:.923em;color:#878787}.op_guahaokv_standardtip2{font-size:.923em;color:#878787}.op_guahaokv_recom{color:#8a8a8a}.op_guahaokv_office{line-height:20px}.op_guahaokv_office a{margin-right:15px;display:inline-block}.op_guahaok{%*i*%}v_answers{display:none}.op_guahaokv_line{width:100%;height:1px;overflow:hidden;font-family:0;background:#ececec;margin:5px 0}</style><div class="op_guahaokv_container"><div class="op_guahaokv_questions"> {%if $tplData.question[0]%} <div class="op_guahaokv_questiontip"> <span class="op_guahaokv_goon">回答1-</span><span class="op_guahaokv_questionover">{%$tplData.question[0].over%}</span>个问题，就能获得就诊建议 </div> {%/if%} <div class="op_guahaokv_line"></div> {%if $tplData.question[0].num && $tplData.ans[0].pre%} <div class="c-gap-top-small op_guahaokv_question op_guahaokv_question1"> <span class="op_guahaokv_qutip">问题<span class="op_guahaokv_qunum">{%$tplData.question[0].num%}</span>：</span><span class="op_guahaokv_qutext">{%$tplData.ans[0].pre%}</span> <div style="clear:both; height:0; font-size:0px; overflow:hidden;"></div> </div> {%/if%} <div class="c-row c-gap-top op_guahaokv_setup"> {%if $tplData.yesid%} <input type="hidden" value="{%$tplData.yesid%}" class="op_guahaokv_yesid" /> {%/if%} {%if $tplData.noid%} <input type="hidden" value="{%$tplData.noid%}" class="op_guahaokv_noid" /> {%/if%} <input type="hidden" value="" class="op_guahaokv_backtext" /> <input type="hidden" value="" class="op_guahaokv_backtext2" /> <span class="op_guahaokv_yes c-gap-right c-btn c-btn-primary" data-click="{'fm':'beha'}">是</span><span class="op_guahaokv_no c-gap-right c-btn c-btn-primary" data-click="{'fm':'beha'}">否</span><span class="op_guahaokv_back op_guahaokv_back1 OP_LOG_BTN" data-click="{'fm':'beha'}"></span> </div> <div class="c-gap-top op_guahaokv_standardtip1"> {%if $tplData.standardtip%} {%$tplData.standardtip%} {%/if%} </div> </div> <div class="op_guahaokv_answers"> <div class="op_guahaokv_questiontip">根据你的回答，就诊建议如下：</div> <div class="op_guahaokv_line"></div> <div class="c-gap-top-small op_guahaokv_question op_guahaokv_question2"> <div class="op_guahaokv_question_text"></div> <span class="op_guahaokv_back op_guahaokv_back2 OP_LOG_BTN" data-click="{'fm':'beha','rsv_gtype':'last'}"></span> </div> <div class="c-gap-top op_guahaokv_recom">推荐科室</div> <div class="c-gap-top-small op_guahaokv_office"></div> <div clas{%*i*%}s="c-gap-top op_guahaokv_standardtip2"></div> </div></div><script >
    A.setup({
        query:'{%$extData.OriginQuery%}',
      	srcid:'20282'
    });
</script><script data-merge>A.setup(function(){var _this = this;var yes=_this.find('.op_guahaokv_yes')[0];var no=_this.find('.op_guahaokv_no')[0];var back=_this.find('.op_guahaokv_back1')[0];var back2=_this.find('.op_guahaokv_back2')[0];var num=_this.find('.op_guahaokv_qunum')[0];var over=_this.find('.op_guahaokv_questionover')[0];var goon=_this.find('.op_guahaokv_goon')[0];var text=_this.find('.op_guahaokv_qutext')[0];var text2=_this.find('.op_guahaokv_question_text')[0];var questions=_this.fin{%*i*%}d('.op_guahaokv_questions')[0];var answers=_this.find('.op_guahaokv_answers')[0];var office=_this.find('.op_guahaokv_office')[0];var standard1=_this.find('.op_guahaokv_standardtip1')[0];var standard2=_this.find('.op_guahaokv_standardtip2')[0];var recom=_this.find('.op_guahaokv_recom')[0];var html=[];var aLink=[]; function getyes(){var yesvalue=_this.find('.op_guahaokv_yesid')[0].value;_this.ajax(yesvalue, _this.data.srcid, {success: function(data){if(data){var data=data[0];if(data.ansType == '1'{%*i*%}){_this.find('.op_guahaokv_yesid')[0].value=data.yesid;_this.find('.op_guahaokv_noid')[0].value=data.noid;_this.find('.op_guahaokv_backtext')[0].value=data.back[0].preid;if(data.question[0].over == '1'){goon.innerHTML='还需要回答';}else{goon.innerHTML='最多还需要回答';}num.innerHTML=data.question[0].num;over.innerHTML=data.question[0].over;text.innerHTML=data.ans[0].pre;back.innerHTML=data.back[0].text;standard1.innerHTML=data.standardtip;}else if(data.ansType == '2'){window.c({'fm':'inlo','rsv_gtype':'last{%*i*%}','url':data.url});questions.style.display='none';_this.find('.op_guahaokv_backtext2')[0].value=data.back[0].preid;html.length=0;for(var i=0;i<data.ans.length;i++){html.push(data.ans[i].pre+'<a href="'+data.ans[i].linkurl+'" data-click="{\'rsv_gtype\':\'last\'}" target="_blank" >'+data.ans[i].linkname+'</a>');}text2.innerHTML=html.join('');if(data.recomdepartment){recom.style.display='block';office.style.display='block';aLink.length=0;for(var i=0;i<data.recomdepartment.length;i++){aLink.push('<a{%*i*%} href="'+data.recomdepartment[i].url+'" data-click="{\'rsv_gtype\':\'last\'}" target="_blank">'+data.recomdepartment[i].name+'</a>');}office.innerHTML=aLink.join('');}else{recom.style.display='none';office.style.display='none';}back2.innerHTML=data.back[0].text;standard2.innerHTML=data.standardtip;answers.style.display='block'; }}},error: function(){},timeout:function(){}}); }; function getno(){var novalue=_this.find('.op_guahaokv_noid')[0].value;_this.ajax(novalue, _this.data.srcid, {success: f{%*i*%}unction(data){if(data){var data=data[0];if(data.ansType == '1'){_this.find('.op_guahaokv_yesid')[0].value=data.yesid;_this.find('.op_guahaokv_noid')[0].value=data.noid;_this.find('.op_guahaokv_backtext')[0].value=data.back[0].preid;if(data.question[0].over == '1'){goon.innerHTML='还需要回答';}else{goon.innerHTML='最多还需要回答';}num.innerHTML=data.question[0].num;over.innerHTML=data.question[0].over;text.innerHTML=data.ans[0].pre;back.innerHTML=data.back[0].text;standard1.innerHTML=data.standardtip;}else i{%*i*%}f(data.ansType == '2'){window.c({'fm':'inlo','rsv_gtype':'last','url':data.url});questions.style.display='none';_this.find('.op_guahaokv_backtext2')[0].value=data.back[0].preid; html.length=0;for(var i=0;i<data.ans.length;i++){html.push(data.ans[i].pre+'<a href="'+data.ans[i].linkurl+'" data-click="{\'rsv_gtype\':\'last\'}" target="_blank">'+data.ans[i].linkname+'</a>');}text2.innerHTML=html.join('');if(data.recomdepartment){recom.style.display='block';office.style.display='block'; aLink.length={%*i*%}0;for(var i=0;i<data.recomdepartment.length;i++){aLink.push('<a href="'+data.recomdepartment[i].url+'" data-click="{\'rsv_gtype\':\'last\'}" target="_blank">'+data.recomdepartment[i].name+'</a>');}office.innerHTML=aLink.join('');}else{recom.style.display='none';office.style.display='none';}back2.innerHTML=data.back[0].text;standard2.innerHTML=data.standardtip;answers.style.display='block';}}},error: function(){},timeout:function(){}}); }; function getback(){var backvalue=_this.find('.op_guahaokv{%*i*%}_backtext')[0].value;_this.ajax(backvalue, _this.data.srcid, {success: function(data){if(data){var data=data[0];if(data.ansType == '1'){ _this.find('.op_guahaokv_yesid')[0].value=data.yesid;_this.find('.op_guahaokv_noid')[0].value=data.noid;answers.style.display='none';questions.style.display='block'; num.innerHTML=data.question[0].num; over.innerHTML=data.question[0].over;text.innerHTML=data.ans[0].pre;if(!data.back){back.innerHTML='';if(data.question[0].over != '1'){goon.innerHTML='回答1-'; }els{%*i*%}e{goon.innerHTML='还需要回答';}_this.find('.op_guahaokv_backtext')[0].value='';}else{ back.innerHTML=data.back[0].text;if(data.question[0].over != '1'){goon.innerHTML='最多还需要回答'; }else{goon.innerHTML='还需要回答';}_this.find('.op_guahaokv_backtext')[0].value=data.back[0].preid; }standard1.innerHTML=data.standardtip;}}},error: function(){},timeout:function(){ }}); }; function getback2(){var backvalue=_this.find('.op_guahaokv_backtext2')[0].value;_this.ajax(backvalue, _this.data.srcid, {success: function(dat{%*i*%}a){if(data){var data=data[0];if(data.ansType == '1'){ _this.find('.op_guahaokv_yesid')[0].value=data.yesid;_this.find('.op_guahaokv_noid')[0].value=data.noid;answers.style.display='none';questions.style.display='block'; num.innerHTML=data.question[0].num; over.innerHTML=data.question[0].over;text.innerHTML=data.ans[0].pre;if(!data.back){back.innerHTML='';if(data.question[0].over != '1'){goon.innerHTML='回答1-'; }else{goon.innerHTML='还需要回答';}_this.find('.op_guahaokv_backtext')[0].value=''; }else{ b{%*i*%}ack.innerHTML=data.back[0].text;if(data.question[0].over != '1'){goon.innerHTML='最多还需要回答'; }else{goon.innerHTML='还需要回答';}_this.find('.op_guahaokv_backtext')[0].value=data.back[0].preid; } standard1.innerHTML=data.standardtip;}}},error: function(){},timeout:function(){ }}); }; $(yes).click(function(ev){getyes();});$(no).click(function(ev){getno();});$(back).click(function(ev){getback();});$(back2).click(function(ev){getback2();}); });</script>{%/block%}