{%extends 'base.tpl'%} {%block name='content'%}<style>.op_zx_illness1_top h3{font-size:16px;font-weight:normal}.op_zx_illness1_main{width:613px;background:#fdfdfd;margin-top:8px;border:1px solid #f5f5f5;font-size:15px;overflow:hidden}.op_zx_illness1_condition{margin:5px 10px;width:595px}.op_zx_illness1_condition td{padding:3px 0}.op_zx_illness1_condition input{margin:0 3px 0;_margin-top:-3px}.op_zx_illness1_condition input,.op_zx_illness1_condition label{vertical-align:middle}.op_zx_illness1_condition b{vertical-align:bottom}.op_zx_illness1_{%*i*%}sex label{margin-right:16px;*margin-right:10px}.op_zx_illness1_age label{margin-right:16px;*margin-right:10px}.op_zx_illness1_sign label{margin-right:16px;*margin-right:10px}.op_zx_illness1_sign span{white-space:nowrap;display:inline-block}.op_zx_illness1_condition b{color:#333}.op_zx_illness1_infomain{color:#666;width:613px;font-size:15px;border-left:1px solid #f5f5f5;border-right:1px solid #f5f5f5}.op_zx_illness1_info div{padding:0 10px;line-height:30px;height:30px;border-bottom:1px solid #f5f{%*i*%}5f5}.op_zx_illness1_info a{color:#666;outline:0}.op_zx_illness1_info a.op_zx_illness1_infoB{color:#00c;text-decoration:none}.op_zx_illness1_info a.op_zx_illness1_infoB:hover,.op_zx_illness1_info a:hover em{text-decoration:underline}.op_zx_illness1_info a em{text-decoration:none}.op_zx_illness1_split{margin:0 3px}.op_zx_illness1_infotitle{width:220px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block;margin-right:10px}.op_zx_illness1_infosign{width:260px;text-overflow:{%*i*%}ellipsis;overflow:hidden;white-space:nowrap;display:inline-block;margin-right:10px}.op_zx_illness1_site{width:80px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:inline-block}.op_zx_illness1_info a.op_zx_illness1_morelink{color:#00c;text-decoration:none}.op_zx_illness1_info a.op_zx_illness1_morelink:link,.op_zx_illness1_info a.op_zx_illness1_morelink:visited{text-decoration:none}.op_zx_illness1_info a.op_zx_illness1_morelink:hover{text-decoration:underline}.op_zx_illness1_more{%*i*%}link b{font-weight:normal}.op_zx_illness1_no,.op_zx_illness1_bad{border-bottom:1px solid #f5f5f5}.op_zx_illness1_open{margin-top:2px;font-size:15px;clear:left;float:none;display:inline-block}.op_zx_illness1_open span{font-size:15px;color:#008000}</style>{%$FE_GBVAR.wrapper_prefix%}<div class="op_zx_illness1_top"><h3><a target="_blank" href="javascript:;" class="op_zx_illness1_mainlink OP_LOG_LINK">{%$extData.OriginQuery|limitlen:36|highlight:0%}_患者病例_智能问诊专家回答_百度知道</a></h3></div><div class="op_zx_illness1_main"> <table class="op_zx_illness1_condition" cellpadding="0" cellspacing="0" width="100%" data-click="{'fm':'beha'}"> <tr> <td> <b>性别：</b> </td> <td class="op_zx_illness1_sex"> <span><input class="OP_LOG_BTN" type="radio" name="sex" value="0" data-click="{'title':'不限'}" {%if !isset($tplData.query_sex) || (isset($tplData.query_sex) && $tplData.query_sex==0) %} checked="checked"{%/if%}/><label class="OP_LOG_BTN">不限</label></span> <span><input class="OP_LOG_BTN" type="radio" name="sex" value="1" data-click="{'title':'男性'}"{%if isset($tplData.query_sex) && $tplData.query_sex==1%} checked="checked"{%/if%}{%if isset($tplData.query_sex) && $tplData.query_sex==2%} disabled="disabled"{%/if%}/><label class="OP_LOG_BTN"{%if isset($tplData.query_sex) && $tplData.query_sex==2%} style="color:gray;"{%/if%}>男性</label></span> <span><input class="OP_LOG_BTN" type="radio" name="sex" value="2" data-click="{'title':'女性'}"{%if isset($tplData.query_sex) && $tplData.query_sex==2%} checked="checked"{%/if%}{%if isset($tplData.query_sex) && $tplData.query_sex==1%} disabled="disabled"{%/if%}/><label class="OP_LOG_BTN"{%if isset($tplData.query_sex) && $tplData.query_sex==1%} style="color:gray;"{%/if%}>女性</label></span> </td> </tr> <tr> <td width="80"> <b>所属人群：</b> </td> <td class="op_zx_illness1_age"> <span><input class="OP_LOG_BTN" type="radio" name="age" value="0" data-click="{'title':'不限'}"{%if !isset($tplData.grouptype) || (isset($tplData.grouptype) && $tplData.grouptype==0)%} checked="checked"{%/if%}/><label class="OP_LOG_BTN">不限</label></span> <span><input class="OP_LOG_BTN" type="radio" name="age" value="4" data-click="{'title':'婴幼儿'}"{%if isset($tplData.grouptype) && $tplData.grouptype==4%} checked="checked"{%/if%}/><label class="OP_LOG_BTN">婴幼儿</label></span> <span><input class="OP_LOG_BTN" type="radio" name="age" value="5" data-click="{'title':'儿童'}"{%if isset($tplData.grouptype) && $tplData.grouptype==5%} checked="checked"{%/if%}/><label class="OP_LOG_BTN">儿童</label></span> <span><input class="OP_LOG_BTN" type="radio" name="age" value="1" data-click="{'title':'孕妇'}"{%if isset($tplData.grouptype) && $tplData.grouptype==1%} checked="checked"{%/if%}{%if isset($tplData.query_sex) && $tplData.query_sex==1%} disabled="disabled"{%/if%}/><label class="OP_LOG_BTN"{%if isset($tplData.query_sex) && $tplData.query_sex==1%} style="color:gray;"{%/if%}>孕妇</label></span> <span><input class="OP_LOG_BTN" type="radio" name="age" value="6" data-click="{'title':'产妇'}"{%if isset($tplData.grouptype) && $tplData.grouptype==6%} checked="checked"{%/if%}{%if isset($tplData.query_sex) && $tplData.query_sex==1%} disabled="disabled"{%/if%}/><label class="OP_LOG_BTN"{%if isset($tplData.query_sex) && $tplData.query_sex==1%} style="color:gray;"{%/if%}>产妇</label></span> <span><input class="OP_LOG_BTN" type="radio" name="age" value="2" data-click="{'title':'中老年人'}"{%if isset($tplData.grouptype) && $tplData.grouptype==2%} checked="checked"{%/if%}/><label class="OP_LOG_BTN">中老年人</label></span> <br style="clear:both" /> </td> </tr> <tr> <td valign="top"> <b>症状：</b> </td> <td class="op_zx_illness1_sign"> <div style="width:510px;"> {%$tmpDataSign = []%} {%foreach $tplData.dtag as $item%} {%if !in_array($item, $tmpDataSign)%}{%$tmpDataSign[] = $item%}{%/if%} {%/foreach%} {%$signLen = count($tmpDataSign) - 1%} {%$tmpDataBool = array_fill(0, $signLen + 1, TRUE)%} {%for $i = 0 to $signLen%} {%for $j = 0 to $signLen%} {%if $i == $j%}{%continue%}{%/if%} {%if strstr($tmpDataSign[$j]['sa'], $tmpDataSign[$i]['sa']) != FALSE%}{%$tmpDataBool[$j] = FALSE%}{%/if%} {%/for%} {%/for%} {%$tmpSign = []%} {%$tmpSignCount = 0%} {%for $i =0 to $signLen%} {%if $tmpSignCount > 6%}{%break%}{%/if%} {%if $tmpDataBool[$i]%} {%$tmpSign[] = $tmpDataSign[$i]['sa']%} {%$tmpSignCount = $tmpSignCount + 1%} {%/if%} {%/for%} {%foreach $tplData.query_tag as $item%} {%if !in_array($item, $tmpSign)%} {%foreach $tmpSign as $itemTag%} {%if strstr($item, $itemTag) != FALSE%}{%$tmpSign[$itemTag@index] = NULL%}{%/if%} {%/foreach%} {%$garbage = array_unshift($tmpSign, $item)%} {%/if%} {%/foreach%} {%$tmpSignCount = 0%} {%foreach $tmpSign as $item%} {%if $tmpSignCount >5 %}{%break%}{%/if%} {%if $item == NULL %}{%continue%}{%/if%} {%if in_array($item,$tplData.query_tag)%} <span><input class="OP_LOG_BTN" type="checkbox" data-key="{%$item|escape:'html'%}" data-click="{'title':'{%$item|escape:'html'%}'}" data-flag="1" checked="checked" disabled="disabled" /><label class="OP_LOG_BTN" style="color:gray;">{%$item|escape:'html'%}</label></span> {%else%} <span><input class="OP_LOG_BTN" type="checkbox" data-key="{%$item|escape:'html'%}" data-click="{'title':'{%$item|escape:'html'%}'}" data-flag="0" /><label class="OP_LOG_BTN">{%$item|escape:'html'%}</label></span> {%/if%} {%$tmpSignCount = $tmpSignCount + 1%} {%/foreach%} </div> </td> </tr> </table> <div class="op_zx_illness1_no" style="display:none;"> <table style="height:100%;margin:auto;"><tbody><tr><td><div>没有符合所选条件的病例，请修改条件重新查询！</div></td></tr></tbody></table> </div> <div class="op_zx_illness1_bad" style="display:none;"> <table style="height:100%;margin:auto;"><tbody><tr><td><div>抱歉，网络发生错误，请<a href="###" hidefocus="true">点击刷新</a></div></td></tr></tbody></table> </div></div><div class="op_zx_illness1_infomain"> <div class="op_zx_illness1_info"> {%foreach $tplData.result as $item%} {%if $item@index > 2%}{%break%}{%/if%} <div> <span class="op_zx_illness1_infotitle"> <a class="op_zx_illness1_infoB" target="_blank" href="{%$item.loc%}" hidefocus="true" title="{%$item.title|escape:'html'%}">{%$item.title|escape:'html'|highlight:0%}</a> </span> <span class="op_zx_illness1_infosign">症状：{%$item.tag|escape:'html'|highlight:0%}</span> <span class="op_zx_illness1_site">{%if $item.from%}<a target="_blank" hidefocus="true" href="{%$item.from%}">{%$item.fromsite|escape:'html'%}</a>{%else%}<a target="_blank" hidefocus="true" href="http://www.haodf.com/">好大夫在线</a>{%/if%}</span> </div> {%/foreach%} <div><a class="op_zx_illness1_morelink" target="_blank" href="javascript:;">查看更多相关结果<b>&gt;&gt;</b></a></div> </div> </div><span class="op_zx_illness1_open"><span>zhidao.baidu.com/</span></span><script >
    A.setup({'originQuery': '{%$extData.OriginQuery|escape:'javascript'%}','srcid':'{%$extData.resourceid|escape:'javascript'%}', 'sex': '{%$tplData.sex|escape:'javascript'%}', 'age':'{%$tplData.grouptype|escape:'javascript'%}'});
</script><script>A.init(function(){var _this = this,T = A.baidu,label = _this.container.getElementsByTagName('label'),sexDom = _this.qq('op_zx_illness1_sex'),ageDom = _this.qq('op_zx_illness1_age'),signDom = _this.qq('op_zx_illness1_sign'),infoDom = _this.qq('op_zx_illness1_info'),sexInput = sexDom.getElementsByTagName('input'),ageInput = ageDom.getElementsByTagName('input'),sexlabel = sexDom.getElementsByTagName('label'),agelabel = ageDom.getElementsByTagName('label'),no = _this.qq('op_zx_illne{%*i*%}ss1_no'),bad = _this.qq('op_zx_illness1_bad'),mainlink = _this.qq('op_zx_illness1_mainlink'),sex = 0, age = 0, sing = [];if (_this.data.sex != '') {sex = _this.data.sex;}if (_this.data.age != '') {age = _this.data.age;}T.each(sexDom.getElementsByTagName('input'), function(el){T.event.on(el, 'click', function(){sex = el.value;getData();tomid();if(sex == '1'){if (ageInput[3]) {ageInput[3].disabled=true;}if (ageInput[4]) {ageInput[4].disabled=true; }if (agelabel[3]) {agelabel[3].style.color='gray';{%*i*%} }if (agelabel[4]) {agelabel[4].style.color='gray'; } }else{for(var i=0;i<ageInput.length;i++){if (ageInput[i]) {ageInput[i].disabled=false;}if (agelabel[i]) {agelabel[i].style.color='#000';}}}});});T.each(ageDom.getElementsByTagName('input'), function(el){T.event.on(el, 'click', function(){age = el.value;getData();tomid();if( (age == '1' || age == '6') && sexInput[1]){sexInput[1].disabled=true; sexlabel[1].style.color='gray'; }else{for(var i=0;i<sexInput.length;i++){if (ageInput[i]) {sexInput[i{%*i*%}].disabled=false;sexlabel[i].style.color='#000';}}}});});T.each(signDom.getElementsByTagName('input'), function(el){T.event.on(el, 'click', function(){if (el.getAttribute('data-flag') == 1) {el.setAttribute('data-flag', 0);} else {el.setAttribute('data-flag', 1);}getData();tomid();});});function getData(){var url = "http://zhidao.baidu.com/search/api/symptom?query=#{0}&tosymptom=1&ie=utf-8&symptom_query=#{1}&sex=#{2}&grouptype=#{3}&t=#{5}",signStr = getSign().join('_'),height = getHeight();T.sio{%*i*%}.callByServer(T.format(url,encodeURIComponent(_this.data.originQuery), encodeURIComponent(signStr),encodeURIComponent(sex),encodeURIComponent(age), _this.data.srcid, (new Date().getTime())), function(data){if (data.data[0] && data.data[0].result) {show(infoDom);hide(no);hide(bad);infoDom.innerHTML = buildHTML(data.data[0].result);T.event.on(_this.qq('op_zx_illness1_morelink'), 'click', tomid);} else {hide(infoDom);hide(bad); show(no, height);}},{'queryField':'cb','charset':'utf-8','timeOut':6000{%*i*%},'onfailure':function(){show(bad, height);hide(infoDom);hide(no);}});}function buildHTML(data){var len = data.length,html = [];for(var i = 0; i < len && i < 3; i++) {html = html.concat(['<div><span class="op_zx_illness1_infotitle"><a class="op_zx_illness1_infoB" hidefocus="true" target="_blank" href="',data[i].loc,'" title="',data[i].title,'">',hilight(data[i].title),'</a></span><span class="op_zx_illness1_infosign">症状：',hilight(data[i].tag),'</span><span class="op_zx_illness1_site"><a target="_{%*i*%}blank" hidefocus="true" href="',data[i].from?data[i].from:'http://www.haodf.com/','">',data[i].fromsite?data[i].fromsite:'好大夫在线','</a></span></div>']);}html.push('<div><a class="op_zx_illness1_morelink" target="_blank" href="javascript:;">查看更多相关结果<b>&gt;&gt;</b></a></div>');return html.join('');}T.event.on(bad.getElementsByTagName('a')[0], 'click', function(){getData();});function getSign(){sign = [];T.each(signDom.getElementsByTagName('input'), function(el){if (el.getAttribute('data-flag') == 1{%*i*%}) {sign.push(el.getAttribute('data-key'));}});return sign;}T.each(label, function(el){T.event.on(el, 'click', function(){modSelect(el);}); });function modSelect(el){var pre = el.previousSibling;pre.click();}function getHeight(){return Math.max.apply(null,[infoDom.offsetHeight, no.offsetHeight, bad.offsetHeight]) - 1;};function show(el, height){if (height) {el.style.height = height + 'px';}el.style.display = '';}function hide(el){el.style.display = 'none';}function hilight(str){var len = sign.len{%*i*%}gth;for (var i = 0; i < len; i++) {str = str.replace(sign[i], '<em>' + sign[i] + '</em>')}return str;}function tomid(){var url = 'http://zhidao.baidu.com/search?rn=10&pn=0&fr=ps&ie=utf-8&tosymptom=1&word=' + encodeURIComponent(_this.data.originQuery) + '&grouptype=' + encodeURIComponent(age) + '&sex=' + encodeURIComponent(sex) + '&symptom_query=' + encodeURIComponent(getSign().join('_'));mainlink.href = url;var morelink = _this.qq('op_zx_illness1_morelink');if (morelink) {morelink.href = url;}}t{%*i*%}omid();});</script>{%$FE_GBVAR.wrapper_suffix%}{%/block%}