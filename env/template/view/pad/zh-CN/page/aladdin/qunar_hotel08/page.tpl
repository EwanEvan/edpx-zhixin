{%extends 'c_base.tpl'%} {%block name='data_modifier'%} {%$escaped_tpl="{%basename($smarty.current_dir)%}"%}{%/block%}{%block name="title"%}<style type="text/css">{%fe_fn_c_css css='btn'%}{%fe_fn_c_css css='input'%}{%fe_fn_c_css css='img'%}.op-qunar_hotel08-header-title{color:#00c}.op-qunar_hotel08-header-title .op-qunar_hotel08-icon-qunar{display:inline-block;vertical-align:text-bottom;font-style:normal;overflow:hidden;width:16px;height:16px;background:url(http://bcscdn.baidu.com/fcnp-ip/1013/pic/283772069bc05b531cbb6d45cf2b91a1.png) no-repeat left top}.op-qunar_hotel08-footersafe{color:#4bad37;font-weight:bold}.op-qunar_hotel08-input{float:left;display:inline}.op-qunar_hotel08-form{padding-bottom:10px;border-bottom:1px solid #ea{%*i*%}eaea}.op-qunar_hotel08-form .op-qunar_hotel08-cityrow{width:178px}.op-qunar_hotel08-form .op-qunar_hotel08-queryrow{width:398px}.op-qunar_hotel08-form .op-qunar_hotel08-queryrow input{width:214px}.op-qunar_hotel08-hotcity{font-size:.93em;position:absolute;left:-9999px;top:-9999px;border:1px solid #d0d0d0;color:#666;background:#fff;width:300px;z-index:2;*zoom:1;padding-bottom:5px}.op-qunar_hotel08-hotcity h4{border-bottom:1px solid #d0d0d0;color:#000;background:#fff;line-height:1.87em;height:1.87{%*i*%}em;margin:0 10px;font-weight:400}.op-qunar_hotel08-hotcity .op-qunar_hotel08-hotcitytitle{color:#666}.op-qunar_hotel08-hotcity .op-qunar_hotel08-hotcitycount{color:#000}.op-qunar_hotel08-hotcity ul{*zoom:1;padding:5px 0 0 0}.op-qunar_hotel08-hotcity ul:before,.op-qunar_hotel08-hotcity ul:after{content:"";display:table}.op-qunar_hotel08-hotcity ul:after{clear:both}.op-qunar_hotel08-hotcity li{float:left;width:20%;height:1.54em;line-height:1.54em}.op-qunar_hotel08-hotcity a{display:block;text-alig{%*i*%}n:left;text-decoration:none;padding-left:10px}.op-qunar_hotel08-hotcity a:visited{color:#00c}.op-qunar_hotel08-hotcity a:link{color:#00c}.op-qunar_hotel08-hotcity a:hover{color:#00c;background-color:#f5f5f5;text-decoration:underline}.op-qunar_hotel08-hotcity a:active{color:#00c}.op-qunar_hotel08-hotkey{font-size:.93em;background:none repeat scroll 0 0 #fff;border:1px solid #d0d0d0;color:#666;left:-9999px;position:absolute;top:-9999px;z-index:2}.op-qunar_hotel08-hotkey .showblock{background:none {%*i*%}repeat scroll 0 0 #fff;line-height:1.54em;margin:0;padding:5px 10px;width:275px}.op-qunar_hotel08-hotkey .showblock b.oymTitle{display:block;font-weight:400;color:#333}.op-qunar_hotel08-hotkey .showblock p{border-bottom:1px solid #e3e3e3;margin-bottom:5px;padding-bottom:5px;word-spacing:12px}.op-qunar_hotel08-hotkey .showblock p.last{border-bottom:0 none;margin-bottom:0;padding-bottom:0}.op-qunar_hotel08-hotkey .showblock a{color:#00c;cursor:pointer;white-space:nowrap}.op-qunar_hotel08-hotkey .s{%*i*%}howblock a:hover{color:#00c;text-decoration:underline}.op-qunar_hotel08-hotkey b{background:0;cursor:default;float:none;height:100%;width:100%}.op-qunar_hotel08-placeholder{padding:0 9px;width:212px;height:2em;line-height:2em;color:#ccc;position:absolute;top:-9999px;left:-9999px}.op-qunar_hotel08-find{height:1.73em;line-height:1.73em}.op-qunar_hotel08-find a:hover{text-decoration:none}.op-qunar_hotel08-find .op-qunar_hotel08-nolimit{float:left;padding:0;margin:0}.op-qunar_hotel08-find-price{padd{%*i*%}ing-top:5px}.op-qunar_hotel08-find ul{float:right;height:1.73em;width:468px;overflow:hidden}.op-qunar_hotel08-find span{float:left;margin-right:0;color:#666}.op-qunar_hotel08-find li{float:left;white-space:nowrap;margin-right:6px;*margin-right:4px}.op-qunar_hotel08-find li a,.op-qunar_hotel08-find .op-qunar_hotel08-nolimit a{display:inline-block;color:#00c;text-decoration:none;padding:0 4px;height:1.2em;line-height:1.2em;margin:4px 0}.op-qunar_hotel08-find .op-qunar_hotel08-active a{color:#fff;t{%*i*%}ext-decoration:none;background-color:#388bff}.op-qunar_hotel08-find .op-qunar_hotel08-active a:hover{text-decoration:none;background-color:#388bff}.op-qunar_hotel08-find .op-qunar_hotel08-disabled a{text-decoration:none;color:#666;cursor:default}.op-qunar_hotel08-find .op-qunar_hotel08-disabled a:hover{text-decoration:none;color:#666;cursor:default}.op-qunar_hotel08-find .op-qunar_hotel08-filtermore{float:right;position:relative}.op-qunar_hotel08-filtermorectn{border:1px solid #eaeaea}.op-qunar_{%*i*%}hotel08-filtermorectn .op-qunar_hotel08-filtermoreleft{float:left}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright{float:right;width:442px;padding:3px 10px}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermore-moretype{background-color:#fafafa;width:53px;height:2em;line-height:2em;color:#666;border-top:1px solid #eaeaea;border-right:1px solid #eaeaea;text-align:center}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreleft .op-qunar_hotel08-active{background-colo{%*i*%}r:#fff;border-right:0}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermore-moretype a{color:#666;text-decoration:none}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreleft .op-qunar_hotel08-filtermore-noborder{border-top:0}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright li{float:left;margin-right:10px;line-height:1.54em;height:1.54em;white-space:nowrap}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright a{color:#4242d3;text-decoration:none;displ{%*i*%}ay:inline-block;padding:0 4px;height:1.06em;line-height:1.06em;margin:4px 0}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright a:hover{text-decoration:underline}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright .op-qunar_hotel08-active a{color:#fff;text-decoration:none;background-color:#388bff}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright .op-qunar_hotel08-active a:hover{text-decoration:none}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filt{%*i*%}ermoreright .op-qunar_hotel08-disabled a{text-decoration:none;color:#666;cursor:default}.op-qunar_hotel08-filtermorectn .op-qunar_hotel08-filtermoreright .op-qunar_hotel08-disabled a:hover{text-decoration:none;color:#666;cursor:default}.op-qunar_hotel08-clearfix:after{clear:both;display:block;height:0;visibility:hidden;content:"."}.op-qunar_hotel08-clearfix{zoom:1}.op-qunar_hotel08-title{float:left;height:2em;line-height:2em}.op-qunar_hotel08-querybtn{float:right}.op-qunar_hotel08-hide{display:n{%*i*%}one}.op-qunar_hotel08-b_hotelSort{background:#fafafa;color:#000;height:1.87em;border-bottom:1px solid #d9d9d9}.op-qunar_hotel08-b_hotelSort .op-qunar_hotel08-b_hotelSort_lf{float:left}.op-qunar_hotel08-b_hotelSort_lf .op-qunar_hotel08-allhotels{float:left;color:#666;padding:3px 0 0 10px;height:1.54em;line-height:1.54em}.op-qunar_hotel08-hotels{padding:10px 0 0 0;height:3.67em}.op-qunar_hotel08-hotels0{padding:10px 0 0 0;_padding:10px 0 0 0}.op-qunar_hotel08-star1{width:11px}.op-qunar_hotel08-sta{%*i*%}r2{width:23px}.op-qunar_hotel08-star3{width:35px}.op-qunar_hotel08-star4{width:47px}.op-qunar_hotel08-star5{width:59px}.op-qunar_hotel08-hotelimage img{height:55px;color:#00c;vertical-align:middle}.op-qunar_hotel08-hotels img{margin-top:3px;_margin-top:0}.op-qunar_hotel08-hotelintro a{color:#00c;text-decoration:none}.op-qunar_hotel08-hotelintro a:hover{color:#00c;text-decoration:underline}.op-qunar_hotel08-hotelintro .op-qunar_hotel08-hoteldangci{color:#000;padding-right:14px}.op-qunar_hotel08-h{%*i*%}otelintro p{color:#000;height:18px;line-height:18px;overflow:hidden}.op-qunar_hotel08-hotelintro b{color:#6b6b6b}.op-qunar_hotel08-hotelintro .op-qunar_hotel08-score{padding-right:7px}.op-qunar_hotel08-hotelreview{color:#00c}.op-qunar_hotel08-hotelreview p{height:18px;line-height:18px}.op-qunar_hotel08-hotelreview a{color:#00c;text-decoration:none}.op-qunar_hotel08-hotelreview a:hover{color:#00c;text-decoration:underline}.op-qunar_hotel08-hotelreview .op-qunar_hotel08-sellnum{color:#666}.op-quna{%*i*%}r_hotel08-hotellook a{color:#00c;text-decoration:none}.op-qunar_hotel08-hotellook a:hover{color:#00c;text-decoration:underline}.op-qunar_hotel08-hotellook p{height:18px;line-height:18px;text-align:right;color:#666}.op-qunar_hotel08-hotellook .op-qunar_hotel08-hotelprice a{color:#ff8315}.op-qunar_hotel08-more{border-top:1px solid #eaeaea;line-height:16px;height:16px;padding:9px 0 0;text-align:center;margin-top:13px}.op-qunar_hotel08-more a{color:#00c;text-decoration:none}.op-qunar_hotel08-more a:{%*i*%}hover{color:#00c;text-decoration:underline}.op-qunar_hotel08-nohotels{padding-top:10px}.op-qunar_hotel08-nohotels span{height:23px;line-height:23px;width:308px}.op-qunar_hotel08-nohotels p{padding-left:10px}.op-qunar_hotel08-nohotelsfilter{color:#666}.op-qunar_hotel08-nohotelstips{color:#c2c2c2}.op-qunar_hotel08-random{position:absolute;top:-9999px;left:-9999px}</style><h3 class="t c-gap-bottom-small"> <a class="op-{%$escaped_tpl%}-header-title" target="_blank" href="{%$tplData.url%}"><span class="c-gap-icon-right-small op-{%$escaped_tpl%}-icon-qunar"></span>{%$tplData.title|limitlen:56|highlight:0%}</a> </h3>{%/block%}{%block name='foot'%}<div class="c-gap-top-small">{%fe_fn_c_showurl%}</div>{%/block%}{%block name='content'%}{%$qunarurltemp="?"|explode:$tplData.url%}{%$escaped_qunarurl=$qunarurltemp[0]%}{%$escaped_qhfptemp="&"|explode:$tplData.url%}{%$escaped_qhfp="{%$escaped_qhfptemp[1]%}&queryid={%$tplData.queryid%}"%}{%if $tplData.hotellinks%} {%if $tplData.hotellinks|@count < 1%} {%$status=0%} {%else%} {%$status=1%} {%/if%}{%else%}{%$status=0%}{%/if%}{%$escaped_fromparams=['8'=>'poi', '9'=>'brd', '10'=>'typ']%}{%$escaped_fromparam=$escaped_fromparams[$tplData.cardtype]%}<div class="c-border">{%$escaped_random="{%$smarty.now%}{%math equation=rand(100, 999)%}"%}<img class="op-{%$escaped_tpl%}-random" src="http://hotel.qunar.com/zhixin_trans.gif?type={%$tplData.cardtype%}&_t={%$escaped_random%}&key={%urlencode($tplData.key)%}&srcid={%$tplData.StdStg%}&queryid={%$tplData.queryid%}&source=pc"/><div class="op-{%$escaped_tpl%}-container op-{%$escaped_tpl%}-form"> <div class="c-row"> <div class="c-span8 op-{%$escaped_tpl%}-cityrow"> <span class="op-{%$escaped_tpl%}-title c-gap-right">目的地</span> <div class="op-{%$escaped_tpl%}-input "> <input class="c-input c-input-mini op-{%$escaped_tpl%}-city-input" autocomplete="off" type="text" maxlength="50" value="{%if $tplData.curcity%}{%$tplData.curcity|escape:'html'%}{%elseif $tplData.ipcity%}{%$tplData.ipcity|escape:'html'%}{%else%}北京{%/if%}" /> <div class="op-{%$escaped_tpl%}-hotcity" data-click="{fm:'beha'}"> <h4>国内城市top<em class="c-gap-left-small c-gap-right op-{%$escaped_tpl%}-hotcitycount">{%$tplData.hotcity|@count%}</em><span class="c-gap-left op-{%$escaped_tpl%}-hotcitytitle">更多城市可直接输入搜索</span></h4> <ul> {%foreach $tplData.hotcity as $item%} <li><a data-city="{%$item['name']|escape:'html'%}" href="return false;">{%$item['name']|escape:'html'%}</a></li> {%/foreach%} </ul> </div> </div> </div> <div class="c-span16 c-span-last op-{%$escaped_tpl%}-queryrow"> <span class="op-{%$escaped_tpl%}-title c-gap-right">关键词</span> <div class="op-{%$escaped_tpl%}-input "> <input autocomplete="off" class="op-{%$escaped_tpl%}-keyword-input c-input c-input10" type="text" maxlength="50" value="{%$tplData.queryForRequest|escape%}"/> <div class="op-{%$escaped_tpl%}-placeholder" data-click="{fm:'beha'}">酒店名、地标、商圈可组合搜索</div> <div class="op-{%$escaped_tpl%}-hotkey" data-click="{fm:'beha'}"></div> </div> <a class="op-{%$escaped_tpl%}-querybtn op-{%$escaped_tpl%}-jsquerybtn c-btn c-btn-primary c-btn-small OP_LOG_BTN" href="http://tuan.hotel.qunar.com/search.jsp" target="_blank">快速查询</a> </div> </div></div><div class="op-{%$escaped_tpl%}-container"> {%if $tplData.pricelinks and $tplData.pricelinks|@count>0%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div data-click="{fm:'beha'}" class="op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jspricepanel {%$escaped_hide%}"> <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-find-price op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsfilterPanel"> <span>价格范围：</span> <div class="op-{%$escaped_tpl%}-nolimit op-{%$escaped_tpl%}-active op-{%$escaped_tpl%}-jsnolimit"><a href="#" onclick="return false;">不限</a></div> <ul class="op-{%$escaped_tpl%}-jsfilter"> {%foreach $tplData.pricelinks as $link%} {%$escaped_name=str_replace("%26","&","{%$link.name|escape%}")%} <li><a href="#" onclick="return false;" data-count="9999" data-filter="{%$link.value|escape%}" data-name="{%$escaped_name|escape%}">{%$escaped_name%}</a></li> {%/foreach%} </ul> </div> </div> {%if $tplData.dangcilinks and $tplData.dangcilinks|@count>0%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div data-click="{fm:'beha'}" class="op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsdangcipanel {%$escaped_hide%}"> <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsfilterPanel"> <span>酒店级别：</span> <div class="op-{%$escaped_tpl%}-nolimit op-{%$escaped_tpl%}-active op-{%$escaped_tpl%}-jsnolimit"><a href="#" onclick="return false;">不限</a></div> <ul class="op-{%$escaped_tpl%}-jsfilter"> {%foreach $tplData.dangcilinks as $link2%} <li class="{%if $link2.count == 0%}op-{%$escaped_tpl%}-disabled{%/if%}"><a href="#" onclick="return false;" data-count="{%$link2.count|escape%}" data-filter="{%$link2.value|escape%}" data-name="{%$link2.name|escape%}">{%$link2.name|escape%}</a></li> {%/foreach%} </ul> </div> </div> {%if $tplData.brandlinks and $tplData.brandlinks|@count>0%} {%if $tplData.cardtype == 8 || $tplData.cardtype == 9 %} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div data-click="{fm:'beha'}" class="op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsbrandpanel {%$escaped_hide%}"> <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsfilterPanel"> <span>连锁品牌：</span> <div class="op-{%$escaped_tpl%}-nolimit op-{%$escaped_tpl%}-active op-{%$escaped_tpl%}-jsnolimit"><a href="#" onclick="return false;">不限</a></div> <ul class="op-{%$escaped_tpl%}-jsfilter"> {%foreach $tplData.brandlinks as $link1%} <li class="{%if $link1.count == 0%}op-{%$escaped_tpl%}-disabled{%/if%}"><a href="#" onclick="return false;" data-count="{%$link1.count|escape%}" data-filter="{%$link1.value|escape%}" data-name="{%$link1.name|escape%}">{%$link1.name|escape%}</a></li> {%/foreach%} </ul> </div> </div> {%if $tplData.hoteltypelinks and $tplData.hoteltypelinks|@count>0%} {%if $tplData.cardtype == 10%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div data-click="{fm:'beha'}" class="op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jshoteltype {%$escaped_hide%}"> <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsfilterPanel"> <span>酒店类型：</span> <div class="op-{%$escaped_tpl%}-nolimit op-{%$escaped_tpl%}-active op-{%$escaped_tpl%}-jsnolimit"><a href="#" onclick="return false;">不限</a></div> <ul class="op-{%$escaped_tpl%}-jsfilter"> {%foreach $tplData.hoteltypelinks as $link1%} <li class="{%if $link1.count == 0%}op-{%$escaped_tpl%}-disabled{%/if%}"><a href="#" onclick="return false;" data-count="{%$link1.count|escape%}" data-filter="{%$link1.value|escape%}" data-name="{%$link1.name|escape%}">{%$link1.name|escape%}</a></li> {%/foreach%} </ul> </div> </div> {%if $tplData.facilitylinks and $tplData.facilitylinks|@count>0%} {%if $tplData.cardtype == 10%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div data-click="{fm:'beha'}" class="op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsfacility {%$escaped_hide%}"> <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-clearfix op-{%$escaped_tpl%}-jsfilterPanel"> <span>入住要求：</span> <div class="op-{%$escaped_tpl%}-nolimit op-{%$escaped_tpl%}-active op-{%$escaped_tpl%}-jsnolimit"><a href="#" onclick="return false;">不限</a></div> <ul class="op-{%$escaped_tpl%}-jsfilter"> {%foreach $tplData.facilitylinks as $link%} <li class="{%if $link.count == 0%}op-{%$escaped_tpl%}-disabled{%/if%}"><a href="#" onclick="return false;" data-count="{%$link.count|escape%}" data-filter="{%$link.value|escape%}" data-name="{%$link.name|escape%}">{%$link.name|escape%}</a></li> {%/foreach%} </ul> </div> </div> <div class="op-{%$escaped_tpl%}-b_hotelSort c-gap-top-small op-{%$escaped_tpl%}-clearfix"> <div class="op-{%$escaped_tpl%}-b_hotelSort_lf" data-click="{fm:'beha'}"> <span class="op-{%$escaped_tpl%}-allhotels op-{%$escaped_tpl%}-jshotelcount"></span> </div> </div > {%$starsarray=['', '国家旅游局评定为一星级','国家旅游局评定为二星级','国家旅游局评定为三星级','国家旅游局评定为四星级','国家旅游局评定为五星级']%} <div class="op-{%$escaped_tpl%}-jshotels"> {%if $status eq 1%} {%foreach $tplData.hotellinks as $hotel%} {%if $hotel@index>2%} {%break%}{%/if%} {%$temp="_"|explode:$hotel.hotelseq%} {%$len = $temp|@count%} {%$cityurl=""%} {%foreach $temp as $escaped_t%} {%if $escaped_t@index >= ($len-1)%}{%break%}{%/if%} {%$cityurl="{%$cityurl%}{%$escaped_t%}"%} {%if $escaped_t@index < ($len-2)%}{%$cityurl="{%$cityurl%}_"%}{%/if%} {%/foreach%} {%$escaped_seq="{%$temp[$len-1]%}"%} {%$escaped_url="http://tuan.hotel.qunar.com/city/{%$cityurl%}/"%} <div class="c-row op-{%$escaped_tpl%}-hotels op-{%$escaped_tpl%}-hotels{%$hotel@index%}"> {%$escaped_hotelurlimage= "{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_{%$escaped_fromparam%}_image_pad&{%$escaped_qhfp%}"%} <div class="c-span4 op-{%$escaped_tpl%}-hotelimage"> <a target="_blank" href="{%$escaped_hotelurlimage%}"><img class="c-img c-img4" src="{%$hotel.img|escape:'html'%}"/></a> </div> <div class="c-span10 op-{%$escaped_tpl%}-hotelintro"> <p class="op-{%$escaped_tpl%}-hoteltitle"> {%$hoteltitlesub = $hotel.hotelname|limitlen:32%} {%$escaped_hotelurltitle= "{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_{%$escaped_fromparam%}_name_pad&{%$escaped_qhfp%}"%} <a href="{%$escaped_hotelurltitle%}" target="_blank" {%if $hoteltitlesub != $hotel.hotelname%}title="{%$hotel.hotelname|escape%}"{%/if%}>{%$hoteltitlesub|escape%}</a> </p> {%if intval($hotel.star)>0%} {%$escaped_limitlen=18%} {%elseif $hotel.dangci%} {%$escaped_limitlen=20%} {%else%} {%$escaped_limitlen=28%} {%/if%} <p> {%$addresssub = $hotel.address|limitlen:$escaped_limitlen%} {%if intval($hotel.star)>0%}<i class="c-icon c-icon-star c-gap-right-small op-{%$escaped_tpl%}-star{%$hotel.star|escape%}" title="{%$starsarray[$hotel.star]|escape%}"></i>{%elseif $hotel.dangci%}<span class="op-{%$escaped_tpl%}-hoteldangci" title="去哪儿网用户评定为{%$hotel.dangci|escape%}酒店">{%$hotel.dangci|escape%}</span>{%/if%}{%if $hotel.address%}<span {%if $addresssub != $hotel.address%}title="位于{%$hotel.address|escape%}"{%/if%}>位于{%$addresssub|escape%}</span>{%/if%} </p> {%$escaped_hotelurlscore= "{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_{%$escaped_fromparam%}_score_pad&{%$escaped_qhfp%}"%} {%$escaped_hotelurlcomment= "{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_{%$escaped_fromparam%}_cmt_pad&{%$escaped_qhfp%}#scroll=comment"%} <p> {%if floatval($hotel.score)>0%}<a href="{%$escaped_hotelurlscore%}" target="_blank" class="op-{%$escaped_tpl%}-score">{%$hotel.score|string_format:"%.1f"|escape%}/5分</a>{%/if%}{%if $hotel.totalreview> 0%}<a href="{%$escaped_hotelurlcomment%}" target="_blank">{%$hotel.totalreview|escape%}条点评</a>{%/if%} </p> </div> <div class="c-span5 op-{%$escaped_tpl%}-hotelreview"> <p>&nbsp;</p> {%$escaped_tuanrooms= "{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_{%$escaped_fromparam%}_count_pad&{%$escaped_qhfp%}"%} <p>{%if $hotel.tuanroomsnum>0%}<a class="op-{%$escaped_tpl%}-tuanrooms" href="{%$escaped_tuanrooms%}" target="_blank">共{%$hotel.tuanroomsnum|escape%}种团品</a>{%/if%}</p> <p>{%if $hotel.sellnum> 0%}<span class="op-{%$escaped_tpl%}-sellnum">已售出{%$hotel.sellnum|escape%}份</span>{%/if%}</p> </div> <div class="c-span5 c-span-last op-{%$escaped_tpl%}-hotellook"> {%$escaped_priceurl= "{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_{%$escaped_fromparam%}_price_pad&{%$escaped_qhfp%}"%} <p class="op-{%$escaped_tpl%}-hotelprice">{%if $hotel.price>=0%}<a href="{%$escaped_priceurl%}" target="_blank"><b>&yen;&nbsp;{%$hotel.price|escape%}</b>起</a>{%/if%}</p> <p><span>{%if $hotel.discount>0%}{%$hotel.discount|escape%}折{%/if%}</span>&nbsp;<del>{%if $hotel.originalprice>=0%}<b>&yen;&nbsp;{%$hotel.originalprice|escape%}</b>{%/if%}</del></p> </div> </div> {%/foreach%} {%/if%} </div> <p class="op-{%$escaped_tpl%}-more c-gap-top op-{%$escaped_tpl%}-jshotelmore {%if $tplData.hotelcount <= 3%}op-{%$escaped_tpl%}-hide{%/if%}"><a href="http://tuan.hotel.qunar.com/search.jsp" target="_blank">点击查看更多酒店信息&gt;&gt;</a></p> {%if $status eq 0%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div class="op-{%$escaped_tpl%}-jsnohotels op-{%$escaped_tpl%}-nohotels {%$escaped_hide%}"> <p class="op-{%$escaped_tpl%}-nohotelsfilter op-{%$escaped_tpl%}-jsnohotelsfilter"></p> <p class="op-{%$escaped_tpl%}-nohotelstips"><span>看看是否输入的文字有误，或减少筛选的条件再试试</span></p> </div></div></div><script >
A.setup({
    TPL_NAME: '{%$escaped_tpl%}',
    QHFP: '{%$escaped_qhfp%}',
    FILTERSELECTED: {%json_encode($tplData.selected)%},
    BRANDLINKS: {%json_encode($tplData.brandlinks)%},
    PRICELINKS: {%json_encode($tplData.pricelinks)%},
    DANGCILINKS: {%json_encode($tplData.dangcilinks)%},
    QUERYFORREQUEST: '{%$tplData.queryForRequest%}',
    HOTELCOUNT: '{%$tplData.hotellinks|@count%}',
    HOTELTYPELINKS: {%json_encode($tplData.hoteltypelinks)%},
    FACILITYLINKS: {%json_encode($tplData.facilitylinks)%},
    CITY_NAME: "{%if $tplData.curcity%}{%$tplData.curcity|escape:'html'%}{%elseif $tplData.ipcity%}{%$tplData.ipcity|escape:'html'%}{%else%}北京{%/if%}",
    ORIGINAL_QUERY: "{%$tplData.key|escape%}",
    IP_CITY: '{%$tplData.ipcity|escape%}',
    FROM_PARAM: '{%$escaped_fromparam%}',
    CARD_TYPE: '{%$tplData.cardtype%}',
    QUERYID: "{%$tplData.queryid%}",
    HOTELSCOUNT: "{%$tplData.hotelcount|escape%}"
});
</script><script data-merge>A.setup(function(){function Popup(a){a=a||{},a.dom&&a.offsetdom&&(this.offsetdom=a.offsetdom,this.display=a.display||"none",this.dom=a.dom,this.url=a.url,this.success=a.success,this.error=a.error,this.cache={},this.params={},a.html&&(a.dom.innerHTML=a.html),"none"!==this.display&&this.show())}function firstSelected(){var b,c,d,e,a=card.data.FILTERSELECTED||[];for(pricePanel&&pricePanel.setData(util.extend({},pricePanel.getData(),{tplData:{value:card.data.PRICELINKS}}){%*i*%}),rankPanel&&rankPanel.setData(util.extend({},rankPanel.getData(),{tplData:{value:card.data.DANGCILINKS}})),brandPanel&&brandPanel.setData(util.extend({},brandPanel.getData(),{tplData:{value:card.data.BRANDLINKS}})),hoteltypePanel&&hoteltypePanel.setData(util.extend({},hoteltypePanel.getData(),{tplData:{value:card.data.HOTELTYPELINKS}})),facilityPanel&&facilityPanel.setData(util.extend({},facilityPanel.getData(),{tplData:{value:card.data.FACILITYLINKS}})),b={},c={},d=0;d<a.length;d++)b[a[d].type{%*i*%}]||(b[a[d].type]=[],c[a[d].type]=[]),b[a[d].type].push(a[d].value.replace(/%26/g,"&")||""),c[a[d].type].push(a[d].name.replace(/%26/g,"&")||"");for(e in b)if(b.hasOwnProperty(e))switch(e){case"price":1===b[e].length&&(pricePanel&&pricePanel.setFilters(b[e]),pricePanel&&pricePanel.setFilterNames(c[e]),pricePanel&&pricePanel.update()),pricePanel.ishide=!1,pricePanel.show();break;case"grade":1===b[e].length&&(rankPanel&&rankPanel.setFilters(b[e]),rankPanel&&rankPanel.setFilterNames(c[e]),rankPanel&{%*i*%}&rankPanel.update()),rankPanel.ishide=!1,rankPanel.show();break;case"brand":1===b[e].length&&(brandPanel&&brandPanel.setFilters(b[e]),brandPanel&&brandPanel.setFilterNames(c[e]),brandPanel&&brandPanel.update()),brandPanel.ishide=!1,brandPanel.show();break;case"hoteltype":1===b[e].length&&(hoteltypePanel&&hoteltypePanel.setFilters(b[e]),hoteltypePanel&&hoteltypePanel.setFilterNames(c[e]),hoteltypePanel&&hoteltypePanel.update()),hoteltypePanel.ishide=!1,hoteltypePanel.show();break;case"facility":1{%*i*%}===b[e].length&&(facilityPanel&&facilityPanel.setFilters(b[e]),facilityPanel&&facilityPanel.setFilterNames(c[e]),facilityPanel&&facilityPanel.update()),facilityPanel.ishide=!1,facilityPanel.show()}}var morehoteldome,listPanel,tempScrollTop,cityInputEl,hotCityLayerEl,keyInputEl,hotKeyLayerEl,placeholderEl,hotCity,placeholder,hotKey,documentClickHandler,windowBlurHandler,querybtn,searchdom,height,FiltersContainer,MoreSelectFilters,FilterOptionContext,FilterOptionCheckout,PriceRegion,HotelRank,Hote{%*i*%}lBrand,HotelType,Facility,SingleSelectFilters,FilterManager,InfoLoader,pricePanel,rankPanel,brandPanel,hoteltypePanel,facilityPanel,infoLoader,filterManager,card=this,domainurl="http://www.baidu.com/qunarui/hotel",ajaxFinished=!1,tipArray=[card.data.CITY_NAME,card.data.QUERYFORREQUEST],util=function(a){var d,b="op-"+a.data.TPL_NAME+"-",c={};return d={isIE6:function(){return/msie 6/i.test(navigator.userAgent)},isIE7:function(){return/msie 7/i.test(navigator.userAgent)},getClass:function(a){return{%*i*%} b+a},getTags:function(a,b){return a?a.getElementsByTagName(b)||[]:[]},getElementByClassName:function(a,b){return b?$(b).find("."+a)[0]:$("."+a)[0]},getChildrens:function(a){return a&&a.childNodes||[]},hasClass:function(a,b){return $(a).hasClass(b)},addClass:function(a,b){$(a).addClass(b)},removeClass:function(a,b){$(a).removeClass(b)},removeAllClass:function(a){a.className=""},getOffset:function(a){var b=a.parentNode,c=$(b).offset();return c},on:function(a,b,c){$(a).bind(b,c)},one:function(a,b,{%*i*%}c){$(a).one(b,c)},unbind:function(a,b,c){$(a).unbind(b,c)},jsonToQuery:function(a){var b=[],c=null;return $.each(a,function(a,d){c=/[^\x00-\xFF]/.test(d)?encodeURIComponent(d):d,b.push(a+"="+c)}),b.join("&")},ajax:function(a,b,c,d){d=d||function(){},$.ajax({type:"POST",url:a,data:util.jsonToQuery(b),success:function(a){c&&c(a)},error:function(a){d(a)}})},jsonp:function(a,b,c,d,e){e=e||function(){},$.ajax({type:"POST",url:a,dataType:"jsonp",jsonp:c||"__jscallback",data:util.jsonToQuery(b),success{%*i*%}:function(a){try{d&&d(a)}catch(b){return e(),void 0}},error:function(a){e(a)}})},extend:function(a,b,c){var d=null;for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);for(d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);return a},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},bind:function(a,b){c[a]||(c[a]=[]),c[a].push(b)},trigger:function(b){var f,g,h,d=arguments||[],e=c[b]||[];if(0!==e.length){for(f=[],g=1;g<d.length;g++)f.push(d[g]);for(h=0;h<e.length;h++)e[h].apply(a,f)}},isObjEmpty:function(a){var{%*i*%} c,b=!0;for(c in a)if(a.hasOwnProperty(c)&&"undefined"!=typeof c){b=!1;break}return b},remove:function(a,b){var c,d;if(a instanceof Array&&0!=a.length){for(c=[],d=0;d<a.length;d++)a[d]!=b&&c.push(a[d]);return c}},isExist:function(a,b){if(a instanceof Array&&0!=a.length){for(var c=0;c<a.length;c++)if(a[c]==b)return!0;return!1}},GetZoomFactor:function(){var b,c,d,a=1;return document.body.getBoundingClientRect&&(b=document.body.getBoundingClientRect(),c=b.right-b.left,d=document.body.offsetWidth,a={%*i*%}Math.round(100*(c/d))/100),a},toFixed:function(a,b){var d,c=a;if(a)return b||(b=0),a*=Math.pow(10,b),d=parseInt(a),a=d/Math.pow(10,b),a===parseInt(c)?c+".0":a},format:function(a,b){return $.format(a,b)},subByte:function(a,b,c){return $.subByte(a,b,c)}}}(card);Popup.prototype.render=function(){var a=this.getQuerykey();this.cache[a]?this._callback(1,this.cache[a]):this._getData()},Popup.prototype.show=function(a){var b,c,d;this.dom&&(b=this.offsetdom.offsetHeight,a&&(b=2),c=util.getOffset(this.off{%*i*%}setdom),this.top=c.top+b-1,this.left=c.left,util.isIE7()&&(d=util.GetZoomFactor()||.1,this.top=c.top/d+b-1,this.left=c.left/d),this.dom.style.top=this.top+"px",this.dom.style.left=this.left+"px",this.display="block")},Popup.prototype.hide=function(){this.dom&&(this.dom.style.top="-9999px",this.dom.style.left="-9999px",this.display="none")},Popup.prototype.setQueryParams=function(a){if(a=a||{},a.queryName){var b={};b[a.queryName]=util.trim(a.queryKey),this.params=util.extend({},this.params,b)}},P{%*i*%}opup.prototype.getQueryParams=function(){return this.params||{}},Popup.prototype.clearCache=function(){this.getCacheSize()>20&&(this.cache={})},Popup.prototype.getCacheSize=function(){var b,a=0;for(b in this.cache)this.cache.hasOwnProperty(b)&&a++;return a},Popup.prototype._getData=function(){var a=this;a.onsuccess=function(b){return ajaxFinished=!0,b?(a._callback(1,b),a.clearCache(),a.cache[a.getQuerykey()]=b,void 0):(a._callback(),void 0)},a.onerror=function(b){ajaxFinished=!0,a._callback(0,b){%*i*%}},util.jsonp(this.url,util.extend({},{_t:(new Date).getTime()},this.params),"__jscallback",a.onsuccess,a.onerror)},Popup.prototype.getQuerykey=function(){var b,a="";for(b in this.params)this.params.hasOwnProperty(b)&&(a+=this.params[b]);return a},Popup.prototype._callback=function(a,b){this.dom&&(1===a?this.success&&this.success(b):this.error&&this.error(b))},morehoteldome=util.getElementByClassName(util.getClass("jshotelmore")),listPanel=function(a){var b={},c=["","国家旅游局评定为一星级","国家旅游局评定为二星级","国{%*i*%}家旅游局评定为三星级","国家旅游局评定为四星级","国家旅游局评定为五星级"],d=util.getElementByClassName(util.getClass("jshotels")),e=util.getElementByClassName(util.getClass("jsnohotels")),f=util.getElementByClassName(util.getClass("jsnohotelsfilter")),g=util.getElementByClassName(util.getClass("jshotelcount")),h=util.getClass("hide"),i=function(b){var g,k,l,m,n,o,p,q,t,u,v,w,f=[],i=a.data.TPL_NAME,j=['<div class="c-row op-#{tplname}-hotels op-#{tplname}-hotels#{index}">','<div class="c-span4 op-#{tplname}-hotelimage">','<a targ{%*i*%}et="_blank" href="#{hotelimageurl}"><img class="c-img c-img4" src="#{imageurl}"/></a>',"</div>",'<div class="c-span10 op-#{tplname}-hotelintro">','<p class="op-#{tplname}-hoteltitle">','<a title="#{hoteltitlesource}" href="#{hoteltitleurl}" target="_blank">#{title}</a>',"</p>","<p>#{starHtml}#{dangciHtml}#{addressHtml}</p>",'<p>#{scoreHtml}<a href="#{reviewurl}" target="_blank">#{reviewcount}</a></p>',"</div>",'<div class="c-span5 op-#{tplname}-hotelreview">',"<p>&nbsp;</p>","<p>#{tuanroomsHtml}{%*i*%}</p>",'<p><span class="op-#{tplname}-sellnum">#{sellnumHtml}</span></p>',"</div>",'<div class="c-span5 c-span-last op-#{tplname}-hotellook">','<p class="op-#{tplname}-hotelprice">#{priceHtml}</p>',"<p><span>#{discountHtml}</span>&nbsp;<del>#{originalpriceHtml}</del></p>","</div>","</div>"].join(""),r="",s="";for(g=0;g<b.length;g++)k=b[g].hotelseq.lastIndexOf("_"),m="dt-"+b[g].hotelseq.substring(k+1),l=b[g].hotelseq.substring(0,k),n="http://tuan.hotel.qunar.com/city/"+l+"/"+m,o=b[g].star>0?18:b[g{%*i*%}].dangci?20:28,p=util.subByte(b[g].hotelname,32,"..."),q=util.subByte(b[g].address,o,"..."),r=p===b[g].hotelname?"":b[g].hotelname,s=q===b[g].address?"":"位于"+b[g].address,t=b[g].score>0?util.toFixed(b[g].score,1)+"/5分":"",u=n+"?ex_track=bd_zhixin_hotel_tuan_"+a.data.FROM_PARAM+"_score_pad&"+a.data.QHFP,v=n+"?ex_track=bd_zhixin_hotel_tuan_"+a.data.FROM_PARAM+"_count_pad&"+a.data.QHFP,w=n+"?ex_track=bd_zhixin_hotel_tuan_"+a.data.FROM_PARAM+"_price_pad&"+a.data.QHFP,f.push(util.format(j,{tplname:i,{%*i*%}index:g,hotelimageurl:n+"?ex_track=bd_zhixin_hotel_tuan_"+a.data.FROM_PARAM+"_image_pad&"+a.data.QHFP,imageurl:b[g].img,hoteltitleurl:n+"?ex_track=bd_zhixin_hotel_tuan_"+a.data.FROM_PARAM+"_name_pad&"+a.data.QHFP,hoteltitlesource:r,title:p,starHtml:b[g].star>0?'<i class="c-icon c-icon-star c-gap-right-small op-'+i+"-star"+b[g].star+'"  title="'+c[b[g].star]+'"></i>':"",dangciHtml:!b[g].star&&b[g].dangci?'<span class="op-'+i+'-hoteldangci" title="'+("去哪儿网用户评定为"+b[g].dangci+"酒店")+'">'+b[g].dangci+{%*i*%}"</span>":"",addressHtml:b[g].address?'<span title="'+s+'">位于'+q+"</>":"",scoreHtml:t?'<a class="op-'+i+'-score" href="'+u+'" target="_blank">'+t+"</a>":"",reviewurl:n+"?ex_track=bd_zhixin_hotel_tuan_"+a.data.FROM_PARAM+"_cmt_pad&"+a.data.QHFP+"#scroll=comment",reviewcount:b[g].totalreview>0?b[g].totalreview+"条点评":"",tuanroomsHtml:b[g].tuanroomsnum>0?'<a class="op-'+i+'-tuanrooms" href="'+v+'" target="_blank">共'+b[g].tuanroomsnum+"种团品</a>":"",sellnumHtml:b[g].sellnum>0?"已售出"+b[g].sellnum+"份":"",{%*i*%}discountHtml:b[g].discount>0?util.toFixed(b[g].discount,1)+"折":"",originalpriceHtml:b[g].originalprice>=0?"<b>&yen;&nbsp;"+b[g].originalprice+"</b>":"",priceHtml:b[g].price>=0?'<a href="'+w+'" target="_blank"><b>&yen;'+b[g].price+"</b>起</a>":""}));d.innerHTML=f.join(""),util.addClass(e,h),util.removeClass(d,h)},j=function(a){var b=a&&a.getFilterNames();g.innerHTML="在0家酒店中",f.innerHTML='<span>很抱歉，没有找到与"<em>'+b.join("|")+'</em>"相关的酒店</span>',util.addClass(d,h),util.addClass(morehoteldome,h),util.r{%*i*%}emoveClass(e,h)};return b={render:function(a){var b=function(a){i(a.hotellinks),a.hotelCount>=4?util.removeClass(morehoteldome,h):util.addClass(morehoteldome,h)};b(a)},getFilterTip:j,setHotelsCountTip:function(a){g.innerHTML=a}}}(card),tempScrollTop=0,cityInputEl=util.getElementByClassName(util.getClass("city-input")),hotCityLayerEl=util.getElementByClassName(util.getClass("hotcity")),keyInputEl=util.getElementByClassName(util.getClass("keyword-input")),hotKeyLayerEl=util.getElementByClassName(u{%*i*%}til.getClass("hotkey")),placeholderEl=util.getElementByClassName(util.getClass("placeholder")),hotCity=new Popup({dom:hotCityLayerEl,offsetdom:cityInputEl}),placeholder=new Popup({dom:placeholderEl,offsetdom:keyInputEl}),card.data.QUERYFORREQUEST?placeholder.hide():placeholder.show(!0),hotKey=new Popup({dom:hotKeyLayerEl,offsetdom:keyInputEl,url:domainurl+"/sugg.jsp",success:function(a){if(a&&a.data){hotKey.dom.style.borderWidth="1px",hotKey.dom.innerHTML=a.data.replace(/onmousedown="return sear{%*i*%}chword\(.*\)"/gi,"");var b=util.getElementByClassName("js_cityguide",hotKeyLayerEl);b&&(b.parentNode.style.display="none")}},error:function(){hotKey.dom.innerHTML="",hotKey.dom.style.borderWidth="0px"}}),hotKey.setQueryParams({queryName:"v",queryKey:"1"}),hotKey.setQueryParams({queryName:"queryid",queryKey:card.data.QUERYID}),documentClickHandler=function(){hotCity.hide(),hotKey.hide(),keyInputEl.value||placeholder.show(!0)},util.on(document,"click",documentClickHandler),windowBlurHandler=functi{%*i*%}on(){hotCity.hide(),hotKey.hide(),keyInputEl.value||placeholder.show(!0)},util.on(window,"blur",windowBlurHandler),util.on(cityInputEl,"click",function(a){hotKey.hide(),card._sug&&card._sug.hide(),"block"===hotCity.display?hotCity.hide():hotCity.show(),a.stopPropagation(),a.preventDefault()}),util.on(hotCityLayerEl,"click",function(a){var b,c;a.stopPropagation(),a.preventDefault(),b=a.target||a.srcElement,"A"===b.tagName.toUpperCase()&&(c=b.getAttribute("data-city"),cityInputEl.value!=c&&util.tr{%*i*%}igger("citychanged",c),c&&(card._sug?(card._sug.hide(),card._sug.pick('<span class="js_cityname" data-cityname="'+c+'">'+c+"</span>")):cityInputEl.value=c,hotCity.hide()))}),util.on(keyInputEl,"click",function(a){"block"===hotKey.display?hotKey.hide():(hotKey.setQueryParams({queryName:"city",queryKey:cityInputEl.value}),hotKey.render(),hotKey.show(),hotCity.hide(),placeholder.hide()),a.stopPropagation(),a.preventDefault()}),util.on(hotKeyLayerEl,"click",function(a){var b,c;a.stopPropagation(),a.{%*i*%}preventDefault(),b=a.target||a.srcElement,"A"===b.tagName.toUpperCase()&&(c=util.trim(b.innerHTML),c&&(placeholder.hide(),keyInputEl.value=c,hotKey.hide(),$(window).scrollTop(tempScrollTop)))}),util.on(hotCityLayerEl,"touchmove",function(){cityInputEl.blur()}),util.on(hotKeyLayerEl,"touchmove",function(){keyInputEl.blur()}),util.one(hotKeyLayerEl,"touchstart",function(){tempScrollTop=$(window).scrollTop()}),util.on(placeholderEl,"click",function(a){var b=a.target||a.srcElement;a.stopPropagation({%*i*%}),a.preventDefault(),"DIV"===b.tagName.toUpperCase()&&(keyInputEl.focus(),placeholder.hide(),hotKey.setQueryParams({queryName:"city",queryKey:cityInputEl.value}),hotKey.render(),hotCity.hide(),hotKey.show())}),util.bind("citychanged",function(){}),querybtn=util.getElementByClassName(util.getClass("jsquerybtn")),util.on(querybtn,"click",function(){var b=encodeURIComponent(cityInputEl.value),c=encodeURIComponent(keyInputEl.value),d=card._filterManager.getFilterHashurl();querybtn.href="http://tuan.{%*i*%}hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_"+card.data.FROM_PARAM+"_search_pad&toCity="+b+"&q="+c+"&"+card.data.QHFP+d}),util.on(morehoteldome,"click",function(){var b=encodeURIComponent(cityInputEl.value),c=encodeURIComponent(keyInputEl.value),d=card._filterManager.getFilterHashurl(),e=$(morehoteldome).find("a");e.size()>0&&(e[0].href="http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_"+card.data.FROM_PARAM+"_moreroom_pad&toCity="+b+"&q="+c+"&"+card.data.QHFP+d){%*i*%}}),util.isIE6()&&(searchdom=util.getElementByClassName(util.getClass("jssearch")),searchdom&&(height=searchdom.offsetHeight,height>52&&(searchdom.style.height="52px",searchdom.style.overflow="hidden"))),FiltersContainer=function(a,b,c){var d=this,e=a,f=b||{},g=c||[],h=null,i=null;this.render=function(){},this.hide=function(){e.style.display="none"},this.show=function(){e.style.display="block"},this.setData=function(a){f=a},this.getData=function(){return f},this.setFilters=function(a){h=a},this.g{%*i*%}etFilters=function(){return h||[]},this.setFilterNames=function(a){i=a},this.getFilterNames=function(){return i||[]},this.getListener=function(){return g},this.getWrapElem=function(){return e},this.setListener=function(a){g=a},this.getType=function(){return this.type},this.bindEvent=function(a){if(a instanceof Array&&a.length>0)for(var b=0;b<a.length;b++)!function(){var c=b;util.bind("updateFilter"+d.type,function(){a[c].updateFilter&&a[c].updateFilter(d)})}()}},MoreSelectFilters=function(a,b,c){%*i*%}{var d=this,e=function(){a&&(FiltersContainer.call(d,a,b,c),(util.isObjEmpty(b)||null==b||"undefined"==typeof b)&&d.hide(),d.setFilters([]),d.setFilterNames([]))};e(),this.addFilters=function(a,b){this.setFilters([]),this.setFilterNames([]),this.getFilters().push(a),this.getFilterNames().push(b),util.trigger("updateFilter"+this.type)},this.removeFilters=function(a,b){0!=this.getFilters().length&&(this.setFilters(util.remove(this.getFilters(),a)),this.setFilterNames(util.remove(this.getFilterName{%*i*%}s(),b)),util.trigger("updateFilter"+this.type))},this.removeAllFilters=function(){this.setFilters([]),this.setFilterNames([]),util.trigger("updateFilter"+this.type)},this.updateFilter=function(a){this.setFilters(a.getFilters()),this.setFilterNames(a.getFilterNames()),this.relayout(),this.update()}},FilterOptionContext=function(){this.getFilterOption=function(a,b){return"bgSelect"==a?new FilterOptionBgSelect(b):"checkOut"==a?new FilterOptionCheckout(b):"radio"==a?new FilterOptionRadio(b):null}},F{%*i*%}ilterOptionCheckout=function(a){var i,j,k,l,m,n,o,p,q,r,s,t,u,b=this,c=a.getWrapElem(),d=util.getClass("active"),e=util.getClass("hide"),f="c-icon-chevron-unfold",g="c-icon-chevron-fold";util.getClass("filtermore-noborder"),i=util.getClass("disabled"),j={type:"filter"+(new Date).getTime(),title:"过滤项目：",unlimited:"不限",display:1e3,moretitle:"所有",wrapTpl:['<div class="op-#{tplname}-find op-#{tplname}-clearfix op-#{tplname}-jsfilterPanel">',"<span>#{title}</span>",'<div class="op-#{tplname}-nolimit {%*i*%}op-#{tplname}-active op-#{tplname}-jsnolimit"><a href="#" onclick="return false;">#{unlimited}</a></div>','<ul class="op-#{tplname}-jsfilter">',"#{filterHtml}","</ul>","#{moreHtml}","</div>"].join(""),tpl:'<li class="#{disabledClass}"><a href="#" onclick="return false;" data-count="#{count}" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>',moreTpl:'<div class="op-#{tplname}-filtermore #{hideClass}"><a href="#" title="#{moretitle}" onclick="return false;" class="c-icon c-icon-chev{%*i*%}ron-unfold op-#{tplname}-jsfiltermore"></a></div>'},a.setData(util.extend({},j,a.getData())),k=util.getElementByClassName(util.getClass("jsfilterPanel"),c),l=util.getElementByClassName(util.getClass("jsnolimit"),c),m=util.getElementByClassName(util.getClass("jsfilter"),c),n=util.getElementByClassName(util.getClass("jsfiltermore"),c),o=util.getElementByClassName(util.getClass("jsfiltermorectn"),c),this.render=function(){var d,f,g,h,j,o,p,q,b=a.getData();if(!b||!b.tplData||!b.tplData.value||0===b.{%*i*%}tplData.value.length)return a.hide(),void 0;for(a.show(),d=b.tplData.value,f=[],g=[],h=[],j=b.tpl,o=b.moreTpl,p=b.wrapTpl,q=0,q=0;q<d.length;q++)f.push(util.format(j,{disabledClass:d[q].count<=0?i:"",count:d[q].count||0,filter:d[q].name.replace(/%26/g,"&")||"",value:d[q].value.replace(/%26/g,"&")||""}));a.setFilters([]),u(),g.push(util.format(o,{tplname:card.data.TPL_NAME,moretitle:"查看"+b.moretitle,hideClass:d.length>b.display?"":e})),h.push(util.format(p,{title:b.title,tplname:card.data.TPL_NAM{%*i*%}E,unlimited:b.unlimited,filterHtml:f.join(""),moreHtml:g.join("")})),k.innerHTML=h.join(""),l=util.getElementByClassName(util.getClass("jsnolimit"),c),m=util.getElementByClassName(util.getClass("jsfilter"),c),n=util.getElementByClassName(util.getClass("jsfiltermore"),c),this.registerEvent()},this.hideMore=function(){var b=a.getData();o&&util.addClass(o,e),n&&(util.removeClass(n,g),util.addClass(n,f),n.setAttribute("title","查看"+b.moretitle))},this.showMore=function(){var b=a.getData();o&&util.rem{%*i*%}oveClass(o,e),n&&(util.removeClass(n,f),util.addClass(n,g),n.setAttribute("title","收起"+b.moretitle))},this.update=function(){var b,c,f,e;for(q(),b=a.getFilters()||[],c=util.getChildrens(m),e="",f=0;f<c.length;f++)1===c[f].nodeType&&(e=c[f].childNodes[0].getAttribute("data-filter"),util.isExist(b,e)?util.addClass(c[f],d):util.removeClass(c[f],d))},p=function(a,b){var d,c=-1;for(d=0;d<a.length;d++)if(a[d].value==b){c=d;break}return-1!==c?a[c].count:0},this.relayout=function(){var f,g,h,j,b=a.getDa{%*i*%}ta(),c=a.getFilters()||[],d=b&&b.tplData&&b.tplData.value||[];if(0===d.length&&0===c.length)return a.hide(),void 0;if(f=a.getFilterNames()||[],g=[],h=b.tpl,j=0,b.haslayout){if(c.length>0)for(j=c.length-1;j>=0;j--)g.push(util.format(h,{disabledClass:"",count:p(d,c[j]),filter:f[j].replace(/%26/g,"&")||"",value:c[j].replace(/%26/g,"&")||""}));for(j=0;j<d.length;j++)util.isExist(c,d[j].value)||g.push(util.format(h,{disabledClass:d[j].count>0?"":i,count:d[j].count,filter:d[j].name.replace(/%26/g,"&"){%*i*%}||"",value:d[j].value.replace(/%26/g,"&")||""}))}else for(j=0;j<d.length;j++)g.push(util.format(h,{disabledClass:d[j].count>0||util.isExist(c,d[j].value)?"":i,count:d[j].count,filter:d[j].name.replace(/%26/g,"&")||"",value:d[j].value.replace(/%26/g,"&")||""}));this.hideMore(),d.length<=b.display?n&&util.addClass(n,e):n&&util.removeClass(n,e),m.innerHTML=g.join(""),b.ishide||a.show()},q=function(){var c,f,g,h,i,b=a.getData();if(0==a.getFilters().length)if(c=b&&b.tplData&&b.tplData.value||[],0===c{%*i*%}.length&&a.hide(),util.addClass(l,d),f=util.getChildrens(m),g=!1,h=null,b.haslayout)for(i=0;i<f.length;i++)1===f[i].nodeType&&(g=util.hasClass(f[i],d),h=f[i].childNodes[0].getAttribute("data-count"),g&&0==h&&util.addClass(f[i],e),util.removeClass(f[i],d));else for(i=0;i<f.length;i++)1===f[i].nodeType&&util.removeClass(f[i],d);else util.removeClass(l,d)},r=function(b){var f,g,h,j,k,c=b.target||b.srcElement;if("A"===c.tagName.toUpperCase()){if(util.hasClass(c.parentNode,i))return;if(f=c.getAttribu{%*i*%}te("data-filter"),g=c.getAttribute("data-name"),h=c.getAttribute("data-count"),a.getData().haslayout?0>=h&&util.addClass(c.parentNode,e):0>=h&&util.addClass(c.parentNode,i),util.isExist(a.getFilters(),f))a.removeFilters(f,g),util.removeClass(c.parentNode,d);else{for(a.addFilters(f,g),j=util.getChildrens(m),k=0;k<j.length;k++)1===j[k].nodeType&&util.hasClass(j[k],d)&&util.removeClass(j[k],d);util.addClass(c.parentNode,d)}q()}},s=function(){a.getFilters().length>0&&(a.removeAllFilters(),q())},t=fu{%*i*%}nction(a){var c=a.target||a.srcElement;"A"===c.tagName.toUpperCase()&&(util.hasClass(c,g)?b.hideMore():b.showMore())},this.registerEvent=function(){m&&util.on(m,"click",r),l&&util.on(l,"click",s),n&&util.on(n,"click",t)},u=function(){m&&util.unbind(m,"click",r),l&&util.unbind(l,"click",s),n&&util.unbind(n,"click",t)}},PriceRegion=function(a,b,c){var d=this,e=function(){MoreSelectFilters.call(d,a,b,c),d.type=b.type;var e=new FilterOptionContext;d.filterOption=e.getFilterOption("checkOut",d),d.fil{%*i*%}terOption.registerEvent()};e(),this.render=function(){this.filterOption.render()},this.update=function(){this.relayout(),this.filterOption.update()},this.relayout=function(){this.filterOption.relayout()}},HotelRank=function(a,b,c){var d=this,e=function(){MoreSelectFilters.call(d,a,b,c),d.type=b.type;var e=new FilterOptionContext;d.filterOption=e.getFilterOption("checkOut",d),d.filterOption.registerEvent()};e(),this.render=function(){this.filterOption.render()},this.update=function(){this.relayou{%*i*%}t(),this.filterOption.update()},this.relayout=function(){this.filterOption.relayout()}},HotelBrand=function(a,b,c){var d=this,e=function(){MoreSelectFilters.call(d,a,b,c),d.type=b.type;var e=new FilterOptionContext;d.filterOption=e.getFilterOption("checkOut",d),d.filterOption.registerEvent()};e(),this.render=function(){this.filterOption.render()},this.update=function(){this.relayout(),this.filterOption.update()},this.relayout=function(){this.filterOption.relayout()}},HotelType=function(a,b,c){va{%*i*%}r d=this,e=function(){MoreSelectFilters.call(d,a,b,c),d.type=b.type;var e=new FilterOptionContext;d.filterOption=e.getFilterOption("checkOut",d),d.filterOption.registerEvent()};e(),this.render=function(){this.filterOption.render()},this.update=function(){this.relayout(),this.filterOption.update()},this.relayout=function(){this.filterOption.relayout()}},Facility=function(a,b,c){var d=this,e=function(){MoreSelectFilters.call(d,a,b,c),d.type=b.type;var e=new FilterOptionContext;d.filterOption=e.get{%*i*%}FilterOption("checkOut",d),d.filterOption.registerEvent()};e(),this.render=function(){this.filterOption.render()},this.update=function(){this.relayout(),this.filterOption.update()},this.relayout=function(){this.filterOption.relayout()}},SingleSelectFilters=function(a,b,c){var d=this,e=function(){a&&(FiltersContainer.call(d,a,b,c),d.setFilters(""))};e(),this.changeFilters=function(a){this.setFilters(a),util.trigger("updateFilter"+this.type)}},FilterManager=function(a){var b={price:"PRICE",grade:"{%*i*%}GRADE",brand:"BRAND",hoteltype:"HOTELTYPE",facility:"FACILITY"},c=a.single||[],d=a.more||[],e=a.loader||new InfoLoader;this.filtersParam={},this.updateFilter=function(a){var g,h,f=0;for(this.filtersParam={},f=0;f<c.length;f++)c[f].getFilters()&&"default,no"!=c[f].getFilters()&&(g=c[f].getFilters().split(","),this.filtersParam[g[0]+"sort"]=g[1]);for(f=0;f<d.length;f++)g=d[f].getFilters(),g.length>0&&(h=d[f].getType(),this.filtersParam[b[h]]=g.join(","));e.load(this.filtersParam,a)},this.getFilter{%*i*%}Names=function(){var a,b,c=[];for(a=0;a<d.length;a++)b=d[a].getFilterNames(),b.length>0&&c.push(b.join("、"));return c},this.getFilterHashurl=function(){var a={price:"pr",grade:"st",brand:"br",hoteltype:"ht",facility:"fc"},b={GB_LOW:"0-100",GB_MEDIUM:"100-150",GB_PRIOR:"150-200",GB_HIGH:"200-300",GB_HIGHER:"300-max"},c={1:0,2:1,3:2,4:3,5:5},e=[],f=[],g=[],h=0,i="";for(h=0;h<d.length;h++)f=d[h].getFilters(),g=d[h].getFilterNames(),f.length>0&&(i=d[h].getType(),"brand"===i?e.push(a[i]+"="+encodeURI{%*i*%}Component(g.join(","))+"|"+f.join(",")):"price"===i?e.push(a[i]+"="+b[f.join(",")]):"grade"===i?e.push(a[i]+"="+c[f.join(",")]):e.push(a[i]+"="+f.join(",")));return e.length>0?"&"+e.join("&"):""}},InfoLoader=function(){var a=domainurl+"/hotelSearchApi.jsp",d={price:"pricelinks",grade:"dangcilinks",brand:"brandlinks",hoteltype:"hoteltypelinks",facility:"facilitylinks"};this.load=function(b,c){var e=this;e.onsuccess=function(a){var b,e;if(ajaxFinished=!0,a&&a.ret===!0&&a.data)if(a.data.hotelCount<={%*i*%}0?listPanel&&listPanel.getFilterTip(filterManager):listPanel&&listPanel.render(a.data),listPanel&&listPanel.setHotelsCountTip("共"+a.data.hotelCount+"条“"+util.trim(tipArray.concat(filterManager.getFilterNames()).join(" "))+"”相关团品"),c)for(b=c.getListener(),e=0;e<b.length;e++)b[e].setData(util.extend({},b[e].getData(),{tplData:{value:a.data[d[b[e].getType()]]}})),b[e].update();else pricePanel.setData(util.extend({},pricePanel.getData(),{tplData:{value:a.data[d[pricePanel.getType()]]}})),rankPanel.s{%*i*%}etData(util.extend({},rankPanel.getData(),{tplData:{value:a.data[d[rankPanel.getType()]]}})),brandPanel.setData(util.extend({},brandPanel.getData(),{tplData:{value:a.data[d[brandPanel.getType()]]}})),hoteltypePanel.setData(util.extend({},hoteltypePanel.getData(),{tplData:{value:a.data[d[hoteltypePanel.getType()]]}})),facilityPanel.setData(util.extend({},facilityPanel.getData(),{tplData:{value:a.data[d[facilityPanel.getType()]]}})),pricePanel&&pricePanel.render(),rankPanel&&rankPanel.render(),bra{%*i*%}ndPanel&&brandPanel.render(),hoteltypePanel&&hoteltypePanel.render(),facilityPanel&&facilityPanel.render()},util.jsonp(a,util.extend({},{_t:(new Date).getTime(),city:card.data.CITY_NAME,query:8==card.data.CARD_TYPE?card.data.ORIGINAL_QUERY:"",ipcity:card.data.IP_CITY,isgb:"Y",queryid:card.data.QUERYID},b||{}),"__jscallback",e.onsuccess)}},pricePanel=new PriceRegion(util.getElementByClassName(util.getClass("jspricepanel")),{type:"price",title:"价格范围：",tpl:'<li><a href="#" onclick="return false;" d{%*i*%}ata-count="9999" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>'}),rankPanel=new HotelRank(util.getElementByClassName(util.getClass("jsdangcipanel")),{type:"grade",title:"酒店级别："}),brandPanel=new HotelBrand(util.getElementByClassName(util.getClass("jsbrandpanel")),{type:"brand",title:"连锁品牌：",display:1e5,moretitle:"所有品牌",haslayout:!0,ishide:10==card.data.CARD_TYPE?!0:!1}),hoteltypePanel=new HotelType(util.getElementByClassName(util.getClass("jshoteltype")),{type:"hoteltype",title:{%*i*%}"酒店类型：",display:1e5,moretitle:"所有酒店类型",haslayout:!0,ishide:10==card.data.CARD_TYPE?!1:!0}),facilityPanel=new Facility(util.getElementByClassName(util.getClass("jsfacility")),{type:"facility",title:"入住要求：",display:1e5,moretitle:"所有入住要求",haslayout:!0,ishide:10==card.data.CARD_TYPE?!1:!0}),infoLoader=new InfoLoader,filterManager=card._filterManager=new FilterManager({more:[pricePanel,rankPanel,brandPanel,hoteltypePanel,facilityPanel],load:infoLoader}),pricePanel.setListener([rankPanel,brandPanel,ho{%*i*%}teltypePanel,facilityPanel]),pricePanel.bindEvent([filterManager]),rankPanel.setListener([brandPanel,hoteltypePanel,facilityPanel]),rankPanel.bindEvent([filterManager]),brandPanel.setListener([rankPanel,hoteltypePanel,facilityPanel]),brandPanel.bindEvent([filterManager]),hoteltypePanel.setListener([rankPanel,brandPanel,facilityPanel]),hoteltypePanel.bindEvent([filterManager]),facilityPanel.setListener([rankPanel,brandPanel,hoteltypePanel]),facilityPanel.bindEvent([filterManager]),firstSelected(){%*i*%},listPanel&&listPanel.setHotelsCountTip("共"+card.data.HOTELSCOUNT+"条“"+util.trim(tipArray.concat(filterManager.getFilterNames()).join(" "))+"”相关团品"),card.dispose=function(){ajaxFinished||(hotKey.onsuccess&&(hotKey.onsuccess=null),hotKey.onerror&&(hotKey.onerror=null),listPanel.onsuccess&&(listPanel.onsuccess=null)),util.unbind(document,"click",documentClickHandler),util.unbind(window,"blur",windowBlurHandler)};});</script>{%/block%}