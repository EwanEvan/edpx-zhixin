{%extends 'c_base.tpl'%} {%block name='content'%}<style data-merge>.op_converter{padding-top:6px}.op_converter_type{width:100px;white-space:nowrap}.op_converter_from{width:74px;white-space:nowrap}.op_converter_to{width:74px;white-space:nowrap}.op_converter_table optgroup option{padding-left:-60px}.op_converter_table td{padding:0 6px 0 0;font-size:1em;text-align:left}.op_converter_table span{white-space:nowrap}.op_converter_table select{height:22px;line-height:22px}.op_converter_table input{height:16px;_height:18px;line-height:18px}.op_converte{%*i*%}r_txt{width:86px}.op_converter_btn{background:url(http://open.baidu.com/stat/op_email_btn.gif) no-repeat -100px 0;color:#000;float:left;cursor:pointer;height:24px;line-height:24px;text-align:center;text-decoration:none;width:81px}.op_converter_btn:hover,.op_converter_btn:active,.op_converter_btn:focus{background:url(http://open.baidu.com/stat/op_email_btn.gif) no-repeat}.op_converter_logo{width:64px;height;64px}.op_converter_title{font-weight:bold;padding-bottom:4px}.op_converter_result{font-siz{%*i*%}e:1.4em;line-height:22px}.op_converter_support{line-height:22px;color:#666}.op_converter_error{display:none;color:#F00}</style> <table cellspacing="0" cellpadding="0"> <tr> <td style="vertical-align:top;padding:0 10px 0 0;"><img src="http://open.baidu.com/coop/image/answers/measures.jpg" class="op_converter_logo"/></td> <td> <div class="op_converter_title">度量衡换算</div> <div class="op_converter_result">{%if $tplData.number1!=""%}{%$tplData.number1|escape:'html'%}{%$tplData.standard1|escape:'html'%}{%if $tplData.unitName1!=""%}({%$tplData.unitName1|escape:'html'%}){%/if%}{%if $tplData.otherUnit!=""%}{%$tplData.otherUnit|escape:'html'%}{%/if%}={%$tplData.number2|escape:'html'%}{%if $tplData.exponent!=""%}*10<sup>{%$tplData.exponent%}</sup>{%/if%}{%$tplData.standard2|escape:'html'%}{%if $tplData.unitName2!=""%}({%$tplData.unitName2|escape:'html'%}){%/if%}<br/> {%/if%} {%if $tplData.otherNumber!=""%} 1{%$tplData.standard2|escape:'html'%}{%if $tplData.unitName2!=""%}({%$tplData.unitName2|escape:'html'%}){%/if%}={%$tplData.otherNumber|escape:'html'%}{%if $tplData.otherExpnonent!=""%}*10<sup>{%$tplData.otherExpnonent%}</sup>{%/if%}{%$tplData.standard1|escape:'html'%} {%if $tplData.unitName1!=""%}({%$tplData.unitName1|escape:'html'%}){%/if%} {%/if%} </div> <div class="op_converter"> <table class="op_converter_table" cellspacing="0" cellpadding="0"> <tr> <td><select class="op_converter_type"><option>{%if $tplData.type!=""%}{%$tplData.type|escape:'html'%}{%/if%}</option></select></td> <td><input class="op_converter_txt" type="text" value="1" maxlength="13"></td> <td><select class="op_converter_from"><option>{%if $tplData.standard1!=""%}{%$tplData.standard1|escape:'html'%}{%/if%}</option></select></td> <td><span style="font-weight:bold;">转换为</span></td> <td><select class="op_converter_to"><option>{%if $tplData.standard2!=""%}{%$tplData.standard2|escape:'html'%}{%/if%}</option></select></td> <td><a class="op_converter_btn OP_LOG_BTN">转换</a></td> </tr> <tr> <td><span class="op_converter_type_e op_converter_error">请选择度量类型</span></td> <td><span class="op_converter_txt_e op_converter_error">请输入非0数字</span></td> <td><span class="op_converter_from_e op_converter_error">请选择度量类型</span></td> <td></td> <td><span class="op_converter_to_e op_converter_error">请选择度量类型</span></td> <td></td> </tr> </table> </div> <div class="op_converter_support">支持长度、面积、体积、质量、温度、压力、功率、功、能和热量{%*i*%}等单位换算</div> </td> </tr> </table><script >A.setup(function() {var _this = this;var coIimer=null;(function(){var m = document.uniqueID && document.compatMode && !window.XMLHttpRequest && document.execCommand;try{if(!!m){m("BackgroundImageCache", false, true) }}catch(oh){};})();var op_converter_resType = '{%if $tplData.type!=""%}{%$tplData.type|escape:'html'%}{%/if%}';var op_converter_resKeyUnit1 = '{%if $tplData.standard1!=""%}{%$tplData.standard1|escape:'html'%}{%/if%}';var op_converter_resKeyUnit2 = '{%if $tplData.standard2!=""%}{%$tplData.standard2|escape:'html'%}{%/if%}';{%if $tplData.singleUnit!=""%};var op_converter_num1 = op_converter_trim('{%if $tplData.fillNumber1!=""%}{%$tplData.fillNumber1|escape:'html'%}{%/if%}');{%/if%};function op_converter_trim(str){str = str.replace(/(\u3000+)|(\u3000+)/g, '');str = str.replace(/( +)|( +)/g, '');return str;}function numFormat(num) {return (parseInt(num) == num) ? parseInt(num) : parseFloat(num);}var btn = _this.find('.op_converter_btn')[0];var txt = _this.find('.op_converter_txt')[0];var unitType = _this.find('.op_converter_type')[0];var unit1 = _this.find('.op_converter_from')[0];var unit2 = _this.find('.op_converter_to')[0];var txt_e = _this.find('.op_converter_txt_e')[0]{%*i*%};var type_e = _this.find('.op_converter_type_e')[0];var unit1_e = _this.find('.op_converter_from_e')[0];var unit2_e = _this.find('.op_converter_to_e')[0];var resultDOM = _this.find('.op_converter_result')[0];var typeData = ['请选择度量类型', '长度', '面积', '体积', '质量', '温度', '压力', '功率', '功、能和热量', '密度', '力', '时间', '速度', '数据存储', '角度'];var unitData = new Array();unitData['长度'] = [{flag: 'group', label: '公制', values: ['千米', '米', '分米', '厘米', '毫米', '微米']},{flag: 'group', label: '英制', values: ['英尺', '英寸', '码', '英{%*i*%}里', '海里', '英寻', '弗隆']},{flag: 'group', label: '市制', values: ['里', '丈', '尺', '寸', '分', '厘', '毫']}];unitData['面积'] = [{flag: 'group', label: '公制', values: ['平方千米', '公顷', '公亩', '平方米', '平方分米', '平方厘米', '平方毫米']},{flag: 'group', label: '英制', values: ['英亩', '平方英里', '平方码', '平方英尺', '平方英寸', '平方竿']},{flag: 'group', label: '市制', values: ['顷', '亩', '平方尺', '平方寸']}];unitData['体积'] = [{flag: 'group', label: '公制', values: ['立方米', '立方分米', '立方厘米', '立方毫米', '升', '分升', '毫升', '厘升', '公石']},{flag: 'group', label: '英制', v{%*i*%}alues: ['立方英尺', '立方英寸', '立方码', '亩英尺', '英制加仑', '美制加仑']}];unitData['质量'] = [{flag: 'group', label: '公制', values: ['千克', '克', '毫克', '吨', '公担']},{flag: 'group', label: '英制', values: ['磅', '盎司', '克拉', '格令', '长吨', '短吨', '英担', '美担', '英石', '打兰']},{flag: 'group', label: '市制', values: ['担', '斤', '两', '钱']}];unitData['时间'] = ['年','周','天','时','分','秒','毫秒'];unitData['温度'] = ['摄氏度', '华氏度', '开氏度', '兰氏度', '列氏度'];unitData['压力'] = ['帕斯卡', '千帕', '百帕', '标准大气压', '毫米汞柱', '英寸汞柱', '巴', '毫巴', '磅力/平方英尺', '磅力/平方英寸', '毫米水柱{%*i*%}', '公斤力/平方厘米', '公斤力/平方米'];unitData['功率'] = ['瓦', '千瓦', '英制马力', '米制马力', '公斤·米/秒', '千卡/秒', '英热单位/秒', '英尺·磅/秒', '焦耳/秒', '牛顿·米/秒'];unitData['功、能和热量'] = ['焦耳', '卡', '千卡', '公斤·米', '米制马力·时', '英制马力·时', '千瓦·时', '英热单位', '英尺·磅'];unitData['密度'] = ['千克/立方厘米', '千克/立方分米', '千克/立方米', '克/立方厘米', '克/立方分米', '克/立方米'];unitData['力'] = ['牛', '千牛', '千克力', '克力', '公吨力', '磅力', '千磅力'];unitData['时间'] = ['年', '周', '天', '时', '分', '秒', '毫秒'];unitData['速度'] = ['米/秒', '千米/秒', '千米/时', '光速', '马赫', '英里/时', '英寸/秒'];unitData['数据存储'] = {%*i*%}['比特', '字节', '千字节', '兆字节', '千兆字节', '太字节', '拍字节', '艾字节'];unitData['角度'] = [{flag: 'group', label: '角度制', values: ['圆周', '直角', '百分度', '度', '分', '秒']},{flag: 'group', label: '弧度制', values: ['弧度', '毫弧度']}];unitData['请选择度量类型'] = ['　　　　'];var converterJSON = {};converterJSON.getData = function(data){var str1 = data.number1 ? (data.number1 + data.standard1 + (data.unitName1 ? '(' + data.unitName1 + ')' : '') + (data.otherUnit ? '(' + data.otherUnit + ')' : '')+ '='+ data.number2 + (data.exponent ? '*10{%*i*%}<sup>' + data.exponent + '</sup>' : '') + data.standard2 + (data.unitName2 ? '(' + data.unitName2 + ')' : '') + '<br/>') : '';var str2 = data.OtherNumber ? ('1' + data.standard2 + (data.unitName2 ? '(' + data.unitName2 + ')' : '')+ '='+ data.OtherNumber + (data.otherExpnonent ? '*10<sup>' + data.otherExpnonent + '</sup>' : '') + data.standard1 + (data.unitName1 ? '(' + data.unitName1 + ')' : '')) : '';resultDOM.innerHTML = str1 + str2;};converterJSON.errorData = function() {resultDOM.innerHTML ={%*i*%} "<span style='color:red;'>抱歉没有此次换算的结果</span>";}; $(btn).click(function(){var enable = true;if (unitType.value == '请选择度量类型'){type_e.style.display = 'inline';enable = false;}else{type_e.style.display = 'none';}if (isNaN(txt.value) || parseFloat(txt.value) === 0){txt_e.style.display = 'inline';enable = false;}else{txt_e.style.display = 'none';}if (op_converter_trim(txt.value) === '') {txt.value = 1;}if (enable){var floatValue = parseFloat(txt.value);if (isNaN(floatValue)) floatValue = 1;var query {%*i*%}= floatValue + unit1.value + '等于多少' + unit2.value;getResult(query);} });function getResult(query){var resourceId = {%$extData.resourceid|escape:'html'%};_this.ajax(query, resourceId, {success: function(data) {if (data) {var d = data[0];if (d) {converterJSON.getData(d);}else {converterJSON.errorData();}}},error: function() {converterJSON.errorData();},timeout: function() {converterJSON.errorData();}});}function bindData(obj, data, key){if (!obj || !data) return;var frag = document.createDocumentFragment();for (var i = 0, len = data.length; i < len; i++){var item = data[i];if (item['flag'] == undefined){var opt = document.createElement('option');{%*i*%}opt.innerHTML = opt.value = item;opt.selected = (item == key);frag.appendChild(opt);}else{if (item.flag == 'value'){var opt = document.createElement('option');opt.innerHTML = opt.value = item.value;opt.selected = (item.value == key);frag.appendChild(opt);}else if (item.flag == 'group'){var optgroup = document.createElement('optgroup');optgroup.label = item.label;bindData(optgroup, item.values, key);frag.appendChild(optgroup);}}}obj.innerHTML = '';obj.appendChild(frag);}$(unitType).change(functio{%*i*%}n(){bindData(unit1, unitData[unitType.value]);bindData(unit2, unitData[unitType.value]);coIimer = setTimeout(function() {if (unit2.options && unit2.options[1]) unit2.options[1].selected = true;},1); });function initConverter(){txt.value = op_converter_num1;bindData(unitType, typeData, op_converter_resType);if (op_converter_resType && op_converter_resKeyUnit1 && op_converter_resKeyUnit2){bindData(unit1, unitData[op_converter_resType], op_converter_resKeyUnit1);bindData(unit2, unitData[op_converte{%*i*%}r_resType], op_converter_resKeyUnit2);}}initConverter();this.dispose = function(){clearTimeout(coIimer);};});</script>{%/block%}