{%extends 'c_base.tpl'%} {%block name='content'%}<style data-merge>.op_chinavoice_step_dot,.op_chinavoice_step_tip,.op_chinavoice_step_pre i,.op_chinavoice_step_next i{background:url('http://www.baidu.com/aladdin/img/chinavoice/chinavoice-bg.png') repeat-x}.op_chinavoice_step_line{border:0;margin:4px 0;height:2px;background:#ececec;overflow:hidden}.op_chinavoice_step{height:100px;position:relative;margin-right:20px}.op_chinavoice_step li{float:left;height:100px;background-position:0 -62px;position:relative}.op_chinavoice_step .op_chinavoice_st{%*i*%}ep_past .op_chinavoice_step_line{background-position:0 -88px}.op_chinavoice_step_prebg{position:absolute;width:62px;height:2px;margin:4px 0;background:#ececec;overflow:hidden}.op_chinavoice_step_dot{background-position:2px -238px;width:13px;height:14px;position:absolute;top:27px;left:50%;margin-left:-7px;margin-top:-7px;overflow:hidden;background-color:#fff}.op_chinavoice_step_future{color:#666}.op_chinavoice_step_future .op_chinavoice_step_dot{background-position:-36px -238px}.op_chinavoice_ste{%*i*%}p_present .op_chinavoice_step_dot{background-color:#fff;background-position:-16px -238px}.op_chinavoice_step_tip{position:absolute;display:block;height:14px;width:52px;top:27px;left:50%;margin-top:-7px;margin-left:6px;background-position:0 -170px;overflow:hidden}.op_chinavoice_step_tipnew{background-position:0 -200px}.op_chinavoice_step_tipnow{background-position:0 -185px}.op_chinavoice_step_box{position:relative;overflow:hidden;height:100px;left:22px;margin-right:22px}.op_chinavoice_step_wrap{p{%*i*%}osition:absolute;top:0;transition:left .3s ease-in-out;-webkit-transition:left .3s ease-in-out;-moz-transition:left .3s ease-in-out;-ms-transition:left .3s ease-in-out;-o-transition:left .3s ease-in-out}.op_chinavoice_step_suptext,.op_chinavoice_step_subtext{display:block;font-size:1em;text-align:center;outline:0;cursor:default}.op_chinavoice_step_subtext{height:52px;width:94%;position:absolute;bottom:0;text-decoration:none;font-size:.9em;margin-left:3%;margin-right:3%}.op_chinavoice_step_subtex{%*i*%}t2{font-size:.9em;border:1px solid #f6f6f6;background-color:#fbfbfb;cursor:pointer}.op_chinavoice_step_subtext p{height:25px;line-height:25px;color:#666}.op_chinavoice_step_arrow_top{position:absolute;top:-12px;left:50%;z-index:1}.op_chinavoice_step_arrow_top_out,.op_chinavoice_step_arrow_top_in{color:#f6f6f6;position:absolute;top:3px;left:0;font-size:.9em;font-family:Simsun;font-weight:normal;display:block;z-index:1;margin-left:-6px}.op_chinavoice_step_arrow_top_in{color:#fbfbfb;margin-top:1px}{%*i*%}.op_chinavoice_step_pre,.op_chinavoice_step_next{display:block;position:absolute;background-position:0 -120px;width:23px;height:24px;outline:0;top:27px;margin-top:-12px;z-index:1}.op_chinavoice_step_pre i,.op_chinavoice_step_next i{width:9px;height:17px;display:inline-block;position:relative;top:4px;left:8px;cursor:pointer}.op_chinavoice_step_pre i{background-position:0 -116px}.op_chinavoice_step_next i{background-position:-9px -116px}.op_chinavoice_step_pre_end{cursor:default}.op_chinavoice_ste{%*i*%}p_next_end{cursor:default}.op_chinavoice_step_pre_end i{cursor:default;background-position:18px -116px}.op_chinavoice_step_next_end i{cursor:default;background-position:9px -116px}.op_chinavoice_step_next{background-position:-30px -120px;right:-22px}.op_chinavoice_step_title{font-size:1.1em}.op_chinavoice_step_linktitle{font-weight:normal;font-size:1.2em}.op_chinavoice_step_subtext_text{color:#00c}.op_chinavoice_step_subtext2:hover{cursor:pointer;zoom:1}.op_chinavoice_step_subtext2:hover .op_chi{%*i*%}navoice_step_subtext_text{text-decoration:underline}.op_chinavoice_step_subtext2:hover .op_chinavoice_step_subtext2_text{cursor:pointer;color:#00c;text-decoration:underline}</style><div class="c-gap-top op_chinavoice_step c-gap-bottom-small"> {%$listLength = $tplData.step|@count%} {%$WIDTH = 1%} {%foreach $tplData.step as $item%} {%if $item.status == '2'%} {%$curIndex = $item@index%} {%/if%} {%/foreach%} {%if isset($curIndex)%} {%if ( $listLength - $curIndex ) < 2%} {%$mLeft = ( $listLength - 4 ) * $WIDTH%} {%elseif $curIndex <= 1%} {%$mLeft = 0%} {%else%} {%$mLeft = ( $curIndex - 2 ) * $WIDTH%} {%/if%} {%else%} {%$mLeft = 0%} {%/if%} {%if $tplData.step[0]['status']==2 || $tplData.step[1]['status']==2 || $tplData.step[2]['status']==2%} {%$tempDataPreEnd=1%} {%/if%} {%if $tplData.step[$listLength-1]['status']==2 || $tplData.step[$listLength-2]['status']==2%} {%$tempDataNextEnd=1%} {%/if%} <a href="javascript:;" hidefocus="true" class="op_chinavoice_step_pre{%if $tempDataPreEnd%} op_chinavoice_step_pre_end{%/if%} OP_LOG_BTN"><i></i></a> <div class="op_chinavoice_step_box"> <ul class="op_chinavoice_step_wrap" style="width:{%$WIDTH*$listLength|escape%}px;left: -{%$mLeft|escape%}px;visibility:hidden;"> {%foreach $tplData.step as $item%} {%if $item.status == '1'%} {%$classname = 'op_chinavoice_step_past'%} {%elseif $item.status == '2'%} {%$classname = 'op_chinavoice_step_present'%} {%else%} {%$classname = 'op_chinavoice_step_future'%} {%/if%} {%if $item.param%} {%$itemUrl = {%build_search_url params="`$item.param`"%}%} {%elseif $item.href%} {%$itemUrl = $item.href%} {%else%} {%$itemUrl = false%} {%/if%} <li class="{%$classname|escape:'html'%}"> <span class="op_chinavoice_step_suptext">{%$item.text%}</span> {%if $item.status == '2'%} <div class="op_chinavoice_step_prebg"></div> {%/if%} <div class="op_chinavoice_step_line"></div> <div class="op_chinavoice_step_dot"></div> <a {%if $item.status==3%}onclick="return false;"{%/if%} href="{%if $item.status==3%}javascript:;{%else%}{%$itemUrl%}{%/if%}" title="{%$item.subtext|escape%} {%$item.subtext2|escape%}" hidefocus="true" target="_blank" class="op_chinavoice_step_subtext{%if $item.subtext2&&$item.status!=3%} op_chinavoice_step_subtext2{%/if%}"> {%if $item.subtext2&&$item.status!=3%} <div class="op_chinavoice_step_arrow_top"><span class="op_chinavoice_step_arrow_top_out">◆</span><span class="op_chinavoice_step_arrow_top_in">◆</span></div> {%/if%} <p>{%if $itemUrl%}<span class="op_chinavoice_step_subtext_text">{%/if%}{%$item.subtext%}{%if $itemUrl%}</span>{%/if%}</p> {%if $item.subtext2%}<p class="op_chinavoice_step_subtext2_text">{%$item.subtext2|limitlen:18|escape%}</p>{%/if%} </a> {%if $item.tip%} {%if $item.tip == '1'%} {%$tipClass = 'op_chinavoice_step_tipnew'%} {%elseif $item.tip == '2'%} {%$tipClass = 'op_chinavoice_step_tipnow'%} {%else%} {%$tipClass = ''%} {%/if%} {%if isset($tipClass)%} <span class="op_chinavoice_step_tip {%$tipClass|escape:'html'%}"></span> {%/if%} {%/if%} </li> {%/foreach%} </ul> </div> <a href="javascript:;" hidefocus="true" class="op_chinavoice_step_next{%if $tempDataNextEnd%} op_chinavoice_step_next_end{%/if%} OP_LOG_BTN"><i></i></a></div><script >
    A.setup({
        length: '{%$listLength|escape:'javascript'%}',
        width: '{%$WIDTH|escape:'javascript'%}',
        $mLeft : '{%$mLeft|escape:'javascript'%}'
    });
</script><script data-merge>A.init(function(){var _this = this,left,setLeft,transitionSupport,animation,$setBox = _this.find( '.op_chinavoice_step_box' ).eq(0),$liWdith = $setBox.width()/4,wrap = _this.find('.op_chinavoice_step_wrap')[0],width = parseInt( _this.data.width * $liWdith, 10 ),length = _this.data.length,maxLeft = length && ( length - 4 ) * width,$prev = _this.find( '.op_chinavoice_step_pre' ),$next = _this.find( '.op_chinavoice_step_next' );$(wrap).css({'left':-_this.data.$mLeft * wi{%*i*%}dth,'visibility':'visible','width':width*_this.data.length});$('.op_chinavoice_step_past').width($liWdith);$('.op_chinavoice_step_present').width($liWdith);if ( !length ) {return;}left = function( num ) {return isFinite( num ) ? ( wrap.style.left = num + 'px' ) : parseInt( wrap.style.left, 10 );};transitionSupport = (function() {var docView = document.defaultView,styleObj,check,i = 0,l = 6,subArr = [ '', 'Moz', 'Webkit', 'O', 'ms', 'Ms' ];check = function( str ) {return !!str && str.indexOf( 'le{%*i*%}ft' ) > -1;};if ( docView && ( styleObj = docView.getComputedStyle( wrap ) ) ) {for (; i < l; i++ ) {if ( check( styleObj[ subArr[i] + ( i == 0 ? 't' : 'T' ) + 'ransitionProperty' ] ) ) {break;}}return i !== l;}return false;}());setLeft = function( tar ) {var oldLeft, distance;$prev.removeClass('op_chinavoice_step_pre_end'); $next.removeClass('op_chinavoice_step_next_end');if(tar <= -maxLeft){ $next.addClass('op_chinavoice_step_next_end');tar = -maxLeft;}if(tar >= 0){$prev.addClass('op_chinavoic{%*i*%}e_step_pre_end'); tar = 0;}oldLeft = left();distance = tar - oldLeft;if ( distance === 0 ) {return; }if ( transitionSupport ) {left( tar );return;}A.use('animation', function(){animation = A.ui.animation(function(){this.tween({ x: oldLeft}).to({x:tar}, 300).easing(this.Easing.Quadratic.InOut).onUpdate(function(){left( this.x );}).onComplete(function(){animation.stop();}).start();}).start();});};$next.click(function(e){setLeft( left() - width );e.returnValue = false;});$prev.click(function(e){set{%*i*%}Left( left() + width );e.returnValue = false;});this.dispose = function(){animation&&animation.dispose&&animation.dispose();};});</script>{%/block%}