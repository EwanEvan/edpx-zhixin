{%extends 'c_base.tpl'%} {%block name='data_modifier'%} {%$extData.feData.hasBorder=true%} {%$tplData.showurl='www.showji.com/'%}{%/block%}{%block name='title'%}{%/block%}{%block name='content'%}<style data-merge>{%fe_fn_c_css css='img'%}{%fe_fn_c_css css='btn'%}{%fe_fn_c_css css='input'%}.op_mobilephone_logo{display:block}.op_mobilephone_t,.op_mobilephone_r{font-weight:normal;font-family:'微软雅黑','黑体';_font-family:arial}.op_mobilephone_t{font-size:1.23em}.op_mobilephone_r{font-size:1.69em;line-height:30px}.op_mobilephone_s{color:#666}.op_mobilephone_txt.tip{color:#AAA}.op_mobilephone_txt.no{color:#000}.op_mobilephone_err{color:#F00;display:none}</style><div class="c-row c-gap-bottom"> <div class="c-span3"><img src="http://www.baidu.com/aladdin/img/tools/phone.png" class="c-img c-i{%*i*%}mg3 op_mobilephone_logo"/></div> <div class="c-span21 c-span-last"> <div class="op_mobilephone_t c-gap-bottom-small">手机归属地</div> <div class="op_mobilephone_r"> {%if $tplData.phoneinfo%}<span>{%$tplData.phoneinfo%}</span>{%/if%} <span>{%if $tplData.prov%}{%$tplData.prov|escape:'html'%}{%/if%}{%if $tplData.city%}&nbsp;{%$tplData.city|escape:'html'%}{%/if%}{%if $tplData.type%}&nbsp;&nbsp;{%$tplData.type|escape:'html'%}{%/if%}</span> </div> </div> </div> <div class="c-row"> <div class="c-span10"> <input class="c-input c-input-large op_mobilephone_txt" type="text" value="" maxlength="11" tip="请输入手机号码(段)" autocomplete="off"> </div> <div class="c-span14 c-span-last"> <button class="c-btn c-btn-primary op_mobilephone_btn OP_LOG_BTN">查询</button> </div> </div> <div class="op_mobilephone_err c-gap-top-small"></div> <div class="op_mobilephone_s c-gap-top"> 手机归属地数据由<a href="http://www.showji.com" target="_blank">手机在线</a>提供 </d{%*i*%}iv><script data-merge>A.setup(function() {var _this = this;var isIE = !-[1,];var isIE6=isIE&&!window.XMLHttpRequest; var btn = _this.find('.op_mobilephone_btn')[0];var txt = _this.find('.op_mobilephone_txt')[0];var tr_e = _this.find('.op_mobilephone_err')[0];var txt_res = _this.find('.op_mobilephone_r')[0];var searching = false;var queryCount = 0;var mTimer = null;if (isIE6) {try {document.execCommand('BackgroundImageCache', false, true);} catch (err) {}}$(txt).keydown(function(e){e = e || windo{%*i*%}w.event;if (e && e.keyCode == 13) {if (searching) return false;submitPhone(trim(txt.value));}});$(btn).click(function(){if (searching) return false;submitPhone(trim(txt.value));});function checkPhone(txt) {return (new RegExp('^\\d{7,11}\x24')).test(txt);}function bindTip(obj) {$(obj).addClass('tip');obj.value = obj.getAttribute('tip') || '';$(obj).focus(function(){var curValue = trim(obj.value);if (curValue == obj.getAttribute('tip')) {obj.value = '';$(obj).removeClass('tip');$(obj).addClass('no{%*i*%}');}});$(obj).blur(function(){var curValue = trim(obj.value);if (curValue == '') {obj.value = obj.getAttribute('tip');$(obj).removeClass('no');$(obj).addClass('tip');}});}bindTip(txt);function trim(val) {val = val.replace(/(\u3000+)|(\u3000+)/g, '');val = val.replace(/( +)|( +)/g, '');return val;}function showErrorMessage(msg) {tr_e.style.display = 'block';tr_e.innerHTML = msg;}function startSearching() {searching = true;txt.disabled = true;}function endSearching() {searching = false;txt.disable{%*i*%}d = false;try {if (txt.disabled == false) {mTimer = setTimeout(function() {txt.focus();},50);}}catch (e) {}}function resetSearch(count) {return function() {if (queryCount == count && searching) {showErrorMessage('抱歉，没有找到“' + (txt.value) + '”的归属地信息');endSearching();}}}function submitPhone(val){queryCount++;if (checkPhone(val)){if (val.length < 11) val = val + ' 手机号段';tr_e.style.display = 'none';var resourceId = 6004;_this.ajax(val, resourceId, {success: function(data) {if (data) {var d = data[0];{%*i*%}if (d) {txt_res.innerHTML = d['querytype'] + '\"' + d['phoneno'] + '\"&nbsp;' + d['prov'] + '&nbsp;' + d['city'] + '&nbsp;&nbsp;' + d['type'];}else {showErrorMessage('抱歉，没有找到“' + val + '”的归属地信息');endSearching();}}endSearching();},error: function(data) {showErrorMessage('抱歉，没有找到“' + val + '”的归属地信息');endSearching();},timeout: function(data) {showErrorMessage('抱歉，没有找到“' + val + '”的归属地信息');endSearching();}});startSearching();if (window['baidu_aladdin_openala_temp_phoneajax_timer']) {clearTimeout(win{%*i*%}dow['baidu_aladdin_openala_temp_phoneajax_timer']);}window['baidu_aladdin_openala_temp_phoneajax_timer'] = setTimeout(function(count) {return resetSearch(count);}(queryCount), 6000);}else{showErrorMessage('请输入7-11位手机号码或号段');}}this.dispose = function(){clearTimeout(mTimer);clearTimeout(window['baidu_aladdin_openala_temp_phoneajax_timer']);};});</script>{%/block%}