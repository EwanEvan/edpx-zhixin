{%extends 'c_base.tpl'%} {%block name="data_modifier"%} {%$extData.feData.hasBorder = true%}{%/block%}{%block name='content'%}<style data-merge>{%fe_fn_c_css css='table'%}{%fe_fn_c_css css='btn'%}{%fe_fn_c_css css='input'%}{%fe_fn_c_css css='dropdown2'%}.op_checkpoint_table td{padding:0;margin:0;border:0}.op_checkpoint_tip{margin:5px 0 0;font-weight:bold}.op_checkpoint_more{font-family:simsun;display:none}.op_checkpoint_msg{width:100%;font-size:.9em;color:#333;text-align:center;display:none;background-color:#fff}.op_checkpoint_table_left{text-align:left;width:230px}.op_checkpoint_kindly_reminder{color:#666;padding-top:8px;font-size:.9em;display:none}.op_checkpoint_prescore{color:#999}</style><div class="op_checkpoint_container"> {%if $tplData.tip%}<p class="op_checkpoint_tip">{%$tplData.tip%}</p>{%/if%} {%$privince='北京~1|天津~2|上海~3|重庆~4|河北~5|河南~6|山东~7|山西~8|安徽~9|江西~10|江苏~11|浙江~12|湖北~13|湖南~14|广东~15|广西~16|云南~17|贵州~18|四川~19|陕西~20|青海~21|宁夏~22|黑龙江~23|吉林~24|辽宁~25|西藏~26|新疆~27|内蒙古~28|海南~29|福建~30|甘肃~31|港澳台~32'%} {%$tempDataProvince=explode('|',$privince)%} <div class="op_checkpoint_search"> <table class="op_checkpoint_table" cellspacing="0"> <tr> <td width="112"> <div class="c-dropdown2 op_checkpoint_select_provid"> <div class="c-dropdown2-btn-group"> <div class="c-dropdown2-btn">考生所在地</div> <div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> <li class="c-dro{%*i*%}pdown2-option" data-value="0" data-selected="selected">考生所在地</li> {%foreach $tempDataProvince as $item%} {%$tempDataItem=explode('~',$item)%} <li class="c-dropdown2-option" data-value="{%$tempDataItem[1]%}">{%$tempDataItem[0]%}</li> {%/foreach%} </ul> </div> </div> </div> </td> <td width="10"></td> <td width="74"> <div class="c-dropdown2 op_checkpoint_select_wl"> <div class="c-dropdown2-btn-group"> <div class="c-dropdown2-btn">文科</div> <div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> <li class="c-dropdown2-option" data-value="1">文科</li> <li clas{%*i*%}s="c-dropdown2-option" data-value="2">理科</li> </ul> </div> </div> </div> </td> <td width="10"></td> <td width="112"> <div class="c-dropdown2 op_checkpoint_select_batch"> <div class="c-dropdown2-btn-group"> <div class="c-dropdown2-btn">本科提前批</div> <div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> <li class={%*i*%}"c-dropdown2-option" data-value="01">本科提前批</li> <li class="c-dropdown2-option" data-value="11" data-selected="selected">本科一批</li> <li class="c-dropdown2-option" data-value="12" data-selected="selected">本科二批</li> <li class="c-dropdown2-option" data-value="13" data-selected="selected">本科三批</li> </ul> </div> </div> </div> </td> <td width="10"></td> <td width="112"> <div class="c-dropdown2 op_checkpoint_select_col_provid"> <div class="c-dropdown2-btn-group"> <div class="c-dropdown2-btn">院校所在地</div> {%*i*%}<div class="c-dropdown2-btn-icon"> <div class="c-dropdown2-btn-icon-border"> <i class="c-icon c-icon-triangle-down"></i> </div> </div> </div> <div class="c-dropdown2-menu"> <div class="c-dropdown2-menu-inner"> <ul class="c-dropdown2-menubox"> <li class="c-dropdown2-option" data-value="0" data-selected="selected">院校所在地</li> {%foreach $tempDataProvince as $item%} {%$tempDataItem=explode('~',$item)%} <li class="c-dropdown2-option" data-value="{%$tempDataItem[1]%}">{%$tempDataItem[0]%}</li> {%/foreach%} </ul> </div> </div> </div> </td> </tr> </table> <div class="c-gap-top"> <input type="text" name="" style="width:100px;" value="请输入分数" class="c-input c-gap-right op_checkpoint_prescore" /><button class="c-btn c-btn-primary op_checkpoint_btn">查询</button> </div> <div style="clear:both"></div> </div> <div class="op_checkpoint_table_container"> <div class="op_checkpoint_table_box"></div> <div class="op_checkpoint_msg"></div> </div> {%if $tplData.morelink && $tplData.morelink[0] && $tplData.morelink[0].title%} <p class="op_checkpoint_more c-gap-top"> <a class="op_checkpoint_link" target="_blank" href="{%if $tplData.morelink[0].url && trim($tplData.morelink[0].url)%}{%$tplData.morelink[0].url%}{%else%}{%build_search_url params="wd="%}{%/if%}">{%$tplData.morelink[0].title|escape%}&gt;&gt;</a> </p> {%/if%} <p class="op_checkpoint_kindly_reminder">以上院校根据历年分数波动情况计算，仅供参考</p></div><script >
    A.setup({
        srcid:parseInt('{%$extData.resourceid%}')
    });
</script><script data-merge>A.setup(function(){ var _this = this; var ajaxFinished = false;var timer=null;var oMore=_this.find(".op_checkpoint_more")[0]; var tableparent=_this.find(".op_checkpoint_table_box")[0]; var morelink=_this.find(".op_checkpoint_link")[0];if(morelink){var href=morelink.href;}var reminder=_this.find('.op_checkpoint_kindly_reminder')[0];var tablecontainer=_this.find('.op_checkpoint_table_container')[0];var oA=_this.find(".op_checkpoint_btn")[0];var main=_this.find(".op_chec{%*i*%}kpoint_container")[0];var score=_this.find(".op_checkpoint_prescore")[0];var provid=_this.find(".op_checkpoint_select_provid")[0];var wl=_this.find(".op_checkpoint_select_wl")[0];var batch=_this.find(".op_checkpoint_select_batch")[0];var col_provid=_this.find(".op_checkpoint_select_col_provid")[0];var msg=_this.find('.op_checkpoint_msg')[0];var dd_provid, dd_wl, dd_batch, dd_col_provid;A.use('dropdown21', function(){ dd_provid = A.ui.dropdown21(provid);dd_wl = A.ui.dropdown21(wl);dd_batch = A.ui{%*i*%}.dropdown21(batch);dd_col_provid = A.ui.dropdown21(col_provid);});score.onfocus=function(){if(score.value==score.defaultValue){score.value='';}score.style.color='#333';};score.onblur=function(){if(score.value==''){score.value=score.defaultValue;score.style.color='#999';}}; function showMsg(sMsg){var height = 100;tableparent.innerHTML = '';if(msg){msg.style.top = "0px"; msg.style.height=height +'px';msg.style.lineHeight=height +'px';msg.innerHTML=sMsg; msg.style.display='block';}if(oMore){oMore.s{%*i*%}tyle.display='none';} };function subByte(str, len, tail){ var a = [], s = str.split('');tail = tail || '…'; for(var i = 0, l = s.length; i < l; i++){if(s[i].charCodeAt(0) > 255){a.push("*");}a.push(s[i]);}if(len && len > 0 && a.length > len){ s = a.join("").substring(0, len - 1).replace(/\*/g,'') + tail;}else{return str;}return s;};oA.onclick = function(){ var score_text=$.trim(score.value);var provid_text=$.trim(dd_provid.getText());var wl_text=$.trim(dd_wl.getText());var batch_text=$.trim(dd_b{%*i*%}atch.getText());var col_provid_text=$.trim(dd_col_provid.getText());tablecontainer.style.marginTop='8px'; if(score.value==="" || score.value==="请输入分数"){showMsg('请输入分数，再进行查询');return false;}var re=/^[1-9]\d{0,2}$/;var score_int=parseInt(score_text,10);score_text=score_text.replace(/^\s*|\s*&/,'');if(isNaN(score_int) || score_int < 0 || score_int >= 1000 || !re.test(score_text)){showMsg('请输入正确的分数，再进行查询');if(reminder){reminder.style.display='none';}return false;}if(dd_provid.getValue() == 0){showMs{%*i*%}g('请选择考生所在地，再进行查询');return false;}timer && clearTimeout(timer); timer = setTimeout(function(){showMsg('数据加载中,请稍后');},500); var params = {"rn":5,"scoreone":"0_"+score_text,"scoretwo":"0_"+score_text,"scorethree":"0_"+score_text,"scorefour":"0_"+score_text,"subject":wl_text,"batch":batch_text,"oe":"utf-8","from_mid":1 };if(dd_col_provid.getValue() !== "0"){params['schoolarea'] = col_provid_text;};_this.ajax(provid_text,6712,{params: params,success:function(data){if(ajaxFinished) return;timer && cl{%*i*%}earTimeout(timer);if(data && data.length > 0){data = data[0]; var rs = data.disp_data;if(rs && rs.length > 0){var myth = ['高校','2013年','2012年','2011年','2010年'];var td = [];var hasThisYearData = false;for(var i = 0 , item; item = rs[i]; i++){if(item['scoreone'] && parseInt(item['scoreone'])){hasThisYearData = true;break;}}var html=['<table class="c-table" cellspacing="0" cellpadding="0"><thead>'];var noData = false;for(var i = 0 , item; item = rs[i]; i++){ if(hasThisYearData){if(i==0){html.push('{%*i*%}<tr><th class="op_checkpoint_table_left">'+(item.headschool||myth[0])+'</th><th>'+(item.headone||myth[1])+'</th><th>'+(item.headtwo||myth[2])+'</th><th>'+(item.headfour||myth[3])+'</th></tr></thead><tbody class="op_checkpoint_table_tbody">');}if((!parseInt(item.scoreone)||parseInt(item.scoreone)===0) && (!parseInt(item.scoretwo)||parseInt(item.scoretwo)===0) && (!parseInt(item.scorethree)||parseInt(item.scorethree)===0)){noData = true;}html.push('<tr><td class="op_checkpoint_table_left"><a href={%*i*%}"'+item.schoolurl+'" target="_blank" title="'+item.schoolname+'">'+subByte(item.schoolname,25)+'</a></td><td>'+item.scoreone+'</td><td>'+item.scoretwo+'</td><td>'+item.scorethree+'</td></tr>'); }else{if(i==0){html.push('<tr><th class="op_checkpoint_table_left">'+(item.headschool||myth[0])+'</th><th>'+(item.headtwo||myth[2])+'</th><th>'+(item.headthree||myth[3])+'</th><th>'+(item.headfour||myth[4])+'</th></tr></thead><tbody class="op_checkpoint_table_tbody">');}if((!parseInt(item.scoretwo)||parse{%*i*%}Int(item.scoretwo)===0) && (!parseInt(item.scorethree)||parseInt(item.scorethree)===0) && (!parseInt(item.scorefour)||parseInt(item.scorefour)===0)){noData = true;}html.push('<tr><td class="op_checkpoint_table_left"><a href="'+item.schoolurl+'" target="_blank" title="'+item.schoolname+'">'+subByte(item.schoolname,25)+'</a></td><td>'+item.scoretwo+'</td><td>'+item.scorethree+'</td><td>'+item.scorefour+'</td></tr>'); }}html.push('</tbody></table>');if(noData==true){showMsg('暂无符合您的院校，建议更换批次和院校所在地'){%*i*%};}else{tableparent.innerHTML = html.join(''); if(oMore){oMore.style.display='block';} msg.style.display='none';if(reminder){reminder.style.display='block';}if(morelink){var sHref = href+score.value+'&provid='+$.trim(dd_provid.getValue())+'&wl='+$.trim(dd_wl.getValue());if($.trim(dd_batch.getValue()) !== "00"){sHref += '&batch='+$.trim(dd_batch.getValue());}if($.trim(dd_col_provid.getValue()) !== "0"){sHref += '&col_provid='+$.trim(dd_col_provid.getValue());}morelink.href= sHref;}}}else{ showMsg({%*i*%}'暂无符合您的院校，建议更换批次和院校所在地');timer && clearTimeout(timer);}}}});return false;}; this.dispose = function(){clearTimeout(timer);if(!ajaxFinished){ajaxFinished = true;}dd_provid&&dd_provid.dispose&&dd_provid.dispose();dd_wl&&dd_wl.dispose&&dd_wl.dispose();dd_batch&&dd_batch.dispose&&dd_batch.dispose();dd_col_provid&&dd_col_provid.dispose&&dd_col_provid.dispose();};});</script>{%/block%}