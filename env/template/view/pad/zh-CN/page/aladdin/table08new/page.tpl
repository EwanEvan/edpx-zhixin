{%extends 'c_base.tpl'%} {%block name='content'%}<style data-merge>{%fe_fn_c_css css='table'%}{%fe_fn_c_css css='tabs'%}.op_table08_new_gray{color:#666}.op_table08new_tab_content{display:none}.op_table08new_content{position:relative}.op_table08new_content .c-tabs-nav-li{padding-left:10px;padding-right:10px}.op_table08new_morelink{font-family:simsun}.op_table08new_logo{width:121px;padding-left:17px;position:absolute;right:3px;top:0}.op_table08new_logo img{position:absolute;right:60px}.op_table08new_logo span{font-weight:bold;font-size:1.077em;color:#d50029;font-family:"Microsoft YaHei",微软雅黑,"MicrosoftJhengHei",华文细{%*i*%}黑,STHeiti,MingLiu;position:absolute;right:0;top:5px}</style><div class="c-tabs op_table08new_content"> <ul class="c-tabs-nav op_table08_tabs"> {%for $index=1 to 7%} {%if $tplData["table{%$index%}"]%} {%if !$index@first%}<li class="c-tabs-nav-sep"></li>{%/if%} <li class="c-tabs-nav-li OP_LOG_BTN" data-index="{%$index%}">{%$tplData["table{%$index%}"]|escape:'html'%}</li> {%/if%} {%/for%} </ul> {%if $tplData.logo%} <div class="op_table08new_logo"> <img src="{%$tplData.logo%}" /> <span>{%$tplData.logotext%}</span> </div> {%/if%} <div class="op_table08_table"> {%for $index=1 to 7%} {%if $tplData["table{%$index%}"] && $tplData.currenttab == $index%} <table class="c-table"> {%if $tplData["th{%$index%}"][0]['c1']%} <thead> <tr class="c-table-nohihead"> <th>{%$tplData["th{%$index%}"][0]['c1']|escape:'html'%}</th> <th>{%$tplData["th{%$index%}"][0]['c2']|escape:'html'%}</th> <th>{%$tplData["th{%$index%}"][0]['c3']|escape:'html'%}</th> <th>{%$tplData["th{%$index%}"][0]['c4']|escape:'html'%}</th> <th>{%$tplData["th{%$index%}"][0]['c5']|escape:'html'%}</th> <th>{%$tplData["th{%$index%}"][0]['c6']|escape:'html'%}</th> </tr> </thead> {%/if%} <tbody> {%foreach $tplData["tr{%$index%}"] as $escaped_tr%} <tr> <td>{%if $escaped_tr['c1Link']%}<a href="{%$escaped_tr['c1Link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN">{%/if%}{%if $escaped_tr['c1']!=""%}{%$escaped_tr['c1']|highlight:0%}{%/if%}{%if $escaped_tr['c1Link']%}</a>{%/if%}</td> <td>{%if $escaped_tr['c2Link']%}<a href="{%$escaped_tr['c2Link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN">{%/if%}{%if $escaped_tr['c2']!=""%}{%$escaped_tr['c2']|highlight:0%}{%/if%}{%if $escaped_tr['c2Link']%}</a>{%/if%}</td> <td>{%if $escaped_tr['c3Link']%}<a href="{%$escaped_tr['c3Link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN">{%/if%}{%if $escaped_tr['c3']!=""%}{%$escaped_tr['c3']|highlight:0%}{%/if%}{%if $escaped_tr['c3Link']%}</a>{%/if%}</td> <td>{%if $escaped_tr['c4Link']%}<a href="{%$escaped_tr['c4Link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN">{%/if%}{%if $escaped_tr['c4']!=""%}{%$escaped_tr['c4']|highlight:0%}{%/if%}{%if $escaped_tr['c4Link']%}</a>{%/if%}</td> <td>{%if $escaped_tr['c5Link']%}<a href="{%$escaped_tr['c5Link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN">{%/if%}{%if $escaped_tr['c5']!=""%}{%$escaped_tr['c5']|highlight:0%}{%/if%}{%if $escaped_tr['c5Link']%}</a>{%/if%}</td> <td>{%if $escaped_tr['c6Link']%}<a href="{%$escaped_tr['c6Link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN">{%/if%}{%if $escaped_tr['c6']!=""%}{%$escaped_tr['c6']|highlight:0%}{%/if%}{%if $escaped_tr['c6Link']%}</a>{%/if%}</td> </tr> {%/foreach%} </tbody> </table> {%if $tplData["more{%$index%}"][0]['txt']%} <div class="c-gap-top op_table08new_morelink"> <a href="{%$tplData["more{%$index%}"][0]['link']|escape:'html'%}" target="_blank" class="OP_LOG_BTN"> {%$tplData["more{%$index%}"][0]['txt']|escape:'html'%} </a> </div> {%/if%} {%/if%} {%/for%} </div></div>{%if $tplData.provider%}<div class="c-gap-top-small op_table08_new_gray">{%$tplData.provider|escape:'html'%}</div>{%/if%}<script >
    A.setup({
        "op_table08_curtab":{%$tplData.currenttab%},
        'sourceId': '{%$extData.resourceid%}',
        'query': '{%str_replace($extData.resourceid|cat:'_','',$extData.fetchkey)%}'
    });
</script><script data-merge>A.setup(function(){var _this = this,setSepVisibility,data,getData,curTab,buildTable,noData,isSend = false,options = _this.data,op_table08_prevIndex = -1,query = options.query,srcId = options.sourceId,tableBox = _this.find('.op_table08_table').get(0),container = _this.find('.op_table08_tabs').get(0),spans = _this.find('.c-tabs-nav-li'),lis = _this.find('ul.c-tabs-nav').get(0).getElementsByTagName('li');setSepVisibility = function(tab, isVisible){var i, l, found = false{%*i*%};for(i=0,l=lis.length;i<l;i++){if(tab == lis[i]) {found = true;break;}}if(found){if(i>0) lis[i-1].style.visibility = isVisible ? 'visible' : 'hidden';if(i<l-1) lis[i+1].style.visibility = isVisible ? 'visible' : 'hidden';}};function op_table08_switchtab(index){ if (op_table08_prevIndex != -1) {$(spans[op_table08_prevIndex - 1]).removeClass('op_table08_tabs_current');$(spans[op_table08_prevIndex - 1]).removeClass('c-tabs-nav-selected');setSepVisibility(spans[op_table08_prevIndex - 1], true);}$(sp{%*i*%}ans[index - 1]).addClass('op_table08_tabs_current');$(spans[index - 1]).addClass('c-tabs-nav-selected');setSepVisibility(spans[index - 1], false);if ( op_table08_prevIndex != -1 ) {if ( !data ) {getData( index );} else {buildTable( index );}}op_table08_prevIndex = index;}getData = function( index ) {var buildHighlight, temParam;curTab = index;if ( isSend ) {return;}buildHightlight = function() {var i, j, ret = [];for ( i = 1; i <= 7; i++ ) {for ( j = 1; j <= 6; j++ ) {ret.push( 'tr' + i + '.*.c'{%*i*%} + j );}}return ret.join( ',' );};temParam = A.AJAX.PARAMS;A.AJAX.PARAMS = $.extend( {hilight: buildHightlight()}, temParam );_this.ajax(query,srcId,{success:function( d ){try {data = d[0];buildTable( curTab );} catch(e) {noData();}},error:function(e){noData();}});A.AJAX.PARAMS = temParam;};buildTable = function( index ) {var thead = table = tr = td = morelink = '',dTh,dTr,dTd,dMorelink,link,content,i,l;dTh = data[ 'th' + index ] && data[ 'th' + index ][0];if ( dTh && dTh.c1 ) {thead += '<thead {%*i*%}class="c-table-nohihead">';for ( i = 1; i < 7; i++ ) {thead += $.format( '<th#{firstClass}>#{content}</th>', {firstClass: i == 1 ? ' style="padding:0 0 0 10px;"' : '',content: dTh[ 'c' + i ]});}thead += '</thead>';}dTr = data[ 'tr' + index ];for ( i = 0, l = dTr.length; i < l; i++ ) {td = '';for ( j = 1; j < 7; j++ ) {dTd = dTr[ i ];link = dTd[ 'c' + j + 'Link' ];content = dTd[ 'c' + j ];td += $.format( '<td#{firstClass}>#{linkHead}#{content}#{linktail}</td>', {firstClass: j == 1 ? ' style="padd{%*i*%}ing:0 0 0 10px;"' : '',linkHead: link ? '<a href="' + link + '" target="_blank"' + ( j == 1 ? ' class="OP_LOG_BTN">' : '>' ) : '',content: content,linkTail: link ? '</a>' : ''});}tr += $.format( '<tr>#{tdContent}</tr>', {tdContent: td});}dMorelink = data[ 'more' + index ];if ( dMorelink && dMorelink[ 0 ] ) {morelink = $.format( '<div class="c-gap-top op_table08new_morelink"><a href="#{link}" target="_blank" class="OP_LOG_BTN">#{content}</a></div>', {link: dMorelink[0].link,content: dMorelink[0].{%*i*%}txt});}table = $.format( '<table class="c-table">\#{thead}\<tbody>\#{tr}\</tbody>\</table>\#{morelink}', {thead: thead,tr: tr,morelink: morelink});tableBox.innerHTML = table;};noData = function() {};$.each(spans, function(i, obj){$(obj).on("click", function(){op_table08_switchtab(obj.getAttribute("data-index"));});});op_table08_switchtab(_this.data.op_table08_curtab);});</script>{%/block%}