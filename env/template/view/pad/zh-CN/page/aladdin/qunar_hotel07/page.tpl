{%extends 'c_base.tpl'%} {%block name='data_modifier'%} {%$escaped_tpl="{%basename($smarty.current_dir)%}"%}{%/block%}{%block name="title"%}<style type="text/css">{%fe_fn_c_css css='btn'%}{%fe_fn_c_css css='input'%}.op-qunar_hotel07-header-title{color:#00c}.op-qunar_hotel07-header-title .op-qunar_hotel07-icon-qunar{display:inline-block;vertical-align:text-bottom;font-style:normal;overflow:hidden;width:16px;height:16px;background:url(http://bcscdn.baidu.com/fcnp-ip/1013/pic/283772069bc05b531cbb6d45cf2b91a1.png) no-repeat left top}.op-qunar_hotel07-footersafe{color:#4bad37;font-weight:bold}.op-qunar_hotel07-find{height:1.27em;line-height:1.27em;margin-top:9px}.op-qunar_hotel07-find-price{margin-top:10px;_mar{%*i*%}gin-top:8px}.op-qunar_hotel07-input{float:left;display:inline}.op-qunar_hotel07-form{padding-bottom:10px;border-bottom:1px solid #eaeaea}.op-qunar_hotel07-form .op-qunar_hotel07-cityrow{width:178px}.op-qunar_hotel07-form .op-qunar_hotel07-queryrow{width:398px}.op-qunar_hotel07-form .op-qunar_hotel07-queryrow input{width:214px}.op-qunar_hotel07-hotcity{font-size:.93em;position:absolute;left:-9999px;top:-9999px;border:1px solid #d0d0d0;color:#666;background:#fff;width:300px;z-index:2;*zoom:1;paddi{%*i*%}ng-bottom:5px}.op-qunar_hotel07-hotcity h4{border-bottom:1px solid #d0d0d0;color:#000;background:#fff;line-height:1.87em;height:1.87em;margin:0 10px;font-weight:400}.op-qunar_hotel07-hotcity .op-qunar_hotel07-hotcitytitle{color:#666}.op-qunar_hotel07-hotcity .op-qunar_hotel07-hotcitycount{color:#000}.op-qunar_hotel07-hotcity ul{*zoom:1;padding:5px 0 0 0}.op-qunar_hotel07-hotcity ul:before,.op-qunar_hotel07-hotcity ul:after{content:"";display:table}.op-qunar_hotel07-hotcity ul:after{clear:both}.o{%*i*%}p-qunar_hotel07-hotcity li{float:left;width:20%;height:1.54em;line-height:1.54em}.op-qunar_hotel07-hotcity a{display:block;text-align:left;text-decoration:none;padding-left:10px}.op-qunar_hotel07-hotcity a:visited{color:#00c}.op-qunar_hotel07-hotcity a:link{color:#00c}.op-qunar_hotel07-hotcity a:hover{color:#00c;background-color:#f5f5f5;text-decoration:underline}.op-qunar_hotel07-hotcity a:active{color:#00c}.op-qunar_hotel07-hotkey{background:none repeat scroll 0 0 #fff;border:1px solid #d0d0d0;{%*i*%}color:#666;left:-9999px;position:absolute;top:-9999px;z-index:2}.op-qunar_hotel07-hotkey .showblock{background:none repeat scroll 0 0 #fff;font-size:.93em;line-height:1.54em;margin:0;padding:5px 10px;width:275px}.op-qunar_hotel07-hotkey .showblock b.oymTitle{display:block;font-size:.93em;font-weight:400;color:#333}.op-qunar_hotel07-hotkey .showblock p{border-bottom:1px solid #e3e3e3;margin-bottom:5px;padding-bottom:5px;word-spacing:12px}.op-qunar_hotel07-hotkey .showblock p.last{border-bottom:0 {%*i*%}none;margin-bottom:0;padding-bottom:0}.op-qunar_hotel07-hotkey .showblock a{color:#00c;cursor:pointer;white-space:nowrap}.op-qunar_hotel07-hotkey .showblock a:hover{color:#00c;text-decoration:underline}.op-qunar_hotel07-hotkey b{background:0;cursor:default;float:none;height:100%;width:100%}.op-qunar_hotel07-find ul{float:left;height:1.27em;width:458px;overflow:hidden}.op-qunar_hotel07-find span{float:left;margin-right:0;color:#666}.op-qunar_hotel07-container .op-qunar_hotel07-find li{float:left;{%*i*%}white-space:nowrap;*margin-right:4px}.op-qunar_hotel07-find a{color:#00c;text-decoration:none}.op-qunar_hotel07-find a:hover{text-decoration:underline}.op-qunar_hotel07-hotels{background:#fff}.op-qunar_hotel07-hotels a{text-decoration:none;color:#00c}.op-qunar_hotel07-hotels a:hover{text-decoration:underline}.op-qunar_hotel07-qnr_hotel_pic img{margin-right:0;width:138px;height:6em;overflow:hidden;cursor:pointer;vertical-align:middle;text-decoration:none}.op-qunar_hotel07-qnr_hotelinfo{margin-top{%*i*%}:-3px}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_namestars{height:1.54em;line-height:1.54em}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_name{font-size:1.2em}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_dangci{color:#666}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_score{margin-right:13px}.op-qunar_hotel07-qnr_hotelinfo p{position:relative;height:1.54em;line-height:1.54em}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_address{color:#000}.op-qunar_hote{%*i*%}l07-qnr_hotelinfo .op-qunar_hotel07-qnr_price a{position:absolute;top:0;_top:-4px;right:0;color:#ff830f}.op-qunar_hotel07-star1{width:11px}.op-qunar_hotel07-star2{width:23px}.op-qunar_hotel07-star3{width:35px}.op-qunar_hotel07-star4{width:47px}.op-qunar_hotel07-star5{width:59px}.op-qunar_hotel07-map-icon{display:inline-block}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_tuanroom{padding-right:15px}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_sellnum{color:#666}.op-qunar_hotel07-{%*i*%}qnr_hotelinfo .op-qunar_hotel07-discountoriprice{position:absolute;top:0;_top:-4px;right:0;color:#666}.op-qunar_hotel07-qnr_hotelinfo .op-qunar_hotel07-qnr_discount{margin-right:4px;font-style:normal}.op-qunar_hotel07-hotel{float:left;padding:10px 12px 0 0}.op-qunar_hotel07-img{position:relative;float:left;width:138x;height:6em}.op-qunar_hotel07-img img{height:6em;width:138px}.op-qunar_hotel07-img .op-qunar_hotel07-img-tag{position:absolute;bottom:0;_bottom:-1px;left:0;color:#fff;width:138px;hei{%*i*%}ght:1.2em;line-height:1.2em;overflow:hidden;background:-moz-linear-gradient(top,rgba(0,0,0,0.4) 0,rgba(0,0,0,0.4) 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgba(0,0,0,0.4)),color-stop(100%,rgba(0,0,0,0.4)));background:-webkit-linear-gradient(top,rgba(0,0,0,0.4) 0,rgba(0,0,0,0.4) 100%);background:-o-linear-gradient(top,rgba(0,0,0,0.4) 0,rgba(0,0,0,0.4) 100%);background:-ms-linear-gradient(top,rgba(0,0,0,0.4) 0,rgba(0,0,0,0.4) 100%);background:linear-gradient(to b{%*i*%}ottom,rgba(0,0,0,0.4) 0,rgba(0,0,0,0.4) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#66000000",endColorstr="#66000000",GradientType=0)}.op-qunar_hotel07-img .op-qunar_hotel07-scorereview{padding-left:4px}.op-qunar_hotel07-img .op-qunar_hotel07-qnr_score{padding-right:4px}.op-qunar_hotel07-img .op-qunar_hotel07-address{padding-left:4px}.op-qunar_hotel07-img .op-qunar_hotel07-img-tag a{color:#fff!important}.op-qunar_hotel07-hotelintro{float:left;width:138px;height:6em;pa{%*i*%}dding-left:12px;color:#666}.op-qunar_hotel07-hotelintro p{padding:0;margin:0;height:1.2em;line-height:1.2em;overflow:hidden}.op-qunar_hotel07-hotels .op-qunar_hotel07-hotelintro .op-qunar_hotel07-qnr_price a{color:#f80}.op-qunar_hotel07-hotelintro .op-qunar_hotel07-qnr_discount{padding-right:12px;font-style:normal}.op-qunar_hotel07-norightpad{padding-right:0}.op-qunar_hotel07-hide{display:none}.op-qunar_hotel07-clearfix:after{clear:both;display:block;height:0;visibility:hidden;content:"."}.op-qu{%*i*%}nar_hotel07-clearfix{zoom:1}.op-qunar_hotel07-title{float:left;height:2em;line-height:2em}.op-qunar_hotel07-querybtn{float:right}.op-qunar_hotel07-hide{display:none}.op-qunar_hotel07-random{position:absolute;top:-9999px;left:-9999px}.op-qunar_hotel07-moretype{text-align:center;border-top:1px solid #eaeaea;padding-top:9px;margin-top:7px}.op-qunar_hotel07-moretype a{text-decoration:none;color:#00c}.op-qunar_hotel07-moretype a:hover{text-decoration:underline}</style><h3 class="t c-gap-bottom-small"{%*i*%}> <a class="op-{%$escaped_tpl%}-header-title" target="_blank" href="{%$tplData.url%}"><span class="c-gap-icon-right-small op-{%$escaped_tpl%}-icon-qunar"></span>{%$tplData.title|limitlen:56|highlight:0%}</a> </h3>{%/block%}{%block name='foot'%}<div class="c-gap-top-small">{%fe_fn_c_showurl%}</div>{%/block%}{%block name='content'%}{%$qunarurltemp="?"|explode:$tplData.url%}{%$escaped_qunarurl=$qunarurltemp[0]%}{%$escaped_qhfptemp="&"|explode:$tplData.url%}{%$escaped_qhfp="{%$escaped_qhfptemp[1]%}&queryid={%$tplData.queryid%}"%}{%$starsarray=['', '国家旅游局评定为一星级','国家旅游局评定为二星级','国家旅游局评定为三星级','国家旅游局评定为四星级','国家旅游局评定为五星级']%}<div class="c-border">{%$escaped_random="{%$smarty.now%}{%math equation=rand(100, 999)%}"%}<img class="op-{%$escaped_tpl%}-random" src="http://hotel.qunar.com/zhixin_trans.gif?type=7&_t={%$escaped_random%}&key={%urlencode($tplData.key)%}&srcid={%$tplData.StdStg%}&queryid={%$tplData.queryid%}&source=pad"/><div class="op-{%$escaped_tpl%}-container op-{%$escaped_tpl%}-form"> <div class="c-row"> <div class="c-span8 op-{%$escaped_tpl%}-cityrow"> <span class="op-{%$escaped_tpl%}-title c-gap-right">目的地</span> <div class="op-{%$escaped_tpl%}-input "> <input class="c-input c-input-mini op-{%$escaped_tpl%}-city-input" autocomplete="off" type="text" maxlength="50" value="{%if $tplData.curcity%}{%$tplData.curcity|escape:'html'%}{%elseif $tplData.ipcity%}{%$tplData.ipcity|escape:'html'%}{%else%}北京{%/if%}" /> <div class="op-{%$escaped_tpl%}-hotcity" data-click="{fm:'beha'}"> <h4>国内城市top<em class="c-gap-left-small c-gap-right op-{%$escaped_tpl%}-hotcitycount">{%$tplData.hotcity|@count%}</em><span class="c-gap-left op-{%$escaped_tpl%}-hotcitytitle">更多城市可直接输入搜索</span></h4> <ul> {%foreach $tplData.hotcity as $item%} <li><a data-city="{%$item['name']|escape:'html'%}" href="return false;">{%$item['name']|escape:'html'%}</a></li> {%/foreach%} </ul> </div> </div> </div> <div class="c-span16 c-span-last op-{%$escaped_tpl%}-queryrow"> <span class="op-{%$escaped_tpl%}-title c-gap-right">关键词</span> <div class="op-{%$escaped_tpl%}-input "> <input autocomplete="off" class="op-{%$escaped_tpl%}-keyword-input c-input c-input10" type="text" maxlength="50" value=""/> <div class="op-{%$escaped_tpl%}-hotkey" data-click="{fm:'beha'}"></div> </div> <a class="op-{%$escaped_tpl%}-querybtn op-{%$escaped_tpl%}-jsquerybtn c-btn c-btn-primary c-btn-small OP_LOG_BTN" href="http://hotel.qunar.com/search.jsp" target="_blank">快速查询</a> </div> </div></div><div class="op-{%$escaped_tpl%}-container"> <div class="op-{%$escaped_tpl%}-hotels op-{%$escaped_tpl%}-jshotels op-{%$escaped_tpl%}-clearfix"> {%if $tplData.hotellinks%} {%$hotelscount = $tplData.hotellinks|count%} {%if $hotelscount%2 === 1%} {%$firsthotel = $tplData.hotellinks[0]%} {%$temp="_"|explode:$firsthotel.hotelseq%} {%$len = $temp|@count%} {%$cityurl=""%} {%foreach $temp as $escaped_t%} {%if $escaped_t@index >= ($len-1)%}{%break%}{%/if%} {%$cityurl="{%$cityurl%}{%$escaped_t%}"%} {%if $escaped_t@index < ($len-2)%}{%$cityurl="{%$cityurl%}_"%}{%/if%} {%/foreach%} {%$escaped_seq="{%$temp[$len-1]%}"%} {%$escaped_url="http://tuan.hotel.qunar.com/city/{%$cityurl%}/"%} <div class="c-row c-gap-top"> {%$escaped_imageurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_image_pad&{%$escaped_qhfp%}"%} <div class="c-span6 op-{%$escaped_tpl%}-qnr_hotel_pic"><a href="{%$escaped_imageurl%}" target="_blank"><img class="c-img c-img6" src="{%$firsthotel.img|escape%}" title="查看更多酒店图片"></a></div> <div class="c-span18 c-span-last op-{%$escaped_tpl%}-qnr_hotelinfo"> <div class="op-{%$escaped_tpl%}-qnr_namestars"> {%$escaped_nameurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_name_pad&{%$escaped_qhfp%}"%} {%if $firsthotel.star%} {%$escaped_len=40%} {%elseif $firsthotel.dangci%} {%$escaped_len=40%} {%else%} {%$escaped_len=46%} {%/if%} {%$escaped_hotelnamesub=$firsthotel.hotelname|limitlen:$escaped_len%} <a {%if $escaped_hotelnamesub != $firsthotel.hotelname%}title="{%$firsthotel.hotelname|escape%}"{%/if%} class="op-{%$escaped_tpl%}-qnr_name c-gap-right-small" href="{%$escaped_nameurl%}" target="_blank">{%$escaped_hotelnamesub|escape%}</a>{%if intval($firsthotel.star)>0%}<i title="{%$starsarray[{%$firsthotel.star|escape%}]%}" class="c-icon c-icon-star op-{%$escaped_tpl%}-star{%$firsthotel.star|escape%}"></i> {%elseif $firsthotel.dangci%}<span class="op-{%$escaped_tpl%}-qnr_dangci" title="去哪儿网用户评定为{%$firsthotel.dangci|escape%}酒店">{%$firsthotel.dangci|escape%}</span>{%/if%} </div> <p class="op-{%$escaped_tpl%}-qnr_address"> {%if $firsthotel.address%} {%$escaped_hoteladdrsub=$firsthotel.address|limitlen:52%} <span {%if $escaped_hoteladdrsub != $firsthotel.address%}title="位于{%$firsthotel.address|escape%}"{%/if%}>位于{%$escaped_hoteladdrsub|escape%}</span> {%/if%} </p> <p> {%if floatval($firsthotel.score)>0%} {%$escaped_scoreurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_score_pad&{%$escaped_qhfp%}"%} <span class="op-{%$escaped_tpl%}-qnr_score"><a href="{%$escaped_scoreurl%}" target="_blank">{%$firsthotel.score|string_format:"%.1f"%}/5分</a></span>{%/if%}{%if intval($firsthotel.totalreview)>0%}{%$escaped_comurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_cmt_pad&{%$escaped_qhfp%}#scroll=comment"%}<span><a href="{%$escaped_comurl%}" target="_blank">{%$firsthotel.totalreview|escape%}条点评</a></span> {%/if%} {%if intval($firsthotel.price)>=0%} {%$escaped_priceurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_price_pad&{%$escaped_qhfp%}"%} <span class="op-{%$escaped_tpl%}-qnr_price"><a href="{%$escaped_priceurl%}" target="_blank"><b>&yen;&nbsp;{%$firsthotel.price|escape%}</b>起</a></span> {%/if%} </p> <p> {%if floatval($firsthotel.tuanroomsnum)>0%} {%$escaped_tuanroomurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_count_pad&{%$escaped_qhfp%}"%} <span class="op-{%$escaped_tpl%}-qnr_tuanroom"><a href="{%$escaped_tuanroomurl%}" target="_blank">共{%$firsthotel.tuanroomsnum|escape%}团品&gt;&gt;</a></span>{%/if%}{%if intval($firsthotel.sellnum)>0%}<span class="op-{%$escaped_tpl%}-qnr_sellnum">已售出{%$firsthotel.sellnum|escape%}份</span>{%/if%} <span class="op-{%$escaped_tpl%}-discountoriprice"> {%if intval($firsthotel.discount)>0%} <i class="op-{%$escaped_tpl%}-qnr_discount">{%$firsthotel.discount|string_format:"%.1f"%}折</i>{%/if%}{%if intval($firsthotel.originalprice)>0%}<del class="op-{%$escaped_tpl%}-qnr_oriprice">&yen;&nbsp;{%$firsthotel.originalprice|escape%}</del> {%/if%} </span> </p> </div> </div> {%/if%} {%if $hotelscount > 1%} {%foreach $tplData.hotellinks as $hotel%} {%if $hotelscount%2 === 1 && $hotel@index === 0%}{%continue%}{%/if%} {%$temp="_"|explode:$hotel.hotelseq%} {%$len = $temp|@count%} {%$cityurl=""%} {%foreach $temp as $escaped_t%} {%if $escaped_t@index >= ($len-1)%}{%break%}{%/if%} {%$cityurl="{%$cityurl%}{%$escaped_t%}"%} {%if $escaped_t@index < ($len-2)%}{%$cityurl="{%$cityurl%}_"%}{%/if%} {%/foreach%} {%$escaped_seq="{%$temp[$len-1]%}"%} {%$escaped_url="http://tuan.hotel.qunar.com/city/{%$cityurl%}/"%} <div class="op-{%$escaped_tpl%}-hotel {%if $hotelscount%2 === 1 && $hotel@index%2 === 0 || $hotelscount%2 === 0 && $hotel@index%2 === 1%}op-{%$escaped_tpl%}-norightpad{%/if%}"> <div class="op-{%$escaped_tpl%}-img"> {%$escaped_imageurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_image_pad&{%$escaped_qhfp%}"%} <a target="_blank" href="{%$escaped_imageurl%}"><img class="c-img c-img6" src="{%$hotel.img|escape%}" title="查看更多酒店图片"/></a> {%$escaped_scorev=floatval($hotel.score)>0 || intval($hotel.totalreview)>0%} {%if $escaped_scorev || $hotel.address%} <div class="op-{%$escaped_tpl%}-img-tag {%if $escaped_scorev && $hotel.address%}op-{%$escaped_tpl%}-jsimage{%/if%}"> {%if floatval($hotel.score)>0 || intval($hotel.totalreview)>0%} <div class="op-{%$escaped_tpl%}-scorereview"> {%if floatval($hotel.score)>0%} {%$escaped_scoreurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_score_pad&{%$escaped_qhfp%}"%} <span class="op-{%$escaped_tpl%}-qnr_score"><a href="{%$escaped_scoreurl%}" target="_blank">{%$hotel.score|string_format:"%.1f"%}/5分</a></span>{%/if%}{%if intval($hotel.totalreview)>0%}{%$escaped_comurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_cmt_pad&{%$escaped_qhfp%}#scroll=comment"%}<span><a href="{%$escaped_comurl%}" target="_blank">{%$hotel.totalreview|escape%}条点评</a></span> {%/if%} </div> {%/if%} {%if $hotel.address%} {%$escaped_hoteladdrsub=$hotel.address|limitlen:12%} <div class="op-{%$escaped_tpl%}-address" {%if $escaped_hoteladdrsub != $hotel.address%}title="位于{%$hotel.address|escape%}"{%/if%}>位于{%$escaped_hoteladdrsub|escape%}</div> {%/if%} </div> {%/if%} </div> <div class="op-{%$escaped_tpl%}-hotelintro"> <p class="op-{%$escaped_tpl%}-name"> {%$escaped_nameurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_name_pad&{%$escaped_qhfp%}"%} {%$escaped_hotelnamesub=$hotel.hotelname|limitlen:16%} <a {%if $escaped_hotelnamesub != $hotel.hotelname%}title="{%$hotel.hotelname|escape%}"{%/if%} class="op-{%$escaped_tpl%}-qnr_name" href="{%$escaped_nameurl%}" target="_blank">{%$escaped_hotelnamesub|escape%}</a> </p> <p> {%if intval($hotel.price)>0%} {%$escaped_priceurl="{%$escaped_url%}dt-{%$escaped_seq%}?ex_track=bd_zhixin_hotel_tuan_bsc_price_pad&{%$escaped_qhfp%}"%} <span class="op-{%$escaped_tpl%}-qnr_price"><a href="{%$escaped_priceurl%}" target="_blank"><b>&yen;{%$hotel.price|escape%}</b>起</a></span> {%/if%} </p> <p> {%if intval($hotel.discount)>0%} <i class="op-{%$escaped_tpl%}-qnr_discount">{%$hotel.discount|string_format:"%.1f"%}折</i>{%/if%}{%if intval($hotel.originalprice)>0%}<del>&yen;{%$hotel.originalprice|escape%}</del> {%/if%} </p> <p> {%if intval($hotel.star)>0%} <i title="{%$starsarray[{%$hotel.star|escape%}]%}" class="c-icon c-icon-star op-{%$escaped_tpl%}-star{%$hotel.star|escape%}"></i> {%elseif $hotel.dangci%} <span title="去哪儿网用户评定为{%$hotel.dangci|escape%}酒店">{%$hotel.dangci|escape%}</span> {%/if%} </p> <p> {%if intval($hotel.sellnum)>0%} <span>{%$hotel.sellnum|escape%}份已售</span> {%/if%} </p> </div> </div> {%/foreach%} {%/if%} {%/if%} </div> {%if $tplData.pricelinks and $tplData.pricelinks|@count>0%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-find-price op-{%$escaped_tpl%}-clearfix {%$escaped_hide%}"> <span class="c-gap-right-small">价格：</span> <ul class="op-{%$escaped_tpl%}-jsprice"> {%foreach $tplData.pricelinks as $link%} {%$escaped_url= "{%$escaped_qunarurl%}?pr={%$link.url%}&ex_track=bd_zhixin_hotel_tuan_bsc_hotprice_pad&{%$escaped_qhfp%}"%} {%$escaped_name=str_replace("%26","&","{%$link.name|escape:'html'%}")%} <li class="c-gap-right"><a target="_blank" href="{%$escaped_url%}">{%$escaped_name%}</a></li> {%/foreach%} </ul> </div> {%if $tplData.dangcilinks and $tplData.dangcilinks|@count>0%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-clearfix {%$escaped_hide%}"> <span class="c-gap-right-small">档次：</span> <ul class="op-{%$escaped_tpl%}-jsdangci"> {%foreach $tplData.dangcilinks as $link2%} {%$escaped_url2= "{%$escaped_qunarurl%}?st={%$link2.url%}&ex_track=bd_zhixin_hotel_tuan_bsc_hotlevel_pad&{%$escaped_qhfp%}"%} <li class="c-gap-right"><a target="_blank" href="{%$escaped_url2%}">{%$link2.name|escape:'html'%}</a></li> {%/foreach%} </ul> </div> {%if $tplData.brandlinks and $tplData.brandlinks|@count>0%} {%$escaped_hide=""%} {%else%} {%$escaped_hide="op-{%$escaped_tpl%}-hide"%} {%/if%} <div class="op-{%$escaped_tpl%}-find op-{%$escaped_tpl%}-clearfix {%$escaped_hide%}"> <span class="c-gap-right-small">品牌：</span> <ul class="op-{%$escaped_tpl%}-jsbrand"> {%foreach $tplData.brandlinks as $link1%} {%$escaped_url1= "{%$escaped_qunarurl%}?br={%urlencode($link1.name)%}|{%$link1.url%}&ex_track=bd_zhixin_hotel_tuan_bsc_hotbrand_pad&{%$escaped_qhfp%}"%} <li class="c-gap-right"><a target="_blank" href="{%$escaped_url1%}">{%$link1.name|escape:'html'%}</a></li> {%/foreach%} </ul> </div> <p class="op-{%$escaped_tpl%}-moretype"><a class="op-{%$escaped_tpl%}-jsquerymore" href="http://hotel.qunar.com/search.jsp" target="_blank">点击查看更多酒店信息&gt;&gt;</a></p></div></div><script >
A.setup({
    TPL_NAME: '{%$escaped_tpl%}',
    QHFP: "{%$escaped_qhfp%}",
    QUERYID : "{%$tplData.queryid%}"
});
</script><script data-merge>A.setup(function(){var card = this;var domainurl = "http://www.baidu.com/qunarui/hotel";var ajaxFinished = false;var util = (function(card) {var classPrefix = 'op-'+ card.data.TPL_NAME +'-';var eventCallbacksMap = {};var pub;return pub = {isIE6: function(){return /msie 6/i.test(navigator.userAgent);},isIE7: function(){return /msie 7/i.test(navigator.userAgent);},getClass: function(cls) {return (classPrefix + cls);},getTags: function ( domElement, tagName ) {if ( !domE{%*i*%}lement ) {return [];}return domElement.getElementsByTagName( tagName ) || [];},getElementByClassName: function(className, parentDom){if(parentDom){return $(parentDom).find('.'+className)[0];}else{return $('.'+className)[0];}},getChildrens: function(dom){return dom && dom.childNodes || [];},hasClass: function(el, name) {return $(el).hasClass(name);},addClass: function(el,name){$(el).addClass(name);},removeClass: function(el,name){$(el).removeClass(name);},getOffset: function(input) {var parentNod{%*i*%}e = input.parentNode;var offset = $(parentNode).offset();return offset;},on: function(dom, eventName, callback){$(dom).bind(eventName, callback);},one: function(dom, eventName, callback){$(dom).one(eventName, callback);},unbind: function(dom, eventName, callback){$(dom).unbind(eventName, callback);},jsonToQuery: function(json){var urlparams = [];var encodeitem = null;$.each(json, function( key, item ) {if ( /[^\x00-\xFF]/.test( item ) ) {encodeitem = encodeURIComponent( item );}else{encodeitem ={%*i*%} item;}urlparams.push(key+'='+encodeitem);});return urlparams.join('&');},ajax: function(url, params, success, fail){fail = fail || function() {};$.ajax({type: "POST",url: url,data: util.jsonToQuery( params),success: function ( results ) {success && success(results);},error: function ( xhr ) {fail(xhr);}});},jsonp: function(url, params, queryField, success, fail){fail = fail || function() {};queryField = queryField || '__jscallback';$.ajax({type: "POST",url: url + '?' + queryField + '=?&' + util{%*i*%}.jsonToQuery( params),dataType: 'jsonp',success: function ( results ) {try {success && success(results);}catch( e ) {fail();return;}},error: function ( xhr ) {fail(xhr);}});},extend: function(result, src1, src2){var s = null;for(s in src1){if(src1.hasOwnProperty(s)){result[s] = src1[s];}}for(s in src2){if(src2.hasOwnProperty(s)){result[s] = src2[s];}}return result;},trim: function(str){return str.replace(/(^\s*)|(\s*$)/g, "");},bind: function(eventName, callback){if(!eventCallbacksMap[eventName]{%*i*%}){eventCallbacksMap[eventName] = [];}eventCallbacksMap[eventName].push(callback);},trigger: function(eventName){var args = arguments || [];var callbacks = eventCallbacksMap[eventName] || [];if(callbacks.length === 0) return;var temp = [];for(var i=1; i<args.length; i++){temp.push(args[i]);}for(var j=0; j<callbacks.length;j++){callbacks[j].apply(card, temp);}},GetZoomFactor : function() {var factor = 1;if (document.body.getBoundingClientRect) {var rect = document.body.getBoundingClientRect();var {%*i*%}physicalW = rect.right - rect.left;var logicalW = document.body.offsetWidth;factor = Math.round ((physicalW / logicalW) * 100) / 100;}return factor;},toFixed: function(num, n){var srcnum = num;if(!num) return;if(!n) n=0;num *= Math.pow(10, n);var tmp = parseInt(num);num = tmp/( Math.pow(10.0, n) );if(num === parseInt(srcnum)){return srcnum + '.0';}return num;},format: function(tpl, json){return $.format(tpl, json);},subByte: function(source,length,tail){return $.subByte(source, length, tail);}}}{%*i*%})(card);function Popup(options){options = options || {};if(!options.dom || !options.offsetdom) return;this.offsetdom = options.offsetdom;this.display = options.display || 'none';this.dom = options.dom;this.url = options.url;this.success = options.success;this.error = options.error;this.cache = {};this.params = {};if(options.html){options.dom.innerHTML = options.html;}if(this.display !== 'none'){this.show();}}Popup.prototype.render = function(){var queryKey = this.getQuerykey();if(this.cache[quer{%*i*%}yKey]){this._callback(1, this.cache[queryKey]);}else{this._getData();}};Popup.prototype.show = function(){if(this.dom){var offsetHeight = this.offsetdom.offsetHeight;var position = util.getOffset(this.offsetdom);this.top = position.top + offsetHeight -1;this.left = position.left;if(util.isIE7()){var _factor = util.GetZoomFactor() || 0.1;this.top = (position.top/_factor) + offsetHeight -1;this.left = position.left/_factor;}this.dom.style.top = this.top + 'px';this.dom.style.left = this.left + 'px{%*i*%}';this.display = 'block';}};Popup.prototype.hide = function(){if(this.dom){this.dom.style.top = '-9999px';this.dom.style.left = '-9999px';this.display = 'none';}};Popup.prototype.setQueryParams = function(params){params = params || {};if(!params.queryName) return;var p = {};p[params.queryName] = util.trim(params.queryKey);this.params = util.extend({}, this.params, p);};Popup.prototype.getQueryParams = function(){return this.params || {};};Popup.prototype.clearCache = function(){if(this.getCacheS{%*i*%}ize()>20){this.cache = {};}};Popup.prototype.getCacheSize = function(){var n = 0;for(var s in this.cache){if(this.cache.hasOwnProperty(s)){n++;}}return n;};Popup.prototype._getData = function(){var me = this;me.onsuccess = function(data){ajaxFinished = true;if(!data){me._callback();return;}me._callback(1, data);me.clearCache();me.cache[me.getQuerykey()] = data;};me.onerror = function(xhr){ajaxFinished = true;me._callback(0, xhr);};util.jsonp(this.url,util.extend({}, {_t: new Date().getTime()}, t{%*i*%}his.params),'__jscallback',me.onsuccess,me.onerror);};Popup.prototype.getQuerykey = function(){var querykey = '';for(var s in this.params){if(this.params.hasOwnProperty(s)){querykey = querykey + this.params[s];}}return querykey;};Popup.prototype._callback = function(status, data){if(!this.dom) return;if(status === 1){if(this.success){this.success(data);}}else{if(this.error){this.error(data);}}};var hotHotel = (function(card){var pub = {};var cache = {};var pricedom = util.getElementByClassName(u{%*i*%}til.getClass('jsprice'));var priceParent = pricedom.parentNode;var dangcidom = util.getElementByClassName(util.getClass('jsdangci'));var dangciParent = dangcidom.parentNode;var branddom = util.getElementByClassName(util.getClass('jsbrand'));var brandParent = branddom.parentNode;var hotelsdom = util.getElementByClassName(util.getClass('jshotels'));var hideClassName = util.getClass('hide');var cityname='';var callback = function(){};var getCacheSize = function(){var n = 0;for(var s in cache){if(ca{%*i*%}che.hasOwnProperty(s)){n++;}}return n;};pub.onsuccess = function(data){ajaxFinished = true;if(getCacheSize()>=20) cache={};cache[cityname] = data;callback(data);};pub.onerror = function(xhr){ajaxFinished = true;};var getData = function(_cityname, _callback){cityname = _cityname;callback = _callback;if(cache[cityname]) {callback(cache[cityname]);return;}util.jsonp(domainurl+'/basicCard.jsp',{cityName: cityname, isgb: 'Y', queryid: card.data.QUERYID},'__jscallback',pub.onsuccess,pub.onerror);};var{%*i*%} getFilterHtml = function(data, dom ,parentDom, url, ext_param, filtertype){var html = [];if(!data || data && data.length===0){util.addClass(parentDom, hideClassName);}else{for(i=0; i<data.length; i++){var filterurl = url + ext_param + "&" + card.data.QHFP + '&'+ filtertype + '=' +(filtertype==='br' ? encodeURIComponent(data[i].name) + '|' : '') + data[i].url;name = data[i].name;html.push('<li class="c-gap-right"><a target="_blank" href="', filterurl,'">', name.replace(/%26/g,"&"),'</a></li>');}{%*i*%}dom.innerHTML= html.join('');util.removeClass(parentDom, hideClassName);}};var getHotelsHtml = function(data, url){var html = [];var i, tplname=card.data.TPL_NAME;var firsthotelTpl = ['<div class="c-row c-gap-top">','<div class="c-span6 op-#{tplname}-qnr_hotel_pic"><a href="#{imageurl}" target="_blank"><img class="c-img c-img6" src="#{img}" title="查看更多酒店图片"></a></div>','<div class="c-span18 c-span-last op-#{tplname}-qnr_hotelinfo">','<div class="op-#{tplname}-qnr_namestars">','<a title="#{hoteln{%*i*%}ametitle}" class="op-#{tplname}-qnr_name c-gap-right-small" href="#{hotelnameurl}" target="_blank">#{hotelname}</a>','#{starhtml}#{dangcihtml}','</div>','<p class="op-#{tplname}-qnr_address">#{addresshtml}</p>','<p>','#{scorehtml}','#{totalreviewhtml}','#{pricehtml}','</p>','<p>','#{tuanroomshtml}','#{sellnumhtml}','<span class="op-#{tplname}-discountoriprice">#{discounthtml}','#{originalpricehtml}</span>','</p>','</div>','</div>'].join('');var hotelTpl = ['<div class="op-#{tplname}-hotel #{nopa{%*i*%}ddingclass}">','<div class="op-#{tplname}-img">','<a target="_blank" href="#{imageurl}"><img class="c-img c-img6" src="#{img}" title="查看更多酒店图片"/></a>','<div class="op-#{tplname}-img-tag #{jsimage}">','<div class="op-#{tplname}-scorereview">','#{scorehtml}','#{totalreviewhtml}','</div>','<div class="op-#{tplname}-address">#{addresshtml}</div>','</div>','</div>','<div class="op-#{tplname}-hotelintro">','<p class="op-#{tplname}-name">','<a class="op-#{tplname}-qnr_name c-gap-right-small" href="#{ho{%*i*%}telnameurl}" target="_blank" title="#{hotelnametitle}">#{hotelname}</a>','</p>','<p>#{pricehtml}</p>','<p>#{discounthtml}#{originalpricehtml}</p>','<p>#{starhtml}#{dangcihtml}</p>','<p>#{sellnumhtml}</p>','</div>','</div>'].join('');var starsarray=['', '国家旅游局评定为一星级','国家旅游局评定为二星级','国家旅游局评定为三星级','国家旅游局评定为四星级','国家旅游局评定为五星级'];if(!data || data && data.length<=0){util.addClass(hotelsdom, hideClassName);}else{var hotelurl, cityurl, seq, seqindex, cityurlseqArray =[], hotelnamesub, addresssub, addressti{%*i*%}tle;var score, discount, scoreurl, reviewurl, priceurl, tuanroomurl;var isodd = false;for(i=0; i<data.length; i++){seqindex = data[i].hotelseq.lastIndexOf('_');isodd = (i === 0 && data.length%2 === 1);cityurl = data[i].hotelseq.substring(0, seqindex);seq = data[i].hotelseq.substring(seqindex+1);hotelurl = "http://tuan.hotel.qunar.com/city/" + cityurl + "/dt-" + seq;hotelnamesub = util.subByte(data[i].hotelname, isodd ? (data[i].star>0? 38 : (data[i].dangci ? 42 : 46)) : 16);addresssub = util.sub{%*i*%}Byte(data[i].address, isodd ? 52 : 12);addresstitle = addresssub === data[i].address ? '' : '位于'+ data[i].address;score = data[i].score>0? util.toFixed(data[i].score, 1)+'/5分' : '';discount = data[i].discount>0? util.toFixed(data[i].discount, 1)+'折' : '';tuanroomurl = hotelurl + '?ex_track=bd_zhixin_hotel_tuan_bsc_count_pad&' + card.data.QHFP;scoreurl= hotelurl + '?ex_track=bd_zhixin_hotel_tuan_bsc_score_pad&'+ card.data.QHFP;reviewurl = hotelurl + '?ex_track=bd_zhixin_hotel_tuan_bsc_cmt_pad&'+ {%*i*%}card.data.QHFP + '#scroll=comment';priceurl= hotelurl + '?ex_track=bd_zhixin_hotel_tuan_bsc_price_pad&'+ card.data.QHFP;html.push(util.format(isodd ? firsthotelTpl : hotelTpl, {tplname: tplname,nopaddingclass: data.length%2===0 && i%2 === 1 || data.length%2===1 && i%2 === 0 ? 'op-'+tplname+'-norightpad' : '',jsimage: data[i].score > 0 || data[i].totalreview > 0 || data[i].address ? 'op-'+tplname+'-jsimage' : '',imageurl: hotelurl + '?ex_track=bd_zhixin_hotel_tuan_bsc_image_pad&'+ card.data.QHFP,{%*i*%}img: data[i].img,hotelnameurl: hotelurl + '?ex_track=bd_zhixin_hotel_tuan_bsc_name_pad&'+ card.data.QHFP,hotelname: hotelnamesub,hotelnametitle: data[i].hotelname === hotelnamesub ? '' : data[i].hotelname,starhtml: data[i].star>0 ? '<i title="'+starsarray[data[i].star]+'" class="c-icon c-icon-star op-'+tplname+'-star'+data[i].star+'"></i>' : '',dangcihtml: (!data[i].star && data[i].dangci) ? '<span class="op-'+tplname+'-qnr_dangci" title="去哪儿网用户评定为'+data[i].dangci+'酒店">'+data[i].dangci+'</span>'{%*i*%} : '',pricehtml: data[i].price>=0 ? '<span class="op-'+tplname+'-qnr_price"><a href="'+priceurl+'" target="_blank"><b>&yen;&nbsp;'+data[i].price+'</b>起</a></span>' : '',discounthtml: data[i].discount>0 ? '<i class="op-'+tplname+'-qnr_discount">'+discount+'</i>': '',originalpricehtml: data[i].originalprice >=0 ? '<del class="op-'+tplname+'-qnr_oriprice">&yen;&nbsp;'+data[i].originalprice+'</del>': '',tuanroomshtml: data[i].tuanroomsnum>0? '<span class="op-'+tplname+'-qnr_tuanroom c-gap-right"><a {%*i*%}href="'+tuanroomurl+'" target="_blank">共'+data[i].tuanroomsnum+'团品&gt;&gt;</a></span>' : '',sellnumhtml: data[i].sellnum > 0 ? '<span class="op-'+tplname+'-qnr_sellnum">已售出'+data[i].sellnum+'份</span>': '',scorehtml: data[i].score > 0 ? '<span class="op-'+tplname+'-qnr_score"><a href="'+scoreurl+'" target="_blank">'+score+'</a></span>': '',totalreviewhtml: data[i].totalreview > 0 ? '<span><a href="'+reviewurl+'" target="_blank">'+data[i].totalreview+'条点评</a></span>': '',addresshtml: data[i].addre{%*i*%}ss ? '<span title="'+addresstitle+'">位于'+addresssub+'</span>': ''}));}hotelsdom.innerHTML= html.join('');util.removeClass(hotelsdom, hideClassName);}};return util.extend({}, pub, {render: function(cityname){var show = function(data){if(data.ret === true && data.data){data = data.data;var _url = data.url || "http://tuan.hotel.qunar.com/city/beijing_city/";var url = _url.split('?')[0];if(url.lastIndexOf('/')<0) {url = url + '/';}getFilterHtml(data.brandlinks, branddom, brandParent, url, "?ex_track{%*i*%}=bd_zhixin_hotel_tuan_bsc_hotbrand_pad", "br");getFilterHtml(data.pricelinks, pricedom, priceParent, url, "?ex_track=bd_zhixin_hotel_tuan_bsc_hotprice_pad", "pr");getFilterHtml(data.dangcilinks, dangcidom, dangciParent, url, "?ex_track=bd_zhixin_hotel_tuan_bsc_hotlevel_pad", "st");getHotelsHtml(data.hotellinks, url);}};getData(cityname, show);}});})(card);var tempScrollTop = 0;var cityInputEl = util.getElementByClassName(util.getClass('city-input'));var hotCityLayerEl = util.getElementByClassNam{%*i*%}e(util.getClass('hotcity'));var keyInputEl = util.getElementByClassName(util.getClass('keyword-input'));var hotKeyLayerEl = util.getElementByClassName(util.getClass('hotkey'));var hotCity = new Popup({dom: hotCityLayerEl,offsetdom: cityInputEl});var hotKey = new Popup({dom: hotKeyLayerEl,offsetdom: keyInputEl,url: domainurl + "/sugg.jsp",success: function(data){if(data && data.data){hotKey.dom.style.borderWidth = '1px';hotKey.dom.innerHTML = data.data.replace(/onmousedown="return searchword\(.*\{%*i*%})"/ig, "");var cityguidedom = util.getElementByClassName('js_cityguide', hotKeyLayerEl);if(cityguidedom){cityguidedom.parentNode.style.display = 'none';}}},error: function(xhr){hotKey.dom.innerHTML = '';hotKey.dom.style.borderWidth = '0px';}});hotKey.setQueryParams({queryName: 'v',queryKey: '1'});hotKey.setQueryParams({queryName: 'queryid',queryKey: card.data.QUERYID});var documentClickHandler = function(e) {hotCity.hide();hotKey.hide();};util.on(document, 'click', documentClickHandler);var wind{%*i*%}owBlurHandler = function(e) {hotCity.hide();hotKey.hide();};util.on(window, 'blur', windowBlurHandler);util.on(cityInputEl,'click',function(e) {hotKey.hide();card._sug && card._sug.hide();if (hotCity.display === 'block') {hotCity.hide();}else {hotCity.show();}e.stopPropagation();e.preventDefault();});util.on(hotCityLayerEl,'click',function(e) {e.stopPropagation();e.preventDefault();var target = e.target || e.srcElement;if (target.tagName.toUpperCase() === 'A') {var v = target.getAttribute('data-{%*i*%}city');if(cityInputEl.value != v){util.trigger('citychanged',v);}if(v){if(card._sug ){card._sug.hide();card._sug.pick('<span class="js_cityname" data-cityname="'+v+'">'+v+'</span>');}else{cityInputEl.value = v;}hotCity.hide();}}});util.on(keyInputEl,'click',function(e) {if (hotKey.display === 'block') {hotKey.hide();}else {hotKey.setQueryParams({queryName: 'city',queryKey: cityInputEl.value});hotKey.render();hotKey.show();hotCity.hide();}e.stopPropagation();e.preventDefault();});util.on(hotKeyLa{%*i*%}yerEl,'click',function(e) {e.stopPropagation();e.preventDefault();var target = e.target || e.srcElement;if (target.tagName.toUpperCase() === 'A') {var v = util.trim(target.innerHTML);if(v){keyInputEl.value = v;hotKey.hide();$(window).scrollTop(tempScrollTop);}}});util.on(hotCityLayerEl,'touchmove',function(e) {cityInputEl.blur();});util.on(hotKeyLayerEl,'touchmove',function(e) {keyInputEl.blur();});util.one(hotKeyLayerEl,'touchstart',function(e) {tempScrollTop = $(window).scrollTop();});util.bin{%*i*%}d('citychanged', function(cityname){hotHotel && hotHotel.render(cityname);});var querybtn = util.getElementByClassName(util.getClass('jsquerybtn'));util.on(querybtn,'click',function(e){var cityname = encodeURIComponent(cityInputEl.value);var key = encodeURIComponent(keyInputEl.value);querybtn.href = 'http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_bsc_search_pad&toCity='+ cityname +'&q='+key + "&"+ card.data.QHFP;});var querymore = util.getElementByClassName(util.getClass('j{%*i*%}squerymore'));util.on(querymore,'click',function(e){var cityname = encodeURIComponent(cityInputEl.value);var key = encodeURIComponent(keyInputEl.value);querymore.href = 'http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_bsc_moreroom_pad&toCity='+ cityname +'&q='+key + "&"+ card.data.QHFP;});card.dispose = function(){if(!ajaxFinished){if(hotKey.onsuccess){hotKey.onsuccess = null;}if(hotKey.onerror){hotKey.onerror = null;}if(hotHotel.onsuccess){hotHotel.onsuccess = null;}if(hotH{%*i*%}otel.onerror){hotHotel.onerror = null;}}util.unbind(document, 'click', documentClickHandler);util.unbind(window, 'blur', windowBlurHandler);};});</script>{%/block%}