{%extends 'right_base.tpl'%} {%block name='content'%}{%function name="showWeiboComment"%} <div style="background:#f5f5f5;padding:5px;{%if $border%}border-top:1px dotted #e5e5e5{%/if%}"> <span class="opr-timeline-weibo_comment"> <span class="{%$itemcmt.userDegree|escape%}" style="color:#00c"><a href="{%$itemcmt.userUrl|escape%}" target="_blank">{%$itemcmt.userName|escape%}</a></span>:{%$itemcmt.text|escape%} &nbsp;&nbsp;<a href="{%$itemcmt.url|escape%}" target="_blank">转发</a> </span> </div>{%/function%}{%function name=showEventItem%}{%if $itemData["type"]=="news"%} <div><a data-tp="news" href="{%$itemData.resrcTitle.url|escape%}" target="_blank" title="{%$itemData.resrcTitle.text|escape%}" class="opr-timeline-subitem_title">{%$itemData.resrcTitle.text|escape%}</a></div> <div><span style="color:#666">{%$itemData.resrcRef|escape%}</span><span style="margin-left:10px;color:#666">{%$itemData.resrcTime|escape%}</span></div>{%elseif $itemData["type"]=="img"%} <div><a data-tp="img" href="{%$itemData.resrcTitle.url|escape%}" target="_blank" title="{%$itemData.resrcTitle.text|escape%}" class="opr-timeline-subitem_title">{%$itemData.resrcTitle.text|escape%}</a></div> <div class="opr-timeline-imgbox"><a data-tp="img" data-ct="img" href="{%$itemData.resrcImg.url|escape%}" target="_blank"><img src="{%trim($itemData.resrcImg.src)|escape%}" style="width:100px;border:1px solid #e5e5e5"></a></div> <div><span style="color:#666">{%$itemData.resrcRef|escape%}</span><span style="margin-left:10px;color:#666">{%$itemData.resrcTime|escape%}</span></div>{%elseif $itemData["type"]=="video"%} <div><a data-tp="video" href="{%$itemData.resrcTitle.url|escape%}" target="_blank" title="{%$itemData.resrcTitle.text|escape%}" class="opr-timeline-subitem_title">{%$itemData.resrcTitle.text|escape%}</a></div> <div  class="opr-timeline-imgbox"><a data-tp="video" data-ct="img" href="{%$itemData.resrcImg.url|escape%}" target="_blank" class="preBox"><img src="{%trim($itemData.resrcImg.src)|escape%}" alt="{%$itemData.resrcTitle.text|escape%}" style="width:145px;height:100px;"><span style="width:145px"></span><b></b><i>{%$itemData.resrcVideoTime|escape%}</i></a><br clear="all"></div> <div><span style="color:#666">{%$itemData.resrcRef|escape%}</span><span style="margin-left:10px;color:#666">{%$itemData.resrcTime|escape%}</span></div>{%elseif $itemData["type"]=="weibo"%}<div><span class="opr-timeline-weibo_content"><span class="{%$itemData.weiboUser.userDegree|escape%}" style="color:#00c"><a data-tp="weibo" href="{%$itemData.weiboUser.userUrl|escape%}" target="_blank" >{%$itemData.weiboUser.userName|escape%}</a></span>:{%$itemData.weiboText%}</span></div> {%if $itemData.weiboVideo%} <div  class="opr-timeline-imgbox"><a data-tp="weibo" data-ct="img" href="{%$itemData.weiboVideo.url|escape%}" target="_blank" class="preBox"><img src="{%trim($itemData.weiboVideo.src)|escape%}"  style="width:145px;height:100px;"><span style="width:145px"></span><b></b><i>{%$itemData.weiboVideo.videoTime|escape%}</i></a><br clear="all"></div> {%/if%} {%if $itemData.weiboImg%} <div><a  data-tp="weibo" data-ct="img"  href="{%$itemData.weiboImg.url|escape%}" target="_blank"><img src="{%trim($itemData.weiboImg.src)|escape%}" style="width:100px;border:1px solid #e5e5e5"></a></div> {%/if%} {%if $itemData.weiboHotCommentNum > 1%} {%foreach $itemData.weiboHotComment as $comment%} {%showWeiboComment itemcmt=$comment border=($comment@index>0)%} {%/foreach%} <div class="opr-timeline-weibo_comment_arr"></div> {%elseif $itemData.weiboHotCommentNum == 1%} {%showWeiboComment itemcmt=$itemData.weiboHotComment%} {%/if%} <div><a  data-tp="weibo" href="{%$itemData.weiboCC.url|escape%}" target="_blank">转发({%$itemData.weiboCC.num|escape%})</a><span style="margin:0 10px;color:#666">|</span><a  data-tp="weibo" href="{%$itemData.weiboComment.url|escape%}" target="_blank">评论({%$itemData.weiboComment.num|escape%})</a></div> <div><span style="color:#666">{%$itemData.resrcRef|escape%}</span><span style="margin-left:10px;color:#666">{%$itemData.resrcTime|escape%}</span></div>{%else%} {%$itemData["type"]%}{%/if%}{%/function%}<style>.right_noline_con{margin-left:-20px;background:#fff}.opr-timeline-box{background:url(http://www.baidu.com/aladdin/img/right_timeline/timeline.png) repeat-y -125px 0;margin-bottom:30px}.container_l .opr-timeline-box{width:471px}.container_s .opr-timeline-box{width:301px}.opr-timeline-logo{float:left;background:#fff url(http://www.baidu.com/aladdin/img/right_timeline/timeline.png) no-repeat -107px 9px;width:24px;height:30px;overflow:hidden;position:relative}.opr-timeline-newtime{float:left;{%*i*%}background:url(http://www.baidu.com/aladdin/img/right_timeline/timeline.png) no-repeat 2px;width:31px;height:25px;padding:5px 0 0 25px;overflow:hidden;position:relative}.opr-timeline-time{float:left;background:url(http://www.baidu.com/aladdin/img/right_timeline/timeline.png) no-repeat -52px;width:34px;height:25px;padding:5px 0 0 22px;overflow:hidden;position:relative}.opr-timeline-time span{font-size:12px;color:#fff}.opr-timeline-newtime span{color:#fff}.opr-timeline-top-title{float:left;height:{%*i*%}40px;line-height:40px;font-size:16px;margin-left:8px;overflow:hidden}.opr-timeline-title{float:left;height:30px;line-height:30px;font-size:13px;margin-left:8px;overflow:hidden}.container_l .opr-timeline-sub{width:330px}.container_s .opr-timeline-sub{width:220px}.opr-timeline-title span{padding-left:8px;color:#ccc}.opr-timeline-elite{background:url(http://s1.bdstatic.com/r/www/cache/timeline/img/i8.png) no-repeat center;display:inline-block;height:16px;width:16px;vertical-align:middle;padding-rig{%*i*%}ht:0}.opr-timeline-imgbox{margin:1px 0 2px 0}.opr-timeline-sub{width:250px;overflow:hidden;margin-left:55px;font-size:12px;line-height:20px}.container_l .opr-timeline-sub{width:360px}.container_s .opr-timeline-sub{width:250px}.opr-timeline-sub a,.opr-timeline-abs a{text-decoration:none;line-height:18px;font-size:13px}.opr-timeline-abs{color:#666;line-height:18px;font-size:13px}.opr-timeline-abs a{font-family:'宋体'}.opr-timeline-abs,.opr-timeline-subitem{margin:8px 0}.opr-timeline-abs{margin-top:-{%*i*%}2px}.opr-timeline-weibo_content{line-height:18px;font-size:13px}.opr-timeline-weibo_content a{text-decoration:none}.opr-timeline-weibo_comment{font-size:12px}.opr-timeline-weibo_comment_arr{overflow:hidden;height:5px;width:80px;background:url(http://s1.bdstatic.com/r/www/cache/timeline/img/i9.png) no-repeat 35px 0}.yellowV{padding-right:15px;background:url(http://s1.bdstatic.com/r/www/cache/timeline/img/i7.png) no-repeat right}.blueV{padding-right:15px;background:url(http://s1.bdstatic.com/r/www{%*i*%}/cache/timeline/img/i10.png) no-repeat right}.opr-timeline-weibo_comment .yellowV,.opr-timeline-weibo_comment .blueV{padding-right:13px}.preBox i{position:absolute;bottom:0;right:5px;color:#FFF;font-style:normal}.opr-timeline-year{position:relative;overflow:hidden;height:24px}.opr-timeline-year_num{font-size:12px;position:absolute;left:20px;top:-2px;padding:5px;color:#666;background:#fff;white-space:nowrap}.opr-timeline-year_line{overflow:hidden;height:1px;width:100%;position:absolute;background{%*i*%}:#ebebeb;left:10px;top:11px}.opr-timeline-label{margin-bottom:2px}.opr-timeline-label .opr-timeline-title a{color:#000;text-decoration:none}.opr-timeline-label .opr-timeline-title a:linke{color:#000}.opr-timeline-label .opr-timeline-title a:visited{color:#666}.opr-timeline-label .opr-timeline-title a:hover{color:#00c;text-decoration:underline}.opr-timeline-label .opr-timeline-title a:active{color:#f00}.opr-timeline-box a:hover{text-decoration:underline}</style><div class="right_noline_con"><div {%*i*%}class="opr-timeline-box"> <div class="opr-timeline-toptitle"> <div class="opr-timeline-logo"></div> <div class="opr-timeline-top-title"> <b>{%$tplData.title|escape%}</b> </div> <br clear="both"> </div> {%foreach $tplData.node as $itemevt%} {%if trim($itemevt.nodeType) == 'Year'%} <div class="opr-timeline-year"> <div class="opr-timeline-year_line"></div> <div class="opr-timeline-year_num">{%$itemevt.nodeTitle|escape%}</div> </div> {%else%} {%if $itemevt@index==0%}{%/if%} <div class="opr-timeline-label"> {%if trim($itemevt.nodeType) == 'New'%} <div class="opr-timeline-newtime"> <span>new</span> </div> <div class="opr-timeline-title" style="font-size:14px"> <p title="{%$itemevt.nodeTitle|escape%}">{%$itemevt.nodeTitle|escape%}</p> </div> {%else%} <div class="opr-timeline-time"> <span>{%preg_replace("/201[0-9]\-/","",$itemevt.nodeTime)|escape%}</span> </div> <div class="opr-timeline-title"> <a href="{%$itemevt.abstractUrl|escape%}" title="{%$itemevt.nodeTitle|escape%}" target="_blank" class="opr-timeline-title_a">{%$itemevt.nodeTitle|escape%}</a> </div> {%/if%} <br clear="both"> </div> {%if trim($itemevt.nodeType) == 'New'%} <div class="opr-timeline-sub"> {%if $itemevt.abstract && trim($itemevt.abstract)%} <div class="opr-timeline-abs"> <span>{%$itemevt.abstract|escape%}</span> {%if $itemevt.abstractUrl && trim($itemevt.abstractUrl)%} <a href="{%$itemevt.abstractUrl|escape%}" target="_blank">详情&gt;&gt;</a> {%/if%} </div> {%/if%} {%if $itemevt.resrcNum == 1%} {%showEventItem itemData=$itemevt.resrc%} {%else%} {%foreach $itemevt.resrc as $srcitem%} <div class="opr-timeline-subitem"> {%showEventItem itemData=$srcitem%} </div> {%/foreach%} {%/if%} </div> {%/if%} {%/if%} {%/foreach%}</div></div><script>A.setup(function(){var _this = this;$(window).on("resize",winResize);function winResize(){if(bds.util.getWinWidth()<1207){$.each(_this.find('.opr-timeline-subitem_title'), function(i, a){a.innerHTML = lenlimt($.trim(a.getAttribute("title")),30);}); $.each(_this.find('.opr-timeline-title_a'), function(i, a){a.innerHTML = lenlimt($.trim(a.getAttribute("title")),24);}); }else{$.each(_this.find('.opr-timeline-subitem_title'), function(i, a){a.innerHTML = lenlimt($.trim(a.getAttri{%*i*%}bute("title")),50);}); $.each(_this.find('.opr-timeline-title_a'), function(i, a){a.innerHTML = lenlimt($.trim(a.getAttribute("title")),50);}); }}winResize();function lenlimt(str,length){if (length < 0 || $.getByteLength(str) <= length) {return str ;}str = str.substr(0,length).replace(/([^\x00-\xff])/g,"\x241 ").substr(0,length).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"\x241");return str + "...";}this.dispose = function(){$(window).off("resize",winResize);};})</script>{%/block%}