<?php 
  class CssJs_Util_qunar_dujia01
   {
      private static $cssStr = '';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("qunar_dujia01",function(){A.setup(function(){var a=A.baidu,d=this;var g=function(k){return(k||"").replace(/##tpl##/g,"op-"+d.data.tpl)};var h=function(m,r){if(!m||/(^javascript:.*$)|(^#.*$)/.test(m)){return""}if(/^http:\\/\\/.*$/.test(m)&&!(/^http:\\/\\/([a-zA-Z0-9_]+\\.){0,1}(tuan|package|dujia|piao|visa)\\.qunar\\.com.*$/.test(m))){return m}var o,q="",p="";if(m.indexOf("#")>-1){var l=m.indexOf("#");p=m.substring(l);m=m.substring(0,l)}if(m.indexOf("?")>-1){var l=m.indexOf("?");q=m.substring(l+1);m=m.substring(0,l)}o=m;q=q.replace(/&amp;/g,"&");var k=q.length?q.split("&"):[];for(var n=0;n<k.length;n++){if(k[n].split("=")[0]=="tf"){k.splice(n,1);break}}k.push("tf="+r);q=k.join("&");return o+"?"+q+p};var b={pageSize:4};var f=d.data.dep||"";var e=d.data.query||"";var j=(function(){var m;var l=d.find("."+g("##tpl##-title"));var k=d.find("."+g("##tpl##-dep-container"));if(k.length){A.use("dropdown21",function(){m=A.ui.dropdown21(k.get(0),{type:"custom",width:350,onchange:function(){f=m.getValue();o();if(i&&i.changeDep){i.changeDep(f)}}});var o=function(){f=m.getValue();if(f.length>3){l.addClass(g("##tpl##-title-longdep"))}else{l.removeClass(g("##tpl##-title-longdep"))}};if(f){m.setValue(f)}o();var n=d.find("."+g("##tpl##-dep-tab"));var q=d.find("."+g("##tpl##-dep-panel"));var p=0;var r=g("##tpl##-dep-tab-active");var s=g("##tpl##-dep-panel-active");n.each(function(t,u){if(t<q.length){$(u).bind("click",function(){n.eq(p).removeClass(r);q.eq(p).removeClass(s);p=t;n.eq(p).addClass(r);q.eq(p).addClass(s)})}})})}return{dispose:function(){if(m&&m.dispose){m.dispose()}}}})();var c=(function(){var p=d.find("."+g("##tpl##-query-container"));var o=d.find("."+g("##tpl##-query"));var n=false;var q=g("##tpl##-query-container-active");o.bind("focus",function(t){if(!o.val()){p.addClass(q)}});o.bind("keyup",function(t){if(!o.val()){p.addClass(q)}else{p.removeClass(q)}});p.bind("mouseenter",function(){n=true});p.bind("mouseleave",function(){n=false});var l=function(){if(!n){p.removeClass(q)}};$(document).bind("mousedown",l);var s=function(){var u=o.val();var w=["p"];var t=["list"];if(f){w.push("d");t.push(f)}if(u){w.push("q");t.push(u)}return"http://dujia.qunar.com/"+w.join("")+"/"+t.join("_")};var m=d.find("."+g("##tpl##-hot-query-link")),r;m.each(function(u,t){var v=(t.innerText||t.textContent);$(t).bind("click",function(){p.removeClass(q);o.val(v)})});var k=d.find("."+g("##tpl##-search-btn"));k.bind("click",function(t){k.attr("href",s()+"?tf=bd_zhixin_search_01&ex_track=bd_zhixin_dujia_arrive_02")});return{dispose:function(){$(document).unbind("mousedown",l)}}})();var i=(function(){var F={pageSize:b.pageSize,departure:f||"",query:e||""};var E=false;var p=function(M,J){if(J<$.getByteLength(M.replace(/(<em>|<\\/em>)/g,""))){var L=[];M=M.replace(/<em>.*?<\\/em>/g,function(P,O){var N={start:O,end:O+P.length-9};L.push(N);return P.substring(4,P.length-5)});var K=$.subByte(M,J);for(var I=0;I<L.length;I++){if(L[I].start>=K.length-1){break}if(L[I].end>K.length-1){L[I].end=K.length-1}K=K.substring(0,L[I].start)+"<em>"+K.substring(L[I].start,L[I].end)+"</em>"+K.substring(L[I].end)}return K}return M};var B=function(I){if(typeof I=="undefined"){return""}return String(I).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;")};var G=false;var v=function(K){if(E){return}b=b||{};if(G){return}G=true;var J="http://www.baidu.com/qunarui/api/zhixin/searchRoute";var I=[];for(var M in F){I.push(encodeURIComponent(M)+"="+encodeURIComponent(F[M]))}if(I.length){J=J+"?"+I.join("&")}var L=function(N){if(E){return}G=false;if(N.filter&&N.filter.length){y(N.filter);z()}if(N.route&&N.route.length){m(N.route)}w=parseInt(((N.count||0)+b.pageSize-1)/b.pageSize,10);o();u()};$.ajax({url:J,dataType:"jsonp",success:L,error:function(){G=false;if(K.onfail){K.onfail()}},timeout:5000})};var x=d.find("."+g("##tpl##-filters"));var r=true;var k=[];var s=function(){if(k.length<2){return}for(var J=1;J<k.length;J++){if(k[J]&&k[J]!="不限"){r=false}}var I=g("##tpl##-filters-unactive"),K=g("##tpl##-filters-active");if(!r){x.addClass(K);x.removeClass(I)}else{x.addClass(I);x.removeClass(K)}};var z=function(){var K=d.find("."+g("##tpl##-filter"));var I=d.find("."+g("##tpl##-filter-more"));if(I.length){var J=g("##tpl##-filters-unactive"),L=g("##tpl##-filters-active");I.bind("click",function(){if(r){x.addClass(L);x.removeClass(J)}else{x.addClass(J);x.removeClass(L)}r=!r})}K.each(function(N,R){var Q=$(R);var M=Q.data("filter");var P=Q.data("name");k[N]=0;if(M){F[M]="";Q.find("."+g("##tpl##-filter-item")).each(function(U,T){var S=$(T);S.bind("mouseenter",function(){S.addClass(g("##tpl##-filter-item-hover"))});S.bind("mouseleave",function(){S.removeClass(g("##tpl##-filter-item-hover"))});S.bind("click",function(){if(G){return}var V=F[M];var W=D;F[M]=S.data("value");F.hasFilter=1;D=1;v({onfail:function(){F[M]=V;D=W}});delete F.hasFilter})});var O=Q.find("."+g("##tpl##-filter-selected"));if(O.length){F[M]=String(O.eq(0).data("value"))||"";t(P,O.eq(0).text());k[N]=O.eq(0).text()}}})};var C="unlimit",t=function(I,J){if(I=="游玩方式"){if(J=="不限"){C="unlimit"}else{if(J=="跟团游"){C="group"}else{if(J=="自由行"){C="free"}else{if(J.indexOf("当地游")>-1){C="around"}}}}}};var y=function(K){var J=[];for(var I=0;I<K.length;I++){J.push(\'<div class="##tpl##-filter c-row c-gap-top\');J.push(I?"":" ##tpl##-filter-first");J.push(\'" data-name="\'+B(K[I].name)+\'" data-filter="\'+B(K[I].param)+\'">\');J.push(\'<div class="##tpl##-filter-label">\'+B(K[I].name)+"：</div>");$.each(K[I].item||[],function(L,M){if(L){J.push(\' <span class="##tpl##-filter-seperator">|</span> \')}if(!M.count){J.push(\'<span class="##tpl##-filter-disabled">\'+B(M.content)+"</span>")}else{if(M.selected){J.push(\'<span class="##tpl##-filter-selected" data-value="\'+B(M.value)+\'">\'+B(M.content)+"</span>")}else{J.push(\'<span class="##tpl##-filter-item OP_LOG_OTHERS" data-click="{fm:\\\'beha\\\',qunartype:\\\'filter\\\'}" data-value="\'+B(M.value)+\'">\'+B(M.content)+"</span>")}}});J.push("</div>")}if(K.length>1){J.push(\'<span class="##tpl##-filter-more OP_LOG_OTHERS" data-click="{fm:\\\'beha\\\',qunartype:\\\'filter-switch\\\'}">更多筛选<i class="c-icon c-icon-chevron-bottom"></i><i class="c-icon c-icon-chevron-top"></i></span>\')}x.html(g(J.join("")))};var H=[\'<li class="c-row">\',\'<div class="##tpl##-route-thumb c-span6">\',\'<a href="#{link}" target="_blank"><img src="#{image}" class="c-img6" />\',\'<span class="##tpl##-route-mask c-img6"></span>\',\'<span class="##tpl##-route-type c-img6">#{type}</span></a>\',"</div>",\'<div class="##tpl##-route-content c-span13">\',\'<p class="##tpl##-route-title"><a href="#{link}" target="_blank">#{title}</a></p>\',"#{datestr}",\'<p class="##tpl##-desc"><span>供 应 &nbsp;商：</span>#{supplier}</p>\',"</div>",\'<div class="##tpl##-route-booking c-span5 c-span-last#{cls}">\',\'<p class="##tpl##-price">&yen;#{price}起</p>#{distext}\',\'<p class="##tpl##-action c-gap-top-small"><a class="c-btn" href="#{link}" target="_blank">查看详情</a></p>\',"</div>","</li>"].join("");var n=d.find("."+g("##tpl##-routes"));var m=function(L){var J=[];for(var I=0;I<L.length;I++){if(L[I].discount){L[I].cls=" ##tpl##-route-hasdiscount"}else{L[I].cls=""}L[I].title=p(L[I].title,72);L[I].supplier=p(L[I].supplier,28);if(L[I].date){L[I].datestr=\'<p class="##tpl##-desc"><span>出发日期：</span>\'+p(L[I].date,28)+"</p>"}else{L[I].datestr=""}var M=parseInt(L[I].discount,10)||0;var K=parseInt(L[I].price,10)||0;if(M){if(M/(K+M)>0.2){M=(K*10/(K+M)).toFixed(1)+"折"}else{M="节省&yen;"+M}L[I].distext=\'<p class="##tpl##-route-discount c-gap-top-small">\'+M+"</p>"}else{L[I].distext=""}J.push($.format(H,L[I]))}n.html(g(J.join("")))};var D=1,l=d.find("."+g("##tpl##-pager"));var q=(parseInt(l.data("count")||"1",10)||1);var w=parseInt((q+b.pageSize-1)/b.pageSize,10);var o=function(){var N=w;if(N<1){return}var L=[];var M={};var J=function(P){if(M[P]){return""}M[P]=true;if(P==D){return\'<span class="##tpl##-pager-current">\'+D+"</span>"}else{return\'<span class="##tpl##-pager-item" data-page="\'+P+\'">\'+P+"</span>"}};if(D>1){L.push(\'<span class="##tpl##-prev ##tpl##-pager-item" data-page="\'+(D-1)+\'">上一页</span>\')}var I=D;if(N-2<I){I=N-2}if(I<5){if(N<5){I=N}else{I=5}}if(I>5){L.push(J(1));L.push(\'<span class="##tpl##-pager-seperator">...</span>\');L.push(J(I-2));L.push(J(I-1))}else{for(var K=1;K<I;K++){L.push(J(K))}}L.push(J(I));I=D;if(I<3){I=3}if(N-I<4){I=N-2;if(I<1){I=1}}if(N-I>4){L.push(J(I+1));L.push(J(I+2));L.push(\'<span class="##tpl##-pager-seperator">...</span>\');L.push(J(N))}else{for(var K=I;K<=N;K++){L.push(J(K))}}if(D<N){L.push(\'<span class="##tpl##-next ##tpl##-pager-item" data-page="\'+(D+1)+\'">下一页</span>\')}l.html(g(L.join("")));var O=l.find("."+g("##tpl##-pager-item"));O.each(function(){var P=$(this);var Q=parseInt(P.data("page"),10);P.bind("click",function(){if(G){return}var R=D;D=Q;l.html(g(\'<span class="##tpl##-pager-loading">加载中...</span>\'));F.start=(D-1)*b.pageSize;v({onfail:function(){D=R;o()}});delete F.start})})};var u=function(){var I=["img","title","button"];n.find(".c-row").each(function(M){var K=[],J=$(this);var L=J.find("."+g("##tpl##-route-thumb")+":eq(0)");K.push(L.find("a:eq(0)"));L=J.find("."+g("##tpl##-route-title")+":eq(0)");K.push(L.find("a:eq(0)"));L=J.find("."+g("##tpl##-action")+":eq(0)");K.push(L.find("a:eq(0)"));$.each(K,function(O,N){if(N.length){N.attr("href",h(N.attr("href"),"bd_zhixin_"+C+"_"+I[O]+"_"+D+"_"+(M+1))+"&ex_track=bd_zhixin_dujia_arrive_03")}})})};o();z();u();s();return{changeDep:function(I){var J=D;F.departure=I;F.hasFilter=1;D=1;v({onfail:function(){D=J}});delete F.hasFilter},dispose:function(){if(!E){E=true}}}})();this.dispose=function(){j.dispose();c.dispose();i.dispose()}})});';   // js字串，不含<script标签
      private static $uiList = 'input,btn,dropdown2,img';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
