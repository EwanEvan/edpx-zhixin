{%extends 'c_base.tpl'%} {%block name='title'%}{%/block%}{%block name='foot'%}{%/block%}{%block name='content'%}<style type="text/css" >.op_weather4_twoicon_wt td.op_weather4_twoicon_tr{padding-right:12px}.op_weather4_twoicon_wt td.op_weather4_twoicon_tl{padding-left:12px;border-left:1px solid #e2e9fc}.op_weather4_twoicon_wlink{font-size:12px;color:#666;padding:12px 0 5px;line-height:20px}.op_weather4_twoicon_wlink a{color:#77c;margin:0 5px}.op_weather4_twoicon_close,.op_weather4_twoicon_open{display:inline-block;font-weight:bold;color:#261cdc;text-decoration:underline;cursor:pointer;margin:2px 0;*margin:{%*i*%}0;font-size:13px}.op_weather4_twoicon_close b,.op_weather4_twoicon_open b{background:url(http://www.baidu.com/aladdin/img/newvideotvplay/newvideo_new.png) 0 -24px;height:13px;width:14px;overflow:hidden;float:left;margin:3px 3px 0 0}.op_weather4_twoicon_close{display:none}.op_weather4_twoicon_close b{background-position:-18px -24px}.op_weather4_twoicon_u{font-size:13px;color:#999;font-weight:normal;display:none;letter-spacing:-4px}.op_weather4_twoicon_u i{color:#999;font-weight:normal;font-style:{%*i*%}normal;letter-spacing:0}.op_weather4_twoicon_search{font-size:13px;padding-top:5px;display:none;white-space:nowrap}.op_weather4_twoicon_search strong{color:#000}.op_weather4_twoicon_u a,.op_weather4_twoicon_search a{margin-right:10px;white-space:nowrap;color:#261cdc;letter-spacing:0}.op_weather4_twoicon_container_div{width:100%;color:#fff;border:#ececec 1px solid;border-left:none;border-top:0;font-family:'微软雅黑';position:relative}{%if $tplData.warning%}.op_weather4_twoicon_warning{width:100%;height:36px;color:#fff;display:block;overflow:hidden;font-size:13px;cursor:pointer;text-decoration:none;position:absolute;z-index:3;background:rgba(0,0,0,0.2);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#20000000,endColorstr=#20000000)}.op_weather4_twoicon_warnicon{width:36px;height:36px;display:inline-block;{%if $tplData.warning%}{%$txt = $tplData.warning[0]['warningtxt']%}{%if strpos($txt,'蓝色预警')!== false%}background-color:#36f;{%elseif strpos($txt,'红色预警')!== false%}background-color:#ed2c2c;{%elseif strpos($txt,'黄色预警')!== false%}background-color:#fd0;{%elseif strpos($txt,'橙色预警')!== false%}background-color:#fe9900;{%/if%}{%/if%}}.op_weather4_twoicon_warnicon span{width:24px;height:24px;margin:6px 0 0 6px;display:inline-block}.op_weather4_twoicon_warntext{position:absolute;margin:10px 0 0 11px}{%/if%}{%if $tplData.prompting%}.op_weather4_twoicon_prompting{width:100%;height:36px;font-size:13px;line-height:36px;overflow:hidden;background:rgba(0,0,0,0.4);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#40000000,endColorstr=#40000000)}.op_weather4_twoicon_prompting span{margin-left:14px}{%/if%}.op_weather4_twoicon{width:100%;height:250px;position:relative;{%if $tplData.warning%}padding-top:36px;{%/if%}}.op_weather4_twoicon_bg{width:100%;{%if $tplData.warning%}height:286px;{%else%}height:250px;{%/if%}position:absolute;z-index:1;{%if $tplData.warning%}top:0;{%/if%}}.op_weather4_twoicon_day,.op_weather4_twoicon_today{position:absolute;width:89px;height:250px;text-decoration:none;color:#fff;border:0;z-index:20}.op_weather4_twoicon p{text-align:center;font-size:12px;text-shadow:1px 1px 1px #555;line-height:1em}.op_weather4_twoicon_date{margin-top:46px}.op_weather4_twoicon_icon{width:50px;height:50px;background:no-repeat;margin:25px 0 0 20px}.op_weather4_twoicon_temp{margin-top:37px}.op_weather4_twoicon_weath{margin-top:12px}.op_weather4_twoicon_wind{margin-t{%*i*%}op:11px}.op_weather4_twoicon_split{position:absolute;left:0;top:48px;width:1px;height:180px;background:#fff;filter:alpha(opacity=15);opacity:.15}.op_weather4_twoicon_hover{position:absolute;width:89px;height:250px}.op_weather4_twoicon_day:hover .op_weather4_twoicon_hover{background-image:-webkit-linear-gradient(top,rgba(255,255,255,.015),rgba(255,255,255,.15));background-image:-o-linear-gradient(top,rgba(255,255,255,.015),rgba(255,255,255,.15));background-image:-ms-linear-gradient(top,rgba(255,2{%*i*%}55,255,.015),rgba(255,255,255,.15));background-image:-moz-linear-gradient(top,rgba(255,255,255,.015),rgba(255,255,255,.15));filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr=#04FFFFFF,EndColorStr=#40FFFFFF)}.op_weather4_twoicon_today{width:186px}.op_weather4_twoicon_today .op_weather4_twoicon_date{text-align:left;margin:14px 0 0 14px}.op_weather4_twoicon_today .op_weather4_twoicon_icon{width:70px;height:70px;{%if isset($tplData.pm25)%}margin:20px 0 0 60px;{%else%}margin:26px 0 0 60px;{%/if%}}.op_weather4_twoicon_today .op_weather4_twoicon_temp{padding-left:14px;font-size:32px;font-family:Arial;{%if isset($tplData.pm25)%}margin-top:5px;{%else%}margin-top:23px;{%/if%}}.op_weather4_twoicon_today .op_weather4_twoicon_temp sup{font-size:.5em}.op_weather4_twoicon_today .op_weather4_twoicon_weath{font-size:14px;margin-top:8px;*margin-top:13px}.op_weather4_twoicon_today .op_weather4_twoicon_wind{margin-top:12px}{%if isset($tplData.pm25)%}.op_weather4_twoicon_pm25{font-size:15px;margin-top:9px}.op_weather4_twoicon_pm25 em{display:inline-block;margin-left:5px;width:90px;line-height:18px;height:18px;text-align:center;font-size:12px;font-style:normal;color:#fff;text-decoration:none;vertical-align:middle}{%/if%}.op_weather4_twoicon_firstsnow{position:absolute;right:10px;top:23px;z-index:10000000}.op_weather4_twoicon_snowtop{overflow:hidden;position:absolute;z-index:20;width:545px;height:70px;left:-4px;top:-5px;background:url(http://www.baidu.com/aladdin/img/weather4_twoicon/snowtop.png) no-repeat}.op_weather4_twoicon_flash{background:#c0d8fd;text-align:center}</style><!--[if IE]><script>document.createElement('canvas');</script><![endif]-->{%fe_fn_c_title_prefix%}{%if $tplData.nopage%}{%$tplData.title%}{%else%}{%fe_fn_c_title title="{%$tplData.title%}" url="{%$tplData.url%}"%}{%/if%} <b class="op_weather4_twoicon_u"><i>- 最近访问：</i></b>{%fe_fn_c_title_suffix%}<div class="op_weather4_twoicon_container_div"> {%if $tplData.warning%} <a class="op_weather4_twoicon_warning" href="{%$tplData.warning[0].warningurl%}" target="_blank" class="OP_LOG_OTHERS"> <span class="op_weather4_twoicon_warnicon"><span style="background-image:url({%$tplData.warning[0].imgsrc%});*background-image:none;*filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src={%$tplData.warning[0].imgsrc%})"></span></span> <span class="op_weather4_twoicon_warntext">{%$tplData.warning[0].warningtxt|limitlen:70|escape:'html'%}</span> </a> {%/if%} {%if $tplData.prompting%} <div class="op_weather4_twoicon_prompting" class="OP_LOG_OTHERS"> <span>{%$tplData.prompting|limitlen:74|escape:'html'%}</span> </div> {%/if%}  {%$tplData['temp0'] = str_replace('℃', '<sup>℃</sup>', $tplData['temp0'])%}  {%$t = date('G') + date('i') / 100%} {%if 6.00 <= $t && $t <= 12.00%} {%$hours = 'morning'%} {%elseif 12.00 <= $t && $t <= 16.00%} {%$hours = 'noon'%} {%elseif 16.00 <= $t && $t <= 18.30%} {%$hours = 'evening'%} {%else%} {%$hours = 'night'%} {%/if%} <div class="op_weather4_twoicon"> {%for $i = 0 to 4%} {%$weathName = $tplData["weather$i"]%} {%$iconURL = $tplData["pic`$i`1"]%} {%$linkURL = $tplData.link1[0].linkurl%}  {%$arr = explode('转', $weathName)%} {%if $i > 0 || strpos($tplData.temp0,'~') !== false%} {%$weath = $arr[0]%} {%else%} {%$weath = end($arr)%} {%/if%}  {%$arr = explode('到', $weath)%} {%$weath = end($arr)%}  {%$eff = array()%} {%if $weath == '晴'%} {%$bg = 'daytime'%}{%$eff['halo']=1%} {%elseif $weath == '阴'%} {%$bg = 'cloudy'%} {%elseif $weath == '雾'%} {%$bg = 'cloudy'%} {%elseif $weath == '多云'%} {%$bg = 'daytime'%}{%$eff['halo']=1%} {%elseif $weath == '霾'%} {%$bg = 'cloudy'%} {%elseif $weath == '小雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=60%} {%elseif $weath == '中雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=80%} {%elseif $weath == '大雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=100%} {%elseif $weath == '暴雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=120%} {%elseif $weath == '大暴雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=140%} {%elseif $weath == '特大暴雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=160%} {%elseif $weath == '冻雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=80%} {%elseif $weath == '雨夹雪'%} {%$bg = 'cloudy'%}{%$eff['rain']=60%} {%elseif $weath == '阵雨'%} {%$bg = 'cloudy'%}{%$eff['rain']=120%} {%elseif $weath == '雷阵雨'%} {%$bg = 'dark'%}{%$eff['rain']=120%}{%$eff['thunder']=1%} {%elseif $weath == '雷阵雨伴有冰雹'%} {%$bg = 'dark'%}{%$eff['rain']=100%}{%$eff['thunder']=1%} {%elseif $weath == '阵雪'%} {%$bg = 'daytime'%}{%$eff['snow']=40%} {%elseif $weath == '小雪'%} {%$bg = 'daytime'%}{%$eff['snow']=70%} {%elseif $weath == '中雪'%} {%$bg = 'daytime'%}{%$eff['snow']=90%} {%elseif $weath == '大雪'%} {%$bg = 'daytime'%}{%$eff['snow']=120%} {%elseif $weath == '暴雪'%} {%$bg = 'daytime'%}{%$eff['snow']=140%} {%elseif $weath == '浮尘'%} {%$bg = 'cloudy'%} {%elseif $weath == '扬沙'%} {%$bg = 'sand'%} {%elseif $weath == '强沙尘暴'%} {%$bg = 'sand'%} {%elseif $weath == '沙尘暴'%} {%$bg = 'sand'%} {%elseif $weath == '特大沙尘'%} {%$bg = 'sand'%} {%/if%}  {%if $i == 0%} {%if $weath == '晴'%} {%if $hours == 'morning'%} {%$eff=''%} {%elseif $hours == 'evening'%} {%$bg = 'evening'%}{%$eff=''%} {%elseif $hours == 'night'%} {%$bg = 'night'%}{%$eff=array()%}{%$eff['star']=1%} {%/if%} {%elseif $weath == '多云'%} {%if $hours == 'morning'%} {%$eff=''%} {%elseif $hours == 'evening'%} {%$bg = 'evening'%}{%$eff=''%} {%elseif $hours == 'night'%} {%$bg = 'night'%}{%$eff=''%} {%/if%} {%/if%} {%/if%}  {%foreach $eff as $k => $v%} {%if $k%} {%$effs[$k] = true%} {%/if%} {%/foreach%} {%if !isset($bgs[$bg])%} {%$bgs[$bg] = $i%} {%/if%} {%if $i == 0%}   {%$weathURL = str_replace('#7d', '', $linkURL)%} <a class="op_weather4_twoicon_today OP_LOG_LINK" target="_blank" href='{%($weathURL)%}' data-click='{"url":"{%$weathURL%}"}' weath-bg='{%($bg)%}' weath-eff='{%json_encode($eff)%}'> {%else%}  {%$weathLen = mb_strlen($weathName)%} <a class="op_weather4_twoicon_day OP_LOG_LINK" style="left:{%100+88*$i%}px" {%if $linkURL%}target="_blank"{%/if%} href='{%if $linkURL%}{%$linkURL%}{%else%}javascript:void(0);{%/if%}' data-click='{"url":"{%$linkURL%}"}' {%if $weathLen > 6%}title="{%($weathName)%}"{%/if%} weath-bg='{%($bg)%}' weath-eff='{%json_encode($eff)%}'>  <div class="op_weather4_twoicon_hover"></div> <div class="op_weather4_twoicon_split"></div> {%/if%} <p class="op_weather4_twoicon_date">{%$tplData["time$i"]%}</p> <div class="op_weather4_twoicon_icon" style="background:url({%$iconURL%});*background:none;*filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src={%$iconURL%})"></div> <p class="op_weather4_twoicon_temp">{%$tplData["temp$i"]%}</p> <p class="op_weather4_twoicon_weath"> {%if $i > 0 && $weathLen > 6%} {%mb_substr($weathName,0,5)%}... {%else%} {%($weathName)%} {%/if%} </p> <p class="op_weather4_twoicon_wind">{%$tplData["wind$i"]%}</p> {%if $i == 0 && isset($tplData.pm25) %} {%$v = $tplData.pm25%} <p class="op_weather4_twoicon_pm25">空气质量: {%if 0 <= $v && $v <= 50%} <em style="background:#4cc74c"><b>{%($v)%}</b>&nbsp;优</em> {%elseif 50 <= $v && $v <= 100%} <em style="background:#afdb00"><b>{%($v)%}</b>&nbsp;良</em> {%elseif 100 <= $v && $v <= 150%} <em style="background:#ff9900"><b>{%($v)%}</b>&nbsp;轻度污染</em> {%elseif 150 <= $v && $v <= 200%} <em style="background:#f55345"><b>{%($v)%}</b>&nbsp;中度污染</em> {%elseif 200 <= $v && $v <= 300%} <em style="background:#cd4971"><b>{%($v)%}</b>&nbsp;重度污染</em> {%elseif 300 <= $v%} <em style="background:#922e5d"><b>{%($v)%}</b>&nbsp;严重污染</em> {%/if%} </p> {%/if%} </a> {%/for%}  {%foreach $bgs as $bg => $v%} {%if $bg == 'daytime'%} {%$gradient = array('#0d68bc', '#72ade0')%} {%elseif $bg == 'evening'%} {%$gradient = array('#394984', '#CC666E 60%', '#EEB66D')%} {%elseif $bg == 'night'%} {%$gradient = array('#183259', '#3482ba')%} {%elseif $bg == 'cloudy'%} {%$gradient = array('#485663', '#a1b8ca')%} {%elseif $bg == 'dark'%} {%$gradient = array('#788092', '#35373b')%} {%elseif $bg == 'sand'%} {%$gradient = array('#8f8381', '#c7b695')%} {%/if%}  {%$colors = implode(',', $gradient)%} <div bg-name="{%($bg)%}" class="op_weather4_twoicon_bg" style="{%if $v > 0%}display:none;{%/if%}background-image:-webkit-linear-gradient(top,{%($colors)%});background-image:-moz-linear-gradient(top,{%($colors)%});background-image:-o-linear-gradient(top,{%($colors)%});background-image:-ms-linear-gradient(top,{%($colors)%});{%if count($gradient) == 2%}filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr={%($gradient[0])%},EndColorStr={%($gradient[1])%}){%/if%}"> {%if count($gradient) > 2%} <!--[if IE]> <div style="position:absolute;width:100%;height:150px;filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr=#394984,EndColorStr=#CC666E)"></div><div style="position:absolute;width:100%;{%if $tplData.warning%}height: 136px;{%else%}height:100px;{%/if%}top:150px;filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr=#CC666E,EndColorStr=#EEB66D)" class="op_weather4_twoicon_bgie"></div> <![endif]--> {%/if%} </div> {%/foreach%} {%if $tplData.firstsnow%} <div class="op_weather4_twoicon_snowtop"></div> {%/if%} </div>   {%if $tplData.folder%} <style type="text/css">.op_weather4_twoicon{height:282px}.op_weather4_twoicon_bg{{%if $tplData.warning%}height:318px;{%else%}height:282px;{%/if%}}.op_weather4_xiala{width:100%;position:absolute;z-index:5;{%if $tplData.warning%}top:287px;{%else%}top:251px;{%/if%}font-family:'微软雅黑','黑体',Arial}.op_weather4_xltab ul li{width:78px;list-style:none;float:left;background:rgba(255,255,255,0.2);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr='#20ffffff',endColorstr='#20ffffff');text-align:center;line-height:26px;margin-right:1px;font-size:12px;cursor:pointer;display:block}.op_weather4_xltab ul li.op_weather4_xlactive{height:27px;background:rgba(255,255,255,0.1);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startC{%*i*%}olorstr=#10ffffff,endColorstr=#10ffffff)}.op_weather4_xlcon{background:rgba(255,255,255,0.1);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#10ffffff,endColorstr=#10ffffff);height:114px}.op_weather4_xlleft{float:left;height:86px;width:35px;font-size:10px;color:#fff;position:absolute;top:24px;top:34px\9;left:0;-webkit-transform:scale(0.8);-moz-transform:scale(0.8);-o-transform:scale(0.8)}.op_weather4_xlleft ul li{padding-top:4px;padding-top:2px\9;list-style:none;te{%*i*%}xt-align:right}.op_weather4_xltimeul{clear:both;font-size:12px;font-size:10px\9;padding-left:38px;padding-top:2px\9}.op_weather4_xltimeul ul li{float:left;list-style:none;width:40px;text-align:center;color:#fff}.op_weather4_xltimeulscal{-webkit-transform:scale(0.8);-moz-transform:scale(0.8);-o-transform:scale(0.8)}.op_weather4_yuandian{background:url('http://www.baidu.com/aladdin/img/new_weath/ico.png') no-repeat}.op_weather4_xllefts{font-size:10px;-webkit-transform:scale(0.8);-moz-transform:sca{%*i*%}le(0.8);-o-transform:scale(0.8);position:absolute;top:-14px;left:-11px;color:#fff;width:40px;text-align:center}.op_weather4_xlqyyc{float:left;width:40px;height:106px;position:absolute;top:0;cursor:pointer;z-index:9}.op_weather4_xltip{position:absolute;top:0;left:0;z-index:10;font-size:12px}.op_weather4_xlico{position:absolute;width:10px;height:10px;border-color:transparent transparent white transparent;border-style:solid;border-width:0 5px 5px 5px;width:0;height:0;top:1px;z-index:2}.op_weather4_{%*i*%}xlcont{background:#fff;margin-top:5px;color:#555;padding:10px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.op_weather4_jsl{width:20px;height:114px;float:left}.op_weather4_jsm{width:498px;height:84px;float:left;margin-top:15px;font-size:12px}.op_weather4_jsm ul li{width:49px;float:left;background:url('http://www.baidu.com/aladdin/img/new_weath/icobg.png') no-repeat right 0}.op_weather4_jsm span{display:block;text-align:center}.op_weather4_jsr{width:20px;height:114px;float:left}.op_weather4_jsm ul li .op{%*i*%}_weather4_jsico{height:24px;padding:13px 0 13px 14px}.op_weather4_jsiconborw0,.op_weather4_jsiconborw1,.op_weather4_jsiconborw2,.op_weather4_jsiconborw3,.op_weather4_jsiconborw4,.op_weather4_jsiconborw5,.op_weather4_jsiconborw6,.op_weather4_jsiconborw7,.op_weather4_jsiconborw8,.op_weather4_jsiconborw9,.op_weather4_jsiconborw10{width:18px;height:23px;background:url('http://www.baidu.com/aladdin/img/new_weath/icowater.png') no-repeat}.op_weather4_jsiconborw0{background-position:0 0}.op_weather4_js{%*i*%}iconborw1{background-position:0 -33px}.op_weather4_jsiconborw2{background-position:0 -66px}.op_weather4_jsiconborw3{background-position:0 -99px}.op_weather4_jsiconborw4{background-position:0 -132px}.op_weather4_jsiconborw5{background-position:0 -165px}.op_weather4_jsiconborw6{background-position:0 -198px}.op_weather4_jsiconborw7{background-position:0 -231px}.op_weather4_jsiconborw8{background-position:0 -264px}.op_weather4_jsiconborw9{background-position:0 -297px}.op_weather4_jsiconborw10{backgr{%*i*%}ound-position:0 -330px}.op_weather4_xlzs{width:240px;float:left;margin-left:17px;border-bottom:1px solid #ddd;border-bottom:1px solid rgba(255,255,255,0.2);line-height:32px;height:32px;cursor:pointer}.op_weather4_xlzstit{font-size:16px}.op_weather4_xlzstitdes{font-size:12px}.op_weather4_xlbornone{border-bottom:0}.op_weather4_xltop{padding-top:8px;clear:both}.op_weather4_xltiptitle{font-size:14px;font-weight:bold;line-height:24px}.op_weather4_xltipcontent{line-height:20px}.op_weather4_xlopen{widt{%*i*%}h:100%;height:29px;background:rgba(0,0,0,0.1);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#10000000,endColorstr=#10000000);cursor:pointer;text-align:center;z-index:6;padding-top:3px}.op_weather4_tipbtn{display:inline-block;padding:2px 0;cursor:pointer}.op_weather4_tipbtn span{display:inline-block}.op_weather4_icobottom{background:url('http://www.baidu.com/aladdin/img/new_weath/ico.png') 0 -188px no-repeat;width:27px;height:11px;display:inline-block}.op_weather4{%*i*%}_xlclose{height:32px;cursor:pointer;text-align:center;z-index:6}.op_weather4_xlclose .op_weather4_icobottom{background:url('http://www.baidu.com/aladdin/img/new_weath/ico.png') 0 -212px no-repeat}.op_weather4_xlCanvascon1,.op_weather4_xlCanvascon2{position:relative;margin-left:36px}.op_weather4_xlfilter{cursor:pointer;display:block}.op_weather4_jslNovalue{background:0;padding-top:4px}</style> <!--[if IE]> <style>.op_weather4_xlcont{border:1px solid #eaeaea}</style> <![endif]--> <div class="op_we{%*i*%}ather4_xiala"> <div class="op_weather4_xltabcontent" style="display:none;"> <div class="op_weather4_xltab c-clearfix"> <ul> <li class="op_weather4_xlactive OP_LOG_BTN" data-click="{fm:'beha'}"><span class="op_weather4_xlfilter">分时温度</span></li> <li class=" OP_LOG_BTN" data-click="{fm:'beha'}"><span class="op_weather4_xlfilter">风力风向</span></li> <li class=" OP_LOG_BTN" data-click="{fm:'beha'}"><span class="op_weather4_xlfilter">降水量</span></li> {%if $tplData.xgzs%}<li class=" OP_LOG_BTN" data-click="{fm:'beha'}"><span class="op_weather4_xlfilter">相关指数</span></li>{%/if%} </ul> </div> <div class="op_weather4_xlcon" style=""> <div class="c-row"> <div class="op_weather4_xlleft"> <ul class="op_weather4_xlleftfswd"> </ul> </div> <div style="float:left;"> <div class="op_weather4_xlCanvascon1"> <canvas class="op_weather4_xlCanvas1" width="480" height="86"></canvas> </div> </div> </div> <div class="op_weather4_xltimeul"> <ul> {%$xmin = $tplData.fswdaxes[0].xmin%} {%for $item=0 to 11%} {%$times = $xmin+$item%} {%if $times==24 %} {%$times = '00'%} {%else if $times>24 %} {%$times = $times-24%} {%/if%} <li class="op_weather4_xltimeulscal">{%$times|escape%}:00</li> {%/for%} </ul> </div> </div> <div class="op_weather4_xlcon" style=""> <div class="c-row"> <div class="op_weather4_xlleft"> <ul class="op_weather4_xlleftflfx"> </ul> </div> <div style="float:left;"> <div class="op_weather4_xlCanvascon2"><canvas class="op_weather4_xlCanvas2" width="480" height="86"></canvas></div> </div> </div> <div class="op_weather4_xltimeul"> <ul> {%$xmin = $tplData.flfxaxes[0].xmin%} {%for $item=0 to 11%} {%$times = $xmin+$item%} {%if $times==24 %} {%$times = '00'%} {%else if $times>24 %} {%$times = $times-24%} {%/if%} <li>{%$times|escape%}时</li> {%/for%} </ul> </div> </div> <div class="op_weather4_xlcon" style="display:none;"> <div class="op_weather4_jsl"></div> <div class="op_weather4_jsm"> <ul class="op_weather4_jslul"> </ul> </div> <div class="op_weather4_jsr"></div> </div> <div class="op_weather4_xlcon" style="display:none;"> <ul class="op_weather4_xltop c-clearfix"> </ul> </div> </div> <div class="op_weather4_xlopen OP_LOG_BTN" data-click="{fm:'beha'}"> <div class="op_weather4_xlfilter"> <span class="op_weather4_tipbtn"><span>查看今天详细数据</spa{%*i*%}n> <i class="op_weather4_icobottom"></i> </span> </div> </div> <div class="op_weather4_xlclose OP_LOG_BTN" data-click="{fm:'beha'}" style="display:none;"> <div class="op_weather4_xlfilter"> <span class="op_weather4_tipbtn"> <i class="op_weather4_icobottom"></i> </span> </div> </div> </div>  {%/if%}</div><div class="op_weather4_twoicon_wlink">{%$tplData.support|limitlen:34|escape:'html'%} {%if $tplData.link1[0]['linkcontent']|escape:'html'%}<a target="_blank" href="{%$tplData.link1[0]['linkurl']%}"><span class="op_weather4_twoicon_aa">{%$tplData.link1[0]['linkcontent']|limitlen:36|escape:'html'%}</span></a>{%/if%}{%if $tplData.swf[0]['on']%}<div class="op_weather4_twoicon_swf_container"> <div class="op_weather4_twoicon_flash" style="display:none"></div> <div class="op_weather4_twoicon_open OP_LOG_BTN"><b></b>{%$tplData.swf[0]['on']|limitlen:36|escape:'html'%}</div> <div class="op_weather4_twoicon_close OP_LOG_BTN"><b></b>{%$tplData.swf[0]['off']|limitlen:36|escape:'html'%}</div></div>{%/if%}<div class="op_weather4_twoicon_search"><strong>其他用户还搜索了：</strong></div> <div style="font-size:13px;"> {%fe_fn_c_showurl showurl="{%$tplData.showurl%}" date="{%$tplData.date%}" showlamp="{%$tplData.showlamp%}"%} </div></div>{%if $tplData.firstsnow%}<div class="op_weather4_twoicon_firstsnow" style="display:none;"> <div><a class="c-btn c-btn-primary c-btn-large op_weather4_twoicon_firstsnow_btn" href="javascript:;">关闭动画</a></div></div>{%/if%}<script >
    A.setup('weather4_twoicondata',{
        'url':'{%$tplData.url|escape:'html'%}',
        'oq':'{%$extData.OriginQuery%}',
        'fetchkey':'{%$extData.fetchkey%}',
        'resourceid':'{%$extData.resourceid%}',
        'swfurl':'{%$tplData.swf[0]['url']|escape:'html'%}',
        'swfon':'{%if $tplData.swf[0]['on']%}{%$tplData.swf[0]['on']|escape:'html'%}{%/if%}',
        'swfoff':'{%if $tplData.swf[0]['off']%}{%$tplData.swf[0]['off']|escape:'html'%}{%/if%}',
        'swfcondition':'{%$tplData.swf[0]['condition']|escape:'html'%}',
        'snowlevel':'{%$tplData.firstsnow%}',
        'warn':'{%if $tplData.warning%}1{%/if%}',
        'folder':'{%$tplData.folder|escape%}',
        'originQuery': '{%str_replace($extData.resourceid|cat:'_','',$extData.fetchkey)|escape:"javascript"%}',
        'srcid':'{%$extData.resourceid%}',
        'fswdaxes':'{%$extData.fswdaxes%}'
    });
</script><script>A.init(function() {var _this = this,wtimer,snowInterval, snowStopHover = false, moveInterval = null, hideInterval = null; var weather4_twoicondata = _this.data.weather4_twoicondata;var tid = -1;var scene;var $UA = navigator.userAgent;var $IE = $UA.match(/MSIE (\d+)/);$IE = $IE && +$IE[1];if ($IE) {var dummy = document.createElement('iframe');document.body.appendChild(dummy);$UA = dummy.contentWindow.navigator.userAgent;$IE = +$UA.match(/MSIE (\d+)/)[1];document.body.removeChild({%*i*%}dummy);dummy = null;var $IE6 = ($IE == 6);var $IE78 = ($IE == 7 || $IE == 8);}function URL(path) {return 'http://www.baidu.com/aladdin/img/new_weath/' + path;}var efUsed = {},efFact = {};var layerLight;{%foreach $effs as $eff => $v%}{%if $eff == 'rain'%}efFact.rain = function(exports) {var W = 2;var H = 16;var sprites = [];var curNum = 0;var LAYER_PERCENT = [0,1,1,1,2,2,2,2,2,2,2,2];var LAYER_ALPHA = [[0.25, +0.30],[0.20, +0.10],[0.15, +0.15]];var LAYER_SPEED = [9, 7, 5];var GRAVITY = 0.1;function setOpacity(spt, val) {spt.setYOffset(H * ~~((1 - val) * 10));}function reset(spt) {var rnd = Math.random() * LAYER_PERCENT.length;var type = LAYER_PERCENT[rnd >> 0];spt.setXOffset(W * type);spt.setVelocity(0, LAYER_SPEED[type]);spt.setX(Math.random() {%*i*%}* CANVAS_W);if (spt.fromtop_) {spt.setY(-10);}else {spt.fromtop_ = true;spt.setY( Math.random() * CANVAS_H ); }var alpha_range = LAYER_ALPHA[type];var opacity = alpha_range[0] + Math.random() * alpha_range[1];setOpacity(spt, opacity);}exports.render = function() {var num = exports.arg;for(var i = num; i < curNum; i++) {sprites[i].setY(999);sprites[i].fromtop_ = false;}for(var i = sprites.length; i < num; i++) {var spt = scene.Sprite(URL('rain.png'), exports.layer);spt.size(2, 16);reset(spt);spri{%*i*%}tes[i] = spt;}for(var i = 0; i < curNum; i++) {var spt = sprites[i];spt.yv += GRAVITY;spt.applyYVelocity();spt.update();if (spt.y > CANVAS_H) {reset(spt);}}curNum = num;};exports.RES = ['rain.png'];};{%elseif $eff == 'snow'%}efFact.snow = function(exports) {var W = 14;var H = 12;var ROTATE = 0.03; var TURN_TIMES = 1.5; var K = 2 * Math.PI / (CANVAS_H / TURN_TIMES);var sprites = [];var curNum = 0;var LAYER_PERCENT = [0,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2];var LAYER_ALPHA = [[0.1, +0.60],[0.2, +0.40],[0.3, +0.15]];var LAYER_SPEED = [1.2, 0.8, 0.6];function setOpacity(spt, val) {spt.setYOffset(H * ~~((1 - val) * 10));}function reset(spt) {var rnd = Math.random() * LAYER_PERCENT.length;var type = LAYER_PERCENT[~~rnd];spt.setX{%*i*%}Offset(W * type);spt.type_ = type;spt.x_ = Math.random() * CANVAS_W;spt.setX(spt.x_);if (spt.fromTop_) {spt.setY(-10);}else {spt.fromTop_ = true;spt.setY(Math.random() * CANVAS_H);}spt.v_ = LAYER_SPEED[type];spt.offset_ = 6 - 2 * type;spt.v_ *= (0.95 + Math.random() / 10);spt.offset_ *= (0.875 + Math.random() / 4);var alpha_range = LAYER_ALPHA[type];var opacity = alpha_range[0] + Math.random() * alpha_range[1];setOpacity(spt, opacity);spt.op_ = opacity;}exports.render = function() {var num = exp{%*i*%}orts.arg;for(var i = num; i < curNum; i++) {sprites[i].setY(999);sprites[i].fromTop_ = false;}for(var i = sprites.length; i < num; i++) {var spt = scene.Sprite(URL('snow.png'), exports.layer);spt.size(W, H);reset(spt);sprites[i] = spt;}for(var i = 0; i < curNum; i++) {var spt = sprites[i];var x = spt.x_ + spt.offset_ * Math.sin(spt.y * K);var y = spt.y + spt.v_;spt.position(x, y);if (spt.type_ == 0) {spt.rotate(ROTATE);}if (y > 200) {setOpacity(spt, spt.op_ *= 0.95);}spt.update();if (y > CANVAS_{%*i*%}H) {reset(spt);}}curNum = num;};exports.RES = ['snow.png'];};{%elseif $eff == 'thunder'%}efFact.thunder = function(exports) {var DELAY_MIN = 3000 / 60;var DELAY_RND = 10000 / 60;var NUM = 2;var sprites; var spt; var tickWait; var tick = 0; function init() {sprites = [];for(var i = 0; i < NUM; i++) {sprites[i] =scene.Sprite(URL('thunder/' + i + '.png'), exports.layer);;}reset();tickWait /= 5;}function reset() {var id = Math.random() * NUM;spt = sprites[~~id];spt.position(Math.random() * (CANVAS_W - spt.w), 0);tickWait = ~~(DELAY_MIN + Math.random() * DELAY_RND);tick = 0;}exports.rend{%*i*%}er = function() {if ($IE78) return;if (!sprites) {init();}if (--tickWait > 0 || exports.alpha < 1) {return;}var opaticy;tick++;if (tick < 11) {spt.setH(25 * tick);opaticy = tick * 0.04;}else if (tick < 13) {opaticy = 0;}else if (tick < 28) {opaticy = 1 - (tick - 13) * 0.0714;layerLight.setOpacity(opaticy / 8);}else {layerLight.setOpacity(0);spt.setY(-999).update();reset();return;}spt.setOpacity(opaticy).update();};exports.RES = ['thunder/0.png', 'thunder/1.png'];};{%elseif $eff == 'star'%}efFact.star = function(exports) {var W = 5;var H = 5;var MAX_Y = 100;var MAX_NUM = 110;var LAYER_PERCENT = [0,0,0,0,1,1,1,1,1,2];var LAYER_ALPHA = [[0.9, +0.1],[0.9, +0.1],[0.8, +0.2]];var sprites = [];var inited;function setOpacity(spt, val) {spt.setYOffset(H * ~~((1 - val) * 5));}function reset(spt) {var x = ~~(Math.random() * CANVAS_W);var y = 0;if (spt.y < MAX_Y) {y = ~~(Math.random() * MAX_Y);}spt.position(x, y);var rnd = Math.random() * LAYER_PERCENT.length;var type = LAYER_PERCENT[~~rnd];{%*i*%}spt.setXOffset(W * type);var alpha_range = LAYER_ALPHA[type];var opacity = alpha_range[0] + Math.random() * alpha_range[1];setOpacity(spt, opacity);spt.op_ = opacity;spt.opmax_ = opacity; spt.opmin_ = opacity * 0.2; spt.opA_ = -0.025; spt.cd_ = spt.cdmax_ = 90 + ~~(120 * Math.random());}function init() {for(var i = 0; i < MAX_NUM; i++) {var spt = scene.Sprite(URL('star.png'), exports.layer);spt.size(W, H);reset(spt);sprites[i] = spt;}}exports.render = function() {if (!inited) {init();inited = tr{%*i*%}ue;}for(var i = 0; i < MAX_NUM; i++) {var spt = sprites[i];if (--spt.cd_ < 0) {spt.op_ += spt.opA_;if (spt.op_ < spt.opmin_) { spt.opA_ *= -1;spt.move(0, 1);}else if (spt.op_ >= spt.opmax_) { spt.opA_ *= -1;spt.cd_ = spt.cdmax_;}setOpacity(spt, spt.op_);}if (spt.y > MAX_Y) {reset(spt);}spt.update();}};exports.RES = ['star.png'];};{%elseif $eff == 'halo'%}efFact.halo = function(exports) {var SUN_X = 320;var LIGHT_DEF = 1;var LIGHT_MAX = 1;var LIGHT_MIN = 0.85;var RING_NUM = 7;var RING_D = 216;var MARGIN_TOP = 100;var rings = [];var light;var inited;var op = LIGHT_DEF;var A = 0.0005;function init() {light = scene.Sprite(URL('halo/light.png'), exports.layer);light.position(SUN_X - light.w / 2, 0);for(var i = 0; i < RING_NUM; i++) {var spt = scene.Sprite(URL('halo/ring.png'), exports.layer);var y = Math.random() * 250;var x = SUN_X - 150 - y * 0.3;s{%*i*%}pt.position(x, y);spt.size(RING_D, RING_D);spt.setXOffset(RING_D * i);rings[i] = spt;}}exports.render = function() {if (!inited) {init();inited = true;}op += A;if (op >= LIGHT_MAX || op <= LIGHT_MIN) {A = -A;}if (!$IE78) {light.setOpacity(op);}light.update();for(var i = 0; i < RING_NUM; i++) {rings[i].update();}};exports.RES = ['halo/light.png', 'halo/ring.png'];};{%/if%}{%/foreach%}var defEff, curEff;function checkCanvas() {return 'getContext' in document.createElement('canvas');}function loadEff(e) {var res = e.RES;for(var i = res.length - 1; i >= 0; i--) {res[i] = URL(res[i]);}scene.loadImages(res, function() {e.loaded = true;});}function renderEff() {if ($IE6) return;for(var k in efUsed) {if(efUsed.hasOwnProperty(k)){var e = efUsed[k];if (!e.loaded) continue;var last = e.alpha;e.alpha += ALPHA_DELTA;if (e.alpha > 0){e.render();if (!$IE78) {if (e.alpha < 1.0) {e.layer.se{%*i*%}tOpacity(e.alpha);}}}else {if (last > 0) {e.layer.setVisible(false);}}}}}function setEff(effArgs) {if ($IE6) return;for(var k in curEff) {if(curEff.hasOwnProperty(k)){if ($IE78) efUsed[k].layer.setVisible(false);efUsed[k].alpha = 1.0;}}for(var k in effArgs) {if(effArgs.hasOwnProperty(k)){var e = efUsed[k];if (!e.loaded && !e.loading) {e.loading = true;loadEff(e);}e.arg = effArgs[k];e.alpha = 9e9;e.layer.setVisible(true);if (!$IE78) e.layer.setOpacity(1.0);}}curEff = effArgs;}function initEff() {{%*i*%}if ($IE6) return;var opt;if (checkCanvas()) {opt = {useCanvas:true, autoClear:true};}for(var k in efFact) {if(efFact.hasOwnProperty(k)){var exports = {};efFact[k](exports);exports.layer = scene.Layer('eff-' + k, opt);exports.layer.setZIndex(1.0);exports.layer.setVisible(false);efUsed[k] = exports;}}layerLight = scene.Layer('light');layerLight.setOpacity(0);layerLight.setColor('#fff');}var CANVAS_W = 538,CANVAS_H = 250,ALPHA_DELTA = -0.03;var layers_bg = {};var fading;var opacity;var defBg, curBg{%*i*%};var divOldBg;var setAlpha = 'opacity' in document.body.style ?function (el, v) {el.style.opacity = v} :function (el, v) {var flt = el._flt;if (!flt) {el.style.filter += ' alpha';flt = el._flt = el.filters.alpha;}flt.opacity = v * 100;};function setBg(bg) {if (bg == curBg) {return;}var divBg = layers_bg[bg];if (opacity > 0) {setAlpha(divOldBg, 0);divOldBg.style.display = 'none';opacity = 1 - opacity;}else {opacity = 1;}divOldBg = layers_bg[curBg];divOldBg.style.zIndex = 2;setAlpha(divOldBg, 1.0){%*i*%};divBg.style.zIndex = 1;divBg.style.display = 'block';setAlpha(divBg, 1.0);curBg = bg;fading = true; }function renderBg() {opacity += ALPHA_DELTA;if (opacity < 0) {divOldBg.style.display = 'none';fading = false;}else {setAlpha(divOldBg, opacity);}}function handleOver() {if (snowStopHover) {return;}if (tid != -1) {clearTimeout(tid);tid = -1;}var bg = this.getAttribute('weath-bg');setBg(bg);setEff(this.eff);}function handleOut() {if (snowStopHover) {return;}tid = setTimeout(function() {setBg(defBg{%*i*%});setEff(defEff);}, 20);}function render() {if (fading) {renderBg();}renderEff();}function initAni() {scene = A.ui.sjs.Scene({w: CANVAS_W, h: CANVAS_H, parent: _this.qq('op_weather4_twoicon')});scene.dom.style.zIndex = 10;initEff();setEff(defEff);var ticker = scene.Ticker(1000 / 60, render);ticker.run();}function init() {var arr = _this.q('op_weather4_twoicon_today').concat(_this.q('op_weather4_twoicon_day'));for(var i = arr.length - 1; i >= 0; i--) {var column = arr[i];var eff = column.getAttri{%*i*%}bute('weath-eff');if (eff) {eff = eval('(' + eff + ')');column.eff = eff;if (i == 0) {defEff = eff;}}if (i == 0) {curBg = defBg = column.getAttribute('weath-bg');}if ($IE) {column.onmouseenter = handleOver;column.onmouseleave = handleOut;}else {column.onmouseover = handleOver;column.onmouseout = handleOut;}}arr = _this.q('op_weather4_twoicon_bg');for(i = arr.length - 1; i >= 0; i--) {var name = arr[i].getAttribute('bg-name');layers_bg[name] = arr[i];}A.use('sjs', initAni);}wtimer = setTimeout(in{%*i*%}it, 1);var CF = new(function(){var fdf=false;var checkflash;var hide;var hidebr;var creatFlash;var check;var firstbr=true;var clickURL = "http://www.baidu.com/aladdin/flash/weather/index.swf";function addTimeStamp(url,param){if(!url) return false;var regexp = new RegExp('(\\?|&)('+param+'=[^&$]*)');if(regexp.test(url)){url = url.replace(regexp , function(s0,s1,s2){return s1+s2+new Date().getTime();});return url;}else{if(url.indexOf('?')>0){return url+='&'+param+'='+new Date().getTime();}else{ret{%*i*%}urn url+='?'+param+'='+new Date().getTime();}}}function setFDFfunction(){fdf = true;return fdf;}function creatFlashfunction(murl, mt, url, width, height, fq, showurl, base, container, noshowurl, cURL){if(cURL !== "") clickURL = cURL;var str = "";if(mt){str += "<font size='3'><a href='"+murl+"' target=\"_blank\">"+mt+"</a></font>";}str += "<div style='width:"+width+";height:"+height+";margin-top:3px;'>";str += "<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000' width="+width+" height="+{%*i*%}height+" id='flashResult'>";str += "<param name='movie' value="+url+">";str += "<param name=FlashVars value="+fq+">";str += "<param name=base value="+base+">";str += "<param name='menu' value='false'>";str += "<param name='wmode' value='opaque'>";str += "<param name='allowfullscreen' value='false'>";str += "<param name='allowscriptaccess' value='always'>";str += "<embed FlashVars="+fq+" src="+addTimeStamp(url , 't')+" quality='high' pluginspage='http://www.adobe.com/shockwave/download/download.c{%*i*%}gi?P1_Prod_Version=ShockwaveFlash' type='application/x-shockwave-flash' width="+width+" height="+height+" menu='false' allowfullscreen='false' allowscriptaccess='always' name='flashResult' wmode='opaque' base="+base+" />";str += "</object></div>";if(! noshowurl){str += "<span ><font color=\"#008000\"  size='-1'>"+showurl+"</font>&nbsp;-&nbsp;";str += "<a  class='op_LAMP' target=\"_blank\" href=\"http://open.baidu.com/\"></a></span>";}if(container){container.innerHTML = str;}else{document.write(s{%*i*%}tr);}}function getVersion(){var n = navigator;if (n.plugins && n.mimeTypes.length) {var a = n.plugins["Shockwave Flash"];if (a && a.description) {return a.description.replace(/([a-zA-Z]|\s)+/, "").replace(/(\s)+r/, ".") + ".0";}} else if (window.ActiveXObject && !window.opera) {for (var i = 10; i >= 2; i--) {try {var c = new ActiveXObject('ShockwaveFlash.ShockwaveFlash.' + i);if (c) {var version = c.GetVariable("$version");version = version.replace(/WIN/g,'');version = version.replace(/,/g,'.');{%*i*%}return version;break;}} catch(e) {return "1.0.0"; }}}return "1.0.0"; }function hidefunction(flashid , callback){if(callback){callback();return false;}var fid = flashid?flashid:'flash';var flash = document.getElementById(fid);try{var ft = al_c(flash);var ft = document.getElementById(ft);ft.style.display="none";}catch(e){}}function hidebrfunction(id){var flash_version=getVersion().split('.');var hasFlash = false;if(flash_version[0]>9) hasFlash = true;if(flash_version[0] == 9 && flash_version[1] > {%*i*%}0) hasFlash = true;if(flash_version[0] == 9 && flash_version[1]== 0 && flash_version[2]>= 28)hasFlash = true;var fid = id?id:'flash';var flash = document.getElementById(fid);var ft = al_c(flash);var ft = document.getElementById(ft);var fb = ft.nextSibling;if(!hasFlash&&(firstbr==true)){fb.style.display="none";}else if(!firstbr&&(!fdf)){fb.style.display="none";}firstbr = false;}var swfVersion = (function () {var n = navigator;if (n.plugins && n.mimeTypes.length) {var plugin = n.plugins["Shockwave{%*i*%} Flash"];if (plugin && plugin.description) {return plugin.description.replace(/([a-zA-Z]|\s)+/, "").replace(/(\s)+r/, ".") + ".0";}} else if (window.ActiveXObject && !window.opera) {for (var i = 12; i >= 2; i--) {try {var c = new ActiveXObject('ShockwaveFlash.ShockwaveFlash.' + i);if (c) {var version = c.GetVariable("$version");return version.replace(/WIN/g,'').replace(/,/g,'.');}} catch(e) {}}}})();function checkflashversion(flashid , callback){var version = swfVersion || '1.0.0' ;var flash_ver{%*i*%}sion = version.split('.');var hasFlash = false;if(!flash_version) { hasFlash = false;}else{ if(flash_version[0]>9) hasFlash = true;if(flash_version[0] == 9 && flash_version[1] > 0) hasFlash = true;if(flash_version[0] == 9 && flash_version[1]== 0 && flash_version[2]>= 28)hasFlash = true;}if(!hasFlash){c({'fm':'inlo','url':clickURL,'p1':_this.p1,'p2':1,'tp':"6"});hidefunction(flashid , callback);}else c({'fm':'inlo','url':clickURL,'p1':_this.p1,'p2':1,'tp':"7"});}function checkfunction(){if(fdf){c{%*i*%}({'fm':'inlo','url':clickURL,'p1':getFlashP1(),'p2':1,'tp':"8"});return true;}else{c({'fm':'inlo','url':clickURL,'p1':getFlashP1(),'p2':1,'tp':"9"});hidefunction();hidebrfunction();}}return{hidebr : function(id){ hidebrfunction(id); },hide : function(id,callback){ hidefunction(id,callback); },checkflash: function(id , callback){ checkflashversion(id , callback); },check : function(){ checkfunction(); },creatFlash: function(murl,mt,url,width,height,fq,showurl,base,container,noshowurl){ creatFlash{%*i*%}function(murl,mt,url,width,height,fq,showurl,base,container,noshowurl); },setFDF : function(){ return setFDFfunction(); }};})();if(weather4_twoicondata.swfon){var url = weather4_twoicondata.url;var swfon = weather4_twoicondata.swfon;var swfoff = weather4_twoicondata.swfoff;var $flashContainer = _this.find('.op_weather4_twoicon_flash');var $open = _this.find('.op_weather4_twoicon_open').eq(0);var $close = _this.find('.op_weather4_twoicon_close').eq(0);var hideFlashContainer = function() {var $c ={%*i*%} _this.find('.op_weather4_twoicon_swf_container').eq(0);if ($c.length>0) {$c.hide();}};if ($flashContainer.html() == '') {var fq = 'fq=' + encodeURI(weather4_twoicondata.swfcondition) + '&from=baidu';var fdf;CF.checkflash('op_weather4_twoicon_flash', hideFlashContainer);CF.creatFlash(weather4_twoicondata.url, '', weather4_twoicondata.swfurl, '512', '385', fq, '', '', $flashContainer.get(0), 'noshowurl');}if ($open.length>0 && $close.length>0) {$open.on('click', function() {$close.css('display', {%*i*%}'inline-block');$open.hide();$flashContainer.show();});$close.on('click', function() {$open.show();$close.hide();$flashContainer.hide();});}}var snows = [];if (weather4_twoicondata.snowlevel && !$IE6) { snowStopHover = true;var snowlevel = weather4_twoicondata.snowlevel;function initFn() {var snowNum = 55 - 18 * (3 - snowlevel), r_con = _this.find('#content_right').get(0); var snow = function(index){var screenWidth = document.documentElement.clientWidth || document.body.clientWidth, screenHeight{%*i*%} = document.documentElement.clientHeight || document.body.clientHeight, scale = Math.random() * 1 - 0.3, size = Math.ceil(16 * (1 + scale) ), snowX = Math.random() * (screenWidth-100), snowY = 0, speedX = 0, angleX = 0, speedY = parseInt(snowlevel,10) + Math.random() * 3, amplitude = Math.random() * 3, opacity = 1, img = null, moveInterval = null, hideInterval = null, _this = this;if ( Math.random() - 0.5 > 0) { speedX = (0.01 + Math.random()/100);} else {speedX = -(0.01 + Math.random()/100);} v{%*i*%}ar draw = function (){ img = document.createElement('img');var bgNum = Math.ceil(Math.random()*100 ) % 100;if (bgNum > 95) {bgNum = 4;} else if (bgNum <=95 && bgNum >65) {bgNum = 3;} else if (bgNum <=65 && bgNum >35) {bgNum = 2;} else if (bgNum <=35 && bgNum >0) {bgNum = 1;} else {bgNum = 1;}var cssStyle = {'position':'absolute','zIndex':'10000000','opacity':opacity,'width':(size + 'px'),'height':(size + 'px')};img.src = 'http://www.baidu.com/aladdin/img/weather4_twoicon/snowflake' + bgNum + '.p{%*i*%}ng';for( var i in cssStyle) {if(cssStyle.hasOwnProperty(i)){img.style[i] = cssStyle[i]; } }img.style.left = snowX + 'px';img.style.top = snowY + 'px';document.body.appendChild(img);};var move = function (){ angleX += speedX;snowX = snowX + amplitude * Math.sin(angleX);snowY += speedY;var screenWNow = document.documentElement.clientWidth || document.body.clientWidth,screenHNow = document.documentElement.clientHeight || document.body.clientHeight;if ( 50 < snowX && snowX < (screenWNow - 50) && 0 < {%*i*%}snowY && snowY < (screenHNow - 100) ) {img.style.left = snowX + 'px';img.style.top = snowY + 'px';} else { img.style.left = snowX + 'px';img.style.top = snowY + 'px';if ( !hideInterval) {hideInterval = setInterval(function(){ if (opacity >= 0) {opacity -= 0.2;img.style.opacity = opacity;} else {destory(); snows[index] = new snow(index); }}, 50);}}};var destory = this.destory = function(){ clearInterval(hideInterval);clearInterval(moveInterval);if (img.parentNode) {img.parentNode.removeChild(img){%*i*%}; }_this = null;};var init = function() { draw();moveInterval = setInterval(function(){move();}, 50)};init();};function initSnow(){ var initSnowNum = 10 + 3 * snowlevel;for (var i = 0; i < initSnowNum; i ++) {snows[i] = new snow(i);}snowInterval = setInterval( function() {var snowCount = snows.length;if ( snowCount < snowNum) {snows[snowCount] = new snow(snowCount);} else {clearInterval(snowInterval);}}, 300);}function initBtn() { var $firstSnowBtn = _this.find('.op_weather4_twoicon_firstsnow_bt{%*i*%}n').eq(0), $firstSnowDiv = _this.find('.op_weather4_twoicon_firstsnow').eq(0); if ($firstSnowBtn.length>0) {$firstSnowDiv.show();$firstSnowBtn.on('click', function() { snowStopHover = false;clearInterval(snowInterval);for (var i=0; i< snowNum; i ++) {if (snows[i]) {snows[i].destory();}}$firstSnowDiv.hide();_this.find('.op_weather4_twoicon_snowtop').eq(0).hide();});}}initBtn();initSnow();}initFn();}var query = weather4_twoicondata.oq;if(query.indexOf("天气") < 0)return;A.use('localstorage',function{%*i*%}(){var storage = A.ui.localstorage({fileName : 'bd_weather_city',expiresDay : 30});storage.init();var curCity = weather4_twoicondata.fetchkey.split(weather4_twoicondata.resourceid+'_')[1]; curCity = (curCity.indexOf('天气') < 0 ) ? curCity + '天气' : curCity; var localStorElem = _this.qq('op_weather4_twoicon_u'); weatherHis(1); function wencodeHTML(source) {return String(source).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g, "&quot;").replace(/'/g, "&#39;");};function {%*i*%}weatherHis(cityNum){var cityStorage = storage.get('op_weather4_twoicon_city');var storageMax = cityNum;var cityList = (!cityStorage) ? new Array() : unescape(cityStorage).split(';'); for(var i=0, j=0; i<cityList.length; i++) {if( cityList[i] == curCity || j == 99) { cityList.splice(i,1);} else {j++;}}if(cityList && cityList.length > 0) {for(var j = 0; j < storageMax; j++) {var cityA = document.createElement('a');var url = "http://www.baidu.com/s?wd=" + encodeURIComponent(cityList[j]) + "&ie=utf-{%*i*%}8";var cityName=document.createTextNode(wencodeHTML(cityList[j]) );cityA.appendChild(document.createTextNode( wencodeHTML(cityList[j]) ));cityA.href = url;cityA.target = '_blank';cityA.className = 'OP_LOG_LINK';localStorElem.appendChild( cityA );}localStorElem.style.display = 'inline';c({'fm': 'inlo', rsv_wct : 1});}var setStorige = cityList.length > 0 ? curCity + ';' + cityList.join(';') : curCity;storage.set('op_weather4_twoicon_city', escape(setStorige));}});this.dispose = function(){if(snows{%*i*%}.length>1){for (var i = 0; i < snows.length; i ++) {snows[i].destory();}}clearTimeout(tid);clearTimeout(wtimer);clearInterval(snowInterval);clearInterval(hideInterval);clearInterval(moveInterval);scene&&scene.dispose&&scene.dispose();};});</script><script>A.setup(function() {var _this = this;var weather4_twoicondata = _this.data.weather4_twoicondata;var XLIE6 = !!window.ActiveXObject && !window.XMLHttpRequest;var browserIE = /msie (\d+\.\d+)/i.test(navigator.userAgent) ? (document.documentMode |{%*i*%}| + RegExp['\x241']) : undefined;var originQuery = weather4_twoicondata.originQuery,srcid = weather4_twoicondata.srcid,fswd = null,flfx=null,xgzs=null,fswdaxes=null,flfxaxes = null,jsl=null,warH = weather4_twoicondata.warn?36:0,xlHClose = 32,xlHOpen = 174,H = 250;if(weather4_twoicondata.folder && !XLIE6){function wdfl(canvas,appendo,fswd,flfx,fl){var op_weather4_xlCanvas = canvas,ctx = op_weather4_xlCanvas.getContext('2d');for(var i=0;i<fswd.length;i++){if(!fswd[i].novalue){var startXY = {'x':0,{%*i*%}'y':fswd[i].y};break;}}var dataXY=[];dataXY = !fl?fswd:flfx;if(!fl){dataXY[12] = {'id':12,'x':490,'y':dataXY[dataXY.length-1]['y'],'yw':0};dataXY[13] = {'id':13,'x':490,'y':-2,'yw':0};dataXY[14] = {'id':14,'x':0,'y':-2,'yw':0};}function line(x,y,i){if(i==11 && dataXY[11].novalue){ctx.lineTo(480,y);}else{ctx.lineTo(x,y);}}function createCanvas(appendo,w,h,l,t,i,flfn){var op_weather4_xlqyyc = document.createElement('div');op_weather4_xlqyyc.className="op_weather4_xlqyyc";op_weather4_xlqyyc.style.l{%*i*%}eft = i*40+'px';appendo.appendChild(op_weather4_xlqyyc);var yc = document.createElement('div');yc.className = 'op_weather4_yuandian';yc.style.position="absolute";yc.style.width=w+'px';yc.style.height=h+'px';yc.style.left=l-w/2+'px';yc.style.top=t-h/2+'px';if(!fl){yc.style.backgroundPosition='0 3px';}else{var posiXY = flfn==8?'2px 3px':'0 -'+(flfn*20+27)+'px';yc.style.backgroundPosition=posiXY;}op_weather4_xlqyyc.appendChild(yc);return op_weather4_xlqyyc;}function creatfont(appendo,w,h,l,t,c){var{%*i*%} ft = document.createElement('div');ft.className = 'op_weather4_xllefts';ft.style.position="absolute";if(fl){ft.style.width='42px';}ft.style.left=l-w/2-13+'px';ft.style.top=t-h/2-13+'px';var unit = fl?'':'°C';ft.innerHTML = c+unit;appendo.appendChild(ft);return ft;}function ceartArc(appendo,w,h,l,t,c,i,flfx,flfl,flfs,flfn){var canvas = createCanvas(appendo,w,h,l,t,i,flfn);creatfont(canvas,w,h,l,t,c);if(fl){xltip(canvas,100,108,l-50,'<p>风向：'+flfx+'</p><p>风力：'+flfl+'</p><p>风速：'+flfs+'</p>');}else{{%*i*%}}canvas.onmousemove = function(ev){if(!fl){editArc(this.children[0],w+4,h+4,l,t,'0 -7px');}if(fl){this.children[2].style.display = 'block';}};canvas.onmouseout = function(ev){if(!fl){editArc(this.children[0],w,h,l,t,'0 3px');}if(fl){this.children[2].style.display = 'none';}};}function editArc(o,w,h,l,t,xy){o.style.width=w+'px';o.style.height=h+'px';o.style.left=l-w/2+'px';o.style.top=t-h/2+'px';o.style.backgroundPosition=xy;}function moveArea(mouseX){for(var i=0;i<12;i++){if(mouseX>=(i*40) && mo{%*i*%}useX<(i*40+40)){return i;}}}function clearCanvas(w,h){ctx.clearRect(0,0,w,h);}function ctxDraw(appendo){ctx.strokeStyle='rgba(255,255,255,0.2)';ctx.save();ctx.beginPath();if(!fl){ctx.moveTo(startXY.x,86-startXY.y-0.5);}else{if(dataXY[0].novalue){for(var i=0;i<dataXY.length;i++){if(!dataXY[i].novalue){ctx.moveTo(0,86-dataXY[i].y-0.5);break;}}}else{ctx.moveTo(20,86-dataXY[0].y-0.5);}}ctx.strokeStyle='#FFFFFF';ctx.lineWidth = 1;for(var i=0;i<dataXY.length;i++){if(i<12){if(!dataXY[i].novalue){var x {%*i*%}= (dataXY[i].id-1)*40+20,y = 86-dataXY[i].y-0.5,lasty = y;}else{var y = lasty;}}else{var x = (dataXY[i].x),y = 86-(dataXY[i].y);}line(x,y,i);if(i<12 && !fl && !dataXY[i].novalue){ceartArc(appendo,14,14,20,86-dataXY[i].y,dataXY[i].yw,i);}if(i<12 && fl && !dataXY[i].novalue){ceartArc(appendo,14,14,20,86-dataXY[i].y,dataXY[i].s,i,dataXY[i].f,dataXY[i].fl,dataXY[i].s,dataXY[i].fn);}}ctx.stroke();if(!fl){ctx.fillStyle="rgba(255,255,255,0.1)";ctx.fill();ctx.closePath();}ctx.restore();for(var i=0;i<5;i{%*i*%}++){ctx.beginPath();var y = 17*(i+1)+0.5;ctx.moveTo(0,y);ctx.lineTo(480,y);ctx.stroke();}}ctxDraw(appendo);}function xltip(appendo,w,t,l,html,xgzs){var tip = document.createElement('div');tip.className = 'op_weather4_xltip';tip.style.width = w+'px';tip.style.top = t+'px';tip.style.left = l+'px';tip.style.zIndex = '1000';tip.style.display = 'none';appendo.appendChild(tip);var tipico = document.createElement('span');tipico.className = 'op_weather4_xlico';var leftD = xgzs?35:75;tipico.style.left = {%*i*%}l+leftD+'px';tip.appendChild(tipico);var tipcon = document.createElement('div');tipcon.className = 'op_weather4_xlcont';tipcon.innerHTML = html;tip.appendChild(tipcon);return tip;}function setString(str,len){if(str.length*2 <= len){return str;}var strlen = 0; var newstr = "";for(var i = 0;i < str.length; i++){if(str.charCodeAt(i) > 128){ strlen = strlen + 2;if(strlen > len){return newstr.substring(0,newstr.length-1) + "...";}}else{strlen = strlen + 1;if(strlen > len){return newstr.substring(0,ne{%*i*%}wstr.length-2) + "...";}}newstr = newstr + str.charAt(i);}return newstr;};function xgzhsli(o,i){var xlbornone = i>3?' op_weather4_xlbornone':'';var li = document.createElement('li'),div = document.createElement('div'),xlxgzhtop = _this.find('.op_weather4_xltop').eq(0);li.className = 'op_weather4_xlzs'+xlbornone;li.style.position = 'relative';li.style.zIndex = 6-i;xlxgzhtop.append(li);div.className = 'op_weather4_xlzstit';div.innerHTML = o.title+'：'+o.zs;li.appendChild(div);var xgzhtip = xltip(li{%*i*%},335,27,0,'<div class="op_weather4_xltiptitle">'+o.tipt+'：'+o.zs+'</div><div class="op_weather4_xltipcontent">'+o.des+'</div>',1);$(li).on('mouseover',function(){xgzhtip.style.display = 'block';});$(li).on('mouseout',function(){xgzhtip.style.display = 'none';});return li;}function xgzhs(data) {var ul = '';$.each(data,function (i,o){ul += xgzhsli(o,i);});return ul;}function xyValue(fswdaxes){var ymax = fswdaxes.ymax,ydif = (ymax - fswdaxes.ymin)/4,strLi = '';for(var i=0;i<5;i++){var livalue = yma{%*i*%}x-(i*ydif);strLi += '<li>'+livalue+'</li>';}return strLi;}function jslUl(jsl){var strLi='';for(var i=0;i<10;i++){var time = jsl[i].t.replace(':00','时'),percentage = Math.ceil(jsl[i].p)<11?Math.ceil(jsl[i].p):10,novalueJsl = jsl[i].novalue?' op_weather4_jslNovalue':'',noJsl = jsl[i].novalue?'--':'';strLi += '<li>'+'<span>'+time+'</span>'+'<div class="op_weather4_jsico">'+'<span class="op_weather4_jsiconborw'+percentage+novalueJsl+'">'+noJsl+'</span>'+'</div>'+'<span class="op_weather4_jsml">'+jsl{%*i*%}[i].p+'mm</span>'+'</li>';}return strLi;}var tab = _this.find('.op_weather4_xltab:first li'),xlopen = _this.find('.op_weather4_xlopen').eq(0),xlclose = _this.find('.op_weather4_xlclose').eq(0),xltabcontent = _this.find('.op_weather4_xltabcontent').eq(0),xltwoiconBg = _this.find('.op_weather4_twoicon_bg'),xltwoicon = _this.find('.op_weather4_twoicon').eq(0),tabActive = tab.eq(0),content = _this.find('.op_weather4_xlcon'),xlbgie = _this.find('.op_weather4_twoicon_bgie'),jslulDom = _this.find('.op_{%*i*%}weather4_jslul').eq(0),tabContent = content[0],tab2 = 0,tabAjax = 0;if(browserIE && xlbgie.length>0){xlbgie.each(function(i,o){ o.style.height = 132 + warH + 'px';})}if(xlclose.length>0){xlclose.on('click',function() {xltwoiconBg.each(function(i,o){o.style.height = H + xlHClose + warH+ 'px';});if(browserIE && xlbgie.length>0){xlbgie.each(function(i,o){ o.style.height = 132 + warH + 'px';})}xltabcontent.css('display','none');xltwoicon.css('height',H + xlHClose);xlopen.css('display','block');xlclo{%*i*%}se.css('display','none');});}if(xlopen.length>0){xlopen.on('click',function() {if(!tabAjax){_this.find('.op_weather4_xlleftfswd').html('');_this.find('.op_weather4_xlleftflfx').html('');jslulDom.html('');_this.ajax(originQuery, srcid, {co:'fswd|flfx|xgzs|folder|fswdaxes|flfxaxes|jsl',success:function(data){if(data[0]){var data = data[0];fswd = data.fswd;flfx = data.flfx;xgzs = data.xgzs;fswdaxes = data.fswdaxes[0];flfxaxes = data.flfxaxes[0];jsl = data.jsl;tabAjax = 1;if(browserIE){A.use('canvas{%*i*%}', function(){if(!document.createElement('canvas').getContext){A.ui.canvas.init([_this.find('.op_weather4_xlCanvas1').get(0),_this.find('.op_weather4_xlCanvas2').get(0)]);}wdfl(_this.find('.op_weather4_xlCanvas1').get(0),_this.find('.op_weather4_xlCanvascon1').get(0),fswd,flfx);wdfl(_this.find('.op_weather4_xlCanvas2').get(0),_this.find('.op_weather4_xlCanvascon2').get(0),fswd,flfx,1);content[1].style.display='none';});}else{wdfl(_this.find('.op_weather4_xlCanvas1').get(0),_this.find('.op_weathe{%*i*%}r4_xlCanvascon1').get(0),fswd,flfx);wdfl(_this.find('.op_weather4_xlCanvas2').get(0),_this.find('.op_weather4_xlCanvascon2').get(0),fswd,flfx,1);content[1].style.display='none';}_this.find('.op_weather4_xlleftfswd').html(xyValue(fswdaxes));_this.find('.op_weather4_xlleftflfx').html(xyValue(flfxaxes));jslulDom.html(jslUl(jsl));tab.bind('click',function(){var i=tab.index(this);if(i==3){var xlxgzhtop = _this.find('.op_weather4_xltop').eq(0);xlxgzhtop.html('');xgzhs(xgzs);}tabActive.removeClass('op_{%*i*%}weather4_xlactive');tabActive = $(this);tabActive.addClass('op_weather4_xlactive');tabContent.style.display = 'none';tabContent = content[i];tabContent.style.display = 'block';});}},error: function(){}});}xltwoiconBg.each(function(i,o){o.style.height = H + xlHOpen + warH + 'px';});if(browserIE && xlbgie.length>0){xlbgie.each(function(i,o){ o.style.height = H + xlHClose + warH - 8 + 'px';})}xltabcontent.css('display','block');xltwoicon.css('height',H + xlHOpen);xlopen.css('display','none');xlclos{%*i*%}e.css('display','block');});}}else if(weather4_twoicondata.folder && XLIE6){_this.find('.op_weather4_xiala').css('display', 'none');_this.find('.op_weather4_twoicon').css('height',H );_this.find('.op_weather4_twoicon_bg').each(function (i,o) {o.style.height = H + warH + 'px';});}});</script>{%/block%}