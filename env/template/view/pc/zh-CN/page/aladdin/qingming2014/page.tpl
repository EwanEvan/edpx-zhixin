{%extends 'c_base.tpl'%} {%block name='title'%}{%/block%}{%block name='foot'%}{%/block%}{%block name='content'%}<style type="text/css" >.op-qingming2014-liushu{width:315px;height:237px;position:absolute;top:0;right:0;z-index:301;background:url('http://www.baidu.com/aladdin/img/qingming2014/qmbg3.gif');pointer-events:none}.op-qingming2014{position:absolute;top:0;left:0;z-index:302;pointer-events:none}.op-qingming2014-close{position:absolute;top:20px;right:20px;z-index:303;cursor:pointer}</style><div class="op-qingming2014-liushu"></div><div class="op-qingming2014-close"><i class="c-icon c-icon-wrong-large"{%*i*%}></i></div><div class="op-qingming2014"> </div><script>A.init(function() {var _this = this;var NUM = 60,CANVAS_W = document.documentElement.clientWidth || document.body.clientWidth,CANVAS_H = document.documentElement.clientHeight || document.body.clientHeight,rainCanvas = _this.find('.op-qingming2014'),close = _this.find('.op-qingming2014-close'),scrollTime = 0,isIE6 = !!window.ActiveXObject && !window.XMLHttpRequest;$(_this.container).css('margin-bottom','0');if(isIE6) return;function checkCanv{%*i*%}as() {return 'getContext' in document.createElement('canvas');}A.use('sjs',function(){var scene = A.ui.sjs.Scene({w: CANVAS_W, h: CANVAS_H, parent: rainCanvas[0]});if (!checkCanvas()) {var opt = {useCanvas:false, autoClear:true};}else{var opt = {useCanvas:true, autoClear:true};}var layer = scene.Layer('rain', opt);var ticker = scene.Ticker(1000 / 60, onRender);scene.loadImages(['http://www.baidu.com/aladdin/img/qingming2014/rain3.png'], function() {ticker.run();});close.click(function(){ticker.p{%*i*%}ause();$(_this.container).hide();});var W = 2;var H = 16;var sprites = [];var curNum = 0;var LAYER_PERCENT = [0,1,1,1,2,2,2,2,2,2,2,2];var LAYER_ALPHA = [[0.25, +0.30],[0.20, +0.10],[0.15, +0.15]];var LAYER_SPEED = [9, 4, 3];var GRAVITY = 0.2;function setOpacity(spt, val) {spt.setYOffset(H * ~~((1 - val) * 10));}function reset(spt) {var rnd = Math.random() * LAYER_PERCENT.length;var type = LAYER_PERCENT[rnd >> 0];spt.setXOffset(W * type);spt.setVelocity(0, LAYER_SPEED[type]);spt.setX(Math.random{%*i*%}() * CANVAS_W);spt.xv = -2;if (spt.fromtop_) {spt.setY(-30);}else {spt.fromtop_ = true;spt.setY( Math.random() * CANVAS_H ); }var alpha_range = LAYER_ALPHA[type];var opacity = alpha_range[0] + Math.random() * alpha_range[1];setOpacity(spt, opacity);}function onRender() {var num = NUM;for(var i = num; i < curNum; i++) {sprites[i].setY(999);sprites[i].fromtop_ = false;}for(var i = sprites.length; i < num; i++) {var spt = scene.Sprite('http://www.baidu.com/aladdin/img/qingming2014/rain3.png', layer{%*i*%});spt.size(2, 16);reset(spt);sprites[i] = spt;}for(var i = 0; i < curNum; i++) {var spt = sprites[i];spt.yv += GRAVITY;spt.applyXVelocity();spt.applyYVelocity();spt.update();if (spt.y > CANVAS_H) {reset(spt);}}curNum = num;}scrollTime = setInterval(function(){if(document.documentElement.scrollTop || document.body.scrollTop){ticker.pause();$(_this.container).hide();clearInterval(scrollTime);}},1);});this.dispose = function(){clearInterval(scrollTime);scene&&scene.dispose&&scene.dispose();};});</s{%*i*%}cript>{%/block%}