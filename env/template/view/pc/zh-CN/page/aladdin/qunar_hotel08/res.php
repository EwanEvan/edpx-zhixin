<?php 
  class CssJs_Util_qunar_hotel08
   {
      private static $cssStr = '';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("qunar_hotel08",function(){A.setup(function(){var i=this;var l="http://www.baidu.com/qunarui/hotel";var F=false;var c=[i.data.CITY_NAME,i.data.QUERYFORREQUEST];var o=(function(S){var Q="op-"+S.data.TPL_NAME+"-";var R={};var T;return T={isIE6:function(){return/msie 6/i.test(navigator.userAgent)},isIE7:function(){return/msie 7/i.test(navigator.userAgent)},getClass:function(U){return(Q+U)},getTags:function(V,U){if(!V){return[]}return V.getElementsByTagName(U)||[]},getElementByClassName:function(U,V){if(V){return $(V).find("."+U)[0]}else{return $("."+U)[0]}},getChildrens:function(U){return U&&U.childNodes||[]},hasClass:function(V,U){return $(V).hasClass(U)},addClass:function(V,U){$(V).addClass(U)},removeClass:function(V,U){$(V).removeClass(U)},removeAllClass:function(U){U.className=""},getOffset:function(V){var U=V.parentNode;var W=$(U).offset();return W},on:function(V,U,W){$(V).bind(U,W)},unbind:function(V,U,W){$(V).unbind(U,W)},jsonToQuery:function(U){var W=[];var V=null;$.each(U,function(X,Y){if(/[^\\x00-\\xFF]/.test(Y)){V=encodeURIComponent(Y)}else{V=Y}W.push(X+"="+V)});return W.join("&")},ajax:function(V,X,W,U){U=U||function(){};$.ajax({type:"POST",url:V,data:o.jsonToQuery(X),success:function(Y){W&&W(Y)},error:function(Y){U(Y)}})},jsonp:function(V,Y,W,X,U){U=U||function(){};$.ajax({type:"POST",url:V,dataType:"jsonp",jsonp:W||"__jscallback",data:o.jsonToQuery(Y),success:function(Z){try{X&&X(Z)}catch(aa){U();return}},error:function(Z){U(Z)}})},extend:function(U,X,W){var V=null;for(V in X){if(X.hasOwnProperty(V)){U[V]=X[V]}}for(V in W){if(W.hasOwnProperty(V)){U[V]=W[V]}}return U},trim:function(U){return U.replace(/(^\\s*)|(\\s*$)/g,"")},bind:function(U,V){if(!R[U]){R[U]=[]}R[U].push(V)},trigger:function(V){var X=arguments||[];var Z=R[V]||[];if(Z.length===0){return}var U=[];for(var Y=1;Y<X.length;Y++){U.push(X[Y])}for(var W=0;W<Z.length;W++){Z[W].apply(S,U)}},isObjEmpty:function(W){var V=true;for(var U in W){if(W.hasOwnProperty(U)&&"undefined"!=typeof U){V=false;break}}return V},remove:function(X,W){if(!(X instanceof Array)){return}if(X.length==0){return}var U=[];for(var V=0;V<X.length;V++){if(X[V]==W){continue}else{U.push(X[V])}}return U},isExist:function(W,V){if(!(W instanceof Array)){return}if(W.length==0){return}for(var U=0;U<W.length;U++){if(W[U]==V){return true}}return false},GetZoomFactor:function(){var V=1;if(document.body.getBoundingClientRect){var W=document.body.getBoundingClientRect();var X=W.right-W.left;var U=document.body.offsetWidth;V=Math.round((X/U)*100)/100}return V},toFixed:function(V,X){var U=V;if(!V){return}if(!X){X=0}V*=Math.pow(10,X);var W=parseInt(V);V=W/(Math.pow(10,X));if(V===parseInt(U)){return U+".0"}return V},format:function(U,V){return $.format(U,V)},subByte:function(W,V,U){return $.subByte(W,V,U)}}})(i);function q(Q){Q=Q||{};if(!Q.dom||!Q.offsetdom){return}this.offsetdom=Q.offsetdom;this.display=Q.display||"none";this.dom=Q.dom;this.url=Q.url;this.success=Q.success;this.error=Q.error;this.cache={};this.params={};if(Q.html){Q.dom.innerHTML=Q.html}if(this.display!=="none"){this.show()}}q.prototype.render=function(){var Q=this.getQuerykey();if(this.cache[Q]){this._callback(1,this.cache[Q])}else{this._getData()}};q.prototype.show=function(S){if(this.dom){var R=this.offsetdom.offsetHeight;if(S){R=2}var Q=o.getOffset(this.offsetdom);this.top=Q.top+R-1;this.left=Q.left;if(o.isIE7()){var T=o.GetZoomFactor()||0.1;this.top=(Q.top/T)+R-1;this.left=Q.left/T}this.dom.style.top=this.top+"px";this.dom.style.left=this.left+"px";this.display="block"}};q.prototype.hide=function(){if(this.dom){this.dom.style.top="-9999px";this.dom.style.left="-9999px";this.display="none"}};q.prototype.setQueryParams=function(R){R=R||{};if(!R.queryName){return}var Q={};Q[R.queryName]=o.trim(R.queryKey);this.params=o.extend({},this.params,Q)};q.prototype.getQueryParams=function(){return this.params||{}};q.prototype.clearCache=function(){if(this.getCacheSize()>20){this.cache={}}};q.prototype.getCacheSize=function(){var R=0;for(var Q in this.cache){if(this.cache.hasOwnProperty(Q)){R++}}return R};q.prototype._getData=function(){var Q=this;Q.onsuccess=function(R){F=true;if(!R){Q._callback();return}Q._callback(1,R);Q.clearCache();Q.cache[Q.getQuerykey()]=R};Q.onerror=function(R){F=true;Q._callback(0,R)};o.jsonp(this.url,o.extend({},{_t:new Date().getTime()},this.params),"__jscallback",Q.onsuccess,Q.onerror)};q.prototype.getQuerykey=function(){var R="";for(var Q in this.params){if(this.params.hasOwnProperty(Q)){R=R+this.params[Q]}}return R};q.prototype._callback=function(Q,R){if(!this.dom){return}if(Q===1){if(this.success){this.success(R)}}else{if(this.error){this.error(R)}}};var t=o.getElementByClassName(o.getClass("jshotelmore"));var v=(function(T){var W={};var Y=["","国家旅游局评定为一星级","国家旅游局评定为二星级","国家旅游局评定为三星级","国家旅游局评定为四星级","国家旅游局评定为五星级"];var Z=o.getElementByClassName(o.getClass("jshotels"));var X=o.getElementByClassName(o.getClass("jsnohotels"));var Q=o.getElementByClassName(o.getClass("jsnohotelsfilter"));var R=o.getElementByClassName(o.getClass("jshotelcount"));var V=o.getClass("hide");var S=function(ar){var ae=[];var ak,ap=T.data.TPL_NAME;var ai=[\'<div class="c-row op-#{tplname}-hotels op-#{tplname}-hotels#{index}">\',\'<div class="c-span4 op-#{tplname}-hotelimage">\',\'<a target="_blank" href="#{hotelimageurl}"><img class="c-img c-img4" src="#{imageurl}"/></a>\',"</div>",\'<div class="c-span10 op-#{tplname}-hotelintro">\',\'<p class="op-#{tplname}-hoteltitle">\',\'<a title="#{hoteltitlesource}" href="#{hoteltitleurl}" target="_blank">#{title}</a>\',"</p>","<p>#{starHtml}#{dangciHtml}#{addressHtml}</p>",\'<p>#{scoreHtml}<a href="#{reviewurl}" target="_blank">#{reviewcount}</a></p>\',"</div>",\'<div class="c-span5 op-#{tplname}-hotelreview">\',"<p>&nbsp;</p>","<p>#{tuanroomsHtml}</p>",\'<p><span class="op-#{tplname}-sellnum">#{sellnumHtml}</span></p>\',"</div>",\'<div class="c-span5 c-span-last op-#{tplname}-hotellook">\',\'<p class="op-#{tplname}-hotelprice">#{priceHtml}</p>\',"<p><span>#{discountHtml}</span>&nbsp;<del>#{originalpriceHtml}</del></p>","</div>","</div>"].join("");var ah,aj,ag,aa,aq,ab,ad;var af="",at="";var al,an,ao,am;var ac=0;for(ak=0;ak<ar.length;ak++){ah=ar[ak].hotelseq.lastIndexOf("_");ag="dt-"+ar[ak].hotelseq.substring(ah+1);aj=ar[ak].hotelseq.substring(0,ah);aa="http://tuan.hotel.qunar.com/city/"+aj+"/"+ag;if(ar[ak].star>0){aq=18}else{if(ar[ak].dangci){aq=20}else{aq=28}}ab=o.subByte(ar[ak].hotelname,32);ad=o.subByte(ar[ak].address,aq);if(ab===ar[ak].hotelname){af=""}else{af=ar[ak].hotelname}if(ad===ar[ak].address){at=""}else{at="位于"+ar[ak].address}al=ar[ak].score>0?o.toFixed(ar[ak].score,1)+"/5分":"";an=aa+"?ex_track=bd_zhixin_hotel_tuan_"+T.data.FROM_PARAM+"_score&"+T.data.QHFP;ao=aa+"?ex_track=bd_zhixin_hotel_tuan_"+T.data.FROM_PARAM+"_count&"+T.data.QHFP;am=aa+"?ex_track=bd_zhixin_hotel_tuan_"+T.data.FROM_PARAM+"_price&"+T.data.QHFP;ae.push(o.format(ai,{tplname:ap,index:ak,hotelimageurl:aa+"?ex_track=bd_zhixin_hotel_tuan_"+T.data.FROM_PARAM+"_image&"+T.data.QHFP,imageurl:ar[ak].img,hoteltitleurl:aa+"?ex_track=bd_zhixin_hotel_tuan_"+T.data.FROM_PARAM+"_name&"+T.data.QHFP,hoteltitlesource:af,title:ab,starHtml:ar[ak].star>0?\'<i class="c-icon c-icon-star c-gap-right-small op-\'+ap+"-star"+ar[ak].star+\'"  title="\'+Y[ar[ak].star]+\'"></i>\':"",dangciHtml:(!ar[ak].star&&ar[ak].dangci)?\'<span class="op-\'+ap+\'-hoteldangci" title="\'+("去哪儿网用户评定为"+ar[ak].dangci+"酒店")+\'">\'+ar[ak].dangci+"</span>":"",addressHtml:ar[ak].address?\'<span title="\'+at+\'">位于\'+ad+"</>":"",scoreHtml:al?\'<a class="op-\'+ap+\'-score" href="\'+an+\'" target="_blank">\'+al+"</a>":"",reviewurl:aa+"?ex_track=bd_zhixin_hotel_tuan_"+T.data.FROM_PARAM+"_cmt&"+T.data.QHFP+"#scroll=comment",reviewcount:ar[ak].totalreview>0?ar[ak].totalreview+"条点评":"",tuanroomsHtml:ar[ak].tuanroomsnum>0?\'<a class="op-\'+ap+\'-tuanrooms" href="\'+ao+\'" target="_blank">共\'+ar[ak].tuanroomsnum+"种团品</a>":"",sellnumHtml:ar[ak].sellnum>0?"已售出"+ar[ak].sellnum+"份":"",discountHtml:ar[ak].discount>0?o.toFixed(ar[ak].discount,1)+"折":"",originalpriceHtml:ar[ak].originalprice>=0?"<b>&yen;&nbsp;"+ar[ak].originalprice+"</b>":"",priceHtml:ar[ak].price>=0?\'<a href="\'+am+\'" target="_blank"><b>&yen;\'+ar[ak].price+"</b>起</a>":""}))}Z.innerHTML=ae.join("");o.addClass(X,V);o.removeClass(Z,V)};var U=function(ab){var aa=ab&&ab.getFilterNames();R.innerHTML="在0家酒店中";Q.innerHTML=\'<span>很抱歉，没有找到与"<em>\'+aa.join("|")+\'</em>"相关的酒店</span>\';o.addClass(Z,V);o.addClass(t,V);o.removeClass(X,V)};return W={render:function(ab){var aa=function(ac){S(ac.hotellinks);if(ac.hotelCount>=4){o.removeClass(t,V)}else{o.addClass(t,V)}};aa(ab)},getFilterTip:U,setHotelsCountTip:function(aa){R.innerHTML=aa}}})(i);var k=o.getElementByClassName(o.getClass("city-input"));var I=o.getElementByClassName(o.getClass("hotcity"));var O=o.getElementByClassName(o.getClass("keyword-input"));var m=o.getElementByClassName(o.getClass("hotkey"));var b=o.getElementByClassName(o.getClass("placeholder"));var a=new q({dom:I,offsetdom:k});var x=new q({dom:b,offsetdom:O});if(i.data.QUERYFORREQUEST){x.hide()}else{x.show(true)}var P=new q({dom:m,offsetdom:O,url:l+"/sugg.jsp?v=1&queryid="+i.data.QUERYID,success:function(R){if(R&&R.data){P.dom.style.borderWidth="1px";P.dom.innerHTML=R.data.replace(/onmousedown="return searchword\\(.*\\)"/ig,"");var Q=o.getElementByClassName("js_cityguide",m);if(Q){Q.parentNode.style.display="none"}}},error:function(Q){P.dom.innerHTML="";P.dom.style.borderWidth="0px"}});var D=function(Q){a.hide();P.hide();if(!O.value){x.show(true)}};o.on(document,"click",D);var r=function(Q){a.hide();P.hide();if(!O.value){x.show(true)}};o.on(window,"blur",r);o.on(k,"click",function(Q){P.hide();i._sug&&i._sug.hide();if(a.display==="block"){a.hide()}else{a.show()}Q.stopPropagation()});o.on(I,"click",function(S){S.stopPropagation();S.preventDefault();var R=S.target||S.srcElement;if(R.tagName.toUpperCase()==="A"){var Q=R.getAttribute("data-city");if(k.value!=Q){o.trigger("citychanged",Q)}if(Q){if(i._sug){i._sug.hide();i._sug.pick(\'<span class="js_cityname" data-cityname="\'+Q+\'">\'+Q+"</span>")}else{k.value=Q}a.hide()}}});o.on(O,"click",function(Q){if(P.display==="block"){P.hide()}else{P.setQueryParams({queryName:"city",queryKey:k.value});P.render();P.show();a.hide();x.hide()}Q.stopPropagation();Q.preventDefault()});o.on(m,"click",function(S){S.preventDefault();var R=S.target||S.srcElement;if(R.tagName.toUpperCase()==="A"){var Q=o.trim(R.innerHTML);if(Q){x.hide();O.value=Q;P.hide()}}});o.on(b,"click",function(R){var Q=R.target||R.srcElement;R.stopPropagation();R.preventDefault();if(Q.tagName.toUpperCase()==="DIV"){O.focus();x.hide();P.setQueryParams({queryName:"city",queryKey:k.value});P.render();a.hide();P.show()}});o.bind("citychanged",function(Q){});var s=o.getElementByClassName(o.getClass("jsquerybtn"));o.on(s,"click",function(T){var R=encodeURIComponent(k.value);var Q=encodeURIComponent(O.value);var S=i._filterManager.getFilterHashurl();s.href="http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_"+i.data.FROM_PARAM+"_search&toCity="+R+"&q="+Q+"&"+i.data.QHFP+S});o.on(t,"click",function(U){var S=encodeURIComponent(k.value);var R=encodeURIComponent(O.value);var T=i._filterManager.getFilterHashurl();var Q=$(t).find("a");if(Q.size()>0){Q[0].href="http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_"+i.data.FROM_PARAM+"_moreroom&toCity="+S+"&q="+R+"&"+i.data.QHFP+T}});if(o.isIE6()){var B=o.getElementByClassName(o.getClass("jssearch"));if(B){var d=B.offsetHeight;if(d>48){B.style.height="48px";B.style.overflow="hidden"}}}var C=function(Y,R,W){var X=this;var T=Y;var U=R||{};var S=W||[];var Q=null;var V=null;this.render=function(){};this.hide=function(){T.style.display="none"};this.show=function(){T.style.display="block"};this.setData=function(Z){U=Z};this.getData=function(){return U};this.setFilters=function(Z){Q=Z};this.getFilters=function(){return Q||[]};this.setFilterNames=function(Z){V=Z};this.getFilterNames=function(){return V||[]};this.getListener=function(){return S};this.getWrapElem=function(){return T};this.setListener=function(Z){S=Z};this.getType=function(){return this.type};this.bindEvent=function(aa){if(aa instanceof Array&&aa.length>0){for(var Z=0;Z<aa.length;Z++){(function(){var ab=Z;o.bind("updateFilter"+X.type,function(){aa[ab].updateFilter&&aa[ab].updateFilter(X)})})()}}}};var e=function(S,T,Q){var R=this;var U=function(){if(!S){return}C.call(R,S,T,Q);if(o.isObjEmpty(T)||T==null||typeof T=="undefined"){R.hide()}R.setFilters([]);R.setFilterNames([])};U();this.addFilters=function(W,V){this.setFilters([]);this.setFilterNames([]);this.getFilters().push(W);this.getFilterNames().push(V);o.trigger("updateFilter"+this.type)};this.removeFilters=function(W,V){if(this.getFilters().length==0){return}this.setFilters(o.remove(this.getFilters(),W));this.setFilterNames(o.remove(this.getFilterNames(),V));o.trigger("updateFilter"+this.type)};this.removeAllFilters=function(){this.setFilters([]);this.setFilterNames([]);o.trigger("updateFilter"+this.type)};this.updateFilter=function(V){this.setFilters(V.getFilters());this.setFilterNames(V.getFilterNames());this.relayout();this.update()}};var M=function(){this.getFilterOption=function(R,Q){if(R=="bgSelect"){return new FilterOptionBgSelect(Q)}else{if(R=="checkOut"){return new N(Q)}else{if(R=="radio"){return new FilterOptionRadio(Q)}else{return null}}}}};var N=function(ag){var ae=this;var ac=ag.getWrapElem();var ak=o.getClass("active");var U=o.getClass("hide");var Y="c-icon-chevron-unfold";var ab="c-icon-chevron-fold";var Z=o.getClass("filtermore-noborder");var R=o.getClass("disabled");var W={type:"filter"+new Date().getTime(),title:"过滤项目：",unlimited:"不限",display:1000,moretitle:"所有",wrapTpl:[\'<div class="op-#{tplname}-find op-#{tplname}-clearfix op-#{tplname}-jsfilterPanel">\',"<span>#{title}</span>",\'<div class="op-#{tplname}-nolimit op-#{tplname}-active op-#{tplname}-jsnolimit"><a href="#" onclick="return false;">#{unlimited}</a></div>\',\'<ul class="op-#{tplname}-jsfilter">\',"#{filterHtml}","</ul>","#{moreHtml}","</div>"].join(""),tpl:\'<li class="#{disabledClass}"><a href="#" onclick="return false;" data-count="#{count}" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>\',moreTpl:\'<div class="op-#{tplname}-filtermore #{hideClass}"><a href="#" title="#{moretitle}" onclick="return false;" class="c-icon c-icon-chevron-unfold op-#{tplname}-jsfiltermore"></a></div>\'};ag.setData(o.extend({},W,ag.getData()));var S=o.getElementByClassName(o.getClass("jsfilterPanel"),ac);var Q=o.getElementByClassName(o.getClass("jsnolimit"),ac);var af=o.getElementByClassName(o.getClass("jsfilter"),ac);var ad=o.getElementByClassName(o.getClass("jsfiltermore"),ac);var V=o.getElementByClassName(o.getClass("jsfiltermorectn"),ac);this.render=function(){var an=ag.getData();if(!an||!an.tplData||!an.tplData.value||an.tplData.value.length===0){ag.hide();return}ag.show();var at=an.tplData.value,au=[],ar=[],am=[],aq=an.tpl,ap=an.moreTpl,ao=an.wrapTpl,al=0;for(al=0;al<at.length;al++){au.push(o.format(aq,{disabledClass:at[al].count<=0?R:"",count:at[al].count||0,filter:at[al].name.replace(/%26/g,"&")||"",value:at[al].value.replace(/%26/g,"&")||""}))}ag.setFilters([]);T();ar.push(o.format(ap,{tplname:i.data.TPL_NAME,moretitle:"查看"+an.moretitle,hideClass:at.length>an.display?"":U}));am.push(o.format(ao,{title:an.title,tplname:i.data.TPL_NAME,unlimited:an.unlimited,filterHtml:au.join(""),moreHtml:ar.join("")}));S.innerHTML=am.join("");Q=o.getElementByClassName(o.getClass("jsnolimit"),ac);af=o.getElementByClassName(o.getClass("jsfilter"),ac);ad=o.getElementByClassName(o.getClass("jsfiltermore"),ac);this.registerEvent()};this.hideMore=function(){var al=ag.getData();V&&o.addClass(V,U);if(ad){o.removeClass(ad,ab);o.addClass(ad,Y);ad.setAttribute("title","查看"+al.moretitle)}};this.showMore=function(){var al=ag.getData();V&&o.removeClass(V,U);if(ad){o.removeClass(ad,Y);o.addClass(ad,ab);ad.setAttribute("title","收起"+al.moretitle)}};this.update=function(){X();var an=ag.getFilters()||[];var ao=o.getChildrens(af);var am="",al;for(al=0;al<ao.length;al++){if(ao[al].nodeType===1){am=ao[al].childNodes[0].getAttribute("data-filter");if(o.isExist(an,am)){o.addClass(ao[al],ak)}else{o.removeClass(ao[al],ak)}}}};var ah=function(al,ao){var am=-1;for(var an=0;an<al.length;an++){if(al[an].value==ao){am=an;break}}if(am!==-1){return al[am].count}else{return 0}};this.relayout=function(){var ar=ag.getData();var ap=ag.getFilters()||[];var aq=(ar&&ar.tplData&&ar.tplData.value)||[];if(aq.length===0&&ap.length===0){ag.hide();return}var al=ag.getFilterNames()||[];var ao=[];var an=ar.tpl;var am=0;if(ar.haslayout){if(ap.length>0){for(am=ap.length-1;am>=0;am--){ao.push(o.format(an,{disabledClass:"",count:ah(aq,ap[am]),filter:al[am].replace(/%26/g,"&")||"",value:ap[am].replace(/%26/g,"&")||""}))}}for(am=0;am<aq.length;am++){if(!o.isExist(ap,aq[am].value)){ao.push(o.format(an,{disabledClass:aq[am].count>0?"":R,count:aq[am].count,filter:aq[am].name.replace(/%26/g,"&")||"",value:aq[am].value.replace(/%26/g,"&")||""}))}}}else{for(am=0;am<aq.length;am++){ao.push(o.format(an,{disabledClass:(aq[am].count>0||o.isExist(ap,aq[am].value))?"":R,count:aq[am].count,filter:aq[am].name.replace(/%26/g,"&")||"",value:aq[am].value.replace(/%26/g,"&")||""}))}}this.hideMore();if(aq.length<=ar.display){ad&&o.addClass(ad,U)}else{ad&&o.removeClass(ad,U)}af.innerHTML=ao.join("");if(!ar.ishide){ag.show()}};var X=function(){var ap=ag.getData();if(ag.getFilters().length==0){var ao=(ap&&ap.tplData&&ap.tplData.value)||[];if(ao.length===0){ag.hide()}o.addClass(Q,ak);var aq=o.getChildrens(af);var an=false;var am=null;if(ap.haslayout){for(var al=0;al<aq.length;al++){if(aq[al].nodeType===1){an=o.hasClass(aq[al],ak);am=aq[al].childNodes[0].getAttribute("data-count");if(an&&am==0){o.addClass(aq[al],U)}o.removeClass(aq[al],ak)}}}else{for(var al=0;al<aq.length;al++){if(aq[al].nodeType===1){o.removeClass(aq[al],ak)}}}}else{o.removeClass(Q,ak)}};var aj=function(ar){var aq=ar.target||ar.srcElement;if(aq.tagName.toUpperCase()==="A"){if(o.hasClass(aq.parentNode,R)){return}var an=aq.getAttribute("data-filter");var al=aq.getAttribute("data-name");var ao=aq.getAttribute("data-count");if(ag.getData().haslayout){if(ao<=0){o.addClass(aq.parentNode,U)}}else{if(ao<=0){o.addClass(aq.parentNode,R)}}if(o.isExist(ag.getFilters(),an)){ag.removeFilters(an,al);o.removeClass(aq.parentNode,ak)}else{ag.addFilters(an,al);var ap=o.getChildrens(af);for(var am=0;am<ap.length;am++){if(ap[am].nodeType===1&&o.hasClass(ap[am],ak)){o.removeClass(ap[am],ak)}}o.addClass(aq.parentNode,ak)}X()}};var ai=function(al){if(ag.getFilters().length>0){ag.removeAllFilters();X()}};var aa=function(am){var al=am.target||am.srcElement;if(al.tagName.toUpperCase()==="A"){if(o.hasClass(al,ab)){ae.hideMore()}else{ae.showMore()}}};this.registerEvent=function(){af&&o.on(af,"click",aj);Q&&o.on(Q,"click",ai);ad&&o.on(ad,"click",aa)};var T=function(){af&&o.unbind(af,"click",aj);Q&&o.unbind(Q,"click",ai);ad&&o.unbind(ad,"click",aa)}};var H=function(S,T,Q){var R=this;var U=function(){e.call(R,S,T,Q);R.type=T.type;var V=new M();R.filterOption=V.getFilterOption("checkOut",R);R.filterOption.registerEvent()};U();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var z=function(S,T,Q){var R=this;var U=function(){e.call(R,S,T,Q);R.type=T.type;var V=new M();R.filterOption=V.getFilterOption("checkOut",R);R.filterOption.registerEvent()};U();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var L=function(S,T,Q){var R=this;var U=function(){e.call(R,S,T,Q);R.type=T.type;var V=new M();R.filterOption=V.getFilterOption("checkOut",R);R.filterOption.registerEvent()};U();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var f=function(S,T,Q){var R=this;var U=function(){e.call(R,S,T,Q);R.type=T.type;var V=new M();R.filterOption=V.getFilterOption("checkOut",R);R.filterOption.registerEvent()};U();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var h=function(S,T,Q){var R=this;var U=function(){e.call(R,S,T,Q);R.type=T.type;var V=new M();R.filterOption=V.getFilterOption("checkOut",R);R.filterOption.registerEvent()};U();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var y=function(S,T,Q){var R=this;var U=function(){if(!S){return}C.call(R,S,T,Q);R.setFilters("")};U();this.changeFilters=function(V){this.setFilters(V);o.trigger("updateFilter"+this.type)}};var E=function(R){var T={price:"PRICE",grade:"GRADE",brand:"BRAND",hoteltype:"HOTELTYPE",facility:"FACILITY"};var U=R.single||[];var S=R.more||[];var Q=R.loader||new p();this.filtersParam={};this.updateFilter=function(W){var V=0,Y,X;this.filtersParam={};for(V=0;V<U.length;V++){if(U[V].getFilters()&&U[V].getFilters()!="default,no"){Y=U[V].getFilters().split(",");this.filtersParam[Y[0]+"sort"]=Y[1]}}for(V=0;V<S.length;V++){Y=S[V].getFilters();if(Y.length>0){X=S[V].getType();this.filtersParam[T[X]]=Y.join(",")}}Q.load(this.filtersParam,W)};this.getFilterNames=function(){var W,X,V=[];for(W=0;W<S.length;W++){X=S[W].getFilterNames();if(X.length>0){V.push(X.join("、"))}}return V};this.getFilterHashurl=function(){var X={price:"pr",grade:"st",brand:"br",hoteltype:"ht",facility:"fc"};var ac={GB_LOW:"0-100",GB_MEDIUM:"100-150",GB_PRIOR:"150-200",GB_HIGH:"200-300",GB_HIGHER:"300-max"};var aa={1:0,2:1,3:2,4:3,5:5};var ab=[],Z=[],V=[],W=0,Y="";for(W=0;W<S.length;W++){Z=S[W].getFilters();V=S[W].getFilterNames();if(Z.length>0){Y=S[W].getType();if(Y==="brand"){ab.push(X[Y]+"="+encodeURIComponent(V.join(","))+"|"+Z.join(","))}else{if(Y==="price"){ab.push(X[Y]+"="+ac[Z.join(",")])}else{if(Y==="grade"){ab.push(X[Y]+"="+aa[Z.join(",")])}else{ab.push(X[Y]+"="+Z.join(","))}}}}}return ab.length>0?"&"+ab.join("&"):""}};var p=function(){var R=l+"/hotelSearchApi.jsp";var Q={};var T=function(){var V=0;for(var U in Q){if(Q.hasOwnProperty(U)){V++}}return V};var S={price:"pricelinks",grade:"dangcilinks",brand:"brandlinks",hoteltype:"hoteltypelinks",facility:"facilitylinks"};this.load=function(W,U){var V=this;V.onsuccess=function(X){F=true;if(X&&X.ret===true&&X.data){if(X.data.hotelCount<=0){v&&v.getFilterTip(j)}else{v&&v.render(X.data)}v&&v.setHotelsCountTip("共"+X.data.hotelCount+"条“"+o.trim(c.concat(j.getFilterNames()).join(" "))+"”相关团品");if(U){var Z=U.getListener();for(var Y=0;Y<Z.length;Y++){Z[Y].setData(o.extend({},Z[Y].getData(),{tplData:{value:X.data[S[Z[Y].getType()]]}}));Z[Y].update()}}else{w.setData(o.extend({},w.getData(),{tplData:{value:X.data[S[w.getType()]]}}));G.setData(o.extend({},G.getData(),{tplData:{value:X.data[S[G.getType()]]}}));u.setData(o.extend({},u.getData(),{tplData:{value:X.data[S[u.getType()]]}}));g.setData(o.extend({},g.getData(),{tplData:{value:X.data[S[g.getType()]]}}));K.setData(o.extend({},K.getData(),{tplData:{value:X.data[S[K.getType()]]}}));w&&w.render();G&&G.render();u&&u.render();g&&g.render();K&&K.render()}}};o.jsonp(R,o.extend({},{_t:new Date().getTime(),city:i.data.CITY_NAME,query:i.data.CARD_TYPE==8?i.data.ORIGINAL_QUERY:"",ipcity:i.data.IP_CITY,isgb:"Y",queryid:i.data.QUERYID},W||{}),"__jscallback",V.onsuccess)}};var w=new H(o.getElementByClassName(o.getClass("jspricepanel")),{type:"price",title:"价格范围：",tpl:\'<li><a href="#" onclick="return false;" data-count="9999" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>\'});var G=new z(o.getElementByClassName(o.getClass("jsdangcipanel")),{type:"grade",title:"酒店级别："});var u=new L(o.getElementByClassName(o.getClass("jsbrandpanel")),{type:"brand",title:"连锁品牌：",display:100000,moretitle:"所有品牌",haslayout:true,ishide:(i.data.CARD_TYPE==10)?true:false});var g=new f(o.getElementByClassName(o.getClass("jshoteltype")),{type:"hoteltype",title:"酒店类型：",display:100000,moretitle:"所有酒店类型",haslayout:true,ishide:(i.data.CARD_TYPE==10)?false:true});var K=new h(o.getElementByClassName(o.getClass("jsfacility")),{type:"facility",title:"入住要求：",display:100000,moretitle:"所有入住要求",haslayout:true,ishide:(i.data.CARD_TYPE==10)?false:true});var J=new p();var j=i._filterManager=new E({more:[w,G,u,g,K],load:J});w.setListener([G,u,g,K]);w.bindEvent([j]);G.setListener([u,g,K]);G.bindEvent([j]);u.setListener([G,g,K]);u.bindEvent([j]);g.setListener([G,u,K]);g.bindEvent([j]);K.setListener([G,u,g]);K.bindEvent([j]);n();v&&v.setHotelsCountTip("共"+i.data.HOTELSCOUNT+"条“"+o.trim(c.concat(j.getFilterNames()).join(" "))+"”相关团品");function n(){var Q=i.data.FILTERSELECTED||[];w&&w.setData(o.extend({},w.getData(),{tplData:{value:i.data.PRICELINKS}}));G&&G.setData(o.extend({},G.getData(),{tplData:{value:i.data.DANGCILINKS}}));u&&u.setData(o.extend({},u.getData(),{tplData:{value:i.data.BRANDLINKS}}));g&&g.setData(o.extend({},g.getData(),{tplData:{value:i.data.HOTELTYPELINKS}}));K&&K.setData(o.extend({},K.getData(),{tplData:{value:i.data.FACILITYLINKS}}));var U={},S={};for(var R=0;R<Q.length;R++){if(!U[Q[R].type]){U[Q[R].type]=[];S[Q[R].type]=[]}U[Q[R].type].push(Q[R].value.replace(/%26/g,"&")||"");S[Q[R].type].push(Q[R].name.replace(/%26/g,"&")||"")}for(var T in U){if(U.hasOwnProperty(T)){switch(T){case"price":if(U[T].length===1){w&&w.setFilters(U[T]);w&&w.setFilterNames(S[T]);w&&w.update()}w.ishide=false;w.show();break;case"grade":if(U[T].length===1){G&&G.setFilters(U[T]);G&&G.setFilterNames(S[T]);G&&G.update()}G.ishide=false;G.show();break;case"brand":if(U[T].length===1){u&&u.setFilters(U[T]);u&&u.setFilterNames(S[T]);u&&u.update()}u.ishide=false;u.show();break;case"hoteltype":if(U[T].length===1){g&&g.setFilters(U[T]);g&&g.setFilterNames(S[T]);g&&g.update()}g.ishide=false;g.show();break;case"facility":if(U[T].length===1){K&&K.setFilters(U[T]);K&&K.setFilterNames(S[T]);K&&K.update()}K.ishide=false;K.show();break}}}}i.dispose=function(){if(!F){if(P.onsuccess){P.onsuccess=null}if(P.onerror){P.onerror=null}if(v.onsuccess){v.onsuccess=null}}o.unbind(document,"click",D);o.unbind(window,"blur",r)}})});';   // js字串，不含<script标签
      private static $uiList = 'btn,input,img';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
