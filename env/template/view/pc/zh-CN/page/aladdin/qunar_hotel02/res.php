<?php 
  class CssJs_Util_qunar_hotel02
   {
      private static $cssStr = '';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("qunar_hotel02",function(){A.setup(function(){var e=this;var h="http://www.baidu.com/qunarui/hotel";var o=false;var f=(function(s){var q="op-"+s.data.TPL_NAME+"-";var r={};var t;return t={isIE6:function(){return/msie 6/i.test(navigator.userAgent)},isIE7:function(){return/msie 7/i.test(navigator.userAgent)},getClass:function(u){return(q+u)},getTags:function(v,u){if(!v){return[]}return v.getElementsByTagName(u)||[]},getElementByClassName:function(u,v){if(v){return $(v).find("."+u)[0]}else{return $("."+u)[0]}},getChildrens:function(u){return u&&u.childNodes||[]},hasClass:function(v,u){return $(v).hasClass(u)},addClass:function(v,u){$(v).addClass(u)},removeClass:function(v,u){$(v).removeClass(u)},getOffset:function(v){var u=v.parentNode;var w=$(u).offset();return w},on:function(v,u,w){$(v).bind(u,w)},unbind:function(v,u,w){$(v).unbind(u,w)},jsonToQuery:function(u){var w=[];var v=null;$.each(u,function(x,y){if(/[^\\x00-\\xFF]/.test(y)){v=encodeURIComponent(y)}else{v=y}w.push(x+"="+v)});return w.join("&")},ajax:function(v,x,w,u){u=u||function(){};$.ajax({type:"POST",url:v,data:f.jsonToQuery(x),success:function(y){w&&w(y)},error:function(y){u(y)}})},jsonp:function(v,y,w,x,u){u=u||function(){};$.ajax({type:"POST",url:v,dataType:"jsonp",jsonp:w||"__jscallback",data:f.jsonToQuery(y),success:function(z){try{x&&x(z)}catch(B){u();return}},error:function(z){u(z)}})},extend:function(u,x,w){var v=null;for(v in x){if(x.hasOwnProperty(v)){u[v]=x[v]}}for(v in w){if(w.hasOwnProperty(v)){u[v]=w[v]}}return u},trim:function(u){return u.replace(/(^\\s*)|(\\s*$)/g,"")},bind:function(u,v){if(!r[u]){r[u]=[]}r[u].push(v)},trigger:function(v){var x=arguments||[];var z=r[v]||[];if(z.length===0){return}var u=[];for(var y=1;y<x.length;y++){u.push(x[y])}for(var w=0;w<z.length;w++){z[w].apply(s,u)}},GetZoomFactor:function(){var v=1;if(document.body.getBoundingClientRect){var w=document.body.getBoundingClientRect();var x=w.right-w.left;var u=document.body.offsetWidth;v=Math.round((x/u)*100)/100}return v},format:function(v,w){var u=v;var x=null;$.each(w,function(y,z){x=new RegExp("#{"+y+"}","g");u=u.replace(x,z)});return u}}})(e);function l(q){q=q||{};if(!q.dom||!q.offsetdom){return}this.offsetdom=q.offsetdom;this.display=q.display||"none";this.dom=q.dom;this.url=q.url;this.success=q.success;this.error=q.error;this.cache={};this.params={};if(q.html){q.dom.innerHTML=q.html}if(this.display!=="none"){this.show()}}l.prototype.render=function(){var q=this.getQuerykey();if(this.cache[q]){this._callback(1,this.cache[q])}else{this._getData()}};l.prototype.show=function(){if(this.dom){var r=this.offsetdom.offsetHeight;var q=f.getOffset(this.offsetdom);this.top=q.top+r-1;this.left=q.left;if(f.isIE7()){var s=f.GetZoomFactor()||0.1;this.top=(q.top/s)+r-1;this.left=q.left/s}this.dom.style.top=this.top+"px";this.dom.style.left=this.left+"px";this.display="block"}};l.prototype.hide=function(){if(this.dom){this.dom.style.top="-9999px";this.dom.style.left="-9999px";this.display="none"}};l.prototype.setQueryParams=function(r){r=r||{};if(!r.queryName){return}var q={};q[r.queryName]=f.trim(r.queryKey);this.params=f.extend({},this.params,q)};l.prototype.getQueryParams=function(){return this.params||{}};l.prototype.clearCache=function(){if(this.getCacheSize()>20){this.cache={}}};l.prototype.getCacheSize=function(){var r=0;for(var q in this.cache){if(this.cache.hasOwnProperty(q)){r++}}return r};l.prototype._getData=function(){var q=this;q.onsuccess=function(r){o=true;if(!r){q._callback();return}q._callback(1,r);q.clearCache();q.cache[q.getQuerykey()]=r};q.onerror=function(r){o=true;q._callback(0,r)};f.jsonp(this.url,f.extend({},{_t:new Date().getTime()},this.params),"__jscallback",q.onsuccess,q.onerror)};l.prototype.getQuerykey=function(){var r="";for(var q in this.params){if(this.params.hasOwnProperty(q)){r=r+this.params[q]}}return r};l.prototype._callback=function(q,r){if(!this.dom){return}if(q===1){if(this.success){this.success(r)}}else{if(this.error){this.error(r)}}};var d=(function(t){var x={};var q={};var y=f.getElementByClassName(f.getClass("jsprice"));var G=y.parentNode;var B=f.getElementByClassName(f.getClass("jsdangci"));var H=B.parentNode;var D=f.getElementByClassName(f.getClass("jsbrand"));var C=D.parentNode;var E=f.getElementByClassName(f.getClass("jshotels"));var v=f.getClass("hide");var w="";var F=function(){};var r=function(){var J=0;for(var I in q){if(q.hasOwnProperty(I)){J++}}return J};x.onsuccess=function(I){o=true;if(r()>=20){q={}}q[w]=I;F(I)};x.onerror=function(I){o=true};var z=function(J,I){w=J;F=I;if(q[w]){F(q[w]);return}f.jsonp(h+"/basicCard.jsp",{cityName:w,queryid:t.data.QUERYID},"__jscallback",x.onsuccess,x.onerror)};var u=function(K,O,N,I,M){var J=[];if(!K||K&&K.length===0){f.addClass(N,v)}else{for(i=0;i<K.length;i++){var L=I+K[i].url+M+"&"+t.data.QHFP;name=K[i].name;J.push(\'<li class="c-gap-right"><a target="_blank" href="\',L,\'">\',name.replace(/%26/g,"&"),"</a></li>")}O.innerHTML=J.join("");f.removeClass(N,v)}};var s=function(O,L){var N=[];var K=["?ex_track=bd_zhixin_hotel_bsc_lowprice","?ex_track=bd_zhixin_hotel_bsc_highlevel","?ex_track=bd_zhixin_hotel_bsc_bestscore","?ex_track=bd_zhixin_hotel_bsc_highrank"];var M,I=t.data.TPL_NAME;var J=[\'<div class="c-span6 #{lastclass}"><div class="op-#{tplname}-hotel">\',\'<div class="op-#{tplname}-img">\',\'<a target="_blank" href="#{hotelurl}">\',\'<img class="c-img c-img6" src="#{imgurl}"/>\',\'<div class="op-#{tplname}-img-tag">#{tag}</div>\',"</a>","</div>",\'<p class="op-#{tplname}-hotel-intro"><a target="_blank" href="#{hotelurl}">#{intro}</a></p>\',\'<p class="op-#{tplname}-hotel-price">\',\'<span><a target="_blank" href="#{hotelurl}">#{count}家酒店</a></span>\',\'<em><a target="_blank" href="#{hotelurl}"><b>&yen;#{price}</b>起</a></em>\',"</p>","</div></div>"].join("");if(!O||O&&O.length<4){f.addClass(E,v)}else{for(M=0;M<O.length;M++){N.push(f.format(J,{lastclass:M===3?"c-span-last":"",tplname:I,hotelurl:L+O[M].url+K[M]+"&"+t.data.QHFP+(M===2?"#sort=score-desc":(M==0||M==1?"#sort=price-asc":"")),imgurl:O[M].img,name:O[M].name,tag:O[M].tag,intro:O[M].intro,count:O[M].count,price:O[M].price}))}E.innerHTML=N.join("");f.removeClass(E,v)}};return f.extend({},x,{render:function(J){var I=function(M){if(M.ret===true&&M.data){M=M.data;var L=M.url||"http://hotel.qunar.com/city/beijing_city/";var K=L.split("?")[0];if(K.lastIndexOf("/")<0){K=K+"/"}u(M.brandlinks,D,C,K,"?ex_track=bd_zhixin_hotel_bsc_hotbrand");u(M.pricelinks,y,G,K,"?ex_track=bd_zhixin_hotel_bsc_hotprice");u(M.dangcilinks,B,H,K,"?ex_track=bd_zhixin_hotel_bsc_hotlevel");s(M.hotellinks,K)}};z(J,I)}})})(e);var c=f.getElementByClassName(f.getClass("city-input"));var p=f.getElementByClassName(f.getClass("hotcity"));var j=f.getElementByClassName(f.getClass("keyword-input"));var n=f.getElementByClassName(f.getClass("hotkey"));var a=new l({dom:p,offsetdom:c});var m=new l({dom:n,offsetdom:j,url:h+"/sugg.jsp?v=1&queryid="+e.data.QUERYID,success:function(s){if(s&&s.data){m.dom.style.borderWidth="1px";m.dom.innerHTML=s.data.replace(/onmousedown="return searchword\\(.*\\)"/ig,"");var q=f.getElementByClassName("js_cityguide",n);if(q){var r=q.getAttribute("data-url")+"&ex_track=bd_zhixin_hotel_divcityguide&"+e.data.QHFP;q.setAttribute("data-url",r)}}},error:function(q){m.dom.innerHTML="";m.dom.style.borderWidth="0px"}});var g=function(q){a.hide();m.hide()};f.on(document,"click",g);var b=function(q){a.hide();m.hide()};f.on(window,"blur",b);f.on(c,"click",function(q){m.hide();e._sug&&e._sug.hide();if(a.display==="block"){a.hide()}else{a.show()}q.stopPropagation()});f.on(p,"click",function(s){s.stopPropagation();s.preventDefault();var r=s.target||s.srcElement;if(r.tagName.toUpperCase()==="A"){var q=r.getAttribute("data-city");if(c.value!=q){f.trigger("citychanged",q)}if(q){if(e._sug){e._sug.hide();e._sug.pick(\'<span class="js_cityname" data-cityname="\'+q+\'">\'+q+"</span>")}else{c.value=q}a.hide()}}});f.on(j,"click",function(q){if(m.display==="block"){m.hide()}else{m.setQueryParams({queryName:"city",queryKey:c.value});m.render();m.show();a.hide()}q.stopPropagation();q.preventDefault()});f.on(n,"click",function(s){s.stopPropagation();s.preventDefault();var r=s.target||s.srcElement;if(r.tagName.toUpperCase()==="A"){var q=f.trim(r.innerHTML);if(q){j.value=q;m.hide()}}});f.bind("citychanged",function(q){d&&d.render(q)});var k=f.getElementByClassName(f.getClass("jsquerybtn"));f.on(k,"click",function(s){var r=encodeURIComponent(c.value);var q=encodeURIComponent(j.value);k.href="http://hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_bsc_search&toCity="+r+"&q="+q+"&"+e.data.QHFP});e.dispose=function(){if(!o){if(m.onsuccess){m.onsuccess=null}if(m.onerror){m.onerror=null}if(d.onsuccess){d.onsuccess=null}if(d.onerror){d.onerror=null}}f.unbind(document,"click",g);f.unbind(window,"blur",b)}})});';   // js字串，不含<script标签
      private static $uiList = 'btn,input';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
