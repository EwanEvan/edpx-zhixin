<?php 
  class CssJs_Util_zx_mussong
   {
      private static $cssStr = '.op-zx-mussong-box{position:relative;overflow:hidden;}.op-zx-mussong-volume-p{position:relative;}.op-zx-mussong-volume{cursor:pointer;}.op-zx-mussong-volume-slider{position:absolute;bottom:18px;_bottom:22px;left:0;width:17px;height:54px;padding:5px 0;background:#f6f6f6;cursor:default;z-index:1;}.op-zx-mussong-volume-slider.op-zx-mussong-inactive{visibility:hidden;}.op-zx-mussong-volume-slider .tangram-slider{margin:0 auto;width:3px;height:100%;}.op-zx-mussong-volume-slider .tangram-slider-progressbar{width:100%;height:100%;background:#1cb7fd;}.op-zx-mussong-volume-slider .tangram-progressbar-bar{background:#d9d9d9;overflow:hidden;}.op-zx-mussong-volume-slider .tangram-slider-thumb{margin-left:-4px;width:9px;height:4px;border:1px solid #999;background:#fff;cursor:pointer;overflow:hidden;}.op-zx-mussong-photo{border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;overflow:hidden;}.op-zx-mussong-songname{display:inline-block;font-size:1.08em;font-weight:normal;}.op-zx-mussong-ctrl{border-spacing:0;border-collapse:collapse;}.op-zx-mussong-ctrl td{font-size:1em;line-height:1.54;white-space:nowrap;}.op-zx-mussong-ctrl .op-zx-mussong-td-normal{white-space:normal;}.op-zx-mussong-playback{position:relative;width:216px;height:4px;background-color:#e0e0e0;}.op-zx-mussong-playback div{height:100%;}.op-zx-mussong-playback-buffer{z-index:1;position:absolute;top:0;background-color:#b8b8b8;overflow:hidden;}.op-zx-mussong-playback .tangram-slider{z-index:2;}.op-zx-mussong-playback .tangram-slider-thumb{width:10px;height:10px;margin-top:-4px;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;-o-border-radius:50%;-ms-border-radius:50%;border:1px solid #999;background-color:#fff;overflow:hidden;cursor:pointer;width:8px\\9;}.op-zx-mussong-playback .tangram-slider-thumb:hover{background-color:#f5f5f5;}.op-zx-mussong-playback .tangram-slider-progressbar,.op-zx-mussong-playback .tangram-progressbar{overflow:hidden;}.op-zx-mussong-playback .tangram-progressbar-bar{background-color:#389cff;}.op-zx-mussong-lrc{position:relative;border-top:1px solid #ebebeb;overflow:hidden;}.op-zx-mussong-lrc-expand .op-zx-mussong-lrc-content{height:180px;}.op-zx-mussong-lrc-content{height:120px;overflow-y:hidden;}.op-zx-mussong-lrc-content .ui-lrc-sentence:first-child{font-weight:bold;}.op-zx-mussong-lrc-content .ui-lrc-current{color:#1370f2;}.op-zx-mussong-lrc-scrollbar{position:absolute;right:0;top:0;}.op-zx-mussong-lrc .opui-scroll-ctrl-scroll{height:100%;}.op-zx-mussong-from{float:right;}.op-zx-mussong-coinpic{position:relative;top:0;_top:2px;width:12px;height:12px;display:inline-block;background:url(http://www.baidu.com/aladdin/img/zx_mussong/earth.png) no-repeat;}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);}to{-webkit-transform:rotate(360deg);}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);}to{-moz-transform:rotate(360deg);}}@-ms-keyframes rotate{from{-ms-transform:rotate(0deg);}to{-ms-transform:rotate(360deg);}}@keyframes rotate{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}.op-zx-mussong-img-mask{position:absolute;top:0;left:0;width:100%;height:100%;background:url(http://www.baidu.com/aladdin/img/zxmusic/6nMask-2.png) no-repeat;_background-image:url(http://www.baidu.com/aladdin/img/zxmusic/6nMask-2.gif);background:rgba(0,0,0,0);border-radius:50%;border:1px solid rgba(204,204,204,0.2);box-sizing:border-box;}.op-zx-mussong-volume-slider-c{background:#f6f6f6;padding:5px 0;}.op-zx-mussong-volume-range,.op-zx-mussong-volume-bar,.op-zx-mussong-volume-proccess{cursor:default;}.op-zx-mussong-volume-range{position:relative;}.op-zx-mussong-img-ani{animation:rotate 10s linear infinite;-webkit-animation:rotate 10s linear infinite;-moz-animation:rotate 10s linear infinite;-ms-animation:rotate 10s linear infinite;}.op-zx-mussong-img-paused{animation-play-state:paused;-webkit-animation-play-state:paused;-moz-animation-play-state:paused;-ms-animation-play-state:paused;}.op-zx-mussong-font{font-size:.9em;}';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("zx_mussong",function(){A.setup(function(){var c=this;var s;var r;var D=c.data.songid;var k=document.location.href.match(/(^|&)zxmsap=([^&]*)(&|$)/);var I=k&&decodeURIComponent(k[2]||"");var x,B,i,o,M,z,q,J,v,t,N,u=0,b=false,K=false,n="op-zx-mussong-img-ani",h="op-zx-mussong-img-paused";var d=c.find(".op-zx-mussong"),C=c.find(".op-zx-mussong-play"),j=c.find(".op-zx-mussong-pause"),F=c.find(".op-zx-mussong-playback").eq(0),e=c.find(".op-zx-mussong-playback-buffer").eq(0),p=c.find(".op-zx-mussong-time").eq(0),g=c.find(".op-zx-mussong-img-p").eq(0),E=c.find(".op-zx-mussong-photo").get(0),w=c.find(".op-zx-mussong-volume").eq(0),L=c.find(".op-zx-mussong-volume-slider").eq(0),l=c.find(".op-zx-mussong-volume-range").get(0),G=c.find(".op-zx-mussong-volume-bar").get(0),H=c.find(".op-zx-mussong-volume-proccess").get(0),P=c.find(".op-zx-mussong-volume-thumb").get(0),y=c.find(".op-zx-mussong-lrc").eq(0),O=c.find(".op-zx-mussong-lrc-content").eq(0);A.use("slider",function(){i=new A.ui.slider({disabled:true});i.render(F.get(0));J=F.find(".tangram-slider-thumb").eq(0)});function m(R,T,Q,U){R.addClass(T).removeClass(Q);b=false;if(/MSIE/g.test(window.navigator.userAgent)){var V=window.navigator.userAgent.match(/MSIE\\s*(\\d+)/);if(V&&V[1]&&parseInt(V[1])>9){return false}var S=function(Y){if(b){return false}Y+=1;u=Y;var aa=Y*2*Math.PI/360,X=-c.data.imgW/2*Math.cos(aa)+c.data.imgH/2*Math.sin(aa)+c.data.imgW/2,W=-c.data.imgW/2*Math.sin(aa)-c.data.imgH/2*Math.cos(aa)+c.data.imgH/2,ab=Math.cos(aa),Z=-Math.sin(aa),ad=Math.sin(aa),ac=Math.cos(aa);U.style.filter=["progid:DXImageTransform.Microsoft.Matrix(Dx=",X,", Dy=",W,", M11=",ab,", M12=",Z,", M21=",ad,", M22=",ac,");"].join("");N=setTimeout(function(){S(u)},30)};S(u)}}function f(R,Q,S){R.addClass(Q);if(N){b=true;clearTimeout(N)}}function a(T,S){var U="",R=(T<0),Q=String(Math.abs(T));if(Q.length<S){U=(new Array(S-Q.length+1)).join("0")}return(R?"-":"")+U+Q}A.use("musicplayer",function(){A.use("scrollbarv",function(){function R(T){var U,S;T=Math.round(T/1000);U=Math.floor(T/60);S=T%60;return a(U,2)+":"+a(S,2)}x=new A.ui.musicplayer(D,{forcePlay:(I?true:false),lrcElem:O.get(0),onPlayStateChange:function(S){if(S==="pre-buffer"||S==="buffering"||S==="play"){C.each(function(U,T){$(T).hide();j.eq(U).show();m(g,n,h,E)})}else{C.each(function(U,T){$(T).show();j.eq(U).hide();f(g,h,E)})}},onPositionChange:function(T,S){if(!o){i.update({value:S})}if(p.html()=="00:00"){p.html(R(x.getTotalTime()))}},onProgressChange:function(S){if(!M){e.width(S+"%")}if(S==100){M=1}},onChangeCurSong:function(S){if(!x){return false}p.html(R(x.getTotalTime()));bds.event&&bds.event.on("zhixin.zx_mussong_mbox_pause",function(){x.pause()})},onChangeLyric:function(){if(!z){B=A.ui.scrollbarv({content:O.get(0)});B.render();z=1}if(I){i.enable();Q()}},onInitFail:function(S){C.click(function(T){if(S.engineType=="fmp_mp3"){alert("需要安装flash插件")}})}});function Q(){if(!O.hasClass("no-lrc")&&O.children().get(0).offsetHeight>O.get(0).offsetHeight){y.addClass("op-zx-mussong-lrc-expand");B&&B.render()}}C.each(function(T,S){var U=$(S),V=j.eq(T);U.click(function(W){x.pause();x.play();if(!q){i.enable();Q();q=1}});V.click(function(W){x.pause()})});F.mousedown(function(S){o=1});s=function(T){if(o==1){o=0;var S=i.getValue();x.setPercent(+S)}};$(document).on("mouseup",s);A.use("slider",function(){var S=50;t=new A.ui.slider({layout:"vertical",value:S});t.render(L.get(0));x.setVolume(S);r=function(T){L.addClass("op-zx-mussong-inactive")};$(document).on("click",r);L.click(function(T){T.stopPropagation(T)});w.click(function(T){T.stopPropagation(T);L.toggleClass("op-zx-mussong-inactive")});L.mousemove(function(U){var T=100-t.getValue();x.setVolume(+T)})});O.on("mousewheel",function(S){x.blockLrcScroll(false)})})});this.dispose=function(){clearTimeout(N);$(document).unbind("mouseup",s);$(document).unbind("click",r);x&&x.dispose&&x.dispose();B&&B.dispose&&B.dispose()}})});';   // js字串，不含<script标签
      private static $uiList = 'btn';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
