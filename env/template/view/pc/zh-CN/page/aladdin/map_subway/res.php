<?php 
  class CssJs_Util_map_subway
   {
      private static $cssStr = '.op-map-subway-info{border-collapse:collapse;border-spacing:0;color:#fff;width:100%;}.op-map-subway-info td{height:74px;padding:12px;background-color:#389cff;vertical-align:top;font-family:"Microsoft YaHei",微软雅黑;}.op-map-subway-info td.op-map-subway-info-right{*padding-top:16px;}.op-map-subway-info td.op-map-subway-info-left{padding-right:0;vertical-align:middle;}.op-map-subway-info-left{width:86px;text-align:center;}.op-map-subway-info-right-container{position:relative;zoom:1;}.op-map-subway-info-num{height:48px;line-height:48px;padding-bottom:4px;margin:0 auto;font-family:arial;}.op-map-subway-info-tag{width:68px;height:22px;line-height:20px;font-size:16px;margin:0 auto;}.op-map-subway-info-tag-blue{background-color:#2d90f2;}.op-map-subway-info-tag-yellow{background-color:#ffb522;}.op-map-subway-info-start-end{height:30px;font-size:18px;display:inline-block;padding-top:4px;border-collapse:collapse;border-spacing:0;}.op-map-subway-info-start-end td{height:auto;padding:0;line-height:auto;}.op-map-subway-info-start-end td.op-map-subway-info-start{text-align:right;padding-right:8px;}.op-map-subway-info-start-end td.op-map-subway-info-end{text-align:left;padding-left:8px;}.op-map-subway-info-start-end td.op-map-subway-info-direction,.op-map-subway-info-switcher,.op-map-subway-stop-tail,.op-map-subway-line-stop-icon-text div,.op-map-subway-station-prev div,.op-map-subway-station-next div{background:url(http://www.baidu.com/aladdin/img/map_subway/map_bus.png) no-repeat;_background:url(http://www.baidu.com/aladdin/img/map_subway/map_bus.gif) no-repeat;}.op-map-subway-info-start-end td.op-map-subway-info-direction{width:54px;display:inline-block;height:20px;background-position:0 5px;}.op-map-subway-info-start-end td.op-map-subway-info-cross-direction-left{background-position:0 -18px;height:42px;width:62px;}.op-map-subway-info-start-end td.op-map-subway-info-cross-direction-right{background-position:0 -56px;height:42px;width:62px;}.op-map-subway-info-info span{display:inline-block;float:left;line-height:20px;}.op-map-subway-info-starttime,.op-map-subway-info-endtime{width:108px;}.op-map-subway-info-switcher-border{position:absolute;background:#fff;top:6px;background-position:-83px 4px;right:-1px;width:58px;height:20px;filter:alpha(opacity=60);opacity:.8;}.op-map-subway-info-switcher{position:absolute;z-index:1;top:7px;right:0;width:32px;height:18px;background-position:-83px 4px;background-color:#389cff;padding-left:24px;cursor:pointer;}.op-map-subway-info-switcher-border-hover{filter:alpha(opacity=100);opacity:1;}.op-map-subway-info-link{position:absolute;bottom:1px;right:0;color:#fff;}.op-map-subway-station-container{position:relative;border:2px solid #389cff;background-color:#fff;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;}.op-map-subway-stop{float:left;width:26px;height:108px;text-align:center;font-family:"Microsoft YaHei",微软雅黑;line-height:14px;_line-height:15px;cursor:pointer;word-break:normal;}.op-map-subway-stop a{color:#333;width:20px;height:116px;padding:8px 3px;_padding:6px 1px;text-decoration:none;display:block;}.op-map-subway-stop-tail{display:block;background-position:-62px 2px;width:10px;height:12px;}.op-map-subway-stop a.op-map-subway-stop-hover{padding:7px 2px;_padding:5px 0;border:1px solid #389cff;}.op-map-subway-stop-num{display:inline-block;width:20px;font-family:arial;padding-bottom:6px;cursor:pointer;}.op-map-subway-stop-text{display:inline-block;width:18px;text-align:left;margin-left:3px;cursor:pointer;}.op-map-subway-showmore,.op-map-subway-showless{border-top:1px solid #ebebeb;cursor:pointer;padding-top:2px;margin-top:12px;}.op-map-subway-showmore i,.op-map-subway-showless i{cursor:pointer;_vertical-align:top;}.op-map-subway-showmore-inner,.op-map-subway-showless-inner{text-align:center;color:#00c;position:relative;top:3px;_top:4px;}.op-map-subway-content{position:relative;width:538px;-webkit-perspective:1000px;-moz-perspective:1000px;-o-perspective:1000px;}.op-map-subway-content-inner{-webkit-transform-style:preserve-3d;-webkit-transition:all .7s linear;-moz-transform-style:preserve-3d;-moz-transition:all .7s linear;-o-transform-style:preserve-3d;-o-transition:all .7s linear;}.op-map-subway-z-index400{z-index:400;}.op-map-subway-flip-board{position:absolute;*position:static;width:100%;top:0;left:0;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-o-backface-visibility:hidden;}.op-map-subway-content-inner-transform{-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg);-o-transform:rotateY(180deg);}.op-map-subway-content-back{-webkit-transform:rotateY(180deg);-moz-transform:rotateY(180deg);-o-transform:rotateY(180deg);}.op-map-subway-station-layout{border-spacing:0;border-collapse:collapse;width:100%;table-layout:fixed;}.op-map-subway-station-layout td{padding:0;}.op-map-subway-station-layout td.op-map-subway-station-prev,.op-map-subway-station-layout td.op-map-subway-station-next{width:26px;border-top:1px solid #fff;border-bottom:1px solid #fff;cursor:pointer;}.op-map-subway-station{position:relative;width:478px;overflow:hidden;width:476px;margin-left:3px;}.op-map-subway-station-inner{position:absolute;top:0;left:0;top:10px;}.op-map-subway-station-layout td.op-map-subway-station-toucher-hover{background-color:#f5f5f5;}.op-map-subway-station{visibility:hidden;}.op-map-subway-station-toucher{vertical-align:top;}.op-map-subway-station-prev div,.op-map-subway-station-next div{width:10px;height:24px;cursor:pointer;}.op-map-subway-station-prev div{background-position:-18px -100px;margin-left:6px;}.op-map-subway-station-next div{background-position:0 -100px;margin-left:10px;}.op-map-subway-station-layout td.op-map-subway-station-prev-disable,.op-map-subway-station-layout td.op-map-subway-station-next-disable{cursor:default;}.op-map-subway-station-prev-disable div{background-position:-18px -134px;cursor:default;}.op-map-subway-station-next-disable div{background-position:0 -134px;cursor:default;}.op-map-subway-icon{width:12px;height:12px;display:inline-block;background:url(http://www.baidu.com/aladdin/img/map_subway/map_icons.png) no-repeat;_background:url(http://www.baidu.com/aladdin/img/map_subway/map_icons.gif) no-repeat;}.op-map-subway-icon-flight{background-position:0 0;margin-left:1px;}.op-map-subway-station{padding:10px 0;}.op-map-subway-line{height:128px;position:relative;}.op-map-subway-line-stop{position:relative;width:26px;height:128px;float:left;_display:inline;}.op-map-subway-line-stop-info{width:26px;height:108px;position:relative;left:-3px;}.op-map-subway-line-stop-info a{position:relative;display:block;width:26px;height:108px;color:#333;text-decoration:none;outline:none;}.op-map-subway-line-stop-info-text{position:absolute;display:block;bottom:6px;left:4px;width:18px;line-height:14px;text-align:center;cursor:pointer;font-family:"Microsoft YaHei",微软雅黑;}.op-map-subway-line-stop-info a:hover{border:1px solid #389cff;width:24px;height:106px;}.op-map-subway-line-stop-info a:hover .op-map-subway-line-stop-info-text{bottom:5px;left:3px;}.op-map-subway-line1 .op-map-subway-line-stop-info .op-map-subway-line-stop-info-text{bottom:auto;top:6px;}.op-map-subway-line1 .op-map-subway-line-stop-info a:hover .op-map-subway-line-stop-info-text{bottom:auto;top:5px;}.op-map-subway-line-stop-transfer-info{width:18px;height:56px;position:absolute;bottom:144px;line-height:14px;margin-left:1px;text-align:center;font-family:"Microsoft YaHei",微软雅黑;}.op-map-subway-line-stop-transfer-info-text{position:absolute;left:0;bottom:0;width:18px;color:#333;z-index:20;}.op-map-subway-line-stop-transfer-info .op-map-subway-line-stop-transfer-info-name-prefix{white-space:nowrap;position:relative;width:38px;overflow:hidden;display:inline-block;text-overflow:ellipsis;text-align:left;}.op-map-subway-line-stop-container{position:relative;z-index:1;}.op-map-subway-line-stop-icon{position:relative;width:20px;height:20px;text-align:center;line-height:20px;font-family:arial;}.op-map-subway-line-stop-icon-canvas-container{position:absolute;top:0;left:0;width:20px;height:20px;cursor:pointer;}.op-map-subway-line-stop-icon-text{position:absolute;top:0;left:1px;*top:0;*left:0;width:20px;height:20px;font-family:arial;font-size:12px;*font-size:11px;color:#666;-webkit-transform:scale(0.917);-webkit-transform-origin:0;-moz-transform:scale(0.917);-moz-transform-origin:left center;-ms-transform:scale(0.917);-ms-transform-origin:0;}.op-map-subway-line-stop-icon-text div{width:20px;height:20px;background-position:-66px -21px;cursor:pointer;}.op-map-subway-line-stop-transfer-line-box{position:absolute;top:-10px;width:20px;height:18px;}.op-map-subway-line-stop-transfer-line-box-inner{margin:0 auto;}.op-map-subway-line-stop-transfer-line{width:6px;height:18px;float:left;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;}.op-map-subway-line2 .op-map-subway-line-stop-transfer-line-box{top:auto;bottom:-10px;}.op-map-subway-line-line{position:absolute;width:100px;height:6px;overflow:hidden;}.op-map-subway-line-slash-canvas-container{position:absolute;width:34px;}.op-map-subway-line-middle-seperator{position:relative;}.op-map-subway-tip{position:absolute;z-index:999;top:-2000px;left:-2000px;display:none;background:#fff;padding:10px;border:1px solid #ccc;-webkit-box-shadow:2px 2px 2px rgba(0,0,0,0.1);-moz-box-shadow:2px 2px 2px rgba(0,0,0,0.1);-o-box-shadow:2px 2px 2px rgba(0,0,0,0.1);box-shadow:2px 2px 2px rgba(0,0,0,0.1);}.op-map-subway-tip-title{font-size:14px;font-weight:bold;}.op-map-subway-tip-stop-name{border-bottom:1px solid;}.op-map-subway-tip-stop-name div{display:inline-block;height:20px;line-height:20px;color:#fff;font-size:13px;padding:0 4px;*display:inline;*zoom:1;}.op-map-subway-tip-stop-line{border-spacing:0;padding:0;}.op-map-subway-tip-stop-line td{font-size:12px;border-collapse:collapse;line-height:16px;*line-height:12px;}.op-map-subway-tip-stop-line td.op-map-subway-tip-td-left{padding-right:20px;}.op-map-subway-tip-stop-line td.op-map-subway-tip-td-right{width:110px;}.op-map-subway-tip-stop-line td.op-map-subway-tip-td-right div{display:inline-block;*display:inline;*zoom:1;}.op-map-subway-icon-start,.op-map-subway-icon-end{width:13px;height:13px;font-size:12px;line-height:13px;*line-height:14px;text-align:center;color:#fff;background-color:#6cf;margin-right:4px;*position:relative;*top:-2px;}.op-map-subway-start-time{width:40px;}.op-map-subway-arrow{width:0;height:0;font-size:0;line-height:0;display:block;position:absolute;bottom:0;left:30px;}.op-map-subway-arrow em,.op-map-subway-arrow ins{width:0;height:0;font-size:0;line-height:0;display:block;position:absolute;border:8px solid #000;border-style:solid dashed dashed dashed;}.op-map-subway-arrow em{border-color:#d8d8d8 transparent transparent transparent;}.op-map-subway-arrow ins{border-color:#fff transparent transparent transparent;top:-2px;}';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("map_subway",function(){A.setup(function(){var g=!!(document.createElement("canvas").getContext);var k=null,j=null,e=null,b=false;var f=this;var a=f.find(".op-map-subway-content")[0];var h=!!(window.attachEvent&&navigator.userAgent.indexOf("Opera")===-1);function c(t,m,p){var o=[],r=t.split("");p=p||"…";for(var q=0,n=r.length;q<n;q++){if(r[q].charCodeAt(0)>255){o.push("*")}o.push(r[q])}if(m&&m>0&&o.length>m){r=o.join("").substring(0,m-1).replace(/\\*/g,"")+p}else{return t}return r}var l=$(a);var d=$(document.body);var i=l.attr("data-citycode");$flips=l.find(".op-map-subway-flip-board");$flips.each(function(G,C){var K=$(C);var p=K.attr("data-line-color");var o=K.find(".op-map-subway-line-stop-transfer-line-box");o.each(function(Q,O){var V=$(O);var P=V.find(".op-map-subway-line-stop-transfer-line");var U=V.prev(".op-map-subway-line-stop-transfer-info");var S="";var N="";var T="";if(P.length==1){N=P.eq(0).attr("data-name").replace(/(\\u5730\\u94c1|\\u8f68\\u9053\\u4ea4\\u901a)/,"");S=c(N,6)}else{if(P.length>1){var R=[];var n=false;P.each(function(W,Z){var Y=$(Z);T+=(W==0?"":"\\n")+Y.attr("data-name");var X=Y.attr("data-name").replace(/\\u5730\\u94c1/,"");if(X.indexOf("\\u53f7")){n=true}X=X.replace(/(\\u53f7)?\\u7ebf/g,"");X=X.replace(/4\\u53f7\\u7ebf\\u5927\\u5174\\u7ebf/,"4");R.push(X)});S=R.join("/").replace(/\\/$/,"");S=\'<span class="op-map-subway-line-stop-transfer-info-name-prefix">\'+S+"</span>"+(n?"号":"")+"线"}}if(S.indexOf("…")>-1){U.attr("title",N)}if(T){U.attr("title",T)}U.find(".op-map-subway-line-stop-transfer-info-text").html(S)});if(G===0){}var M=K.find(".op-map-subway-station");var q=M.width();var D=K.find(".op-map-subway-station-inner");var F=D.width();var x=D.get(0);var m=K.find(".op-map-subway-station-toucher");m.hover(function(){var n=$(this);if(!/disable/.test(n.get(0).className)){n.addClass("op-map-subway-station-toucher-hover")}},function(){$(this).removeClass("op-map-subway-station-toucher-hover")});function I(n){return(n=="-1"?F-Math.abs(parseInt(x.style.left,10))-q:Math.abs(parseInt(x.style.left,10)))}function u(N,n){return(N=="-1"?"-=":"+=")+(n>=q?q:n)}function z(n){return"op-map-subway-station-"+(n=="-1"?"prev":"next")+"-disable"}function J(n){return"op-map-subway-station-"+(n=="-1"?"next":"prev")+"-disable"}m.click(function(){var P=$(this);if(/disable/.test(this.className)){return}if(P.data("animating")){return}var O=P.attr("data-direction");var N=m.eq(O=="-1"?0:1);var n=I(O);if(n>0){P.data("animating",true);D.animate({left:u(O,n)},600,function(){if(I(O)==0){P.addClass(J(O));P.removeClass("op-map-subway-station-toucher-hover")}N.removeClass(z(O));P.removeData("animating")})}});var y=K.find(".op-map-subway-line-stop-icon");var H=K.find(".op-map-subway-line-slash-canvas-container");function s(N){var n=N.getContext("2d");n.fillStyle=p;n.beginPath();n.arc(10,10,10,0,Math.PI*2,true);n.closePath();n.fill();n.fillStyle="#fff";n.beginPath();n.arc(10,10,9,0,Math.PI*2,true);n.closePath();n.fill()}function E(N,O){var n=N.getContext("2d");n.strokeStyle=p;n.lineWidth=6;n.beginPath();if(O=="right"){n.moveTo(0,N.height);n.lineTo(34,0)}else{n.moveTo(0,0);n.lineTo(34,N.height)}n.closePath();n.stroke()}var r="http://map.baidu.com/?qt=inf&newmap=1&it=3&ie=utf-8&f=[1,12,13]&m=sbw";var B=null;function t(O,n){var N=O.data("tip");if(N&&N.length===1){if(n){if(e){clearTimeout(e);e=null;N.hide()}}else{e=setTimeout(function(){N.hide();clearTimeout(e);e=null},200)}}}function w(n){n.mouseenter(function(T){n.data("status","in");if(B){if(B.get(0)===n.get(0)){if(e){clearTimeout(e);e=null;return}}else{t(B,true)}}B=n;var Q=n.data("tip");if(Q&&Q.length===1){if(n.data("status")==="in"){var R=Q.outerHeight();var P=n.offset();var U=P.top-R-10;var O=P.left-30;Q.css({top:U,left:O}).show()}return}var V=n.attr("data-stop"),S=n.attr("data-uid"),N=r+"&uid="+encodeURIComponent(S)+"&c="+i+"&ccode="+i+"&t="+(+new Date());$.ajax({url:N+"&cb=subway",dataType:"jsonp",success:function(af){if(b){return}if(af&&af.content&&af.content.ext&&af.content.ext.line_info&&af.content.ext.line_info.length){var aa=af.content.ext.line_info;var ak="";var X={};for(var ag=0,al;al=aa[ag];ag++){var aj=encodeURIComponent(al.abb);if(!X[aj]){X[aj]=[]}X[aj].push(al)}Q=$(\'<div class="op-map-subway-tip"></div>\');var ac=\'<div class="op-map-subway-tip-title">\'+V+"</div>";ak="";ac+=\'<table class="op-map-subway-tip-stop-line">\';for(var Z in X){if(X.hasOwnProperty(Z)){var Y=X[Z];if(Y.length>2){Y=Y.slice(0,2)}for(var ag=0,al;al=Y[ag];ag++){var ad=al.clr.replace(/^0x/,"#");var W=0;if(ag===0){ac+=\'<tr><td colspan="2"><div class="op-map-subway-tip-stop-name" style="border-color:\'+ad+\';margin-top:4px;"><div style="background-color:\'+ad+\'">\'+(al.line_name||"")+"</div></div></td></tr>"}ac+=\'<tr><td class="op-map-subway-tip-td-left">\'+(al.terminals||"")+\'方向</td><td class="op-map-subway-tip-td-right"><div class="op-map-subway-icon-start">始</div><div class="op-map-subway-start-time">\'+(al.first_time||"-- --")+\'</div><div class="op-map-subway-icon-end">末</div><div>\'+(al.last_time||"-- --")+"</div></td></tr>"}}}ac+="</table>";ac+=\'<div class="op-map-subway-arrow"><em></em><ins></ins></div>\';Q.html(ac).appendTo(d);n.data("tip",Q);if(n.data("status")==="in"){var ah=Q.outerHeight();var ae=n.offset();var ai=ae.top-ah-10;var ab=ae.left-30;Q.css({top:ai,left:ab}).show()}Q.mouseleave(function(am){if(n&&n.length===1&&n.get(0)!==am.relatedTarget&&!$.contains(n.get(0),am.relatedTarget)){t(n)}})}},timeout:5000,jsonpCallback:"subway"})}).mouseleave(function(N){n.data("status","out");var O=n.data("tip");if(O&&O.length===1&&O.get(0)!==N.relatedTarget&&!$.contains(O.get(0),N.relatedTarget)){t(n)}})}if(!g){A.use("canvas",function(){y.each(function(O,R){var P=$(R);var N=document.createElement("canvas");N.width=20;N.height=20;P.find(".op-map-subway-line-stop-icon-canvas-container").append(N);A.ui.canvas.init(N);s(N);var Q=P.attr("data-transfer");if(Q){w(P.find(".op-map-subway-line-stop-icon-text>div"))}});H.each(function(N,R){var O=$(R);var P=document.createElement("canvas");P.width=34;P.height=10+10+f.data.middleSeperatorHeight;O.append(P);A.ui.canvas.init(P);var Q=O.attr("data-direction");E(P,Q)});M.css("visibility","visible")})}else{y.each(function(O,R){var P=$(R);var N=document.createElement("canvas");N.width=20;N.height=20;P.find(".op-map-subway-line-stop-icon-canvas-container").append(N);s(N);var Q=P.attr("data-transfer");if(Q){w(P.find(".op-map-subway-line-stop-icon-text>div"))}});H.each(function(N,R){var O=$(R);var P=document.createElement("canvas");P.width=34;P.height=10+10+f.data.middleSeperatorHeight;O.append(P);var Q=O.attr("data-direction");E(P,Q)});M.css("visibility","visible")}var L=K.find(".op-map-subway-info-switcher-border");var v=K.find(".op-map-subway-info-switcher");v.hover(function(){L.toggleClass("op-map-subway-info-switcher-border-hover")}).click(function(){if(h){$flips.each(function(n,O){var N=$(this);if(N.get(0)===K.get(0)){N.hide()}else{N.show()}})}else{K.parent().toggleClass("op-map-subway-content-inner-transform");k=setTimeout(function(){$flips.each(function(N,P){var O=$(this);var n=O.css("z-index");var Q=O.attr("data-zindex-toggle");O.css("z-index",Q).attr("data-zindex-toggle",n)});clearTimeout(k)},700)}l.addClass("op-map-subway-z-index400");j=setTimeout(function(){l.removeClass("op-map-subway-z-index400")},700)})});this.dispose=function(){clearTimeout(k);clearTimeout(j);clearTimeout(e);b=true}})});';   // js字串，不含<script标签
      private static $uiList = '';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
