{%extends 'c_right_base.tpl'%} {%block name='content'%}<style>.opr_right_weather_list{text-align:center;width:100%}.opr_right_weather_list a{text-decoration:none;color:#551a8b}.opr_right_weather_list td{padding:0 3px;border-right:1px solid #f5f5f5}.opr_right_weather_list p.opr_right_weather_kv_img{padding:14px 0}.opr_right_weather_list td.opr_right_weather_kv_verticalline{border:0}</style>{%if !$tplData.resourceid && !$tplData.query%}<div class="c-row"> <h3 class="cr-title c-gap-bottom-small">{%$tplData.title%}</h3> <table cellspacing="0" cellpadding="0" class="opr_right_weather_list"> <tr class="opr_right_weather_list_tr"> {%foreach $tplData.weather as $item%} {%if $item@index > 2%}{%break%}{%/if%} <td class="{%if $item@index == $tplData.weather|count-1%}opr_right_weather_kv_verticalline{%/if%}"> <a href="{%$item.linkurl%}" target="_blank"> {%if $item.day%}<p class="opr_right_weather_kv_day">{%$item.day%}</p>{%/if%} {%if $item.img%}<p class="opr_right_weather_kv_img"><img src="{%$item.img%}" /></p>{%/if%} {%if $item.temperature%}<p class="opr_right_weather_kv_temperature">{%$item.temperature%}</p>{%/if%} {%if $item.condition%}<p class="opr_right_weather_kv_condition">{%$item.condition%}</p>{%/if%} {%if $item.wind%}<p class="opr_right_weather_kv_wind">{%$item.wind%}</p>{%/if%} </a> </td> {%/foreach%} </tr> </table></div>{%/if%}<div class="c-row"> <h3 class="cr-title c-gap-bottom-small opr_right_weather_title"></h3> <table cellspacing="0" cellpadding="0" class="opr_right_weather_list"> <tr class="opr_right_weather_list_tr"></tr> </table></div><script >
    A.setup({
        query:'{%$tplData.query%}',
        srcid:parseInt('{%$tplData.resourceid%}')
    });
</script><script>A.setup(function(){var _this = this;var title=_this.find('.opr_right_weather_title')[0];var list=_this.find('.opr_right_weather_list_tr')[0];var num=0;_this.ajax(_this.data.query, _this.data.srcid, {success: function(data){var data=data[0];title.innerHTML=data.OriginQuery;function listInner(url, time, pic, temp, weather, wind){var oTd = document.createElement('td');oTd.innerHTML = '<a href="'+url+'" target="_blank">'+'<p class="opr_right_weather_kv_day">'+time+'</p>'+'<p class="{%*i*%}opr_right_weather_kv_img"><img src="'+pic.replace(/new_weath\/(big)?icon/i,'new_weath\/smallicon')+'" /></p>'+'<p class="opr_right_weather_kv_temperature">'+temp+'</p>'+'<p class="opr_right_weather_kv_condition">'+weather+'</p>'+'<p class="opr_right_weather_kv_wind">'+wind+'</p></a>';num++;if(num==3){oTd.className='opr_right_weather_kv_verticalline';}return oTd; };list.appendChild(listInner(data.url, data.time0.substring(0,2), data.pic01, data.temp0, data.weather0, data.wind0));list.appendChild({%*i*%}listInner(data.url, data.time1, data.pic11, data.temp1, data.weather1, data.wind1));list.appendChild(listInner(data.url, data.time2, data.pic21, data.temp2, data.weather2, data.wind2));},error: function(){},timeout:function(){}}); });</script>{%/block%}