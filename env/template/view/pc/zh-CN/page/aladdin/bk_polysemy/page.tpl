{%extends 'c_base.tpl'%} {%block name='data_modifier'%} {%$extData.feData.hasTitleGap = false%}{%if $tplData.result[0].field && !$tplData.result[0].field[0]%} {%$tplData.result[0].field=array($tplData.result[0].field)%}{%/if%} {%if $tplData.result[0].focus && !$tplData.result[0].focus[0]%} {%$tplData.result[0].focus=array($tplData.result[0].focus)%}{%/if%} {%if !$tplData.result[0].focustip%} {%$tplData.result[0].focustip='关注点'%}{%/if%}{%$tplData.otherinfo=json_decode($tplData.otherinfo, true)%}{%if $tplData.otherinfo.rel_rn<=1%} {%$tplData.otherinfo.main_req=1%}{%/if%}{%$tplData.showurl=$tplData.result[0].showurl%}{%$tplData.date=$tplData.result[0].date%}{%*name_info中name跟命中词不匹配，去callback_info中查找匹配*%}{%foreach $tplData.result as $rsitem%} {%if $rsitem.callback_info && !$rsitem.callback_info[0]%} {%$rsitem.callback_info=array($rsitem.callback_info)%} {%/if%} {%if $rsitem.name_info['@attr'].name!=$tplData.otherinfo.recall_key%} {%if $rsitem.callback_info%} {%if  !is_array($rsitem.callback_info)%} {%$rsitem.callback_info=array($rsitem.callback_info)%} {%/if%} {%foreach $rsitem.callback_info as $item%} {%if $item['@attr'].name==$tplData.otherinfo.recall_key%} {%$tplData.result[$rsitem@index].name_info=$item %} {%/if%} {%/foreach%} {%/if%} {%/if%}{%/foreach%}{%*判断右侧有多少行信息,根据行数进行截断,达到左右对齐目标*%}{%$tplData.rightFieldRowCount=intval(!!$tplData.result[0].focus)+intval(!!$tplData.result[0].field[0]['@attr'])+intval($tplData.result[0].field[1]['@attr']||$tplData.result[0].field[2]['@attr'])+intval(!!$tplData.result[0].link)+intval(!!$tplData.result[0].blog)+intval(!!($tplData.otherinfo.rel_rn>1 && $tplData.result[0].name_info['@attr'].totalurl))+intval(!!$tplData.result[0].showurl)%}{%*
	参数说明
	isSquare	true为方图, false为非方图
	lemmatype	1为展现 查看xxx更多释义的链接
	horizontal	true是水平图
	noStructure	true 无field1-3信息, false 只有field4的摘要信息
*%}{%*方形图*%}{%if $tplData.result[0].tip['@attr']['isSquare']=="true"%} {%if isset($tplData.result[0].newpic2)&&trim($tplData.result[0].newpic2)%}{%$tplData.realpicsrc=$tplData.result[0].newpic2%}{%/if%} {%$escaped_leaveRightFieldRowCount=6-$tplData.rightFieldRowCount%}{%*横图*%}{%else if $tplData.result[0].tip['@attr']['horizontal']=="true"%} {%if isset($tplData.result[0].newpic1)&&trim($tplData.result[0].newpic1)%}{%$tplData.realpicsrc=$tplData.result[0].newpic1%}{%/if%} {%$escaped_leaveRightFieldRowCount=5-$tplData.rightFieldRowCount%}{%*竖图*%}{%else%} {%if isset($tplData.result[0].newpic3)&&trim($tplData.result[0].newpic3)%}{%$tplData.realpicsrc=$tplData.result[0].newpic3%}{%/if%} {%$escaped_leaveRightFieldRowCount=7-$tplData.rightFieldRowCount%}{%/if%}{%if $escaped_leaveRightFieldRowCount<1%}{%$escaped_leaveRightFieldRowCount=1%}{%/if%}{%$tplData.field4limitlen=58*($escaped_leaveRightFieldRowCount-1)+50%}{%if !$tplData.realpicsrc && isset($tplData.result[0].pic)%}{%$tplData.realpicsrc=$tplData.result[0].pic%}{%/if%} {%if !$tplData.realpicsrc%}{%$tplData.field4limitlen=152%}{%/if%}{%if $tplData.otherinfo.main_req==1%} {%if $tplData.realpicsrc%} {%$extData.feData.fm='albk'%} {%else%} {%$extData.feData.fm='albk3'%} {%/if%}{%else%} {%$extData.feData.fm='albk1'%}{%/if%}{%$tplData.url=$tplData.result[0].name_info['@attr'].url%} {%$tplData.title=$tplData.result[0].name_info['@attr'].original_name|cat:'_百度百科'%}{%if $extData.feData.isLeftImageMode%} {%$extData.feData.leftImage = [src => {%$tplData.realpicsrc%}, href => $tplData.url, rate => 4/3]%}{%/if%} {%/block%}{%block name='content'%} <div class="c-row"> {%if $tplData.realpicsrc && $tplData.otherinfo.main_req==1%} {%if !$extData.feData.isLeftImageMode%} <div class="c-span6"> <a href="{%$tplData.url%}" target="_blank"> <img class="c-img c-img6" src="{%$tplData.realpicsrc%}" /> </a> </div> {%/if%} <div class="{%if !$extData.feData.isLeftImageMode%}c-span18{%else%}c-span24{%/if%} c-span-last"> {%if $tplData.result[0].focus && $tplData.result[0].focus[0]['@attr'].text%} <p class="op-bk-polysemy-focus"> <span class="op-bk-polysemy-focustext">{%$tplData.result[0].focustip|limitlen:8|escape:html%}</span> <span class="op-bk-polysemy-focusright"> {%foreach array_slice($tplData.result[0].focus, 0,3) as $item%} <a target="_blank" href="{%$item['@attr'].link%}">{%$item['@attr'].text|limitlen:14|escape:html%}</a> {%/foreach%} </span> </p> {%/if%} {%if $tplData.result[0].field[0]['@attr'].value %} <p>{%if $tplData.result[0].field[0]['@attr']['name']%}{%$tplData.result[0].field[0]['@attr']['name']|escape:'html'%}{%/if%}{%$tplData.result[0].field[0]['@attr']['value']|highlight:4%}</p> {%/if%} {%if ($tplData.result[0].field[1]['@attr'].value||$tplData.result[0].field[2]['@attr'].value) %} <p> {%if ($tplData.result[0].field[1]['@attr']['value']|string_display_len)>24%} <span class="c-gap-right">{%if $tplData.result[0].field[1]['@attr']['name']%}{%$tplData.result[0].field[1]['@attr']['name']|escape:'html'%}{%/if%}{%$tplData.result[0].field[1]['@attr']['value']|limitlen:52|highlight:4%}</span> {%else%} {%if $tplData.result[0].field[1]['@attr']['value']%}<span class="c-gap-right">{%if $tplData.result[0].field[1]['@attr']['name']%}{%$tplData.result[0].field[1]['@attr']['name']|escape:'html'%}{%/if%}{%$tplData.result[0].field[1]['@attr']['value']|limitlen:24|highlight:4%}</span>{%/if%}{%if $tplData.result[0].field[2]['@attr']['name']%}{%$tplData.result[0].field[2]['@attr']['name']|escape:'html'%}{%/if%}{%if $tplData.result[0].field[2]['@attr']['link']%}<a href="{%$tplData.result[0].field[2]['@attr']['link']%}" target="_blank">{%/if%}{%$tplData.result[0].field[2]['@attr']['value']|limitlen:22|highlight:4%}{%if $tplData.result[0].field[2]['@attr']['link']%}</a>{%/if%} {%/if%} </p> {%/if%} {%if $tplData.result[0].content%} <p> {%if $tplData.result[0].tip['@attr']['noStructure']!="true" && $tplData.realpicsrc%}简介：{%/if%}{%$tplData.result[0].content|limitlen:$tplData.field4limitlen|highlight:4%} </p> {%/if%} {%if $tplData.result[0].link%} {%if !$tplData.result[0].link[0]%} {%$tplData.result[0].link=array($tplData.result[0].link)%} {%/if%} <p> {%$escaped_linkDataLineLen=0%} {%$escaped_linkDataCount=count($tplData.result[0].link)%} {%foreach $tplData.result[0].link as $item%} {%$escaped_linkDataLineLen=$escaped_linkDataLineLen+($item['@attr']['txt']|string_display_len)%} {%if ($escaped_linkDataCount>6&&$item@index<5) || $escaped_linkDataLineLen<=42%} <a class="c-gap-right-small" href="{%$tplData.url%}{%$item['@attr']['url']%}" target="_blank" title="{%$item['@attr']['txt']%}">{%$item['@attr']['txt']|limitlen:20|highlight:4%}</a> {%else%} <a href="{%$tplData.url%}" target="_blank">更多&gt;&gt;</a> {%break%} {%/if%} {%/foreach%} </p> {%/if%} {%if $tplData.result[0].blog && $tplData.realpicsrc%} {%foreach $tplData.result[0].blog as $item%} <p>{%$item['name']|escape:'html'%}<a href="{%$item['url']%}" target="_blank">{%$item['url']|limitlen:56|escape:'html'%}</a></p> {%/foreach%} {%/if%} {%if $tplData.realpicsrc && $tplData.otherinfo.rel_rn>1 && $tplData.result[0].name_info['@attr'].totalurl%} <p class=" op-bk-polysemy-move op-bk-polysemy-bold"><a href="{%$tplData.result[0].name_info['@attr'].totalurl%}" target="_blank">查看“<em>{%$tplData.result[0].name_info['@attr'].original_name|escape:'html'%}</em>”全部{%$tplData.otherinfo.rel_rn|escape:'html'%}个含义&gt;&gt;</a></p> {%/if%} <p class=" op-bk-polysemy-move">{%fe_fn_c_showurl%}</p> </div> {%else%} {%$tplData.field4limitlen=152%} <div class="c-span24 c-span-last {%if  $tplData.result|count<3 %} op-bk-polysemy-oneother{%/if%}"> {%if $tplData.result[0].focus && $tplData.result[0].focus[0]['@attr'].text%} <p class="op-bk-polysemy-focus"> <span class="op-bk-polysemy-focustext">{%$tplData.result[0].focustip|limitlen:8|escape:html%}</span> <span class="op-bk-polysemy-focusright"> {%foreach array_slice($tplData.result[0].focus, 0,3) as $item%} <a target="_blank" href="{%$item['@attr'].link%}">{%$item['@attr'].text|limitlen:14|escape:html%}</a> {%/foreach%} </span> </p> {%/if%} {%if $tplData.result[0].content%} <p>{%$tplData.result[0].content|limitlen:$tplData.field4limitlen|highlight:4%}</p> {%/if%} {%if   $tplData.result|count>=2%} <div class="{%if  $tplData.result|count==2%}{%$escaped_len=70%}op-bk-polysemy-oneother{%else%} op-bk-polysemy-other{%$escaped_len=78%}{%/if%}"> <span>其他含义:</span> {%foreach array_slice($tplData.result,1 , 3) as $item%} <span class=" c-gap-left op-bk-polysemy-space"><a href="{%$item.name_info['@attr'].url%}" target="_blank" >{%$item.name_info['@attr'].determiner|limitlen:$escaped_len|highlight:4%}</a></span> {%/foreach%} </div> {%/if%} {%if $tplData.otherinfo.rel_rn>3 && $tplData.result[0].name_info['@attr'].totalurl%} <p class="c-gap-left op-bk-polysemy-move op-bk-polysemy-bold"><a href="{%$tplData.result[0].name_info['@attr'].totalurl%}" target="_blank">查看“<em>{%$tplData.result[0].name_info['@attr'].original_name|escape:'html'%}</em>”全部{%$tplData.otherinfo.rel_rn|escape:'html'%}个含义&gt;&gt;</a></p> {%/if%} <p class="c-gap-left op-bk-polysemy-move">{%fe_fn_c_showurl%}</p> </div> {%/if%} </div>{%/block%}{%block name='foot'%}{%/block%}