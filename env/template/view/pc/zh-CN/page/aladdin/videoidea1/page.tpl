{%extends 'base.tpl'%} {%block name='content'%}{%$FE_GBVAR.wrapper_prefix%}<style>.op_videoidea_main{width:636px}.op_videoidea_title{background:#f1f1f1;height:32px;font-weight:bold;padding-left:19px;font-size:13px}.op_videoidea_up{position:absolute;margin-left:575px;line-height:32px;width:37px;cursor:pointer;width:37px;background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 30px -124px}.op_videoidea_down{background-position:30px -144px}.op_videoidea_item{background:#fff url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repe{%*i*%}at right -172px;height:18px;border:1px solid #adadad;-webkit-border-radius:2px;border-radius:2px;padding:0 15px 0 5px;font-size:12px;display:inline-block;float:left;margin:0 10px 10px 0;cursor:pointer}.op_videoidea_top{background:#f8f8f8;padding:0 20px 10px 20px;font-size:12px}.op_videoidea_condition{padding-top:3px}.op_videoidea_tags div{line-height:42px;height:42px}.op_videoidea_tag{margin:0 8px;color:#00c;cursor:pointer;padding:1px 4px 3px;*padding:3px 4px 2px}.op_videoidea_select{background-{%*i*%}color:#67a5eb;color:#fff;-webkit-border-radius:2px;border-radius:2px}.op_videoidea_fresh{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat -18px -189px;*background-position-y:-188px;padding-left:14px;color:#666;white-space:nowrap;margin:0 10px 12px 0;display:inline-block}.op_videoidea_type,.op_videoidea_area{border-bottom:1px dashed #b6b6b6}.op_videoidea_line{width:594px;height:1px;background:#bbb;overflow:hidden}.op_videoidea_content{background-color:#f1f1f1;p{%*i*%}adding:0 0 10px;font-size:12px}.op_videoidea_content_s{height:272px;overflow:hidden;position:relative}.op_videoidea_cntab{padding:0 20px;border-bottom:1px solid #d5d5d5;background-color:#f8f8f8;font-size:14px}.op_videoidea_cntab span{position:relative;top:1px;color:#00c;padding:4px 15px;display:inline-block;cursor:pointer}.op_videoidea_cntab span.op_videoidea_cntab_sel{font-weight:bold;color:#000;background:#f1f1f1 url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 77px -1{%*i*%}88px;border:solid 1px;border-color:#d5d5d5 #d5d5d5 #f1f1f1 #d5d5d5}.op_videoidea_maincnt{padding:0 0 10px 30px}.op_videoidea_cntwrap{*padding-top:15px}.op_videoidea_detailcnt{height:230px;float:left;position:relative;margin:15px 16px 0 0;*margin-top:0;cursor:pointer}.op_videoidea_detailcnt a{text-decoration:none}.op_videoidea_detailbg{width:120px;height:160px;padding:5px;background-color:#fff;border:1px solid #dcdcdc}.op_videoidea_detailbg_h{height:208px}.op_videoidea_cntimg{width:120px;height:1{%*i*%}60px;overflow:hidden;z-index:4}.op_videoidea_imgwrap{position:absolute;top:6px;left:6px;overflow:hidden;z-index:4}.op_videoidea_detailbg_h .op_videoidea_imgwrap{height:83px}.op_videoidea_imgangle{position:absolute;top:5px;left:5px;width:31px;height:31px;color:#fff;padding:1px 2px;font-weight:bold;cursor:pointer}.op_videoidea_imgwrap .op_videoidea_imgangle{top:0;left:0}.op_videoidea_new{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat -40px -55px}.op_videoidea_{%*i*%}hot{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 -55px}.op_videoidea_detailinfo{position:absolute;top:93px;z-index:1;*top:91px}.op_videoidea_detailinfo div{color:#666;width:120px}.op_videoidea_othera{font-family:simsun}.op_videoidea_name{width:120px;text-align:center;line-height:26px;height:26px;position:absolute;top:175px;color:#00c}.op_videoidea_detailbg_h .op_videoidea_name{font-weight:bold}.op_videoidea_play{position:absolute;top:28px;left:47px;width{%*i*%}:30px;height:30px;background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 -92px;z-index:1;display:none;filter:alpha(opacity=90);-moz-opacity:.90;-khtml-opacity:.90;opacity:.90;cursor:pointer}.op_videoidea_detailbg_h .op_videoidea_play{display:block;z-index:5}.op_videoidea_star{position:absolute;top:195px;left:17px}.op_videoidea_star span{display:inline-block;height:24px;line-height:24px;float:left}.op_videoidea_starbg{width:75px;background:url("http://www.baidu.com{%*i*%}/aladdin/img/videoidea/videoidea.png") no-repeat 0 5px;margin-right:4px}.op_videoidea_starft{background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 0 -23px}.op_videoidea_lastdiv{clear:both}.op_videoidea_morebtn{text-align:center;background:#fff url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat 314px -146px;border:1px solid #e0e0e0;margin:0 0 0 30px;width:574px;height:30px;line-height:30px;cursor:pointer;font-weight:bold}.op_videoidea_morebtn_{%*i*%}wait{color:gray;background:#fff url("http://www.baidu.com/aladdin/img/videoidea/loading.gif") no-repeat 314px 6px;font-weight:normal}.op_videoidea_noresult{padding:100px 0 100px 135px}.op_videoidea_noresult div{height:30px;line-height:30px;font-size:14px;background:url("http://www.baidu.com/aladdin/img/videoidea/videoidea.png") no-repeat -36px -92px;padding-left:40px}.op_videoidea_load{padding:100px 0 100px 218px}.op_videoidea_load div{height:30px;line-height:30px;font-size:14px;background:url("{%*i*%}http://www.baidu.com/aladdin/img/videoidea/loading_L.gif") no-repeat;padding-left:40px}.op_videoidea_hidden{display:none}.op_videoidea_bold{font-weight:bold}</style><font size="-1"> <div class="op_videoidea_main"> <div class="op_videoidea_title"> <div class="op_videoidea_up OP_LOG_BTN" style="display:none;">收起</div> <span style="line-height:32px;position:absolute;">热门结果</span> </div> <div class="op_videoidea_top" data-click="{'fm':'beha'}"> <div class="op_videoidea_tags"> <div class="op_videoide{%*i*%}a_type"> <span style="font-weight:bold;">按类型：</span> <span class="op_videoidea_tag op_videoidea_all OP_LOG_BTN">全部</span>| <span class="op_videoidea_tag OP_LOG_BTN">爱情</span>| <span class="op_videoidea_tag OP_LOG_BTN">喜剧</span>| <span class="op_videoidea_tag OP_LOG_BTN">动作</span>| <span class="op_videoidea_tag OP_LOG_BTN">剧情</span>| <span class="op_videoidea_tag OP_LOG_BTN">科幻</span>| <span class="op_videoidea_tag OP_LOG_BTN">恐怖</span>| <span class="op_videoidea_tag OP_LOG_BTN">伦理</span>| <span {%*i*%}class="op_videoidea_tag OP_LOG_BTN">惊悚</span>| <span class="op_videoidea_tag OP_LOG_BTN">战争</span> </div> <div class="op_videoidea_area"> <span style="font-weight:bold;">按地区：</span> <span class="op_videoidea_tag op_videoidea_all OP_LOG_BTN">全部</span>| <span class="op_videoidea_tag OP_LOG_BTN">大陆</span>| <span class="op_videoidea_tag OP_LOG_BTN">香港</span>| <span class="op_videoidea_tag OP_LOG_BTN">台湾</span>| <span class="op_videoidea_tag OP_LOG_BTN">美国</span>| <span class="op_videoidea_tag OP_LOG{%*i*%}_BTN">韩国</span>| <span class="op_videoidea_tag OP_LOG_BTN">日本</span>| <span class="op_videoidea_tag OP_LOG_BTN">泰国</span>| <span class="op_videoidea_tag OP_LOG_BTN">英国</span>| <span class="op_videoidea_tag OP_LOG_BTN">其他</span> </div> <div class="op_videoidea_time"> <span style="font-weight:bold;">按年代：</span> <span class="op_videoidea_tag op_videoidea_all OP_LOG_BTN">全部</span>| <span class="op_videoidea_tag OP_LOG_BTN">2013</span>| <span class="op_videoidea_tag OP_LOG_BTN">2012</span>| <span cla{%*i*%}ss="op_videoidea_tag OP_LOG_BTN">2011</span>| <span class="op_videoidea_tag OP_LOG_BTN">2010</span>| <span class="op_videoidea_tag OP_LOG_BTN">00年代</span>| <span class="op_videoidea_tag OP_LOG_BTN">90年代</span>| <span class="op_videoidea_tag OP_LOG_BTN">80年代</span>| <span class="op_videoidea_tag OP_LOG_BTN">更早</span> </div> </div> <div class="op_videoidea_condition"> <span style="font-weight:bold;float:left;margin-right:10px;">当前筛选条件：</span> <a class="op_videoidea_fresh" href="#" onclick="return {%*i*%}false;">重新筛选</a> <div style="clear:both;"></div> </div> <div class="op_videoidea_line"></div> </div> <div class="op_videoidea_content"> <div class="op_videoidea_cntab"> <span class="op_videoidea_cntab_sel OP_LOG_BTN">最热电影</span> <span class="OP_LOG_BTN">最新电影</span> <span class="OP_LOG_BTN">用户好评</span> </div> <div class="op_videoidea_maincnt"> <div class="op_videoidea_cntwrap" data-index="0"> <div class="op_videoidea_lastdiv"></div> </div> <div class="op_videoidea_cntwrap op_videoidea_hidden" dat{%*i*%}a-index="1"> <div class="op_videoidea_lastdiv"></div> </div> <div class="op_videoidea_cntwrap op_videoidea_hidden" data-index="2"> <div class="op_videoidea_lastdiv"></div> </div> </div> <div class="op_videoidea_load op_videoidea_hidden"> <div>正在努力的为您加载...</div> </div> <div class="op_videoidea_noresult op_videoidea_hidden"> <div>抱歉，没有找到符合条件的电影，请尝试其它分类。</div> </div> <div class="op_videoidea_morebtn OP_LOG_BTN">查看更多</div> </div> <div class="op_videoidea_tempdata" style="display:none;"></div> </div>{%*i*%}</font><script >
    A.setup({'data':[{%$loop_maxcount=count($tplData.result)%}{%for $op_loop_count=0 to 12%}{%if $op_loop_count<$loop_maxcount%}{'isNew': '{%$tplData.result[$op_loop_count]['isNew']%}','isHot':'{%$tplData.result[$op_loop_count]['isHot']%}','poster':'{%$tplData.result[$op_loop_count]['poster']%}','videoLink':'{%$tplData.result[$op_loop_count]['videoLink']%}','rate':'{%$tplData.result[$op_loop_count]['rate']%}','displayTime':'{%$tplData.result[$op_loop_count]['displayTime']%}','title':'{%$tplData.result[$op_loop_count]['title']%}','displayTitle':'{%$tplData.result[$op_loop_count]['displayTitle']%}','tipsDirector':'{%$tplData.result[$op_loop_count]['tipsDirector']%}','displayDirector':'{%$tplData.result[$op_loop_count]['displayDirector']%}','tipsActor':'{%$tplData.result[$op_loop_count]['tipsActor']%}','displayActor':'{%$tplData.result[$op_loop_count]['displayActor']%}'},{%else%}{%break%}{%/if%}{%/for%}{}].slice(0, -1)});
    A.setup({'tags':[{%$loop_maxcount=count($tplData.QueryTags)%}{%for $op_loop_count=0 to 30%}{%if $op_loop_count<$loop_maxcount%}'{%$tplData.QueryTags[$op_loop_count]%}',{%else%}{%break%}{%/if%}{%/for%}{}].slice(0, -1),'sid':'{%$extData.resourceid%}'});
</script><script>A.init(function(){var T = A.baidu, _this = this,ajaxFinished = false,upbtn = _this.qq('op_videoidea_up'),fresh = _this.qq('op_videoidea_fresh'),tags = _this.q('op_videoidea_tag'),cnt = _this.qq('op_videoidea_content'),noresult = _this.qq('op_videoidea_noresult'),load = _this.qq('op_videoidea_load'),cntabs = _this.qq('op_videoidea_cntab').getElementsByTagName('span'),morebtn = _this.qq('op_videoidea_morebtn'),urlData = _this.qq('op_videoidea_tempdata'),index = 0, tStamp = 0, page{%*i*%}index = 1, pn = 0, nomoreresult = false, up = true, hotnum = 0, newnum = 0;initDisplay();function initDisplay(){var tagslen = _this.data.tags.length,badTags = ['电影','片'],tagMark = {'time':true,'type':true,'area':true};for(var i = 0; i < tagslen; i++){var badTag = false;for(var k = 0;k <badTags.length; k++){if( _this.data.tags[i] == badTags[k]){badTag = true;break;}}if (badTag) {continue;}var isIn = false;for(var j = 0;j < tags.length; j++){if (_this.data.tags[i] == tags[j].innerHTML){T.dom.addCl{%*i*%}ass(tags[j], 'op_videoidea_select');var tagtype = tags[j].parentNode.className.split('_')[2];createItem(tags[j].innerHTML, tagtype);isIn = true;tagMark[tagtype] = false;}}if (!isIn) {createItem(_this.data.tags[i], '');}}if (tagMark['type'])T.dom.addClass(T.dom.q('op_videoidea_all', _this.qq('op_videoidea_type'))[0], 'op_videoidea_select');if (tagMark['time'])T.dom.addClass(T.dom.q('op_videoidea_all', _this.qq('op_videoidea_time'))[0], 'op_videoidea_select');if (tagMark['area'])T.dom.addClass(T.d{%*i*%}om.q('op_videoidea_all', _this.qq('op_videoidea_area'))[0], 'op_videoidea_select');var tempData = {'disp_data':_this.data.data,'listNum':_this.data.data.length},arr = [tempData],data = {'status':'0','t':'0','data':arr};addCnt(data);ifCond();}T.event.on(morebtn, 'click', function(){if (T.dom.hasClass(this, 'op_videoidea_morebtn_wait')) {return;} else {T.dom.addClass(this, 'op_videoidea_morebtn_wait');getData();}});T.event.on(upbtn, 'click',function(){if (!up) {up = true;this.innerHTML = '收起';T.do{%*i*%}m.removeClass(this, 'op_videoidea_down');T.dom.removeClass(cnt, 'op_videoidea_content_s');if (!nomoreresult) { T.dom.removeClass(morebtn, 'op_videoidea_hidden');}} else {up = false;this.innerHTML = '展开';T.dom.addClass(this, 'op_videoidea_down');T.dom.addClass(cnt, 'op_videoidea_content_s');}});T.each(cntabs, function(el, i){T.event.on(el, 'click', function(){if(!T.dom.hasClass(this, 'op_videoidea_cntab_sel')){T.dom.removeClass(_this.qq('op_videoidea_cntab_sel'), 'op_videoidea_cntab_sel');T.dom.a{%*i*%}ddClass(this, 'op_videoidea_cntab_sel');index = i;T.each(_this.q('op_videoidea_cntwrap'), function(el, i){if (i == index) {T.dom.removeClass(el, 'op_videoidea_hidden');} else if ( !T.dom.hasClass(el, 'op_videoidea_hidden') ){T.dom.addClass(el, 'op_videoidea_hidden');}});initData();getData();}});});T.each(tags, function(el, i){T.event.on(el, 'click', function(){var thisWrap = this.parentNode,type = thisWrap.className.split('_')[2],otherTags = T.dom.q('op_videoidea_select', thisWrap),items = _this{%*i*%}.q('op_videoidea_item');if (!T.dom.hasClass(this, 'op_videoidea_select')) {T.each(otherTags, function(el, i){T.dom.removeClass(el, 'op_videoidea_select');});T.each(items, function(el,i){if ( el.getAttribute('data-type') == type) {T.dom.remove(el);}});T.dom.addClass(this, 'op_videoidea_select');if (!T.dom.hasClass(this, 'op_videoidea_all')) {createItem(this.innerHTML, type);}initData();getData();ifCond();} else {if (!T.dom.hasClass(this, 'op_videoidea_all')){T.dom.removeClass(this, 'op_videoidea_{%*i*%}select');var itemlen = items.length;for (var i = 0; i < itemlen; i++){if (items[i].getAttribute('data-cont') == this.innerHTML) {T.dom.remove(items[i]);}}if(T.dom.q('op_videoidea_select', thisWrap)[0] == undefined){T.dom.addClass(T.dom.q('op_videoidea_all', thisWrap)[0], 'op_videoidea_select');}initData();getData();ifCond();}}});});function createItem(cnt, type){var item = document.createElement('div');item.className = 'op_videoidea_item OP_LOG_BTN';item.innerHTML = cnt;item.setAttribute('data-t{%*i*%}ype', type);item.setAttribute('data-cont', cnt);T.event.on(item, 'click', function(){if (type) {var typewrap = _this.qq('op_videoidea_' + type),typetags = T.dom.q('op_videoidea_select', typewrap),hasOther = true;T.each(typetags, function(el, i){if( el.innerHTML == item.getAttribute('data-cont') ){T.dom.removeClass(el, 'op_videoidea_select');} else {hasOther = false;}});if (hasOther) {T.dom.addClass(T.dom.q('op_videoidea_all', typewrap)[0], 'op_videoidea_select');}}T.dom.remove(item);initData();g{%*i*%}etData();ifCond();});T.dom.insertBefore(item, fresh);}T.event.on(fresh, 'click', function(){var items = _this.q('op_videoidea_item'),selectTags = _this.q('op_videoidea_select'),tagAll = _this.q('op_videoidea_all');T.each(items, function(el){T.dom.remove(el);});T.each(selectTags, function(el){T.dom.removeClass(el, 'op_videoidea_select');});T.each(tagAll, function(el){T.dom.addClass(el, 'op_videoidea_select');});T.dom.addClass(morebtn, 'op_videoidea_hidden');initData();getData();ifCond();});functi{%*i*%}on ifCond() {var items = _this.q('op_videoidea_item'),cond = _this.qq('op_videoidea_condition');if ( items.length < 1 ) {if (!T.dom.hasClass(cond, 'op_videoidea_hidden')) {T.dom.addClass(cond, 'op_videoidea_hidden');}} else {T.dom.removeClass(cond, 'op_videoidea_hidden');}}function addCnt(data){if(ajaxFinished) return; T.dom.addClass(load, 'op_videoidea_hidden');if ( tStamp != data.t) {return;}if (data.status == '0' && data.data[0].disp_data) {var len = data.data[0].disp_data.length;if (len > 0){%*i*%} {if (len < 12) {T.dom.addClass(morebtn, 'op_videoidea_hidden');nomoreresult = true;} else {if (up) {T.dom.removeClass(morebtn, 'op_videoidea_hidden');}nomoreresult = false;}for(var i = 0; i < len && i < 12; i ++){createCntItem(data.data[0].disp_data[i]);}if (pn >= 36 || data.data[0].listNum == (pn+12)) {T.dom.addClass(morebtn, 'op_videoidea_hidden');}T.dom.removeClass(morebtn, 'op_videoidea_morebtn_wait');T.dom.addClass(noresult, 'op_videoidea_hidden');} else {T.dom.addClass(morebtn, 'op_videoi{%*i*%}dea_hidden');T.dom.removeClass(noresult, 'op_videoidea_hidden');}} else {T.dom.removeClass(noresult, 'op_videoidea_hidden');} }function createCntItem(data){var cnt = document.createElement('div');cnt.className = 'op_videoidea_detailcnt OP_LOG_BTN';cnt.setAttribute('data-src',data.videoLink);var cntbg = document.createElement('div');cntbg.className = 'op_videoidea_detailbg';var bgHtml = ['<div class="op_videoidea_detailinfo"><div>导演：<span title="',data.tipsDirector,'">',data.displayDirector,'</sp{%*i*%}an></div><div><table cellpadding="0" cellspacing="0"><tr><td style="width:36px;vertical-align:top;">演员：</td><td><span title="',data.tipsActor,'">',data.displayActor,'</span></td></tr></table></div><div><span>年份：',data.displayTime,'</span></div></div>','<div class="op_videoidea_imgwrap"><img class="op_videoidea_cntimg"  src="',data.poster,'" /><div class="op_videoidea_play"></div>'];if (data.isHot == 'true' && hotnum < 6) {bgHtml.push('<span class="op_videoidea_imgangle op_videoidea_hot">热</span>{%*i*%}</a></div>');hotnum++;} else if (data.isNew == 'true' && newnum < 6) {bgHtml.push('<span class="op_videoidea_imgangle op_videoidea_new">新</span></a></div>');newnum++;} else {bgHtml.push('</div>');}var downHtml = [ '<div class="op_videoidea_name"><span title="',data.title,'">',data.displayTitle,'</span></div><div class="op_videoidea_star"><span class="op_videoidea_starbg"><span class="op_videoidea_starft" style="width:',data.rate*10,'%"></span></span><span>',data.rate,'</span></div>'];bgHtml = bg{%*i*%}Html.concat(downHtml);cntbg.innerHTML = bgHtml.join('');cnt.appendChild(cntbg);T.event.on(cntbg, 'mouseover', function(){T.dom.addClass(cntbg, 'op_videoidea_detailbg_h');});T.event.on(cnt, 'mouseout', function(){T.dom.removeClass(cntbg, 'op_videoidea_detailbg_h');});T.event.on(cnt, 'click', function(){var url = cnt.getAttribute('data-src');urlData.innerHTML = url;window.open(urlData.childNodes[0].nodeValue,'_blank');});var lastdiv = T.dom.q('op_videoidea_lastdiv',_this.q('op_videoidea_cntwrap')[{%*i*%}index])[0];T.dom.insertBefore(cnt, lastdiv);}function getData(){if (pn >= 48) {return;}var type = [],sortkey,time_more,url = 'http://opendata.baidu.com/api.php?format=json&rn=12&from_mid=1&sort_type=1&ie=utf-8&oe=utf-8&type=#{0}&sort_key=#{1}&pn=#{2}&query=#{3}&time_more=#{4}&t=#{5}&resource_id=#{6}',items = _this.q('op_videoidea_item');tStamp = new Date().getTime();pn = pageindex++*12;T.each(items, function(el, i){var cont = el.getAttribute('data-cont');if (cont == '更早') {time_more = '1900_1979{%*i*%}';} else {type.push(cont);}});switch (index) {case 0:sortkey = '';break;case 1:sortkey = '12';break;case 2:sortkey = '11';break;}T.dom.removeClass(load, 'op_videoidea_hidden');T.dom.addClass(noresult, 'op_videoidea_hidden');T.sio.callByServer(T.format(url, encodeURIComponent(type.join(',')), sortkey, pn, encodeURIComponent('电影'), time_more, tStamp, _this.data.sid), addCnt, {'queryField':'cb','charset':'utf-8'});}function initData(){pageindex = 0;hotnum = 0;newnum = 0;pn = 0;nomoreresult = false;{%*i*%}T.dom.removeClass(morebtn, 'op_videoidea_morebtn_wait');T.dom.addClass(morebtn, 'op_videoidea_hidden');_this.q('op_videoidea_cntwrap')[index].innerHTML = '<div class="op_videoidea_lastdiv"></div>';}this.dispose = function(){if(!ajaxFinished){ajaxFinished = true;}};});</script>{%$FE_GBVAR.wrapper_suffix%}{%/block%}