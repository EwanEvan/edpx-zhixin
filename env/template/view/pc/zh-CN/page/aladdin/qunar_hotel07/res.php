<?php 
  class CssJs_Util_qunar_hotel07
   {
      private static $cssStr = '';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("qunar_hotel07",function(){A.setup(function(){var e=this;var h="http://www.baidu.com/qunarui/hotel";var p=false;var f=(function(t){var r="op-"+t.data.TPL_NAME+"-";var s={};var u;return u={isIE6:function(){return/msie 6/i.test(navigator.userAgent)},isIE7:function(){return/msie 7/i.test(navigator.userAgent)},getClass:function(v){return(r+v)},getTags:function(w,v){if(!w){return[]}return w.getElementsByTagName(v)||[]},getElementByClassName:function(v,w){if(w){return $(w).find("."+v)[0]}else{return $("."+v)[0]}},getChildrens:function(v){return v&&v.childNodes||[]},hasClass:function(w,v){return $(w).hasClass(v)},addClass:function(w,v){$(w).addClass(v)},removeClass:function(w,v){$(w).removeClass(v)},getOffset:function(w){var v=w.parentNode;var x=$(v).offset();return x},on:function(w,v,x){$(w).bind(v,x)},unbind:function(w,v,x){$(w).unbind(v,x)},jsonToQuery:function(v){var x=[];var w=null;$.each(v,function(y,z){if(/[^\\x00-\\xFF]/.test(z)){w=encodeURIComponent(z)}else{w=z}x.push(y+"="+w)});return x.join("&")},ajax:function(w,y,x,v){v=v||function(){};$.ajax({type:"POST",url:w,data:f.jsonToQuery(y),success:function(z){x&&x(z)},error:function(z){v(z)}})},jsonp:function(w,z,x,y,v){v=v||function(){};$.ajax({type:"POST",url:w,dataType:"jsonp",jsonp:x||"__jscallback",data:f.jsonToQuery(z),success:function(B){try{y&&y(B)}catch(C){v();return}},error:function(B){v(B)}})},extend:function(v,y,x){var w=null;for(w in y){if(y.hasOwnProperty(w)){v[w]=y[w]}}for(w in x){if(x.hasOwnProperty(w)){v[w]=x[w]}}return v},trim:function(v){return v.replace(/(^\\s*)|(\\s*$)/g,"")},bind:function(v,w){if(!s[v]){s[v]=[]}s[v].push(w)},trigger:function(w){var y=arguments||[];var B=s[w]||[];if(B.length===0){return}var v=[];for(var z=1;z<y.length;z++){v.push(y[z])}for(var x=0;x<B.length;x++){B[x].apply(t,v)}},GetZoomFactor:function(){var w=1;if(document.body.getBoundingClientRect){var x=document.body.getBoundingClientRect();var y=x.right-x.left;var v=document.body.offsetWidth;w=Math.round((y/v)*100)/100}return w},toFixed:function(w,y){var v=w;if(!w){return}if(!y){y=0}w*=Math.pow(10,y);var x=parseInt(w);w=x/(Math.pow(10,y));if(w===parseInt(v)){return v+".0"}return w},format:function(v,w){return $.format(v,w)},subByte:function(x,w,v){return $.subByte(x,w,v)}}})(e);function m(r){r=r||{};if(!r.dom||!r.offsetdom){return}this.offsetdom=r.offsetdom;this.display=r.display||"none";this.dom=r.dom;this.url=r.url;this.success=r.success;this.error=r.error;this.cache={};this.params={};if(r.html){r.dom.innerHTML=r.html}if(this.display!=="none"){this.show()}}m.prototype.render=function(){var r=this.getQuerykey();if(this.cache[r]){this._callback(1,this.cache[r])}else{this._getData()}};m.prototype.show=function(){if(this.dom){var s=this.offsetdom.offsetHeight;var r=f.getOffset(this.offsetdom);this.top=r.top+s-1;this.left=r.left;if(f.isIE7()){var t=f.GetZoomFactor()||0.1;this.top=(r.top/t)+s-1;this.left=r.left/t}this.dom.style.top=this.top+"px";this.dom.style.left=this.left+"px";this.display="block"}};m.prototype.hide=function(){if(this.dom){this.dom.style.top="-9999px";this.dom.style.left="-9999px";this.display="none"}};m.prototype.setQueryParams=function(s){s=s||{};if(!s.queryName){return}var r={};r[s.queryName]=f.trim(s.queryKey);this.params=f.extend({},this.params,r)};m.prototype.getQueryParams=function(){return this.params||{}};m.prototype.clearCache=function(){if(this.getCacheSize()>20){this.cache={}}};m.prototype.getCacheSize=function(){var t=0;for(var r in this.cache){if(this.cache.hasOwnProperty(r)){t++}}return t};m.prototype._getData=function(){var r=this;r.onsuccess=function(s){p=true;if(!s){r._callback();return}r._callback(1,s);r.clearCache();r.cache[r.getQuerykey()]=s};r.onerror=function(s){p=true;r._callback(0,s)};f.jsonp(this.url,f.extend({},{_t:new Date().getTime()},this.params),"__jscallback",r.onsuccess,r.onerror)};m.prototype.getQuerykey=function(){var t="";for(var r in this.params){if(this.params.hasOwnProperty(r)){t=t+this.params[r]}}return t};m.prototype._callback=function(r,s){if(!this.dom){return}if(r===1){if(this.success){this.success(s)}}else{if(this.error){this.error(s)}}};var d=(function(u){var F={};var E={};var w=f.getElementByClassName(f.getClass("jsprice"));var y=w.parentNode;var s=f.getElementByClassName(f.getClass("jsdangci"));var r=s.parentNode;var J=f.getElementByClassName(f.getClass("jsbrand"));var D=J.parentNode;var x=f.getElementByClassName(f.getClass("jshotels"));var G=f.getClass("hide");var t="";var v=function(){};var H=function(){var L=0;for(var K in E){if(E.hasOwnProperty(K)){L++}}return L};F.onsuccess=function(K){p=true;if(H()>=20){E={}}E[t]=K;v(K)};F.onerror=function(K){p=true};var C=function(L,K){t=L;v=K;if(E[t]){v(E[t]);return}f.jsonp(h+"/basicCard.jsp",{cityName:t,isgb:"Y",queryid:u.data.QUERYID},"__jscallback",F.onsuccess,F.onerror)};var I=function(M,R,P,K,O,Q){var L=[];if(!M||M&&M.length===0){f.addClass(P,G)}else{for(i=0;i<M.length;i++){var N=K+O+"&"+u.data.QHFP+"&"+Q+"="+(Q==="br"?encodeURIComponent(M[i].name)+"|":"")+M[i].url;name=M[i].name;L.push(\'<li class="c-gap-right"><a target="_blank" href="\',N,\'">\',name.replace(/%26/g,"&"),"</a></li>")}R.innerHTML=L.join("");f.removeClass(P,G)}};var B=function(ag,O){var Q=[];var Y,af=u.data.TPL_NAME;var S=[\'<div class="c-row c-gap-top">\',\'<div class="c-span6 op-#{tplname}-qnr_hotel_pic"><a href="#{imageurl}" target="_blank"><img class="c-img c-img6" src="#{img}" title="查看更多酒店图片"></a></div>\',\'<div class="c-span18 c-span-last op-#{tplname}-qnr_hotelinfo">\',\'<div class="op-#{tplname}-qnr_namestars">\',\'<a title="#{hotelnametitle}" class="op-#{tplname}-qnr_name c-gap-right-small" href="#{hotelnameurl}" target="_blank">#{hotelname}</a>\',"#{starhtml}#{dangcihtml}","</div>",\'<p class="op-#{tplname}-qnr_address">#{addresshtml}</p>\',"<p>","#{scorehtml}","#{totalreviewhtml}","#{pricehtml}","</p>","<p>","#{tuanroomshtml}","#{sellnumhtml}",\'<span class="op-#{tplname}-discountoriprice">#{discounthtml}\',"#{originalpricehtml}</span>","</p>","</div>","</div>"].join("");var W=[\'<div class="op-#{tplname}-hotel #{nopaddingclass}">\',\'<div class="op-#{tplname}-img">\',\'<a target="_blank" href="#{imageurl}"><img class="c-img c-img6" src="#{img}" title="查看更多酒店图片"/></a>\',\'<div class="op-#{tplname}-img-tag #{jsimage}">\',\'<div class="op-#{tplname}-scorereview">\',"#{scorehtml}","#{totalreviewhtml}","</div>",\'<div class="op-#{tplname}-address">#{addresshtml}</div>\',"</div>","</div>",\'<div class="op-#{tplname}-hotelintro">\',\'<p class="op-#{tplname}-name">\',\'<a class="op-#{tplname}-qnr_name c-gap-right-small" href="#{hotelnameurl}" target="_blank" title="#{hotelnametitle}">#{hotelname}</a>\',"</p>","<p>#{pricehtml}</p>","<p>#{discounthtml}#{originalpricehtml}</p>","<p>#{starhtml}#{dangcihtml}</p>","<p>#{sellnumhtml}</p>","</div>","</div>"].join("");var ae=["","国家旅游局评定为一星级","国家旅游局评定为二星级","国家旅游局评定为三星级","国家旅游局评定为四星级","国家旅游局评定为五星级"];if(!ag||ag&&ag.length<=0){f.addClass(x,G)}else{var V,ac,T,L,M=[],R,U,P;var Z,K,ab,X,aa,ad;var N=false;for(Y=0;Y<ag.length;Y++){L=ag[Y].hotelseq.lastIndexOf("_");N=(Y===0&&ag.length%2===1);ac=ag[Y].hotelseq.substring(0,L);T=ag[Y].hotelseq.substring(L+1);V="http://tuan.hotel.qunar.com/city/"+ac+"/dt-"+T;R=f.subByte(ag[Y].hotelname,N?(ag[Y].star>0?38:(ag[Y].dangci?42:46)):16);U=f.subByte(ag[Y].address,N?52:12);P=U===ag[Y].address?"":"位于"+ag[Y].address;Z=ag[Y].score>0?f.toFixed(ag[Y].score,1)+"/5分":"";K=ag[Y].discount>0?f.toFixed(ag[Y].discount,1)+"折":"";ad=V+"?ex_track=bd_zhixin_hotel_tuan_bsc_count&"+u.data.QHFP;ab=V+"?ex_track=bd_zhixin_hotel_tuan_bsc_score&"+u.data.QHFP;X=V+"?ex_track=bd_zhixin_hotel_tuan_bsc_cmt&"+u.data.QHFP+"#scroll=comment";aa=V+"?ex_track=bd_zhixin_hotel_tuan_bsc_price&"+u.data.QHFP;Q.push(f.format(N?S:W,{tplname:af,nopaddingclass:ag.length%2===0&&Y%2===1||ag.length%2===1&&Y%2===0?"op-"+af+"-norightpad":"",jsimage:ag[Y].score>0||ag[Y].totalreview>0||ag[Y].address?"op-"+af+"-jsimage":"",imageurl:V+"?ex_track=bd_zhixin_hotel_tuan_bsc_image&"+u.data.QHFP,img:ag[Y].img,hotelnameurl:V+"?ex_track=bd_zhixin_hotel_tuan_bsc_name&"+u.data.QHFP,hotelname:R,hotelnametitle:ag[Y].hotelname===R?"":ag[Y].hotelname,starhtml:ag[Y].star>0?\'<i title="\'+ae[ag[Y].star]+\'" class="c-icon c-icon-star op-\'+af+"-star"+ag[Y].star+\'"></i>\':"",dangcihtml:(!ag[Y].star&&ag[Y].dangci)?\'<span class="op-\'+af+\'-qnr_dangci" title="去哪儿网用户评定为\'+ag[Y].dangci+\'酒店">\'+ag[Y].dangci+"</span>":"",pricehtml:ag[Y].price>=0?\'<span class="op-\'+af+\'-qnr_price"><a href="\'+aa+\'" target="_blank"><b>&yen;&nbsp;\'+ag[Y].price+"</b>起</a></span>":"",discounthtml:ag[Y].discount>0?\'<i class="op-\'+af+\'-qnr_discount">\'+K+"</i>":"",originalpricehtml:ag[Y].originalprice>=0?\'<del class="op-\'+af+\'-qnr_oriprice">&yen;&nbsp;\'+ag[Y].originalprice+"</del>":"",tuanroomshtml:ag[Y].tuanroomsnum>0?\'<span class="op-\'+af+\'-qnr_tuanroom c-gap-right"><a href="\'+ad+\'" target="_blank">共\'+ag[Y].tuanroomsnum+"团品&gt;&gt;</a></span>":"",sellnumhtml:ag[Y].sellnum>0?\'<span class="op-\'+af+\'-qnr_sellnum">已售出\'+ag[Y].sellnum+"份</span>":"",scorehtml:ag[Y].score>0?\'<span class="op-\'+af+\'-qnr_score"><a href="\'+ab+\'" target="_blank">\'+Z+"</a></span>":"",totalreviewhtml:ag[Y].totalreview>0?\'<span><a href="\'+X+\'" target="_blank">\'+ag[Y].totalreview+"条点评</a></span>":"",addresshtml:ag[Y].address?\'<span title="\'+P+\'">位于\'+U+"</span>":""}))}x.innerHTML=Q.join("");f.removeClass(x,G)}};var z=null;$(x).delegate("."+f.getClass("jsimage"),"mouseenter",function(L){var K=this;z=setTimeout(function(){$(K).animate({height:"32"},200)},200)}).delegate("."+f.getClass("jsimage"),"mouseleave",function(K){if(z){clearTimeout(z)}$(this).animate({height:"16"},200)});return f.extend({},F,{render:function(L){var K=function(O){if(O.ret===true&&O.data){O=O.data;var N=O.url||"http://tuan.hotel.qunar.com/city/beijing_city/";var M=N.split("?")[0];if(M.lastIndexOf("/")<0){M=M+"/"}I(O.brandlinks,J,D,M,"?ex_track=bd_zhixin_hotel_tuan_bsc_hotbrand","br");I(O.pricelinks,w,y,M,"?ex_track=bd_zhixin_hotel_tuan_bsc_hotprice","pr");I(O.dangcilinks,s,r,M,"?ex_track=bd_zhixin_hotel_tuan_bsc_hotlevel","st");B(O.hotellinks,M)}};C(L,K)}})})(e);var c=f.getElementByClassName(f.getClass("city-input"));var q=f.getElementByClassName(f.getClass("hotcity"));var j=f.getElementByClassName(f.getClass("keyword-input"));var o=f.getElementByClassName(f.getClass("hotkey"));var a=new m({dom:q,offsetdom:c});var n=new m({dom:o,offsetdom:j,url:h+"/sugg.jsp?v=1&queryid="+e.data.QUERYID,success:function(s){if(s&&s.data){n.dom.style.borderWidth="1px";n.dom.innerHTML=s.data.replace(/onmousedown="return searchword\\(.*\\)"/ig,"");var r=f.getElementByClassName("js_cityguide",o);if(r){r.parentNode.style.display="none"}}},error:function(r){n.dom.innerHTML="";n.dom.style.borderWidth="0px"}});var g=function(r){a.hide();n.hide()};f.on(document,"click",g);var b=function(r){a.hide();n.hide()};f.on(window,"blur",b);f.on(c,"click",function(r){n.hide();e._sug&&e._sug.hide();if(a.display==="block"){a.hide()}else{a.show()}r.stopPropagation()});f.on(q,"click",function(t){t.stopPropagation();t.preventDefault();var s=t.target||t.srcElement;if(s.tagName.toUpperCase()==="A"){var r=s.getAttribute("data-city");if(c.value!=r){f.trigger("citychanged",r)}if(r){if(e._sug){e._sug.hide();e._sug.pick(\'<span class="js_cityname" data-cityname="\'+r+\'">\'+r+"</span>")}else{c.value=r}a.hide()}}});f.on(j,"click",function(r){if(n.display==="block"){n.hide()}else{n.setQueryParams({queryName:"city",queryKey:c.value});n.render();n.show();a.hide()}r.stopPropagation();r.preventDefault()});f.on(o,"click",function(t){t.stopPropagation();t.preventDefault();var s=t.target||t.srcElement;if(s.tagName.toUpperCase()==="A"){var r=f.trim(s.innerHTML);if(r){j.value=r;n.hide()}}});f.bind("citychanged",function(r){d&&d.render(r)});var l=f.getElementByClassName(f.getClass("jsquerybtn"));f.on(l,"click",function(t){var s=encodeURIComponent(c.value);var r=encodeURIComponent(j.value);l.href="http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_bsc_search&toCity="+s+"&q="+r+"&"+e.data.QHFP});var k=f.getElementByClassName(f.getClass("jsquerymore"));f.on(k,"click",function(t){var s=encodeURIComponent(c.value);var r=encodeURIComponent(j.value);k.href="http://tuan.hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_tuan_bsc_moreroom&toCity="+s+"&q="+r+"&"+e.data.QHFP});e.dispose=function(){if(!p){if(n.onsuccess){n.onsuccess=null}if(n.onerror){n.onerror=null}if(d.onsuccess){d.onsuccess=null}if(d.onerror){d.onerror=null}}f.unbind(document,"click",g);f.unbind(window,"blur",b)}})});';   // js字串，不含<script标签
      private static $uiList = 'btn,input';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
