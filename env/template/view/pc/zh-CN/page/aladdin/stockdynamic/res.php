<?php 
  class CssJs_Util_stockdynamic
   {
      private static $cssStr = '.op-sotckdynamic{color:#666;}.op-stockdynamic-tabs-nav:after{display:block;height:0;content:"";clear:both;visibility:hidden;}.op-stockdynamic-tabs-nav{height:27px;border-top:1px solid #d9d9d9;background-color:#fafafa;*zoom:1;}.op-stockdynamic-tabs-nav li,.op-stockdynamic-tabs-nav a{color:#666;}.op-stockdynamic-tabs-nav li{float:left;_display:inline;position:relative;_top:1px;height:25px;line-height:27px;text-align:center;border-style:solid;border-width:0 1px 2px 1px;border-color:transparent;_border-color:#d9d9d9 #fafafa #fafafa;list-style:none;cursor:pointer;white-space:nowrap;overflow:hidden;}.op-stockdynamic-tabs-nav a{text-decoration:none;}.op-stockdynamic-tabs-nav .op-stockdynamic-tabs-nav-sep{height:16px;width:0;padding:0;margin-top:6px;border-style:solid;border-width:0 1px 0;border-color:transparent #fff transparent #dedede;}.op-stockdynamic-tabs-nav .op-stockdynamic-tabs-nav-selected{top:-1px;padding-top:0;border-color:#fff #e4e4e4 #2c99ff #dedede;background-color:#fff;color:#000;cursor:default;}.op-stockdynamic-tabs-nav-one .op-stockdynamic-tabs-nav-selected{padding-bottom:0;_top:0;border-color:transparent;_border-color:#d9d9d9 #fafafa #fafafa;background-color:transparent;_background-color:#fafafa;color:#666;}.op-stockdynamic-tr{text-align:right;}.op-stockdynamic-fl{float:left;}.op-stockdynamic-fr{float:right;}.op-stockdynamic-nounderline{text-decoration:none;}.op-stockdynamic-top,.op-stockdynamic-middle,.op-stockdynamic-bottom{position:relative;zoom:1;}.op-stockdynamic-top{*position:relative;*z-index:2;}.op-stockdynamic-top-left{*position:relative;*z-index:2;}.op-stockdynamic-cur{height:34px;line-height:34px;*margin-top:0;}.op-stockdynamic-cur-num{font-size:30px;}.op-stockdynamic-cur-info{font-size:22px;position:relative;top:-2px;margin-right:5px;}.op-stockdynamic-cur-status-icon{position:relative;top:-2px;*top:-5px;display:inline-block;width:17px;height:16px;background:url(http://www.baidu.com/aladdin/img/stockdynamic/arrow.png) no-repeat;}.op-stockdynamic-cur-status-red-up{background-position:0 0;}.op-stockdynamic-cur-status-red-down{background-position:0 -25px;}.op-stockdynamic-cur-status-green-up{background-position:0 -51px;}.op-stockdynamic-cur-status-green-down{background-position:0 -77px;}.op-stockdynamic-cur-tip{position:relative;top:-3px;font-size:12px;color:#666;font-weight:normal;display:inline-block;border:1px solid #d9d9d9;height:20px;line-height:20px;padding:0 4px;text-decoration:none;zoom:1;cursor:pointer;}.op-stockdynamic-cur-tip-text{display:none;position:absolute;width:178px;top:21px;left:0;padding:10px 0 0;background:#fff;z-index:2;cursor:default;font-size:13px;}.op-stockdynamic-cur-tip-text-inner{border:1px solid #d9d9d9;padding:10px;display:inline-block;position:relative;-webkit-box-shadow:2px 2px 2px rgba(0,0,0,0.1);-moz-box-shadow:2px 2px 2px rgba(0,0,0,0.1);-o-box-shadow:2px 2px 2px rgba(0,0,0,0.1);box-shadow:2px 2px 2px rgba(0,0,0,0.1);}.op-stockdynamic-cur-tip-text i{position:absolute;top:-10px;left:20px;}.op-stockdynamic-top-right{position:absolute;right:0;bottom:0;font-size:12px;}.op-stockdynamic-pan{text-align:right;}.op-stockdynamic-pan a{color:#666;}.op-stockdynamic-middle-right{position:absolute;right:0;top:0;width:116px;font-size:12px;}.op-stockdynamic-content{zoom:1;position:relative;width:300px;font-size:12px;color:#666;height:130px;}.op-stockdynamic-map-x{position:absolute;right:0;bottom:0;width:358px;height:20px;}.op-stockdynamic-map-y{position:absolute;left:0;top:4px;height:106px;white-space:nowrap;text-align:left;}.op-stockdynamic-map{position:absolute;right:0;top:4px;width:358px;height:106px;z-index:1;cursor:pointer;background:#fff;}.op-stockdynamic-map-canvas-mask{position:absolute;top:0;left:0;}.op-stockdynamic-map-tip{position:absolute;top:0;background:#fff;min-width:108px;*width:128px;width:128px\\9;padding:8px;border:1px solid #e3e3e3;line-height:20px;z-index:1;display:none;-webkit-box-shadow:2px 2px 2px rgba(0,0,0,0.1);-moz-box-shadow:2px 2px 2px rgba(0,0,0,0.1);-o-box-shadow:2px 2px 2px rgba(0,0,0,0.1);box-shadow:2px 2px 2px rgba(0,0,0,0.1);}.op-stockdynamic-map-a{color:#666;text-decoration:none;}.op-stockdynamic-map-tip dt{margin-bottom:5px;}.op-stockdynamic-map-tip dd{height:20px;vertical-align:middle;}.op-stockdynamic-map-tip-name{float:left;}.op-stockdynamic-map-tip-value{float:right;display:inline-block;text-align:right;_vertical-align:baseline;_zoom:1;}.op-stockdynamic-map-x-div{display:inline-block;}.op-stockdynamic-content i{font-style:normal;}.op-stockdynamic-info{margin-top:-4px;margin-top:-2px;}.op-stockdynamic-info li{height:24px;vertical-align:middle;}.op-stockdynamic-info-name{float:left;}.op-stockdynamic-info-value{float:right;display:inline-block;text-align:right;*vertical-align:baseline;*zoom:1;*line-height:14px;}.op-stockdynamic-bottom-left{width:418px;}.op-stockdynamic-bottom-right{position:absolute;right:0;top:0;width:132px;}.op-stockdynamic-more{*position:relative;*right:-10px;}.op-stockdynamic-map-x-char{font-size:12px;*font-size:11px;display:inline-block;-webkit-transform:scale(0.833);-moz-transform:scale(0.833);}.op-stockdynamic-map-tag,.op-stockdynamic-map-y-char{font-size:12px;*font-size:10px;display:inline-block;vertical-align:middle;-webkit-transform:scale(0.917);-webkit-transform-origin:0;-moz-transform:scale(0.917);-moz-transform-origin:left center;}.op-stockdynamic-map-tag{position:absolute;top:105px;background-color:#bdc1c7;padding:0 5px;height:20px;line-height:20px;white-space:nowrap;color:#fff;display:none;}';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("stockdynamic",function(){A.setup(function(){var r=this,m=true,F=r.find(".op-stockdynamic-map-canvas"),c=r.find(".op-stockdynamic-tabs-nav").get(0),e=r.find(".op-stockdynamic-cur"),d=r.find(".op-stockdynamic-cur-tip"),z=c.getElementsByTagName("li"),v=r.find(".op-stockdynamic-content"),n=r.find(".op-stockdynamic-map"),g=r.find(".op-stockdynamic-map-canvas-mask"),b=r.find(".op-stockdynamic-map-tip"),l=r.find(".op-stockdynamic-map-tag"),G=r.find(".op-stockdynamic-map-x"),q=r.find(".op-stockdynamic-map-y"),k=356,u=106,y=9,E=5,j=0;var C=false;x();D(0,r.data.tab0);z[0].loaded=true;function x(){for(var h=0;h<z.length;h++){if($(z[h]).hasClass("op-stockdynamic-tab-cur")){j=h}(function(w){$(z[h]).on("click",function(H){if(j!==w){v[j].style.display="none";v[w].style.display="";$(z[j]).removeClass("op-stockdynamic-tabs-nav-selected");$(this).addClass("op-stockdynamic-tabs-nav-selected");if(e&&e.length>1){e.eq(j).length&&e.eq(j).css("display","none");d.eq(j).length&&d.eq(j).css("display","none");e.eq(w).length&&e.eq(w).css("display","inline-block");d.eq(w).length&&d.eq(w).css("display","inline-block")}j=w}if(!this.loaded){a(w,$.trim(this.getAttribute("data-tabid")),$.trim(this.getAttribute("data-resourceid")));this.loaded=true}})})(h)}}function a(w,h,H){$.ajax({url:"http://opendata.baidu.com/api.php?resource_id="+H+"&query="+encodeURIComponent(r.data.code)+"&co=tab"+(h==2?"":("[id="+h+"]")),dataType:"jsonp",success:function(I){if(C){return}if(I&&I.status==="0"&&I.data&&I.data[0]){I=h==2?I.data[0].tab:I.data[0].tab[0];D(w,I)}},scriptCharset:"gbk",jsonp:"cb"})}function D(H,J){var w=F[H];var h=g[H];var I=!!document.createElement("canvas").getContext;if(!I){A.use("canvas",function(){A.ui.canvas.init([w,h]);i(H,J)})}else{i(H,J)}}function i(af,at){var Q=v[af];var ad=n[af];var O=F[af];var ao=g[af];var J=b[af];var am=l[af];var V=G[af];var ah=q[af];var Z=at.cx.o;var Y=at.cy.o;var ac=at.points;var aa=at.poptitle;var ag=at.pop.o;at.p=$.trim(at.p);at.p=at.p.replace(/\\;$/,"");var ak=at.p.split(";");var al=at.shoupan;var H=k/(ac-1);var h=u/(Y.length-1);var an=Y[0];var W=Y[Y.length-1];p(Z,V,Y,ah,Q,af);var X=O.getContext("2d");X.clearRect(0,0,O.width,O.height);X.beginPath();for(var ar=0;ar<Y.length;ar++){var R=Math.round(h*ar)+0.5;R=R>u?u-0.5:R;X.moveTo(0,R);X.lineTo(k,R)}X.strokeStyle="#ebebeb";X.stroke();X.closePath();if(al){var ab=Math.floor(u*(an-(al*1))/(an-W));X.beginPath();X.moveTo(0,ab+0.5);X.lineTo(k,ab+0.5);X.strokeStyle="#67bf67";X.stroke();X.closePath()}X.beginPath();var aq=[];var N="";var L=[];for(var ar=0,ap=ak.length;ar<ap;ar++){var T=ak[ar].split(",");var aj=$.trim(T[0]||"");var ai=$.trim(T[1]||"");var K=$.trim(T[2]||"");if(K){N=K}else{K=N}var U=[];U.push($.trim(T[3]||""));U.push($.trim(T[4]||""));U.push($.trim(T[5]||""));L.push({x:aj,y:ai,dt:K,dd:U})}ak=L;for(var ar=0,ap=ak.length;ar<ap;ar++){var w=ak[ar]["y"];var au=u*(an-(w*1))/(an-W);var P=Math.floor(ar*H);aq.push({p:ak[ar],x:P});var M=Math.floor(au);var ae=P+0.5;var S=M+0.5;P=ae>k?P-0.5:ae;M=S>u?M-0.5:S;if(ar==0){X.moveTo(P,M)}else{X.lineTo(P,M)}}X.strokeStyle="#006aff";X.stroke();X.closePath();var I=ao.getContext("2d");I.strokeStyle="#bdc1c7";var av=null;$(ad).on("mousemove",function(az){var aw=f(ad);var ay={x:(az.pageX||(az.clientX+document.documentElement.scrollLeft))-aw.left,y:(az.pageY||(az.clientY+document.documentElement.scrollTop))-aw.top};var ax=s(ay.x,aq);if((av===null||ax.x!==av)&&ay.x>=aq[0]["x"]&&ay.x<=aq[aq.length-1]["x"]){I.clearRect(0,0,ao.width,ao.height);I.beginPath();var aA=ax.x+0.5;aA=aA>k?ax.x-0.5:aA;I.moveTo(aA,0);I.lineTo(aA,u);I.stroke();I.closePath();B(ax,J,am,ag);av=ax.x}});$(ad).on((/msie (\\d+\\.\\d+)/i.test(navigator.userAgent)?(document.documentMode||+RegExp["\\x241"]):undefined)?"mouseleave":"mouseout",function(aw){av=null;I.clearRect(0,0,ao.width,ao.height);J.style.display="none";am.style.display="none"})}function B(h,O,S,R){if(!h.p){return}var P=h.p;var M=h.x;if(M<=k/2){O.style.left="auto";O.style.right="0px"}else{O.style.left="0px";O.style.right="auto"}var w="<dl><dt>"+P.dt+"</dt>";var N=\'<dd><span class="op-stockdynamic-map-tip-name">#{k}</span><span class="op-stockdynamic-map-tip-value" style="color:#{c};">#{v}</span></dd>\';var I="",K,Q="",L="auto";if(Object.prototype.toString.call(R).toLowerCase().slice(8,-1)==="string"){R=[R]}for(var J=0,H=R.length;J<H;J++){I=R[J];K=P.dd[J];if(K){K=K.split(" ");Q=K[0]||"";L=K[1]||"auto"}w+=$.format(N,{k:I,c:L,v:Q})}w+="</dl>";O.innerHTML=w;O.style.display="block";S.innerHTML=P.x;S.style.display="block";S.style.left=M-Math.round(S.offsetWidth/2)+"px"}function s(w,J){var I=null;for(var H=0,h=J.length;H<h;H++){if(I===null||Math.abs(J[H]["x"]-w)<Math.abs(I.x-w)){I=J[H]}}return I}function f(w){var h=0,H=0;while(w!=null){h+=w.offsetLeft;H+=w.offsetTop;w=w.offsetParent}return{left:h,top:H}}function t(I){var H="";for(var w=0,h=I.length;w<h;w++){if(!H||I[w].length>H.length){H=I[w]}}return H.length*E}function p(M,ad,K,I,Y,O){var ac="";var H=k/(M.length-1);var Q=t(K);if(!Q||(Q+"").length>y){Q=y*E}var W=Q+k+2+10;Y.style.width=W+"px";c.style.width=W+"px";var U=W/z.length;for(var ab=0,S;S=z[ab];ab++){S.style.width=U-2+"px"}if(O===0){var X=[];var V=0;for(var aa=0;aa<M.length;aa++){var ae=32;if(aa<M.length-1){var ag=M[aa];var L=M[aa+1];if(ag.indexOf("/")!=-1){ae=ae*2;ag=ag.split("/")[1]}if(L.indexOf("/")!=-1){L=L.split("/")[0]}ag=ag.split(":");L=L.split(":");var P=parseInt(ag[0],10);var w=parseInt(L[0],10);var J=parseInt(ag[1],10);var h=parseInt(L[1],10);V+=((w-P)*60)+(h-J)}X.push({o:M[aa],w:ae,sep:V})}var N=0;var af=0;for(var aa=0,T;o=X[aa];aa++){if(aa==0){N=0;af="0"}else{if(aa==X.length-1){N=k-o.w+2;af="auto;right:0"}else{N=k*X[aa-1].sep/V-o.w/2;af="50%"}}ac+=\'<span style="position:absolute;left:\'+N+\'px;bottom:0;display:block;height:12px;line-height:12px;"><span class="op-stockdynamic-map-x-char">\'+o.o+\'</span><i style="position:absolute;top:-8px;left:\'+af+\';display:inline-block;width:1px;height:4px;overflow:hidden;border:none;border-left:1px solid #ebebeb;">&nbsp;</i></span>\'}}else{ac+=\'<div style="width:\'+(H*M.length)+"px;height:12px;line-height:12px;position:absolute;left:-"+(H/2)+\'px;bottom:0;">\';for(var aa=0;aa<M.length;aa++){ac+=\'<div class="op-stockdynamic-map-x-span" style="position:relative;width:\'+H+\'px;text-align:center;float:left;">\';if(aa==0){ac+=\'<span style="display:inline-block;float:right;text-align:left;width:\'+(H/2)+\'px"><span class="op-stockdynamic-map-x-char">\'+M[aa]+"</span></span>"}else{if(aa==M.length-1){ac+=\'<span style="display:inline-block;float:left;text-align:right;width:\'+(H/2)+\'px"><span class="op-stockdynamic-map-x-char">\'+M[aa]+"</span></span>"}else{ac+=\'<span class="op-stockdynamic-map-x-char">\'+M[aa]+"</span>"}}ac+=\'<i style="position:absolute;top:-8px;left:50%;display:inline-block;width:1px;height:4px;overflow:hidden;border:none;border-left:1px solid #ebebeb;">&nbsp;</i>\';ac+="</div>"}ac+="</div>"}ad.innerHTML=ac;var Z=u/(K.length-1);var R="";R+=\'<div style="height:\'+(Z*K.length)+"px;position:absolute;top:-"+(Z/2)+"px;width:"+Q+\'px;">\';for(var aa=0;aa<K.length;aa++){R+=\'<div class="op-stockdynamic-map-y-span" style="position:relative;height:\'+Z+"px;line-height:"+Z+\'px;">\';R+=\'<span class="op-stockdynamic-map-y-char">\'+K[aa]+"</span>";R+="</div>"}R+="</div>";I.innerHTML=R}if(d.length){d.on("mouseover",function(){$(this).css("borderColor","#389cff").find(".op-stockdynamic-cur-tip-text").css("display","block")});d.on("mouseout",function(){$(this).css("borderColor","#d9d9d9").find(".op-stockdynamic-cur-tip-text").css("display","none")})}this.dispose=function(){if(!C){C=true}}})});';   // js字串，不含<script标签
      private static $uiList = '';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
