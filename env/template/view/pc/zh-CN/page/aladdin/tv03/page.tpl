{%extends 'base.tpl'%} {%block name='content'%}{%$FE_GBVAR.wrapper_prefix%}<style >.op_tv3{margin-top:5px;font-size:13px;width:515px}.op_tv03_curchannel,.op_tv03_curchannel a,.op_tv03_dropdown b,.op_tv03_dragup b,.op_tv03_bar,.op_tv03_channeltitle{background-image:url(http://www.baidu.com/aladdin/img/table/bg.gif)}.op_tv03_subtitle{height:20px;color:#646464;color:#5b5b5b;margin-top:7px;*margin-top:1px}.op_tv03_channeltitle{color:#646464;background-position:0 -162px;background-repeat:repeat-x;height:24px;line-height:24px;margin-top:-4px;*margin-top:-3px;padding-left:4px{%*i*%}}.op_tv03_programs tr td{border-bottom:1px solid #e6e6e6;padding-left:12px;white-space:nowrap;line-height:30px;font-size:13px;font-family:'Arial'}.op_tv03_channel_cont{padding-bottom:6px}.op_tv03_channel_dropable{height:59px;overflow:hidden}.op_tv03_channel_container_full{height:auto;overflow:auto}.op_tv03_channels span{padding-left:4px;margin:5px 14px 0 0;height:24px;line-height:23px;font-size:13px;display:inline-block}.op_tv03_channels .op_tv03_curchannel{background-position:0 -7px}.op_tv03_ch{%*i*%}annels a{display:inline-block;padding-right:4px;cursor:pointer;color:#00C}.op_tv03_channels .op_tv03_curchannel a{background-position:right -7px;color:#000}.op_tv03_bar{font-size:1px;height:4px;border:0;margin:0;background-repeat:repeat-x}.op_tv03_drop,.op_tv03_higher_drop{border-top:1px solid #e6e6e6;position:relative}.op_tv03_drop{height:6px}.op_tv03_heigher_drop{height:12px}.op_tv03_drop a{display:inline-block;height:17px;line-height:17px;padding:0 8px;border:1px solid #e6e6e6;border-top-colo{%*i*%}r:#fff;cursor:pointer;float:right;position:absolute;top:-1px;right:14px}.op_tv03_dropdown,.op_tv03_dragup{text-decoration:none;color:#77C;outline:0;font-size:12px}.op_tv03_dropdown span,.op_tv03_dragup span{float:left}.op_tv03_dropdown a,.op_tv03_dragup a{color:#77C}.op_tv03_dropdown b,.op_tv03_dragup b{display:inline-block;width:12px;height:14px;margin-right:8px;*margin-top:-1px;float:left}.op_tv03_dropdown b{background-position:0 -101px}.op_tv03_dragup b{background-position:-12px -101px}.op_tv{%*i*%}03_programs{width:100%;border-collapse:collapse}.op_tv03_programs tr td.op_tv03_morelink_td{height:18px;line-height:18px;border:0;padding:5px 0 0}.op_tv03_morelink_td a{text-decoration:underline;float:left}</style> {%fe_fn_title_prefix%}{%fe_fn_title title="{%$tplData.title%}" url="{%$tplData.url%}"%}{%fe_fn_title_suffix title="{%$tplData.title%}" url="{%$tplData.url%}"%}<div class="op_tv3"><div class="op_tv03_channel_wrapper">{%if $tplData.subtitle!=""%}<div class="op_tv03_subtitle">{%$tplData.subtitle|highlight:0%}</div>{%/if%}<div class="op_tv03_channel_container op_tv03_channel_cont"><div class="op_tv03_bar"></div><div class="op_tv03_channels">{%$loop_maxcount=count($tplData.channel)%}{%for $op_loop_count=0 to 40%}{%if $op_loop_count<$loop_maxcount%} <span class="op_tv03_channel" data-cid="{%$tplData.channel[$op_loop_count]['id']%}"><a class="op_tv03_dl OP_LOG_BTN">{%$tplData.channel[$op_loop_count]['name']%}</a></span>{%else%}{%break%}{%/if%}{%/for%}</div></div><div class="op_tv03_drop"><a class="op_tv03_dropdown op_tv03_dl OP_LOG_BTN op_tv03_channel_drop_btn" style="display:none"><b></b><span>{%$tplData.showallchannel[0]['open']%}</span></a></div><div style="clear:both"></div></div><div class="op_tv03_channeltitle"></div><div class="op_tv03_tables" style="margin-top:-4px;*margin-top:-5px;"></div><table id="op_tv03_programs" >{%$loop_maxcount=count($tplData.program)%}{%for $op_loop_count=0 to 299%}{%if $op_loop_count<$loop_maxcount%} <tr class="op_tv03_t{%$tplData.program[$op_loop_count]['channel']%}"><td style="width:55%"><span style="">{%$tplData.program[$op_loop_count]['date']%}</span><span style="margin-left:27px">{%$tplData.program[$op_loop_count]['day']%}</span><span style="margin-left:14px">{%$tplData.program[$op_loop_count]['time']%}</span><span style="margin-left:22px;">{%$tplData.program[$op_loop_count]['title']|highlight:0%}</span></td><td style="width:45%">{%if $tplData.program[$op_loop_count]['name']!=""%}<span>{%if $tplData.program[$op_loop_count]['link']!=""%}<a href="{%$tplData.program[$op_loop_count]['link']%}" target="_blank" class="op_tv03_dl OP_LOG_BTN">{%/if%}{%$tplData.program[$op_loop_count]['name']|highlight:0%}{%if $tplData.program[$op_loop_count]['link']!=""%}</a>{%/if%}</span>{%/if%}</td></tr>{%else%}{%break%}{%/if%}{%/for%}</table></div><div style="font-size:13px;">{%fe_fn_showurl showurl="{%$tplData.showurl%}" date="{%$tplData.date%}" showlamp="{%$tplData.showlamp%}"%}</div></div>{%$FE_GBVAR.wrapper_suffix%}<script >var op_tv03_curchannel = '{%if $tplData.curchannel!=""%}{%$tplData.curchannel%}{%/if%}', op_tv03_p_open = '{%$tplData.showmore[0]['open']%}', op_tv03_p_close = '{%$tplData.showmore[0]['close']%}', op_tv03_c_open = '{%$tplData.showallchannel[0]['open']%}', op_tv03_c_close = '{%$tplData.showallchannel[0]['close']%}';
</script><script >A.init(function() {var T = A.baidu, _this = this;var defaultTabIndex = window.op_tv03_curchannel || 1;var curtab, curtabIndex, curtabNext;var tabClz = 'op_tv03_channel' , curtabClz = 'op_tv03_curchannel' , curtabnextClz = 'op_tv03_curchannel_next';var tabs = T.Q(tabClz);var channelWrapper = _this.qq('op_tv03_channel_wrapper');if (tabs.length == 1) {T.dom.hide(channelWrapper);}var dropBtn = {open: {html: '<b></b><span>' + op_tv03_c_open + '</span>', clz: 'op_tv03_dropdown'},clos{%*i*%}e: {html: '<b></b><span>' + op_tv03_c_close + '</span>', clz: 'op_tv03_dragup'}};var moreBtn = {open: {html: '<b></b><a href="javascript:;">' + op_tv03_p_open + '<a>', clz: 'op_tv03_dropdown'},close: {html: '<b></b><a href="javascript:;">' + op_tv03_p_close + '</a>', clz: 'op_tv03_dragup'}};var channelDropBtn = _this.qq('op_tv03_channel_drop_btn');setTimeout(function() {var channelContainer = _this.qq('op_tv03_channel_cont');var channelDropBtn = _this.qq('op_tv03_channel_drop_btn');var p = chann{%*i*%}elDropBtn.parentNode;var dropClz = 'op_tv03_drop' , heigherDropClz = 'op_tv03_heigher_drop';var h = 72;if (channelContainer.scrollHeight > h) {T.dom.addClass(channelContainer, 'op_tv03_channel_dropable');T.dom.show(channelDropBtn);T.dom.addClass(p, heigherDropClz);}else {T.dom.hide(channelDropBtn);T.dom.addClass(p, dropClz);}},1);T.event.on(channelDropBtn, 'click' , function() {var btn = this;var c = _this.qq('op_tv03_channel_container');var clz = 'op_tv03_channel_container' , fClz = clz + '_ful{%*i*%}l';if (T.dom.hasClass(c, clz)) {T.dom.removeClass(c, clz);T.dom.addClass(c, fClz);btn.className = dropBtn.close.clz;btn.innerHTML = dropBtn.close.html;}else {T.dom.removeClass(c, fClz);T.dom.addClass(c, clz);btn.className = dropBtn.open.clz;btn.innerHTML = dropBtn.open.html;}});function switchTab(tabIndex) {if (curtabIndex && curtabIndex == tabIndex) {return false;}if (curtab) {T.dom.removeClass(curtab.tab, curtabClz);T.dom.hide(curtab.table);}else {}if (curtabNext) {T.dom.removeClass(curtabNext{%*i*%}.tab, curtabnextClz);}var channeltitle = _this.qq('op_tv03_channeltitle');T.array.each(tabEntities, function(tabEntity , i) {var t = tabEntity;var nexttab = tabEntities[i + 1];if (tabEntity.id == tabIndex) {T.dom.addClass(tabEntity.tab, curtabClz);T.dom.show(tabEntity.table);channeltitle.innerHTML = '<b>' + tabEntity.text + '</b>';curtabIndex = tabEntity.id;curtab = tabEntity;if (nexttab) {T.dom.addClass(nexttab.tab, curtabnextClz);curtabNext = nexttab;}}});}var initRowCount = 5;var tabEntities {%*i*%}= [];T.array.each(tabs, function(tab , i) {var ce = function(name) {if (!name) return false;return document.createElement(name);};var toggleRows = function(rows , callback) {if (!rows) return false;T.array.each(rows, function(r , i) {if (!r.style.visibility || r.style.visibility == 'hidden') {T.dom.show(r);r.style.visibility = 'visible';}else {T.dom.hide(r);r.style.visibility = 'hidden';}});if (callback) {callback();}};var tabid = tab.getAttribute('data-cid');var rows = T.Q('op_tv03_t' + tabid);{%*i*%}if (!tabid || !rows) return false;var table = ce('TABLE');var tbody = ce('TBODY');table.appendChild(tbody);T.dom.addClass(table, 'op_tv03_programs');var moreRows = [];T.array.each(rows, function(row , i) {tbody.appendChild(row);if (i > initRowCount - 1) {moreRows.push(row);T.dom.hide(row);}});if (moreRows.length > 0) {var td = ce('td');T.dom.addClass(td, 'op_tv03_morelink_td');td.colSpan = 2;var tr = ce('tr');var span = ce('span');span.innerHTML = moreBtn.open.html;T.dom.addClass(span, moreBtn.o{%*i*%}pen.clz);td.appendChild(span);tr.appendChild(td);tbody.appendChild(tr);T.event.on(span, 'click' , function() {var me = span;toggleRows(moreRows, function() {if (me.className == moreBtn.open.clz) {me.className = moreBtn.close.clz;me.innerHTML = moreBtn.close.html;}else {me.className = moreBtn.open.clz;me.innerHTML = moreBtn.open.html;}});});}var container = _this.qq('op_tv03_tables');T.dom.hide(table);container.appendChild(table);var tabEntity = {id: tabid,tab: tab,table: table,text: tab.getEleme{%*i*%}ntsByTagName('a')[0].innerHTML,equals: function(o) {return o.id === this.id;},morerows: moreRows};tabEntities.push(tabEntity);T.event.on(tabEntity.tab, 'click' , function() {switchTab(tabEntity.id);});});switchTab(defaultTabIndex);});</script>{%/block%}