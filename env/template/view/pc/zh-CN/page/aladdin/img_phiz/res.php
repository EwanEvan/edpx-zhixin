<?php 
  class CssJs_Util_img_phiz
   {
      private static $cssStr = '.op-img-phiz-menu{overflow:hidden;display:block;}.op-img-phiz-menu a{color:blue;}.op-img-phiz-menu-label{float:left;font-size:12px;color:#999;}.op-img-phiz-item-con{height:75px;overflow:hidden;position:relative;}.op-img-phiz-cell-bar{position:absolute;bottom:0;_bottom:-1px;display:none;background:rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=\'#99000000\',EndColorStr=\'#99000000\');width:100%;color:#fff;font-size:12px;padding:2px 0;height:16px;overflow:hidden;}.op-img-phiz-cell-bar span{margin:0 6px;}.op-img-phiz-cell-bar .op-img-phiz-cell-down{float:right;}.op-img-phiz-cell-bar .op-img-phiz-cell-down a{display:block;width:12px;height:12px;background:url(\'http://www.baidu.com/aladdin/img/img_phiz/down.gif\') no-repeat left top;margin-top:2px;text-indent:-99px;overflow:hidden;}.op-img-phiz-cell-bar .op-img-phiz-cell-down a:hover{background-position:right top;}.op-img-phiz-cell-bar .op-img-phiz-cell-num{float:left;}.op-img-phiz-cell-hover .op-img-phiz-cell-bar{display:block;}.op-img-phiz-cell-hover .op-img-phiz-cell-bar-disp-0{display:none;}.op-img-phiz-con-menu .op-img-phiz-sub-display{display:block;}.op-img-phiz-item-con a:hover img{opacity:.8;}.op-img-phiz-main-nemu-con{height:24px;overflow:hidden;}.op-img-phiz-sub-menu-con{background-color:#fafafa;border-width:1px 0;border-color:#ebebeb;border-style:solid;height:24px;overflow:hidden;padding-top:8px;display:none;}.op-img-phiz-pic-more{text-align:center;}.op-img-phiz-pic-more a{font-size:12px;text-decoration:none;}.op-img-phiz-pic-more a:hover{text-decoration:underline;}a.op-img-phiz-tag-more{display:none;text-decoration:underline;}.op-img-phiz-text{text-decoration:none;display:inline-block;height:12px;padding:2px;text-align:center;vertical-align:text-bottom;font-size:12px;line-height:12px;font-style:normal;color:#fff;overflow:hidden;}.op-img-phiz-text-mult{padding-left:5px;padding-right:5px;}.op-img-phiz-menu .op-img-phiz-text-public{color:#fff;background-color:#2b99ff;}';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("img_phiz",function(){A.setup(function(){var x=this.data.query;var z=this.data.key;var c=this.find(".op-img-phiz-menu");var q=this.find(".op-img-phiz-pic-more-btn")[0];var k="http://image.baidu.com/i?tn=resultjsonaladdin&ie=utf-8&oe=utf-8&pn=0&rn=30&z=0&width=&height=&fr=ala_ava_json";var v=this.data.host+"/i?ct=503316480&tn=baiduimagedetail&statnum=emotion&ipn=d&z=0&width=0&height=0&ie=utf-8&in=3354&cl=2&lm=-1&st=&rn=1&di=&ln=2000&fmq=1378374347070_R&ic=&s=&se=&sme=0&tab=&face=&is=&istype=&ist=&jit=&ala=3&fr=ala_ava2&ori_query="+x;var d=this.data.host+"/i?ct=201326592&cl=2&nc=1&lm=-1&st=-1&tn=baiduimage&istype=2&pv=&z=0&ie=utf-8&ala=3&fr=ala_ava2&ori_query="+x;var g=/(phiz\\-cell\\-bar\\-disp\\-)\\d+/;var i=/(&word\\=).*$/i;var j={selected:"op-img-phiz-text-public",cellHover:"op-img-phiz-cell-hover"};var h={init:function(){this.items=[];this.curr=0;var F=this;var D=this.$elem.parentNode;var C=$(".op-img-phiz-menu-item",this.$elem);this.label=$(".op-img-phiz-menu-label",D)[0];this.$more=$(".op-img-phiz-tag-more",D)[0];this._clicks=[];this._onClick=function(K){var G=this;K.preventDefault();if(F.getItem(F.curr)===this){return}F.switchTo(G.index);var J=F._clicks;for(var I=0,H=F._clicks.length;I<H;I++){if("function"===typeof J[I]){J[I].call(F)}}};if(C[0]){this.$sampleItem=C[0]&&C[0].cloneNode(true)}else{this.$sampleItem=$(\'<a href="#" hidefocus="hidefocus" class="op-img-phiz-menu-item op-img-phiz-text op-img-phiz-text-mult c-gap-right-small c-gap-bottom" val=""></a>\').get(0)}$(this.$sampleItem).removeClass(j.selected);for(var E=0,B=C.length;E<B;E++){this.addItem(C[E])}this.focus(this.curr);if(this.items.length<=1){this.hide()}return this},setLabel:function(B){this.label.innerHTML=(B+":")},hasSubTag:function(){var B=this.getItem(this.curr);if($(B).attr("sub")==="no"){return false}else{return true}},click:function(B){this._clicks.push(B);return this},addItem:function(B){$(B).on("click",this._onClick);B.index=this.items.length;this.items.push(B);if($(B).hasClass(j.selected)){this.curr=B.index}return this},appendItem:function(B){this.$elem.appendChild(B);this.addItem(B)},switchTo:function(B){if(this.curr>=0){this.blur(this.curr)}this.focus(B);this.curr=B;return this},focus:function(B){var C=this.getItem(B);if(C){$(C).addClass(j.selected)}return C},blur:function(B){var C=this.getItem(B);C&&$(C).removeClass(j.selected);return C},getItem:function(B){B=B||0;return this.items[B]||null},getValue:function(){var B=this.getItem(this.curr);return B?($(B).attr("val")):""},getItemLabel:function(){var B=this.getItem(this.curr);var C=B.innerHTML;if(C==="全部"){C=this.data.query}return C},clear:function(){var B;while(this.items.length>0){B=this.items.pop();$(B).unbind("click",this._onClick);$(B).remove()}this.$more.style.display="none";return this},show:function(){this.$elem.parentNode.style.display="block";return this},hide:function(){this.$elem.parentNode.style.display="none";return this},findOverFlowPos:function(C){var D=this.items;var G=D[0].offsetTop,F=0;for(var E=0,B=D.length;E<B;E++){F=D[E].offsetTop;if(F>G){G=F;if(--C===0){return E-1}}}return -1}};var b=null,w;var f=function(B){if(b&&w===this){clearTimeout(b)}$(this).addClass(j.cellHover)};var y=function(B){w=this;b=setTimeout(function(){$(w).removeClass(j.cellHover)},0)};var a={init:function(B){this.$elem=B;this.$link=$(".op-img-phiz-item",B,"A")[0];this.$img=$(".op-img-phiz",B,"IMG")[0];this.$down=$(".op-img-phiz-cell-down",B)[0].getElementsByTagName("a")[0];this.$num=$(".op-img-phiz-cell-num",B)[0];this.$bar=this.$num.parentNode;B.onmouseover=f;B.onmouseout=y;return this},hover:function(B){this._hovers.push(B)},render:function(B){this.$link.href=d+"&is="+B.ImageSetSign+"&pn=0&word="+encodeURIComponent(z+" "+(B.title||B.tag));this.$img.src=B.thumbURL;this.$down.href=B.dowloadURL;this.$num.innerHTML=B.subImgNum?B.subImgNum+"张":"";this.$bar.className=this.$bar.className.replace(g,"$1"+B.subImgNum)}};var n=function(F,B){var G=F.findOverFlowPos(B);if(G===-1){F.$more.style.display="none";return}var D=F.getItem(G+1);var C=F.getItem(G);if(D.innerHTML.length<=2){D=F.getItem(G);C=F.getItem(G-1)}var E=D;$(F.$more).insertBefore(D);F.$more.style.display="inline-block";if(F.$more.offsetTop!=C.offsetTop){$(F.$more).remove();E=C;$(F.$more).insertBefore(C);F.$more.style.display="inline-block"}if(F.$more.offsetTop==E.offsetTop){$(E).remove()}};var t={init:function(E){var B=$(".op-img-phiz-item-con",E);this.cells=[];for(var D=0,C=B.length;D<C;D++){this.addCell($.extend({},a).init(B[D]))}},addCell:function(B){this.cells.push(B)},render:function(D){D=D.imgs;for(var C=0,B=this.cells.length;C<B;C++){this.cells[C].render(D[C])}}};var o=function(C,D){var B=k+"&"+C;$.get(B,D,"jsonp")};var m=function(C){var B=[];C=C||{};var D=/^(?:string|boolean|number)/i;for(var E in C){if(C.hasOwnProperty(E)&&D.test(typeof C[E])){B.push(E+"="+C[E])}}return B.join("&")};var s=function(C){var B=u.getValue();var D=r.getValue();var E={pn:C||0,word:encodeURIComponent(D?B+" "+D:B)};return m(E)};var l=function(){var C=this;if(C===u){r.clear()}var B=s();o(B,function(G){if(B!=s()){return}t.render(G);if(C===r){return}if(!u.hasSubTag()){r.hide();return}var F=G.tagTwoList;if(F.length>0){r.show()}else{r.hide();return}F[0].selected=true;for(var E=0,D=F.length;E<D;E++){e(F[E],r)}r.setLabel(u.getItemLabel().substring(0,2));r.$more.href=r.$more.href.replace(i,"$1"+encodeURIComponent(u.getValue()));n(r,1)})};var e=function(C,E){var B=E.$sampleItem.cloneNode(true);B.innerHTML=C.name;var D="";if(C.name!=="全部"){D=C.name}$(B).attr("val",D);E.appendItem(B);if(C.selected){E.switchTo(E.items.length-1)}else{E.blur(E.items.length-1)}};var p=function(){q.href=q.href.replace(i,"$1"+encodeURIComponent(u.getValue()+" "+r.getValue()))};var u=$.extend({$elem:c[0]},h).init().click(l).click(p);var r=$.extend({$elem:c[1]},h).init().click(l).click(p);t.init($(".op-img-phiz-con")[0]);n(u,1);n(r,1);this.dispose=function(){clearTimeout(b)}})});';   // js字串，不含<script标签
      private static $uiList = '';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
