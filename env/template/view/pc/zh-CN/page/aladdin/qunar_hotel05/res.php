<?php 
  class CssJs_Util_qunar_hotel05
   {
      private static $cssStr = '';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("qunar_hotel05",function(){A.setup(function(){var g=this;var i="http://www.baidu.com/qunarui/hotel";var B=false;var l=(function(P){var N="op-"+P.data.TPL_NAME+"-";var O={};var Q;return Q={isIE6:function(){return/msie 6/i.test(navigator.userAgent)},isIE7:function(){return/msie 7/i.test(navigator.userAgent)},getClass:function(R){return(N+R)},getTags:function(S,R){if(!S){return[]}return S.getElementsByTagName(R)||[]},getElementByClassName:function(R,S){if(S){return $(S).find("."+R)[0]}else{return $("."+R)[0]}},getChildrens:function(R){return R&&R.childNodes||[]},hasClass:function(S,R){return $(S).hasClass(R)},addClass:function(S,R){$(S).addClass(R)},removeClass:function(S,R){$(S).removeClass(R)},removeAllClass:function(R){R.className=""},getOffset:function(S){var R=S.parentNode;var T=$(R).offset();return T},on:function(S,R,T){$(S).bind(R,T)},unbind:function(S,R,T){$(S).unbind(R,T)},jsonToQuery:function(R){var T=[];var S=null;$.each(R,function(U,V){if(/[^\\x00-\\xFF]/.test(V)){S=encodeURIComponent(V)}else{S=V}T.push(U+"="+S)});return T.join("&")},ajax:function(S,U,T,R){R=R||function(){};$.ajax({type:"POST",url:S,data:l.jsonToQuery(U),success:function(V){T&&T(V)},error:function(V){R(V)}})},jsonp:function(S,V,T,U,R){R=R||function(){};$.ajax({type:"POST",url:S,dataType:"jsonp",jsonp:T||"__jscallback",data:l.jsonToQuery(V),success:function(W){try{U&&U(W)}catch(X){R();return}},error:function(W){R(W)}})},extend:function(R,U,T){var S=null;for(S in U){if(U.hasOwnProperty(S)){R[S]=U[S]}}for(S in T){if(T.hasOwnProperty(S)){R[S]=T[S]}}return R},trim:function(R){return R.replace(/(^\\s*)|(\\s*$)/g,"")},bind:function(R,S){if(!O[R]){O[R]=[]}O[R].push(S)},trigger:function(S){var U=arguments||[];var W=O[S]||[];if(W.length===0){return}var R=[];for(var V=1;V<U.length;V++){R.push(U[V])}for(var T=0;T<W.length;T++){W[T].apply(P,R)}},isObjEmpty:function(T){var S=true;for(var R in T){if(T.hasOwnProperty(R)&&"undefined"!=typeof R){S=false;break}}return S},remove:function(U,T){if(!(U instanceof Array)){return}if(U.length==0){return}var R=[];for(var S=0;S<U.length;S++){if(U[S]==T){continue}else{R.push(U[S])}}return R},isExist:function(T,S){if(!(T instanceof Array)){return}if(T.length==0){return}for(var R=0;R<T.length;R++){if(T[R]==S){return true}}return false},GetZoomFactor:function(){var S=1;if(document.body.getBoundingClientRect){var T=document.body.getBoundingClientRect();var U=T.right-T.left;var R=document.body.offsetWidth;S=Math.round((U/R)*100)/100}return S},toFixed:function(S,U){var R=S;if(!S){return}if(!U){U=0}S*=Math.pow(10,U);var T=parseInt(S);S=T/(Math.pow(10,U));if(S===parseInt(R)){return R+".0"}return S},format:function(R,S){return $.format(R,S)},subByte:function(T,S,R){return $.subByte(T,S,R)}}})(g);function n(N){N=N||{};if(!N.dom||!N.offsetdom){return}this.offsetdom=N.offsetdom;this.display=N.display||"none";this.dom=N.dom;this.url=N.url;this.success=N.success;this.error=N.error;this.cache={};this.params={};if(N.html){N.dom.innerHTML=N.html}if(this.display!=="none"){this.show()}}n.prototype.render=function(){var N=this.getQuerykey();if(this.cache[N]){this._callback(1,this.cache[N])}else{this._getData()}};n.prototype.show=function(P){if(this.dom){var O=this.offsetdom.offsetHeight;if(P){O=2}var N=l.getOffset(this.offsetdom);this.top=N.top+O-1;this.left=N.left;if(l.isIE7()){var Q=l.GetZoomFactor()||0.1;this.top=(N.top/Q)+O-1;this.left=N.left/Q}this.dom.style.top=this.top+"px";this.dom.style.left=this.left+"px";this.display="block"}};n.prototype.hide=function(){if(this.dom){this.dom.style.top="-9999px";this.dom.style.left="-9999px";this.display="none"}};n.prototype.setQueryParams=function(O){O=O||{};if(!O.queryName){return}var N={};N[O.queryName]=l.trim(O.queryKey);this.params=l.extend({},this.params,N)};n.prototype.getQueryParams=function(){return this.params||{}};n.prototype.clearCache=function(){if(this.getCacheSize()>20){this.cache={}}};n.prototype.getCacheSize=function(){var O=0;for(var N in this.cache){if(this.cache.hasOwnProperty(N)){O++}}return O};n.prototype._getData=function(){var N=this;N.onsuccess=function(O){B=true;if(!O){N._callback();return}N._callback(1,O);N.clearCache();N.cache[N.getQuerykey()]=O};N.onerror=function(O){B=true;N._callback(0,O)};l.jsonp(this.url,l.extend({},{_t:new Date().getTime()},this.params),"__jscallback",N.onsuccess,N.onerror)};n.prototype.getQuerykey=function(){var O="";for(var N in this.params){if(this.params.hasOwnProperty(N)){O=O+this.params[N]}}return O};n.prototype._callback=function(N,O){if(!this.dom){return}if(N===1){if(this.success){this.success(O)}}else{if(this.error){this.error(O)}}};var q=l.getElementByClassName(l.getClass("jshotelmore"));var r=(function(Q){var T={};var V=["","国家旅游局评定为一星级","国家旅游局评定为二星级","国家旅游局评定为三星级","国家旅游局评定为四星级","国家旅游局评定为五星级"];var W=l.getElementByClassName(l.getClass("jshotels"));var U=l.getElementByClassName(l.getClass("jsnohotels"));var N=l.getElementByClassName(l.getClass("jsnohotelsfilter"));var O=l.getElementByClassName(l.getClass("jshotelcount"));var S=l.getClass("hide");var P=function(an){var aa=[];var ah,ak=Q.data.TPL_NAME;var af=[\'<div class="c-row op-#{tplname}-hotels op-#{tplname}-hotels#{index}">\',\'<div class="c-span4 op-#{tplname}-hotelimage">\',\'<a target="_blank" href="#{hotelimageurl}"><img class="c-img c-img4" src="#{imageurl}"/></a>\',"</div>",\'<div class="c-span12 op-#{tplname}-hotelintro">\',\'<p class="op-#{tplname}-hoteltitle">\',\'<a title="#{hoteltitlesource}" href="#{hoteltitleurl}" target="_blank">#{title}</a>#{starHtml}#{dangciHtml}\',"</p>","#{addressHtml}","#{reviewHtml}","</div>",\'<div class="c-span4 op-#{tplname}-hotelreview">\',"<p>&nbsp;</p>",\'<p class="op-#{tplname}-hotelscore">#{scoreHtml}</p>\',\'<p><a href="#{reviewurl}" target="_blank">#{reviewcount}</a></p>\',"</div>",\'<div class="c-span4 c-span-last op-#{tplname}-hotellook">\',\'<p class="op-#{tplname}-hotelprice"><b>&yen;#{price}</b>起</p>\',\'<p class="op-#{tplname}-detail"><a class="op-#{tplname}-detailbtn c-btn c-btn-primary c-btn-small OP_LOG_BTN" href="#{hotelbtnurl}" target="_blank">查看详情</a></p>\',"</div>","</div>"].join("");var ad,ag,ac,X,al,Y,Z,ae;var ai,aj;var ab="",ao="",am="";for(ah=0;ah<an.length;ah++){ad=an[ah].hotelseq.lastIndexOf("_");ac="dt-"+an[ah].hotelseq.substring(ad+1);ag=an[ah].hotelseq.substring(0,ad);X="http://hotel.qunar.com/city/"+ag+"/"+ac;if(an[ah].star>0){al=22}else{if(an[ah].dangci){al=26}else{al=32}}Y=l.subByte(an[ah].title,al);Z=l.subByte(an[ah].address,26);ae=l.subByte(an[ah].review,26);if(Y===an[ah].title){Y=an[ah].title;ab=""}else{Y=Y;ab=an[ah].title}if(Z===an[ah].address){Z=an[ah].address;ao=""}else{Z=Z;ao=an[ah].address}if(ae===an[ah].review){ae=an[ah].review;am=""}else{ae=ae;am=an[ah].review}ai=an[ah].score>0?l.toFixed(an[ah].score,1)+"/5分":"";aj=X+"?ex_track=bd_zhixin_hotel_typ_score&"+Q.data.QHFP;aa.push(l.format(af,{tplname:ak,index:ah,hotelimageurl:X+"?ex_track=bd_zhixin_hotel_typ_image&"+Q.data.QHFP,imageurl:an[ah].img,hoteltitleurl:X+"?ex_track=bd_zhixin_hotel_typ_hotelname&"+Q.data.QHFP,title:Y,hoteltitlesource:ab,starHtml:an[ah].star>0?\'<i class="c-icon c-icon-star c-gap-left-small op-\'+ak+"-star"+an[ah].star+\'"  title="\'+V[an[ah].star]+\'"></i>\':"",dangciHtml:(!an[ah].star&&an[ah].dangci)?\'<span class="c-gap-left-small op-\'+ak+\'-hoteldangci" title="\'+("去哪儿网用户评定为"+an[ah].dangci+"酒店")+\'">\'+an[ah].dangci+"</span>":"",addressHtml:an[ah].address?\'<p title="\'+ao+\'">地址：\'+Z+"</p>":"",reviewHtml:an[ah].review?\'<p title="\'+am+\'">评价：\'+ae+"</p>":"",scoreHtml:ai?\'<a href="\'+aj+\'" target="_blank">\'+ai+"</a>":\'<span class="op-\'+ak+\'-hotelnoscore">暂无评分</span>\',reviewurl:X+"/comments.html?ex_track=bd_zhixin_hotel_typ_comment&"+Q.data.QHFP,reviewcount:an[ah].reviewcount>0?an[ah].reviewcount+"条点评":"",price:an[ah].price,hotelbtnurl:X+"?ex_track=bd_zhixin_hotel_typ_viewdetail&"+Q.data.QHFP}))}W.innerHTML=aa.join("");l.addClass(U,S);l.removeClass(W,S)};var R=function(Y){var X=Y&&Y.getFilterNames();O.innerHTML="在0家酒店中";N.innerHTML=\'<span>很抱歉，没有找到与"<em>\'+X.join("|")+\'</em>"相关的酒店</span>\';l.addClass(W,S);l.addClass(q,S);l.removeClass(U,S)};return T={render:function(Y){var X=function(Z){P(Z.hotellinks);if(Z.hotelCount>=4){l.removeClass(q,S)}else{l.addClass(q,S)}O.innerHTML="在"+Z.hotelCount+"家酒店中"};X(Y)},getFilterTip:R}})(g);var h=l.getElementByClassName(l.getClass("city-input"));var E=l.getElementByClassName(l.getClass("hotcity"));var K=l.getElementByClassName(l.getClass("keyword-input"));var j=l.getElementByClassName(l.getClass("hotkey"));var b=l.getElementByClassName(l.getClass("placeholder"));var a=new n({dom:E,offsetdom:h});var t=new n({dom:b,offsetdom:K});if(g.data.HOTQUERY){t.hide()}else{t.show(true)}var M=new n({dom:j,offsetdom:K,url:i+"/sugg.jsp?v=1&queryid="+g.data.QUERYID,success:function(P){if(P&&P.data){M.dom.style.borderWidth="1px";M.dom.innerHTML=P.data.replace(/onmousedown="return searchword\\(.*\\)"/ig,"");var N=l.getElementByClassName("js_cityguide",j);if(N){var O=N.getAttribute("data-url")+"&ex_track=bd_zhixin_hotel_divcityguide&"+g.data.QHFP;N.setAttribute("data-url",O)}}},error:function(N){M.dom.innerHTML="";M.dom.style.borderWidth="0px"}});var y=function(N){a.hide();M.hide();if(!K.value){t.show(true)}};l.on(document,"click",y);var o=function(N){a.hide();M.hide();if(!K.value){t.show(true)}};l.on(window,"blur",o);l.on(h,"click",function(N){M.hide();g._sug&&g._sug.hide();if(a.display==="block"){a.hide()}else{a.show()}N.stopPropagation()});l.on(E,"click",function(P){P.stopPropagation();P.preventDefault();var O=P.target||P.srcElement;if(O.tagName.toUpperCase()==="A"){var N=O.getAttribute("data-city");if(h.value!=N){l.trigger("citychanged",N)}if(N){if(g._sug){g._sug.hide();g._sug.pick(\'<span class="js_cityname" data-cityname="\'+N+\'">\'+N+"</span>")}else{h.value=N}a.hide()}}});l.on(K,"click",function(N){if(M.display==="block"){M.hide()}else{M.setQueryParams({queryName:"city",queryKey:h.value});M.render();M.show();a.hide();t.hide()}N.stopPropagation();N.preventDefault()});l.on(j,"click",function(P){P.preventDefault();var O=P.target||P.srcElement;if(O.tagName.toUpperCase()==="A"){var N=l.trim(O.innerHTML);if(N){t.hide();K.value=N;M.hide()}}});l.on(b,"click",function(O){var N=O.target||O.srcElement;O.stopPropagation();O.preventDefault();if(N.tagName.toUpperCase()==="DIV"){K.focus();t.hide();M.setQueryParams({queryName:"city",queryKey:h.value});M.render();a.hide();M.show()}});l.bind("citychanged",function(N){});var p=l.getElementByClassName(l.getClass("jsquerybtn"));l.on(p,"click",function(Q){var O=encodeURIComponent(h.value);var N=encodeURIComponent(K.value);var P=g._filterManager.getFilterHashurl();p.href="http://hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_typ_search&toCity="+O+"&q="+N+"&"+g.data.QHFP+P});l.on(q,"click",function(R){var P=encodeURIComponent(h.value);var O=encodeURIComponent(K.value);var Q=g._filterManager.getFilterHashurl();var N=$(q).find("a");if(N.size()>0){N[0].href="http://hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_typ_morehotel&toCity="+P+"&q="+O+"&"+g.data.QHFP+Q}});var x=function(V,O,T){var U=this;var Q=V;var R=O||{};var P=T||[];var N=null;var S=null;this.render=function(){};this.hide=function(){Q.style.display="none"};this.show=function(){Q.style.display="block"};this.setData=function(W){R=W};this.getData=function(){return R};this.setFilters=function(W){N=W};this.getFilters=function(){return N||[]};this.setFilterNames=function(W){S=W};this.getFilterNames=function(){return S||[]};this.getListener=function(){return P};this.getWrapElem=function(){return Q};this.setListener=function(W){P=W};this.getType=function(){return this.type};this.bindEvent=function(X){if(X instanceof Array&&X.length>0){for(var W=0;W<X.length;W++){(function(){var Y=W;l.bind("updateFilter"+U.type,function(){X[Y].updateFilter&&X[Y].updateFilter(U)})})()}}}};var c=function(P,Q,N){var O=this;var R=function(){if(!P){return}x.call(O,P,Q,N);if(l.isObjEmpty(Q)||Q==null||typeof Q=="undefined"){O.hide()}O.setFilters([]);O.setFilterNames([])};R();this.addFilters=function(T,S){this.setFilters([]);this.setFilterNames([]);this.getFilters().push(T);this.getFilterNames().push(S);l.trigger("updateFilter"+this.type)};this.removeFilters=function(T,S){if(this.getFilters().length==0){return}this.setFilters(l.remove(this.getFilters(),T));this.setFilterNames(l.remove(this.getFilterNames(),S));l.trigger("updateFilter"+this.type)};this.removeAllFilters=function(){this.setFilters([]);this.setFilterNames([]);l.trigger("updateFilter"+this.type)};this.updateFilter=function(S){this.setFilters(S.getFilters());this.setFilterNames(S.getFilterNames());this.relayout();this.update()}};var H=function(){this.getFilterOption=function(O,N){if(O=="bgSelect"){return new FilterOptionBgSelect(N)}else{if(O=="checkOut"){return new J(N)}else{if(O=="radio"){return new FilterOptionRadio(N)}else{return null}}}}};var J=function(ad){var ab=this;var Z=ad.getWrapElem();var ah=l.getClass("active");var R=l.getClass("hide");var V="c-icon-chevron-unfold";var Y="c-icon-chevron-fold";var W=l.getClass("filtermore-noborder");var O=l.getClass("disabled");var T={type:"filter"+new Date().getTime(),title:"过滤项目：",unlimited:"不限",display:1000,moretitle:"所有",wrapTpl:[\'<div class="op-#{tplname}-find op-#{tplname}-clearfix op-#{tplname}-jsfilterPanel">\',"<span>#{title}</span>",\'<div class="op-#{tplname}-nolimit op-#{tplname}-active op-#{tplname}-jsnolimit"><a href="#" onclick="return false;">#{unlimited}</a></div>\',\'<ul class="op-#{tplname}-jsfilter">\',"#{filterHtml}","</ul>","#{moreHtml}","</div>"].join(""),tpl:\'<li class="#{disabledClass}"><a href="#" onclick="return false;" data-count="#{count}" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>\',moreTpl:\'<div class="op-#{tplname}-filtermore #{hideClass}"><a href="#" title="#{moretitle}" onclick="return false;" class="c-icon c-icon-chevron-unfold op-#{tplname}-jsfiltermore"></a></div>\'};ad.setData(l.extend({},T,ad.getData()));var P=l.getElementByClassName(l.getClass("jsfilterPanel"),Z);var N=l.getElementByClassName(l.getClass("jsnolimit"),Z);var ac=l.getElementByClassName(l.getClass("jsfilter"),Z);var aa=l.getElementByClassName(l.getClass("jsfiltermore"),Z);var S=l.getElementByClassName(l.getClass("jsfiltermorectn"),Z);this.render=function(){var ak=ad.getData();if(!ak||!ak.tplData||!ak.tplData.value||ak.tplData.value.length===0){ad.hide();return}ad.show();var ap=ak.tplData.value,aq=[],ao=[],aj=[],an=ak.tpl,am=ak.moreTpl,al=ak.wrapTpl,ai=0;for(ai=0;ai<ap.length;ai++){aq.push(l.format(an,{disabledClass:ap[ai].count<=0?O:"",count:ap[ai].count||0,filter:ap[ai].name.replace(/%26/g,"&")||"",value:ap[ai].value.replace(/%26/g,"&")||""}))}ad.setFilters([]);Q();ao.push(l.format(am,{tplname:g.data.TPL_NAME,moretitle:"查看"+ak.moretitle,hideClass:ap.length>ak.display?"":R}));aj.push(l.format(al,{title:ak.title,tplname:g.data.TPL_NAME,unlimited:ak.unlimited,filterHtml:aq.join(""),moreHtml:ao.join("")}));P.innerHTML=aj.join("");N=l.getElementByClassName(l.getClass("jsnolimit"),Z);ac=l.getElementByClassName(l.getClass("jsfilter"),Z);aa=l.getElementByClassName(l.getClass("jsfiltermore"),Z);this.registerEvent()};this.hideMore=function(){var ai=ad.getData();S&&l.addClass(S,R);if(aa){l.removeClass(aa,Y);l.addClass(aa,V);aa.setAttribute("title","查看"+ai.moretitle)}};this.showMore=function(){var ai=ad.getData();S&&l.removeClass(S,R);if(aa){l.removeClass(aa,V);l.addClass(aa,Y);aa.setAttribute("title","收起"+ai.moretitle)}};this.update=function(){U();var ak=ad.getFilters()||[];var al=l.getChildrens(ac);var aj="",ai;for(ai=0;ai<al.length;ai++){if(al[ai].nodeType===1){aj=al[ai].childNodes[0].getAttribute("data-filter");if(l.isExist(ak,aj)){l.addClass(al[ai],ah)}else{l.removeClass(al[ai],ah)}}}};var ae=function(ai,al){var aj=-1;for(var ak=0;ak<ai.length;ak++){if(ai[ak].value==al){aj=ak;break}}if(aj!==-1){return ai[aj].count}else{return 0}};this.relayout=function(){var ao=ad.getData();var am=ad.getFilters()||[];var an=(ao&&ao.tplData&&ao.tplData.value)||[];if(an.length===0&&am.length===0){ad.hide();return}var ai=ad.getFilterNames()||[];var al=[];var ak=ao.tpl;var aj=0;if(ao.haslayout){if(am.length>0){for(aj=am.length-1;aj>=0;aj--){al.push(l.format(ak,{disabledClass:"",count:ae(an,am[aj]),filter:ai[aj].replace(/%26/g,"&")||"",value:am[aj].replace(/%26/g,"&")||""}))}}for(aj=0;aj<an.length;aj++){if(!l.isExist(am,an[aj].value)){al.push(l.format(ak,{disabledClass:an[aj].count>0?"":O,count:an[aj].count,filter:an[aj].name.replace(/%26/g,"&")||"",value:an[aj].value.replace(/%26/g,"&")||""}))}}}else{for(aj=0;aj<an.length;aj++){al.push(l.format(ak,{disabledClass:(an[aj].count>0||l.isExist(am,an[aj].value))?"":O,count:an[aj].count,filter:an[aj].name.replace(/%26/g,"&")||"",value:an[aj].value.replace(/%26/g,"&")||""}))}}this.hideMore();if(an.length<=ao.display){aa&&l.addClass(aa,R)}else{aa&&l.removeClass(aa,R)}ac.innerHTML=al.join("");ad.show()};var U=function(){var am=ad.getData();if(ad.getFilters().length==0){var al=(am&&am.tplData&&am.tplData.value)||[];if(al.length===0){ad.hide()}l.addClass(N,ah);var an=l.getChildrens(ac);var ak=false;var aj=null;if(am.haslayout){for(var ai=0;ai<an.length;ai++){if(an[ai].nodeType===1){ak=l.hasClass(an[ai],ah);aj=an[ai].childNodes[0].getAttribute("data-count");if(ak&&aj==0){l.addClass(an[ai],R)}l.removeClass(an[ai],ah)}}}else{for(var ai=0;ai<an.length;ai++){if(an[ai].nodeType===1){l.removeClass(an[ai],ah)}}}}else{l.removeClass(N,ah)}};var ag=function(ao){var an=ao.target||ao.srcElement;if(an.tagName.toUpperCase()==="A"){if(l.hasClass(an.parentNode,O)){return}var ak=an.getAttribute("data-filter");var ai=an.getAttribute("data-name");var al=an.getAttribute("data-count");if(ad.getData().haslayout){if(al<=0){l.addClass(an.parentNode,R)}}else{if(al<=0){l.addClass(an.parentNode,O)}}if(l.isExist(ad.getFilters(),ak)){ad.removeFilters(ak,ai);l.removeClass(an.parentNode,ah)}else{ad.addFilters(ak,ai);var am=l.getChildrens(ac);for(var aj=0;aj<am.length;aj++){if(am[aj].nodeType===1&&l.hasClass(am[aj],ah)){l.removeClass(am[aj],ah)}}l.addClass(an.parentNode,ah)}U()}};var af=function(ai){if(ad.getFilters().length>0){ad.removeAllFilters();U()}};var X=function(aj){var ai=aj.target||aj.srcElement;if(ai.tagName.toUpperCase()==="A"){if(l.hasClass(ai,Y)){ab.hideMore()}else{ab.showMore()}}};this.registerEvent=function(){ac&&l.on(ac,"click",ag);N&&l.on(N,"click",af);aa&&l.on(aa,"click",X)};var Q=function(){ac&&l.unbind(ac,"click",ag);N&&l.unbind(N,"click",af);aa&&l.unbind(aa,"click",X)}};var D=function(P,Q,N){var O=this;var R=function(){c.call(O,P,Q,N);O.type=Q.type;var S=new H();O.filterOption=S.getFilterOption("checkOut",O);O.filterOption.registerEvent()};R();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var w=function(P,Q,N){var O=this;var R=function(){c.call(O,P,Q,N);O.type=Q.type;var S=new H();O.filterOption=S.getFilterOption("checkOut",O);O.filterOption.registerEvent()};R();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var d=function(P,Q,N){var O=this;var R=function(){c.call(O,P,Q,N);O.type=Q.type;var S=new H();O.filterOption=S.getFilterOption("checkOut",O);O.filterOption.registerEvent()};R();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var f=function(P,Q,N){var O=this;var R=function(){c.call(O,P,Q,N);O.type=Q.type;var S=new H();O.filterOption=S.getFilterOption("checkOut",O);O.filterOption.registerEvent()};R();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var v=function(P,Q,N){var O=this;var R=function(){if(!P){return}x.call(O,P,Q,N);O.setFilters("")};R();this.changeFilters=function(S){this.setFilters(S);l.trigger("updateFilter"+this.type)}};var u=function(Q,U,V){v.call(this,Q,U,V);var ab=this;var X={"default":"综合",price:"价格",distance:"距离",score:"评分",stars:"星级"};var P={price:["低","高"],distance:["近","远"],score:["低","高"],stars:["低","高"]};var R={one:{asc:"c-icon c-icon-up-blue",desc:"c-icon c-icon-down-blue",scoreno:"c-icon c-icon-down-gray",distanceno:"c-icon c-icon-up-gray"},two:{asc:"c-icon c-icon-sort-up",desc:"c-icon c-icon-sort-down",starsno:"c-icon c-icon-sort-gray",priceno:"c-icon c-icon-sort-gray"},def:{no:""}};var W=null,N=null;var Q=this.getWrapElem();var Z=l.getClass("active");this.type="sort";var aa=function(){if(!Q){return}ab.setSort("default");ab.setFilters("default,no");Y()};this.setSort=function(ad,ac){N=l.getElementByClassName(l.getClass("js"+ad),Q);O(ac)};this.clear=function(){if(W){l.removeClass(W.parentNode,Z);var ac=W.childNodes;if(ac.length<=1){return}var ad=ac[1];l.removeAllClass(ad);l.addClass(ad,R[W.getAttribute("data-sorttype")][W.getAttribute("data-type")+"no"])}};this.render=function(){};this.hideItem=function(ac){var ad=l.getElementByClassName(l.getClass("js"+ac),this.getWrapElem());ad.style.display="none"};this.showItem=function(ac){var ad=l.getElementByClassName(l.getClass("js"+ac),this.getWrapElem());ad.style.display="inline-block"};var O=function(ac){ab.clear();l.addClass(N.parentNode,Z);var ae=N.getAttribute("data-sorttype"),ag=N.getAttribute("data-type"),af=N.getAttribute("data-sort"),ad=(ac&&R[ae][ac])||R[ae][af],ah=N.childNodes;child=null;if(ah.length>1){child=N.childNodes[1];l.removeAllClass(child);l.addClass(child,ad)}N.setAttribute("data-sort",T(ae,af));N.setAttribute("title",S(ag,T(ae,af)));W=N};var S=function(af,ad){var ae="点击按"+X[af];var ac=P[af];if(ad=="asc"){ae=ae+"从"+ac[0]+"到"+ac[1]}else{if(ad=="desc"){ae=ae+"从"+ac[1]+"到"+ac[0]}}ae=ae+"排序";return ae};var T=function(ac,ad){if(ac=="two"){if(ad=="asc"){ad="desc"}else{ad="asc"}}return ad};var Y=function(){l.on(Q,"click",function(ac){var ag=ac.target||ac.srcElement;while(ag.tagName.toUpperCase()!=="A"){if(ag===this){break}ag=ag.parentNode}N=ag;var ad=N.getAttribute("data-sort"),af=N.getAttribute("data-type");if(!ad||!af){return}if(af==W.getAttribute("data-type")){if(W.getAttribute("data-sorttype")=="one"||W.getAttribute("data-sorttype")=="def"){return false}}var ae=[af,ad].join(",");ab.changeFilters(ae);O()})};aa()};var z=function(O){var Q={price:"PRICE",grade:"GRADE",hoteltype:"HOTELTYPE",facility:"FACILITY"};var R=O.single||[];var P=O.more||[];var N=O.loader||new m();this.filtersParam={};this.updateFilter=function(T){var S=0,V,U;this.filtersParam={};for(S=0;S<R.length;S++){if(R[S].getFilters()&&R[S].getFilters()!="default,no"){V=R[S].getFilters().split(",");this.filtersParam[V[0]+"sort"]=V[1]}}for(S=0;S<P.length;S++){V=P[S].getFilters();if(V.length>0){U=P[S].getType();this.filtersParam[Q[U]]=V.join(",")}}N.load(this.filtersParam,T)};this.getFilterNames=function(){var T,U,S=[];for(T=0;T<P.length;T++){U=P[T].getFilterNames();if(U.length>0){S.push(U.join("、"))}}return S};this.getFilterHashurl=function(){var U={price:"pr",grade:"st",brand:"br",hoteltype:"ht",facility:"fc"};var Z={LOW:"0-200",MEDIUM:"200-300",PRIOR:"300-500",HIGH:"500-max"};var X={1:0,2:1,3:2,4:3,5:5};var Y=[],W=[],S=[],T=0,V="";for(T=0;T<P.length;T++){W=P[T].getFilters();S=P[T].getFilterNames();if(W.length>0){V=P[T].getType();if(V==="brand"){Y.push(U[V]+"="+encodeURIComponent(S.join(","))+"|"+W.join(","))}else{if(V==="price"){Y.push(U[V]+"="+Z[W.join(",")])}else{if(V==="grade"){Y.push(U[V]+"="+X[W.join(",")])}else{Y.push(U[V]+"="+W.join(","))}}}}}return Y.length>0?"&"+Y.join("&"):""}};var m=function(){var O=i+"/hotelSearchApi.jsp";var N={};var Q=function(){var S=0;for(var R in N){if(N.hasOwnProperty(R)){S++}}return S};var P={price:"pricelinks",grade:"dangcilinks",hoteltype:"hoteltypelinks",facility:"facilitylinks"};this.load=function(T,R){var S=this;S.onsuccess=function(U){B=true;if(U&&U.ret===true&&U.data){if(U.data.hotelCount<=0){r&&r.getFilterTip(L)}else{r&&r.render(U.data)}if(R){var W=R.getListener();for(var V=0;V<W.length;V++){W[V].setData(l.extend({},W[V].getData(),{tplData:{value:U.data[P[W[V].getType()]]}}));W[V].update()}}else{s.setData(l.extend({},s.getData(),{tplData:{value:U.data[P[s.getType()]]}}));C.setData(l.extend({},C.getData(),{tplData:{value:U.data[P[C.getType()]]}}));e.setData(l.extend({},e.getData(),{tplData:{value:U.data[P[e.getType()]]}}));G.setData(l.extend({},G.getData(),{tplData:{value:U.data[P[G.getType()]]}}));s&&s.render();C&&C.render();e&&e.render();G&&G.render()}}};l.jsonp(O,l.extend({},{_t:new Date().getTime(),city:g.data.CITY_NAME,queryid:g.data.QUERYID},T||{}),"__jscallback",S.onsuccess)}};var I=new u(l.getElementByClassName(l.getClass("jssort")));var s=new D(l.getElementByClassName(l.getClass("jspricepanel")),{type:"price",title:"价格范围：",tpl:\'<li><a href="#" onclick="return false;" data-count="9999" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>\'});var C=new w(l.getElementByClassName(l.getClass("jsdangcipanel")),{type:"grade",title:"酒店级别："});var e=new d(l.getElementByClassName(l.getClass("jshoteltype")),{type:"hoteltype",title:"酒店类型：",display:100000,moretitle:"所有酒店类型",haslayout:true});var G=new f(l.getElementByClassName(l.getClass("jsfacility")),{type:"facility",title:"入住要求：",display:100000,moretitle:"所有入住要求",haslayout:true});var F=new m();var L=g._filterManager=new z({single:[I],more:[s,C,e,G],load:F});I.bindEvent([L]);s.setListener([C,e,G]);s.bindEvent([L]);C.setListener([e,G]);C.bindEvent([L]);e.setListener([C,G]);e.bindEvent([L]);G.setListener([C,e]);G.bindEvent([L]);k();function k(){var N=g.data.FILTERSELECTED||[];var R={},P={};s&&s.setData(l.extend({},s.getData(),{tplData:{value:g.data.PRICELINKS}}));C&&C.setData(l.extend({},C.getData(),{tplData:{value:g.data.DANGCILINKS}}));e&&e.setData(l.extend({},e.getData(),{tplData:{value:g.data.HOTELTYPELINKS}}));G&&G.setData(l.extend({},G.getData(),{tplData:{value:g.data.FACILITYLINKS}}));for(var O=0;O<N.length;O++){if(!R[N[O].type]){R[N[O].type]=[];P[N[O].type]=[]}R[N[O].type].push(N[O].value.replace(/%26/g,"&")||"");P[N[O].type].push(N[O].name.replace(/%26/g,"&")||"")}for(var Q in R){if(R.hasOwnProperty(Q)){switch(Q){case"price":if(R[Q].length===1){s&&s.setFilters(R[Q]);s&&s.setFilterNames(P[Q]);s&&s.update()}break;case"grade":if(R[Q].length===1){C&&C.setFilters(R[Q]);C&&C.setFilterNames(P[Q]);C&&C.update()}break;case"brand":if(R[Q].length===1){brandPanel&&brandPanel.setFilters(R[Q]);brandPanel&&brandPanel.setFilterNames(P[Q]);brandPanel&&brandPanel.update()}break;case"hoteltype":if(R[Q].length===1){e&&e.setFilters(R[Q]);e&&e.setFilterNames(P[Q]);e&&e.update()}e.ishide=false;e.show();break;case"facility":if(R[Q].length===1){G&&G.setFilters(R[Q]);G&&G.setFilterNames(P[Q]);G&&G.update()}G.ishide=false;G.show();break}}}}g.dispose=function(){if(!B){if(M.onsuccess){M.onsuccess=null}if(M.onerror){M.onerror=null}if(r.onsuccess){r.onsuccess=null}}l.unbind(document,"click",y);l.unbind(window,"blur",o)}})});';   // js字串，不含<script标签
      private static $uiList = 'btn,input,img';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
