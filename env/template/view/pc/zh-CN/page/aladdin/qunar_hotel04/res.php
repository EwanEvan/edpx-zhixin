<?php 
  class CssJs_Util_qunar_hotel04
   {
      private static $cssStr = '';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("qunar_hotel04",function(){A.setup(function(){var g=this;var i="http://www.baidu.com/qunarui/hotel";var C=false;var l=(function(R){var P="op-"+R.data.TPL_NAME+"-";var Q={};var S;return S={isIE6:function(){return/msie 6/i.test(navigator.userAgent)},isIE7:function(){return/msie 7/i.test(navigator.userAgent)},getClass:function(T){return(P+T)},getTags:function(U,T){if(!U){return[]}return U.getElementsByTagName(T)||[]},getElementByClassName:function(T,U){if(U){return $(U).find("."+T)[0]}else{return $("."+T)[0]}},getChildrens:function(T){return T&&T.childNodes||[]},hasClass:function(U,T){return $(U).hasClass(T)},addClass:function(U,T){$(U).addClass(T)},removeClass:function(U,T){$(U).removeClass(T)},removeAllClass:function(T){T.className=""},getOffset:function(U){var T=U.parentNode;var V=$(T).offset();return V},on:function(U,T,V){$(U).bind(T,V)},unbind:function(U,T,V){$(U).unbind(T,V)},jsonToQuery:function(T){var V=[];var U=null;$.each(T,function(W,X){if(/[^\\x00-\\xFF]/.test(X)){U=encodeURIComponent(X)}else{U=X}V.push(W+"="+U)});return V.join("&")},ajax:function(U,W,V,T){T=T||function(){};$.ajax({type:"POST",url:U,data:l.jsonToQuery(W),success:function(X){V&&V(X)},error:function(X){T(X)}})},jsonp:function(U,X,V,W,T){T=T||function(){};$.ajax({type:"POST",url:U,dataType:"jsonp",jsonp:V||"__jscallback",data:l.jsonToQuery(X),success:function(Y){try{W&&W(Y)}catch(Z){T();return}},error:function(Y){T(Y)}})},extend:function(T,W,V){var U=null;for(U in W){if(W.hasOwnProperty(U)){T[U]=W[U]}}for(U in V){if(V.hasOwnProperty(U)){T[U]=V[U]}}return T},trim:function(T){return T.replace(/(^\\s*)|(\\s*$)/g,"")},bind:function(T,U){if(!Q[T]){Q[T]=[]}Q[T].push(U)},trigger:function(U){var W=arguments||[];var Y=Q[U]||[];if(Y.length===0){return}var T=[];for(var X=1;X<W.length;X++){T.push(W[X])}for(var V=0;V<Y.length;V++){Y[V].apply(R,T)}},isObjEmpty:function(V){var U=true;for(var T in V){if(V.hasOwnProperty(T)&&"undefined"!=typeof T){U=false;break}}return U},remove:function(W,V){if(!(W instanceof Array)){return}if(W.length==0){return}var T=[];for(var U=0;U<W.length;U++){if(W[U]==V){continue}else{T.push(W[U])}}return T},isExist:function(V,U){if(!(V instanceof Array)){return}if(V.length==0){return}for(var T=0;T<V.length;T++){if(V[T]==U){return true}}return false},GetZoomFactor:function(){var U=1;if(document.body.getBoundingClientRect){var V=document.body.getBoundingClientRect();var W=V.right-V.left;var T=document.body.offsetWidth;U=Math.round((W/T)*100)/100}return U},toFixed:function(U,W){var T=U;if(!U){return}if(!W){W=0}U*=Math.pow(10,W);var V=parseInt(U);U=V/(Math.pow(10,W));if(U===parseInt(T)){return T+".0"}return U},format:function(T,U){return $.format(T,U)},subByte:function(V,U,T){return $.subByte(V,U,T)}}})(g);function n(P){P=P||{};if(!P.dom||!P.offsetdom){return}this.offsetdom=P.offsetdom;this.display=P.display||"none";this.dom=P.dom;this.url=P.url;this.success=P.success;this.error=P.error;this.cache={};this.params={};if(P.html){P.dom.innerHTML=P.html}if(this.display!=="none"){this.show()}}n.prototype.render=function(){var P=this.getQuerykey();if(this.cache[P]){this._callback(1,this.cache[P])}else{this._getData()}};n.prototype.show=function(R){if(this.dom){var Q=this.offsetdom.offsetHeight;if(R){Q=2}var P=l.getOffset(this.offsetdom);this.top=P.top+Q-1;this.left=P.left;if(l.isIE7()){var S=l.GetZoomFactor()||0.1;this.top=(P.top/S)+Q-1;this.left=P.left/S}this.dom.style.top=this.top+"px";this.dom.style.left=this.left+"px";this.display="block"}};n.prototype.hide=function(){if(this.dom){this.dom.style.top="-9999px";this.dom.style.left="-9999px";this.display="none"}};n.prototype.setQueryParams=function(Q){Q=Q||{};if(!Q.queryName){return}var P={};P[Q.queryName]=l.trim(Q.queryKey);this.params=l.extend({},this.params,P)};n.prototype.getQueryParams=function(){return this.params||{}};n.prototype.clearCache=function(){if(this.getCacheSize()>20){this.cache={}}};n.prototype.getCacheSize=function(){var Q=0;for(var P in this.cache){if(this.cache.hasOwnProperty(P)){Q++}}return Q};n.prototype._getData=function(){var P=this;P.onsuccess=function(Q){C=true;if(!Q){P._callback();return}P._callback(1,Q);P.clearCache();P.cache[P.getQuerykey()]=Q};P.onerror=function(Q){C=true;P._callback(0,Q)};l.jsonp(this.url,l.extend({},{_t:new Date().getTime()},this.params),"__jscallback",P.onsuccess,P.onerror)};n.prototype.getQuerykey=function(){var Q="";for(var P in this.params){if(this.params.hasOwnProperty(P)){Q=Q+this.params[P]}}return Q};n.prototype._callback=function(P,Q){if(!this.dom){return}if(P===1){if(this.success){this.success(Q)}}else{if(this.error){this.error(Q)}}};var q=l.getElementByClassName(l.getClass("jshotelmore"));var r=(function(S){var V={};var X=["","国家旅游局评定为一星级","国家旅游局评定为二星级","国家旅游局评定为三星级","国家旅游局评定为四星级","国家旅游局评定为五星级"];var Y=l.getElementByClassName(l.getClass("jshotels"));var W=l.getElementByClassName(l.getClass("jsnohotels"));var P=l.getElementByClassName(l.getClass("jsnohotelsfilter"));var Q=l.getElementByClassName(l.getClass("jshotelcount"));var U=l.getClass("hide");var R=function(ap){var ac=[];var aj,am=S.data.TPL_NAME;var ah=[\'<div class="c-row op-#{tplname}-hotels op-#{tplname}-hotels#{index}">\',\'<div class="c-span4 op-#{tplname}-hotelimage">\',\'<a target="_blank" href="#{hotelimageurl}"><img class="c-img c-img4" src="#{imageurl}"/></a>\',"</div>",\'<div class="c-span12 op-#{tplname}-hotelintro">\',\'<p class="op-#{tplname}-hoteltitle">\',\'<a title="#{hoteltitlesource}" href="#{hoteltitleurl}" target="_blank">#{title}</a>#{starHtml}#{dangciHtml}\',"</p>","#{addressHtml}","#{reviewHtml}","</div>",\'<div class="c-span4 op-#{tplname}-hotelreview">\',"<p>&nbsp;</p>",\'<p class="op-#{tplname}-hotelscore">#{scoreHtml}</p>\',\'<p><a href="#{reviewurl}" target="_blank">#{reviewcount}</a></p>\',"</div>",\'<div class="c-span4 c-span-last op-#{tplname}-hotellook">\',\'<p class="op-#{tplname}-hotelprice"><b>&yen;#{price}</b>起</p>\',\'<p class="op-#{tplname}-detail"><a class="op-#{tplname}-detailbtn c-btn c-btn-primary c-btn-small OP_LOG_BTN" href="#{hotelbtnurl}" target="_blank">查看详情</a></p>\',"</div>","</div>"].join("");var af,ai,ae,Z,an,aa,ab,ag;var ak,al;var ad="",aq="",ao="";for(aj=0;aj<ap.length;aj++){af=ap[aj].hotelseq.lastIndexOf("_");ae="dt-"+ap[aj].hotelseq.substring(af+1);ai=ap[aj].hotelseq.substring(0,af);Z="http://hotel.qunar.com/city/"+ai+"/"+ae;if(ap[aj].star>0){an=22}else{if(ap[aj].dangci){an=26}else{an=32}}aa=l.subByte(ap[aj].title,an);ab=l.subByte(ap[aj].address,26);ag=l.subByte(ap[aj].review,26);if(aa===ap[aj].title){aa=ap[aj].title;ad=""}else{aa=aa;ad=ap[aj].title}if(ab===ap[aj].address){ab=ap[aj].address;aq=""}else{ab=ab;aq=ap[aj].address}if(ag===ap[aj].review){ag=ap[aj].review;ao=""}else{ag=ag;ao=ap[aj].review}ak=ap[aj].score>0?l.toFixed(ap[aj].score,1)+"/5分":"";al=Z+"?ex_track=bd_zhixin_hotel_brd_score&"+S.data.QHFP;ac.push(l.format(ah,{tplname:am,index:aj,hotelimageurl:Z+"?ex_track=bd_zhixin_hotel_brd_image&"+S.data.QHFP,imageurl:ap[aj].img,hoteltitleurl:Z+"?ex_track=bd_zhixin_hotel_brd_hotelname&"+S.data.QHFP,title:aa,hoteltitlesource:ad,starHtml:ap[aj].star>0?\'<i class="c-icon c-icon-star c-gap-left-small op-\'+am+"-star"+ap[aj].star+\'"  title="\'+X[ap[aj].star]+\'"></i>\':"",dangciHtml:(!ap[aj].star&&ap[aj].dangci)?\'<span class="c-gap-left-small op-\'+am+\'-hoteldangci" title="\'+("去哪儿网用户评定为"+ap[aj].dangci+"酒店")+\'">\'+ap[aj].dangci+"</span>":"",addressHtml:ap[aj].address?\'<p title="\'+aq+\'">地址：\'+ab+"</p>":"",reviewHtml:ap[aj].review?\'<p title="\'+ao+\'">评价：\'+ag+"</p>":"",scoreHtml:ak?\'<a href="\'+al+\'" target="_blank">\'+ak+"</a>":\'<span class="op-\'+am+\'-hotelnoscore">暂无评分</span>\',reviewurl:Z+"/comments.html?ex_track=bd_zhixin_hotel_brd_comment&"+S.data.QHFP,reviewcount:ap[aj].reviewcount>0?ap[aj].reviewcount+"条点评":"",price:ap[aj].price,hotelbtnurl:Z+"?ex_track=bd_zhixin_hotel_brd_viewdetail&"+S.data.QHFP}))}Y.innerHTML=ac.join("");l.addClass(W,U);l.removeClass(Y,U)};var T=function(aa){var Z=aa&&aa.getFilterNames();Q.innerHTML="在0家酒店中";P.innerHTML=\'<span>很抱歉，没有找到与"<em>\'+Z.join("|")+\'</em>"相关的酒店</span>\';l.addClass(Y,U);l.addClass(q,U);l.removeClass(W,U)};return V={render:function(aa){var Z=function(ab){R(ab.hotellinks);if(ab.hotelCount>=4){l.removeClass(q,U)}else{l.addClass(q,U)}Q.innerHTML="在"+ab.hotelCount+"家酒店中"};Z(aa)},getFilterTip:T}})(g);var h=l.getElementByClassName(l.getClass("city-input"));var F=l.getElementByClassName(l.getClass("hotcity"));var M=l.getElementByClassName(l.getClass("keyword-input"));var j=l.getElementByClassName(l.getClass("hotkey"));var b=l.getElementByClassName(l.getClass("placeholder"));var a=new n({dom:F,offsetdom:h});var u=new n({dom:b,offsetdom:M});if(g.data.HOTQUERY){u.hide()}else{u.show(true)}var O=new n({dom:j,offsetdom:M,url:i+"/sugg.jsp?v=1&queryid="+g.data.QUERYID,success:function(R){if(R&&R.data){O.dom.style.borderWidth="1px";O.dom.innerHTML=R.data.replace(/onmousedown="return searchword\\(.*\\)"/ig,"");var P=l.getElementByClassName("js_cityguide",j);if(P){var Q=P.getAttribute("data-url")+"&ex_track=bd_zhixin_hotel_divcityguide&"+g.data.QHFP;P.setAttribute("data-url",Q)}}},error:function(P){O.dom.innerHTML="";O.dom.style.borderWidth="0px"}});var z=function(P){a.hide();O.hide();if(!M.value){u.show(true)}};l.on(document,"click",z);var o=function(P){a.hide();O.hide();if(!M.value){u.show(true)}};l.on(window,"blur",o);l.on(h,"click",function(P){O.hide();g._sug&&g._sug.hide();if(a.display==="block"){a.hide()}else{a.show()}P.stopPropagation()});l.on(F,"click",function(R){R.stopPropagation();R.preventDefault();var Q=R.target||R.srcElement;if(Q.tagName.toUpperCase()==="A"){var P=Q.getAttribute("data-city");if(h.value!=P){l.trigger("citychanged",P)}if(P){if(g._sug){g._sug.hide();g._sug.pick(\'<span class="js_cityname" data-cityname="\'+P+\'">\'+P+"</span>")}else{h.value=P}a.hide()}}});l.on(M,"click",function(P){if(O.display==="block"){O.hide()}else{O.setQueryParams({queryName:"city",queryKey:h.value});O.render();O.show();a.hide();u.hide()}P.stopPropagation();P.preventDefault()});l.on(j,"click",function(R){R.preventDefault();var Q=R.target||R.srcElement;if(Q.tagName.toUpperCase()==="A"){var P=l.trim(Q.innerHTML);if(P){u.hide();M.value=P;O.hide()}}});l.on(b,"click",function(Q){var P=Q.target||Q.srcElement;Q.stopPropagation();Q.preventDefault();if(P.tagName.toUpperCase()==="DIV"){M.focus();u.hide();O.setQueryParams({queryName:"city",queryKey:h.value});O.render();a.hide();O.show()}});l.bind("citychanged",function(P){});var p=l.getElementByClassName(l.getClass("jsquerybtn"));l.on(p,"click",function(S){var Q=encodeURIComponent(h.value);var P=encodeURIComponent(M.value);var R=g._filterManager.getFilterHashurl();p.href="http://hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_brd_search&toCity="+Q+"&q="+P+"&"+g.data.QHFP+R});l.on(q,"click",function(T){var R=encodeURIComponent(h.value);var Q=encodeURIComponent(M.value);var S=g._filterManager.getFilterHashurl();var P=$(q).find("a");if(P.size()>0){P[0].href="http://hotel.qunar.com/search.jsp?ex_track=bd_zhixin_hotel_brd_morehotel&toCity="+R+"&q="+Q+"&"+g.data.QHFP+S}});var y=function(X,Q,V){var W=this;var S=X;var T=Q||{};var R=V||[];var P=null;var U=null;this.render=function(){};this.hide=function(){S.style.display="none"};this.show=function(){S.style.display="block"};this.setData=function(Y){T=Y};this.getData=function(){return T};this.setFilters=function(Y){P=Y};this.getFilters=function(){return P||[]};this.setFilterNames=function(Y){U=Y};this.getFilterNames=function(){return U||[]};this.getListener=function(){return R};this.getWrapElem=function(){return S};this.setListener=function(Y){R=Y};this.getType=function(){return this.type};this.bindEvent=function(Z){if(Z instanceof Array&&Z.length>0){for(var Y=0;Y<Z.length;Y++){(function(){var aa=Y;l.bind("updateFilter"+W.type,function(){Z[aa].updateFilter&&Z[aa].updateFilter(W)})})()}}}};var c=function(R,S,P){var Q=this;var T=function(){if(!R){return}y.call(Q,R,S,P);if(l.isObjEmpty(S)||S==null||typeof S=="undefined"){Q.hide()}Q.setFilters([]);Q.setFilterNames([])};T();this.addFilters=function(V,U){this.setFilters([]);this.setFilterNames([]);this.getFilters().push(V);this.getFilterNames().push(U);l.trigger("updateFilter"+this.type)};this.removeFilters=function(V,U){if(this.getFilters().length==0){return}this.setFilters(l.remove(this.getFilters(),V));this.setFilterNames(l.remove(this.getFilterNames(),U));l.trigger("updateFilter"+this.type)};this.removeAllFilters=function(){this.setFilters([]);this.setFilterNames([]);l.trigger("updateFilter"+this.type)};this.updateFilter=function(U){this.setFilters(U.getFilters());this.setFilterNames(U.getFilterNames());this.relayout();this.update()}};var J=function(){this.getFilterOption=function(Q,P){if(Q=="bgSelect"){return new FilterOptionBgSelect(P)}else{if(Q=="checkOut"){return new L(P)}else{if(Q=="radio"){return new FilterOptionRadio(P)}else{return null}}}}};var L=function(af){var ad=this;var ab=af.getWrapElem();var aj=l.getClass("active");var T=l.getClass("hide");var X="c-icon-chevron-unfold";var aa="c-icon-chevron-fold";var Y=l.getClass("filtermore-noborder");var Q=l.getClass("disabled");var V={type:"filter"+new Date().getTime(),title:"过滤项目：",unlimited:"不限",display:1000,moretitle:"所有",wrapTpl:[\'<div class="op-#{tplname}-find op-#{tplname}-clearfix op-#{tplname}-jsfilterPanel">\',"<span>#{title}</span>",\'<div class="op-#{tplname}-nolimit op-#{tplname}-active op-#{tplname}-jsnolimit"><a href="#" onclick="return false;">#{unlimited}</a></div>\',\'<ul class="op-#{tplname}-jsfilter">\',"#{filterHtml}","</ul>","#{moreHtml}","</div>"].join(""),tpl:\'<li class="#{disabledClass}"><a href="#" onclick="return false;" data-count="#{count}" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>\',moreTpl:\'<div class="op-#{tplname}-filtermore #{hideClass}"><a href="#" title="#{moretitle}" onclick="return false;" class="c-icon c-icon-chevron-unfold op-#{tplname}-jsfiltermore"></a></div>\'};af.setData(l.extend({},V,af.getData()));var R=l.getElementByClassName(l.getClass("jsfilterPanel"),ab);var P=l.getElementByClassName(l.getClass("jsnolimit"),ab);var ae=l.getElementByClassName(l.getClass("jsfilter"),ab);var ac=l.getElementByClassName(l.getClass("jsfiltermore"),ab);var U=l.getElementByClassName(l.getClass("jsfiltermorectn"),ab);this.render=function(){var am=af.getData();if(!am||!am.tplData||!am.tplData.value||am.tplData.value.length===0){af.hide();return}af.show();var ar=am.tplData.value,at=[],aq=[],al=[],ap=am.tpl,ao=am.moreTpl,an=am.wrapTpl,ak=0;for(ak=0;ak<ar.length;ak++){at.push(l.format(ap,{disabledClass:ar[ak].count<=0?Q:"",count:ar[ak].count||0,filter:ar[ak].name.replace(/%26/g,"&")||"",value:ar[ak].value.replace(/%26/g,"&")||""}))}af.setFilters([]);S();aq.push(l.format(ao,{tplname:g.data.TPL_NAME,moretitle:"查看"+am.moretitle,hideClass:ar.length>am.display?"":T}));al.push(l.format(an,{title:am.title,tplname:g.data.TPL_NAME,unlimited:am.unlimited,filterHtml:at.join(""),moreHtml:aq.join("")}));R.innerHTML=al.join("");P=l.getElementByClassName(l.getClass("jsnolimit"),ab);ae=l.getElementByClassName(l.getClass("jsfilter"),ab);ac=l.getElementByClassName(l.getClass("jsfiltermore"),ab);this.registerEvent()};this.hideMore=function(){var ak=af.getData();U&&l.addClass(U,T);if(ac){l.removeClass(ac,aa);l.addClass(ac,X);ac.setAttribute("title","查看"+ak.moretitle)}};this.showMore=function(){var ak=af.getData();U&&l.removeClass(U,T);if(ac){l.removeClass(ac,X);l.addClass(ac,aa);ac.setAttribute("title","收起"+ak.moretitle)}};this.update=function(){W();var am=af.getFilters()||[];var an=l.getChildrens(ae);var al="",ak;for(ak=0;ak<an.length;ak++){if(an[ak].nodeType===1){al=an[ak].childNodes[0].getAttribute("data-filter");if(l.isExist(am,al)){l.addClass(an[ak],aj)}else{l.removeClass(an[ak],aj)}}}};var ag=function(ak,an){var al=-1;for(var am=0;am<ak.length;am++){if(ak[am].value==an){al=am;break}}if(al!==-1){return ak[al].count}else{return 0}};this.relayout=function(){var aq=af.getData();var ao=af.getFilters()||[];var ap=(aq&&aq.tplData&&aq.tplData.value)||[];if(ap.length===0&&ao.length===0){af.hide();return}var ak=af.getFilterNames()||[];var an=[];var am=aq.tpl;var al=0;if(aq.haslayout){if(ao.length>0){for(al=ao.length-1;al>=0;al--){an.push(l.format(am,{disabledClass:"",count:ag(ap,ao[al]),filter:ak[al].replace(/%26/g,"&")||"",value:ao[al].replace(/%26/g,"&")||""}))}}for(al=0;al<ap.length;al++){if(!l.isExist(ao,ap[al].value)){an.push(l.format(am,{disabledClass:ap[al].count>0?"":Q,count:ap[al].count,filter:ap[al].name.replace(/%26/g,"&")||"",value:ap[al].value.replace(/%26/g,"&")||""}))}}}else{for(al=0;al<ap.length;al++){an.push(l.format(am,{disabledClass:(ap[al].count>0||l.isExist(ao,ap[al].value))?"":Q,count:ap[al].count,filter:ap[al].name.replace(/%26/g,"&")||"",value:ap[al].value.replace(/%26/g,"&")||""}))}}this.hideMore();if(ap.length<=aq.display){ac&&l.addClass(ac,T)}else{ac&&l.removeClass(ac,T)}ae.innerHTML=an.join("");if(!aq.ishide){af.show()}};var W=function(){var ao=af.getData();if(af.getFilters().length==0){var an=(ao&&ao.tplData&&ao.tplData.value)||[];if(an.length===0){af.hide()}l.addClass(P,aj);var ap=l.getChildrens(ae);var am=false;var al=null;if(ao.haslayout){for(var ak=0;ak<ap.length;ak++){if(ap[ak].nodeType===1){am=l.hasClass(ap[ak],aj);al=ap[ak].childNodes[0].getAttribute("data-count");if(am&&al==0){l.addClass(ap[ak],T)}l.removeClass(ap[ak],aj)}}}else{for(var ak=0;ak<ap.length;ak++){if(ap[ak].nodeType===1){l.removeClass(ap[ak],aj)}}}}else{l.removeClass(P,aj)}};var ai=function(aq){var ap=aq.target||aq.srcElement;if(ap.tagName.toUpperCase()==="A"){if(l.hasClass(ap.parentNode,Q)){return}var am=ap.getAttribute("data-filter");var ak=ap.getAttribute("data-name");var an=ap.getAttribute("data-count");if(af.getData().haslayout){if(an<=0){l.addClass(ap.parentNode,T)}}else{if(an<=0){l.addClass(ap.parentNode,Q)}}if(l.isExist(af.getFilters(),am)){af.removeFilters(am,ak);l.removeClass(ap.parentNode,aj)}else{af.addFilters(am,ak);var ao=l.getChildrens(ae);for(var al=0;al<ao.length;al++){if(ao[al].nodeType===1&&l.hasClass(ao[al],aj)){l.removeClass(ao[al],aj)}}l.addClass(ap.parentNode,aj)}W()}};var ah=function(ak){if(af.getFilters().length>0){af.removeAllFilters();W()}};var Z=function(al){var ak=al.target||al.srcElement;if(ak.tagName.toUpperCase()==="A"){if(l.hasClass(ak,aa)){ad.hideMore()}else{ad.showMore()}}};this.registerEvent=function(){ae&&l.on(ae,"click",ai);P&&l.on(P,"click",ah);ac&&l.on(ac,"click",Z)};var S=function(){ae&&l.unbind(ae,"click",ai);P&&l.unbind(P,"click",ah);ac&&l.unbind(ac,"click",Z)}};var E=function(R,S,P){var Q=this;var T=function(){c.call(Q,R,S,P);Q.type=S.type;var U=new J();Q.filterOption=U.getFilterOption("checkOut",Q);Q.filterOption.registerEvent()};T();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var x=function(R,S,P){var Q=this;var T=function(){c.call(Q,R,S,P);Q.type=S.type;var U=new J();Q.filterOption=U.getFilterOption("checkOut",Q);Q.filterOption.registerEvent()};T();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var I=function(R,S,P){var Q=this;var T=function(){c.call(Q,R,S,P);Q.type=S.type;var U=new J();Q.filterOption=U.getFilterOption("checkOut",Q);Q.filterOption.registerEvent()};T();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var d=function(R,S,P){var Q=this;var T=function(){c.call(Q,R,S,P);Q.type=S.type;var U=new J();Q.filterOption=U.getFilterOption("checkOut",Q);Q.filterOption.registerEvent()};T();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var f=function(R,S,P){var Q=this;var T=function(){c.call(Q,R,S,P);Q.type=S.type;var U=new J();Q.filterOption=U.getFilterOption("checkOut",Q);Q.filterOption.registerEvent()};T();this.render=function(){this.filterOption.render()};this.update=function(){this.relayout();this.filterOption.update()};this.relayout=function(){this.filterOption.relayout()}};var w=function(R,S,P){var Q=this;var T=function(){if(!R){return}y.call(Q,R,S,P);Q.setFilters("")};T();this.changeFilters=function(U){this.setFilters(U);l.trigger("updateFilter"+this.type)}};var v=function(S,W,X){w.call(this,S,W,X);var ad=this;var Z={"default":"综合",price:"价格",distance:"距离",score:"评分",stars:"星级"};var R={price:["低","高"],distance:["近","远"],score:["低","高"],stars:["低","高"]};var T={one:{asc:"c-icon c-icon-up-blue",desc:"c-icon c-icon-down-blue",scoreno:"c-icon c-icon-down-gray",distanceno:"c-icon c-icon-up-gray"},two:{asc:"c-icon c-icon-sort-up",desc:"c-icon c-icon-sort-down",starsno:"c-icon c-icon-sort-gray",priceno:"c-icon c-icon-sort-gray"},def:{no:""}};var Y=null,P=null;var S=this.getWrapElem();var ab=l.getClass("active");this.type="sort";var ac=function(){if(!S){return}ad.setSort("default");ad.setFilters("default,no");aa()};this.setSort=function(af,ae){P=l.getElementByClassName(l.getClass("js"+af),S);Q(ae)};this.clear=function(){if(Y){l.removeClass(Y.parentNode,ab);var ae=Y.childNodes;if(ae.length<=1){return}var af=ae[1];l.removeAllClass(af);l.addClass(af,T[Y.getAttribute("data-sorttype")][Y.getAttribute("data-type")+"no"])}};this.render=function(){};this.hideItem=function(ae){var af=l.getElementByClassName(l.getClass("js"+ae),this.getWrapElem());af.style.display="none"};this.showItem=function(ae){var af=l.getElementByClassName(l.getClass("js"+ae),this.getWrapElem());af.style.display="inline-block"};var Q=function(ae){ad.clear();l.addClass(P.parentNode,ab);var ag=P.getAttribute("data-sorttype"),ai=P.getAttribute("data-type"),ah=P.getAttribute("data-sort"),af=(ae&&T[ag][ae])||T[ag][ah],aj=P.childNodes;child=null;if(aj.length>1){child=P.childNodes[1];l.removeAllClass(child);l.addClass(child,af)}P.setAttribute("data-sort",V(ag,ah));P.setAttribute("title",U(ai,V(ag,ah)));Y=P};var U=function(ah,af){var ag="点击按"+Z[ah];var ae=R[ah];if(af=="asc"){ag=ag+"从"+ae[0]+"到"+ae[1]}else{if(af=="desc"){ag=ag+"从"+ae[1]+"到"+ae[0]}}ag=ag+"排序";return ag};var V=function(ae,af){if(ae=="two"){if(af=="asc"){af="desc"}else{af="asc"}}return af};var aa=function(){l.on(S,"click",function(ae){var ai=ae.target||ae.srcElement;while(ai.tagName.toUpperCase()!=="A"){if(ai===this){break}ai=ai.parentNode}P=ai;var af=P.getAttribute("data-sort"),ah=P.getAttribute("data-type");if(!af||!ah){return}if(ah==Y.getAttribute("data-type")){if(Y.getAttribute("data-sorttype")=="one"||Y.getAttribute("data-sorttype")=="def"){return false}}var ag=[ah,af].join(",");ad.changeFilters(ag);Q()})};ac()};var B=function(Q){var S={price:"PRICE",grade:"GRADE",brand:"BRAND",hoteltype:"HOTELTYPE",facility:"FACILITY"};var T=Q.single||[];var R=Q.more||[];var P=Q.loader||new m();this.filtersParam={};this.updateFilter=function(V){var U=0,X,W;this.filtersParam={};for(U=0;U<T.length;U++){if(T[U].getFilters()&&T[U].getFilters()!="default,no"){X=T[U].getFilters().split(",");this.filtersParam[X[0]+"sort"]=X[1]}}for(U=0;U<R.length;U++){X=R[U].getFilters();if(X.length>0){W=R[U].getType();this.filtersParam[S[W]]=X.join(",")}}P.load(this.filtersParam,V)};this.getFilterNames=function(){var V,W,U=[];for(V=0;V<R.length;V++){W=R[V].getFilterNames();if(W.length>0){U.push(W.join("、"))}}return U};this.getFilterHashurl=function(){var W={price:"pr",grade:"st",brand:"br",hoteltype:"ht",facility:"fc"};var ab={LOW:"0-200",MEDIUM:"200-300",PRIOR:"300-500",HIGH:"500-max"};var Z={1:0,2:1,3:2,4:3,5:5};var aa=[],Y=[],U=[],V=0,X="";for(V=0;V<R.length;V++){Y=R[V].getFilters();U=R[V].getFilterNames();if(Y.length>0){X=R[V].getType();if(X==="brand"){aa.push(W[X]+"="+encodeURIComponent(U.join(","))+"|"+Y.join(","))}else{if(X==="price"){aa.push(W[X]+"="+ab[Y.join(",")])}else{if(X==="grade"){aa.push(W[X]+"="+Z[Y.join(",")])}else{aa.push(W[X]+"="+Y.join(","))}}}}}return aa.length>0?"&"+aa.join("&"):""}};var m=function(){var Q=i+"/hotelSearchApi.jsp";var P={};var S=function(){var U=0;for(var T in P){if(P.hasOwnProperty(T)){U++}}return U};var R={price:"pricelinks",grade:"dangcilinks",brand:"brandlinks",hoteltype:"hoteltypelinks",facility:"facilitylinks"};this.load=function(V,T){var U=this;U.onsuccess=function(W){C=true;if(W&&W.ret===true&&W.data){if(W.data.hotelCount<=0){r&&r.getFilterTip(N)}else{r&&r.render(W.data)}if(T){var Y=T.getListener();for(var X=0;X<Y.length;X++){Y[X].setData(l.extend({},Y[X].getData(),{tplData:{value:W.data[R[Y[X].getType()]]}}));Y[X].update()}}else{t.setData(l.extend({},t.getData(),{tplData:{value:W.data[R[t.getType()]]}}));D.setData(l.extend({},D.getData(),{tplData:{value:W.data[R[D.getType()]]}}));s.setData(l.extend({},s.getData(),{tplData:{value:W.data[R[s.getType()]]}}));e.setData(l.extend({},e.getData(),{tplData:{value:W.data[R[e.getType()]]}}));H.setData(l.extend({},H.getData(),{tplData:{value:W.data[R[H.getType()]]}}));t&&t.render();D&&D.render();s&&s.render();e&&e.render();H&&H.render()}}};l.jsonp(Q,l.extend({},{_t:new Date().getTime(),city:g.data.CITY_NAME,queryid:g.data.QUERYID},V||{}),"__jscallback",U.onsuccess)}};var K=new v(l.getElementByClassName(l.getClass("jssort")));var t=new E(l.getElementByClassName(l.getClass("jspricepanel")),{type:"price",title:"价格范围：",tpl:\'<li><a href="#" onclick="return false;" data-count="9999" data-filter="#{value}" data-name="#{filter}">#{filter}</a></li>\'});var D=new x(l.getElementByClassName(l.getClass("jsdangcipanel")),{type:"grade",title:"酒店级别："});var s=new I(l.getElementByClassName(l.getClass("jsbrandpanel")),{type:"brand",title:"连锁品牌：",display:100000,moretitle:"所有品牌",haslayout:true});var e=new d(l.getElementByClassName(l.getClass("jshoteltype")),{type:"hoteltype",title:"酒店类型：",display:100000,moretitle:"所有酒店类型",haslayout:true,ishide:true});var H=new f(l.getElementByClassName(l.getClass("jsfacility")),{type:"facility",title:"入住要求：",display:100000,moretitle:"所有入住要求",haslayout:true,ishide:true});var G=new m();var N=g._filterManager=new B({single:[K],more:[t,D,s,e,H],load:G});K.bindEvent([N]);t.setListener([D,s,e,H]);t.bindEvent([N]);D.setListener([s,e,H]);D.bindEvent([N]);s.setListener([D,e,H]);s.bindEvent([N]);e.setListener([D,s,H]);e.bindEvent([N]);H.setListener([D,s,e]);H.bindEvent([N]);k();function k(){var P=g.data.FILTERSELECTED||[];t&&t.setData(l.extend({},t.getData(),{tplData:{value:g.data.PRICELINKS}}));D&&D.setData(l.extend({},D.getData(),{tplData:{value:g.data.DANGCILINKS}}));s&&s.setData(l.extend({},s.getData(),{tplData:{value:g.data.BRANDLINKS}}));e&&e.setData(l.extend({},e.getData(),{tplData:{value:g.data.HOTELTYPELINKS}}));H&&H.setData(l.extend({},H.getData(),{tplData:{value:g.data.FACILITYLINKS}}));var T={},R={};for(var Q=0;Q<P.length;Q++){if(!T[P[Q].type]){T[P[Q].type]=[];R[P[Q].type]=[]}T[P[Q].type].push(P[Q].value.replace(/%26/g,"&")||"");R[P[Q].type].push(P[Q].name.replace(/%26/g,"&")||"")}for(var S in T){if(T.hasOwnProperty(S)){switch(S){case"price":if(T[S].length===1){t&&t.setFilters(T[S]);t&&t.setFilterNames(R[S]);t&&t.update()}break;case"grade":if(T[S].length===1){D&&D.setFilters(T[S]);D&&D.setFilterNames(R[S]);D&&D.update()}break;case"brand":if(T[S].length===1){s&&s.setFilters(T[S]);s&&s.setFilterNames(R[S]);s&&s.update()}break;case"hoteltype":if(T[S].length===1){e&&e.setFilters(T[S]);e&&e.setFilterNames(R[S]);e&&e.update()}e.ishide=false;e.show();break;case"facility":if(T[S].length===1){H&&H.setFilters(T[S]);H&&H.setFilterNames(R[S]);H&&H.update()}H.ishide=false;H.show();break}}}}g.dispose=function(){if(!C){if(O.onsuccess){O.onsuccess=null}if(O.onerror){O.onerror=null}if(r.onsuccess){r.onsuccess=null}}l.unbind(document,"click",z);l.unbind(window,"blur",o)}})});';   // js字串，不含<script标签
      private static $uiList = 'btn,input,img';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
