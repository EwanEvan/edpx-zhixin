{%extends 'c_base.tpl'%} {%block name='title'%}{%/block%}{%block name='foot'%}{%/block%}{%block name='data_modifier'%} {%**********数据预处理开始**********%} {%*additional逻辑*%} {%if $tplData.search_property%} {%$AdditionalKey = $tplData.search_property%} {%elseif $tplData.cmpbrief[0]%} {%$AdditionalKey = $tplData.cmpbrief[0]%} {%elseif count($tplData.result) > 1%} {%$AdditionalKey = "remark"%} {%/if%} {%foreach $tplData.result as $item%} {%if $AdditionalKey && $item[$AdditionalKey]%} {%$tplData.result[$item@index].additional = $item[$AdditionalKey]%} {%elseif $item.additional%} {%$tplData.result[$item@index].additional = $item.additional%} {%/if%} {%/foreach%} {%*单实体答案*%} {%if !$tplData.result[0].attrquery%} {%if $tplData.result[0].additional%} {%$tplData.result[0].attrquery = $tplData.result[0].additional%} {%else%} {%$tplData.result[0].attrquery = $tplData.result[0].ename%} {%/if%} {%/if%} {%*单实体标题*%} {%if count($tplData.result) == 1%} {%$tplData.SingleTitle = []%} {%if $tplData.search_property%} {%$tplData.SingleTitle.entity = $tplData.result[0].ename%} {%$tplData.SingleTitle.append = $tplData.result[0].appendinfo%} {%$tplData.SingleTitle.attr = $tplData.result[0].searchp%} {%/if%} {%if $tplData.trace.level && count(end($tplData.trace.level)) == 1%} {%$endLevel = end($tplData.trace.level)%} {%$tplData.SingleTitle.entity = ($tplData.SingleTitle.entity) ? $tplData.SingleTitle.entity : $tplData.hash[$endLevel[0].sign].ename%} {%$tplData.SingleTitle.append = ($tplData.SingleTitle.append) ? $tplData.SingleTitle.append : $tplData.hash[$endLevel[0].sign].appendinfo%} {%$tplData.SingleTitle.attr = ($tplData.SingleTitle.attr) ? $tplData.SingleTitle.attr : $endLevel[0].property%} {%/if%} {%/if%} {%**********数据预处理结束**********%} {%*跳转链接方法 优先级jumpquery>jumplink>ename*%} {%$EndParams = "&rsv_cq={%$extData.OriginQuery%}&rsv_dl=0_left_exactqa_{%$extData.resourceid%}"%} {%function op_exactqa_get_href jumpquery='' jumplink='' ename=''%}{%strip%} {%if $jumpquery%} {%$escaped_jumpquery = $jumpquery%} {%build_search_url params="wd={%$escaped_jumpquery%}"%}{%$EndParams|escape:'html'%} {%elseif $jumplink%} {%$jumplink|escape:'html'%} {%else%} {%$escaped_ename = $ename%} {%build_search_url params="wd={%$escaped_ename%}"%}{%$EndParams|escape:'html'%} {%/if%} {%/strip%}{%/function%} {%*判断整体展现样式*%} {%if count($tplData.result) > 1%} {%*多实体*%} {%$EntityNumber = "M"%} {%$TextLine = "M1_3"%} {%$Additional = "0"%} {%$ViewPic = end(explode(',', $tplData.result[0].selpic))%} {%*selpic格式 e.g: pic_6n_121,pic_4n_78*%} {%$ViewPicType = explode('_', $ViewPic)%} {%$ViewPicType = $ViewPicType[1]%} {%*ViewPicType图片大小(4n/6n)*%} {%if $ViewPicType == '4n'%} {%$TemplateView = 'M4n'%} {%elseif $ViewPicType == '6n'%} {%$TemplateView = 'M6n'%} {%else%} {%$TemplateView = "M1"%} {%/if%} {%if $TemplateView != "M1"%} {%foreach array_slice($tplData.result, 0, 12) as $item%} {%if $item@index < 8 && !$item[$ViewPic]%} {%$TemplateView = "M1"%} {%elseif $item@index >= 8 && $ViewPicType == '4n' && !$item[$ViewPic]%} {%$TemplateView = "M1"%} {%/if%} {%if $item.additional != ""%} {%$Additional = "1"%} {%/if%} {%/foreach%} {%/if%} {%if $TemplateView == "M1"%} {%foreach array_slice($tplData.result, 0, 15) as $item%} {%if $TextLine == "M1_3" && $item.ename|string_display_len > 14 && $item.ename|string_display_len <= 26%} {%$TextLine = "M1_2"%} {%elseif $item.ename|string_display_len > 26 && $item@index < 10%} {%$TextLine = "M1_1"%} {%/if%} {%if $item.additional != ""%} {%$Additional = "1"%} {%/if%} {%/foreach%} {%/if%} {%if $TemplateView == "M1" && $Additional == "0"%} {%$TextLength = 0%} {%$TextEndIndex = 76%} {%foreach array_slice($tplData.result, 0, 77) as $item%} {%$TextLength = $TextLength + $item.ename|string_display_len + 2%} {%if $TextEndIndex == 76 && $TextLength >= 310%} {%$TextEndIndex = $item@index%} {%break%} {%elseif $item@last%} {%$TextEndIndex = $item@index + 1%} {%/if%} {%/foreach%} {%if $TextLength <= 30%} {%$TextLevel = "M1_L1"%} {%elseif $TextLength <= 72%} {%$TextLevel = "M1_L2"%} {%else%} {%$TextLevel = "M1_L3"%} {%/if%} {%/if%} {%else%} {%*单实体*%} {%$EntityNumber = "S"%} {%/if%} {%*判断多跳展现样式*%} {%$ProcessView = "0"%} {%if $tplData.trace.level_num > 1%} {%$ProcessView = "1"%} {%if in_array('人物', $tplData.cate_di)%} {%*如果最终结果为“人物”类*%} {%$ProcessView = ($tplData.result[0].normalpic) ? "4" : "3"%} {%*最终结果有/无图?4:3*%} {%foreach $tplData.hash as $item%} {%if strpos($item.cate, "人物") === false%} {%$ProcessView = "1"%} {%break%} {%elseif !$item.normalpic%} {%$ProcessView = "3"%} {%/if%} {%/foreach%} {%if $ProcessView != "1"%} {%foreach $tplData.trace.level as $level%} {%if count($level) > 1%} {%$ProcessView = "2"%} {%*******************处理检索1.路径实体重复/2.po查询出分支*********************%} {%$signArr = []%} {%foreach $level as $item%} {%if $item.property == '类别'%} {%$ProcessView = 0%} {%break%} {%/if%} {%$arr = array_push($signArr, $item.sign)%} {%/foreach%} {%if count($signArr) != count(array_unique($signArr))%} {%$ProcessView = 0%} {%break%} {%/if%} {%*************(1.q=刘德华老婆朱丽倩的老公/2.q=歌手刘德华的老婆)***************%} {%/if%} {%/foreach%} {%/if%} {%/if%} {%/if%} {%*$EntityNumber    实体类型 S-单实体 M-多实体*%} {%*$TemplateView    模版展现形式 M1-多实体纯文本 M4n-4n宽度图片 M6n-6n宽度图片*%} {%*$TextLine        多文本显示列数 M1_1-一列 M1_2-两列 M1_3-三列*%} {%*$Additional      是否存在属性 1-存在 0-不存在*%} {%*$TextLevel       多文本顿号展现显示级别 M1_L1-大字 M1_L2-中字 M1_L3-小字*%} {%*$TextLength      多文本顿号展现总长度*%} {%*$TextEndIndex    多文本顿号展现截止index*%} {%*$ProcessView     多跳展现样式 0-无 1-通用 2-人物纯文本 3-人名加框 4-人物图文*%}{%/block%}{%block name='content'%}<style>.op_exactqa_main a,.op_exactqa_tools a{text-decoration:none}.op_exactqa_main a:hover,.op_exactqa_tools a:hover{text-decoration:underline}.op_exactqa_tools{color:#999;font-size:.92em;text-align:right;margin:-15px 0 -3px 0}.op_exactqa_tools a{color:#999}.op_exactqa_tools_sep{color:#ccc;margin:0 8px}{%if $EntityNumber == 'S'%}.op_exactqa_s_item{overflow:auto}.op_exactqa_s_area{padding-bottom:20px}.op_exactqa_s_prop{font-size:1.07em;font-weight:bold;color:#999}.op_exactqa_s_prop a,.op_exactqa_s_prop a:hover{color:#999}.op_exactqa_s_answer{font-family:"Microsoft YaHei",SimHei;{%if $tplData.result[0].attrquery|string_display_len < 30%}font-size:1.84em;{%elseif $tplData.result[0].attrquery|string_display_len < 72%}font-size:1.53em;{%elseif $tplData.result[0].attrquery|string_display_len < 138%}font-size:1.23em;{%else%}font-size:1.07em;{%/if%}}.op_exactqa_s_answer_more{white-space:nowrap}.op_exactqa_s_answer_table td{font-family:"Microsoft YaHei",SimHei;font-size:1.23em}.op_exactqa_s_answer_table .op_exactqa_s_answer_th{color:#999;white-space:nowrap;vertical-align:top}.op_exactqa_s_abstract_more{font-family:SimSun;white-space:nowrap;color:#00c}.op_exactqa_s_abstract_more a{color:#00c}{%elseif $EntityNumber == 'M'%}.op_exactqa_title{font-size:1.07em;font-weight:bold;color:#333}.op_exactqa_title span{font-weight:normal;color:#999}.op_exactqa_tag{border-bottom:1px solid #f0f0f0;font-size:.92em;padding-bottom:10px;margin-top:-5px}.op_exactqa_tag_stat0,.op_exactqa_tag_stat1,.op_exactqa_tag_stat2{height:28px;line-height:28px;overflow:hidden}.op_exactqa_tag_item{color:#00c;padding:1px 4px 2px 4px;*padding:3px 4px 1px 4px;margin:0 4px;cursor:pointer;white-space:nowrap}.op_exactqa_tag_item:hover{text-decoration:un{%*i*%}derline}.op_exactqa_tag_selected{color:#fff;background:#388bff}.op_exactqa_tag_selected:hover{text-decoration:none}.op_exactqa_tag_type{color:#999}{%if $tplData.result[0].sort%}.op_exactqa_tag_sort{margin-top:-1px}{%/if%}.op_exactqa_body{padding-bottom:15px;*zoom:1}.op_exactqa_itemsArea{*zoom:normal}.op_exactqa_nodata{text-align:center}.op_exactqa_item p{white-space:nowrap}{%if $TemplateView == 'M1'%}.op_exactqa_item{float:left}.op_exactqa_item p{font-size:1.23em;text-align:left;font-family:"Microsoft YaHei",SimHei}.op_exactqa_item .op_exactqa_item_additional{color:#666;font-size:.81em}{%if $Additional == '0' && $TextLevel%}.op_exactqa_item p{{%if $TextLevel == 'M1_L1'%}font-size:1.84em;{%elseif $TextLevel == 'M1_L2'%}font-size:1.53em;{%elseif $TextLevel == 'M1_L3'%}font-size:1.23em;{%/if%}}.op_exactqa_item p a{color:#000}{%elseif $Additional == '1' && $TextLine%}.op_exactqa_item{overflow:hidden}{%/if%}{%else%}{%$ViewPic = end(explode(',',$tplData.result[0].selpic))%}{%$ViewPicHeight = end(explode('_',$ViewPic))%}.op_exactqa_item p{text-align:center;color:#666}.op_exactqa_item_noimg{background:#dee0e3 url(http://www.baidu.com/aladdin/img/exactqa/exactqa_nopic.png) center center no-repeat;cursor:pointer}{%if $TemplateView == 'M4n'%}{%$ViewPicHeight =($ViewPicHeight) ?{%fe_fn_c_get_img_height col=4 rate=$ViewPicHeight/78 border=1%}:{%fe_fn_c_get_img_height col=4 rate=1 border=1%}%}.op_exactqa_item .c-img4{height:{%$ViewPicHeight|escape:'html'%}px}{%elseif $TemplateView == 'M6n'%}{%$ViewPicHeight =($ViewPicHeight) ?{%fe_fn_c_get_img_height col=6 rate=$ViewPicHeight/121 border=1%}:{%fe_fn_c_get_img_height col=6 rate=1 border=1%}%}.op_exactqa_item .c-img6{height:{%$ViewPicHeight|escape:'html'%}px}{%/if%}{%/if%}.op_exactqa_page{clear:both}.op_exactqa_feedback{color:#00c;font-weight:bold;text-align:left;cursor:pointer;display:none}{%/if%}{%if $ProcessView == '2' || $ProcessView == '3' || $ProcessView == '4'%}.op_exactqa_process_ext{border-top:1px solid #f0f0f0}.op_exactqa_process_ext_title{color:#666;font-weight:bold}.op_exactqa_process_ext_body{position:relative}{%if $ProcessView == '2'%}.op_exactqa_process_ext_body ul{*display:inline-block}.op_exactqa_process_ext_text li{padding-left:20px}.op_exactqa_process_ext_text .op_exactqa_process_ext_icon{background:url(http://www.baidu.com/aladdin/img/exactqa/exactqa_process_icon.png) -175px -14px no-repeat}.op_exactqa_process_ext_text .op_exactqa_process_ext_firsticon{background:url(http://www.baidu.com/aladdin/img/exactqa/exactqa_process_icon.png) -197px 6px no-repeat}.op_exactqa_process_ext_text a{color:#333;text-decoration:none}.op_{%*i*%}exactqa_process_ext_text a:hover{text-decoration:underline}{%else%}.op_exactqa_process_ext_leftbtn,.op_exactqa_process_ext_rightbtn{background:url(http://www.baidu.com/aladdin/img/exactqa/exactqa_process_icon.png) no-repeat;_background:url(http://www.baidu.com/aladdin/img/exactqa/exactqa_process_icon.gif) no-repeat;width:24px;height:48px;position:absolute;top:26px;z-index:20;display:none}.op_exactqa_process_ext_leftbtn{left:-10px;background-position:-25px 0}.op_exactqa_process_ext_rightbtn{right:-10px;_right:0;background-position:0 0}.op_exactqa_process_ext_lef{%*i*%}tbtn:hover{background-position:-75px 0}.op_exactqa_process_ext_rightbtn:hover{background-position:-50px 0}.op_exactqa_process_ext_leftbtn_active,.op_exactqa_process_ext_rightbtn_active{display:block}.op_exactqa_process_ext_show{width:{%fe_fn_c_get_img_height col=24 rate=1 border=1%}px;height:{%{%fe_fn_c_get_img_height col=4 rate=1 border=1%}+4+20%}px;margin-top:-4px;overflow:hidden;position:relative;z-index:10}.op_exactqa_process_ext_content{overflow:auto;position:relative;left:0}.op_exactqa_process_ext_content a{text-decoration:none}.op_exactqa_process_ext_item,.op_exactqa_process_ext_path{text-align:center;margin-top:4px;white-space:nowrap;float:left}.op_exactqa_process_ext_item{width:{%fe_fn_c_get_img_height col=4 rate=1 border=1%}px}.op_exactqa_process_ext_item .c-img4{height:{%fe_fn_c_get_img_height col=4 rate=1 border=1%}px}.op_exactqa_process_ext_item_blue{background:#389cff}.op_exactqa_process_ext_item_red{background:#f54545}.op_exactqa_process_ext_item_mult{margin-top:0;padding-top:4px;background:url(http://www.baidu.com/aladdin/img/exactqa/exactqa_process_icon.png) -100px -46px no-repeat}.op_exactqa_process_ext_item a{color:#fff;display:block}.op_exactqa_process_ext_path{width:68px;margin-top:28px;background:url(http://www.baidu.com/aladdin/img/exactqa/exactqa_process_icon.png) -100px 18px no-repeat;overflow{%*i*%}:hidden}.op_exactqa_process_ext_path p{width:68px;height:30px}{%if $ProcessView == '3'%}.op_exactqa_process_ext_show{height:48px}.op_exactqa_process_ext_leftbtn,.op_exactqa_process_ext_rightbtn{top:0}.op_exactqa_process_ext_item{margin-top:14px}.op_exactqa_process_ext_item_mult{margin-top:10px}.op_exactqa_process_ext_path{margin-top:0}{%/if%}{%/if%}{%/if%}</style><div class="c-border"> <div class="op_exactqa_main"> {%if $EntityNumber == 'S'%} {%$ViewPicS = reset(explode(',', $tplData.result[0].selpic))%} <div class="op_exactqa_s_item c-row"> {%if $tplData.result[0].selpic && $tplData.result[0][$ViewPicS]%} <div class="op_exactqa_s_img c-span6"> <a href='{%op_exactqa_get_href jumpquery=$tplData.result[0].jumpquery jumplink=$tplData.result[0].jumplink ename=$tplData.result[0].ename%}' target="_blank" title="{%$tplData.result[0].ename|escape:'html'%}"> <img class="c-img c-img6" src="{%$tplData.result[0][$ViewPicS]|escape:'html'%}"/> </a> </div> {%/if%} <div class="op_exactqa_s_area {%if $tplData.result[0].selpic && $tplData.result[0][$ViewPicS]%}c-span18{%else%}c-span24{%/if%} c-span-last"> <p class="op_exactqa_s_prop c-gap-bottom-small"> {%if $tplData.SingleTitle.entity && $tplData.SingleTitle.attr && $tplData.trace.level_num == 1%} <a href='{%op_exactqa_get_href ename=$tplData.SingleTitle.entity%}' target="_blank">{%$tplData.SingleTitle.entity|escape:'html'%}</a>{%if $tplData.SingleTitle.append%}<span>({%$tplData.SingleTitle.append|escape:'html'%})</span>{%/if%}{%$tplData.SingleTitle.attr|escape:'html'%}： {%else%} {%$extData.OriginQuery%}： {%/if%} </p> {%$attrqueryjson = json_decode($tplData.result[0].attrquery, true)%} {%if $attrqueryjson && $attrqueryjson[0].key && $attrqueryjson[0].value%} <table class="op_exactqa_s_answer_table"> {%foreach array_slice($attrqueryjson, 0) as $item%} <tr> {%if count($attrqueryjson) > 1%}<td class="op_exactqa_s_answer_th">{%$item.key|escape:'html'%}：</td>{%/if%} <td>{%$item.value|escape:'html'%}</td> </tr> {%/foreach%} </table> {%else%} <p class="op_exactqa_s_answer"> {%if !$tplData.search_property%} <a href='{%op_exactqa_get_href ename=$tplData.result[0].attrquery%}' target="_blank">{%$tplData.result[0].attrquery|limitlen:200|escape:'html'%}</a> {%else%} {%$tplData.result[0].attrquery|limitlen:200|escape:'html'%} {%if $tplData.result[0].attrquery|string_display_len > 200 && $tplData.result[0].sourcelink%}<a class="op_exactqa_s_answer_more" href="{%$tplData.result[0].sourcelink|escape:'html'%}" target="_blank">详情&gt;&gt;</a>{%/if%} {%/if%} </p> {%/if%} {%if $tplData.result[0].summary && !$tplData.search_property && $tplData.result[0].sourcelink && in_array('人物', $tplData.cate_di)%} {%$summaryLimitlen = (end(explode('_', $ViewPicS)) > 130) ? 190 : 160%} <p class="op_exactqa_s_abstract c-gap-top-small"> <span class="c-gap-right-small">{%$tplData.result[0].summary|limitlen:$summaryLimitlen|escape:'html'%}</span><span class="op_exactqa_s_abstract_more"><a href="{%$tplData.result[0].sourcelink|escape:'html'%}" target="_blank">详情&gt;&gt;</a></span> </p> {%/if%} </div> </div> {%elseif $EntityNumber == 'M'%} <div class="op_exactqa_head c-gap-bottom">  <div class="op_exactqa_title c-gap-bottom">{%$extData.OriginQuery%}{%if $tplData.dispNum > 5%}<span>（{%$tplData.dispNum|escape:'html'%}个）</span>{%/if%}：</div>  {%if $tplData.listNum > 20%} {%if $tplData.otherinfo%} {%$tplData.otherinfo = json_decode($tplData.otherinfo,true)%}  {%$statlst = explode(",", $tplData.result[0].statlst)%}  {%$statctl = explode(",", $tplData.result[0].statctl)%}  {%/if%} {%$TraceStatArr = []%} {%foreach $tplData.trace.level as $level%} {%foreach $level as $item%} {%if $item.property == '标签'%} {%$arr = array_push($TraceStatArr, $item.o)%} {%/if%} {%/foreach%} {%/foreach%} {%foreach array_slice($tplData.otherinfo.stat0, 0, 15) as $stat%} {%if in_array($stat.sa, $TraceStatArr)%} {%$arr = array_splice($statctl, array_search('stat0', $statctl), 1)%} {%/if%} {%/foreach%} {%foreach array_slice($tplData.otherinfo.stat1, 0, 15) as $stat%} {%if in_array($stat.sa, $TraceStatArr)%} {%$arr = array_splice($statctl, array_search('stat1', $statctl), 1)%} {%/if%} {%/foreach%} {%foreach array_slice($tplData.otherinfo.stat2, 0, 15) as $stat%} {%if in_array($stat.sa, $TraceStatArr)%} {%$arr = array_splice($statctl, array_search('stat2', $statctl), 1)%} {%/if%} {%/foreach%} {%if (in_array("stat0",$statctl) && $tplData.otherinfo.stat0|@count > 1) || (in_array("stat1",$statctl) && $tplData.otherinfo.stat1|@count > 1) || (in_array("stat2",$statctl) && $tplData.otherinfo.stat2|@count > 1)%} <div class="op_exactqa_tag" data-click="{'fm':'beha'}"> {%if $tplData.otherinfo.stat0 && count($tplData.otherinfo.stat0) > 1 && in_array("stat0",$statctl)%} {%if $statlst[0] == "字数"%}{%$sortStat0 = sort($tplData.otherinfo.stat0)%}{%/if%} <p class="op_exactqa_tag_stat0"> <span class="op_exactqa_tag_type">{%$statlst[0]%}：</span> <span class="op_exactqa_tag_item op_exactqa_tag_selected OP_LOG_BTN">全部</span> {%foreach array_slice($tplData.otherinfo.stat0, 0, 15) as $tag%} <span class="op_exactqa_tag_item OP_LOG_BTN">{%$tag.sa|limitlen:20|escape:'html'%}</span> {%/foreach%} </p> {%/if%} {%if $tplData.otherinfo.stat1 && $tplData.otherinfo.stat1|@count > 1 && in_array("stat1",$statctl)%} <p class="op_exactqa_tag_stat1"> <span class="op_exactqa_tag_type">{%$statlst[1]%}：</span> <span class="op_exactqa_tag_item op_exactqa_tag_selected OP_LOG_BTN">全部</span> {%foreach array_slice($tplData.otherinfo.stat1, 0, 15) as $tag%} <span class="op_exactqa_tag_item OP_LOG_BTN">{%$tag.sa|limitlen:20|escape:'html'%}</span> {%/foreach%} </p> {%/if%} {%if $tplData.otherinfo.stat2 && $tplData.otherinfo.stat2|@count > 1 && in_array("stat2",$statctl)%} <p class="op_exactqa_tag_stat2"> <span class="op_exactqa_tag_type">{%$statlst[2]%}：</span> <span class="op_exactqa_tag_item op_exactqa_tag_selected OP_LOG_BTN">全部</span> {%foreach array_slice($tplData.otherinfo.stat2, 0, 15) as $tag%} <span class="op_exactqa_tag_item OP_LOG_BTN">{%$tag.sa|limitlen:20|escape:'html'%}</span> {%/foreach%} </p> {%/if%} </div> {%/if%} {%if $tplData.result[0].sort%} {%$sortlstArr = explode(",", $tplData.result[0].sort)%} {%$sortlstArrLength = 0%} {%foreach $sortlstArr as $sort%} {%if $sort%}{%$sortlstArrLength = $sortlstArrLength + 1%}{%/if%} {%/foreach%} {%if $sortlstArrLength > 1%} {%*1个以上sort才展现*%} <ul class="c-tabs-nav op_exactqa_tag_sort"> {%$firstSort = 1%} {%foreach $sortlstArr as $sort%} {%if $sort%}<li class="c-tabs-nav-li OP_LOG_BTN {%if $firstSort%}c-tabs-nav-selected{%/if%}" sort_key="{%$sort@index+16%}">{%$sort|limitlen:20|escape:'html'%}</li>{%$firstSort = 0%}{%/if%} {%/foreach%} </ul> {%/if%} {%/if%} {%/if%}  </div> <div class="op_exactqa_body">  <div class="op_exactqa_itemsArea c-row"> {%if $TemplateView == "M1" && $Additional == "0"%}  {%foreach array_slice($tplData.result, 0, $TextEndIndex) as $item%} <div class="op_exactqa_item c-gap-bottom-small"> <p><a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%$item.ename|limitlen:62|escape:'html'%}</a>{%if !$item@last%}、{%/if%}</p> </div> {%/foreach%} {%elseif $TemplateView == "M1" && $TextLine == "M1_1" && $Additional == "1"%}  {%foreach array_slice($tplData.result, 0, 5) as $item%} {%if !$item.additional%} {%$enameLimitlen = 50%} {%$additionalLimitlen = 0%} {%else%} {%$enameLimitlen = ($item.ename|string_display_len > 50) ? 50 : $item.ename|string_display_len%} {%$additionalLimitlen = 63 - $enameLimitlen%} {%/if%} <div class="op_exactqa_item c-gap-bottom c-span24 c-span-last"> <p> <a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%$item.ename|limitlen:$enameLimitlen|escape:'html'%}</a><span class="op_exactqa_item_additional c-gap-left-small" title="{%if $item.additional%}{%$item.additional|escape:'html'%}{%/if%}">{%if $item.additional%}{%$item.additional|limitlen:$additionalLimitlen|escape:'html'%}{%/if%}</span> </p> </div> {%/foreach%} {%elseif $TemplateView == "M1" && $TextLine == "M1_2" && $Additional == "1"%}  {%foreach array_slice($tplData.result, 0, 10) as $item%} {%if !$item.additional%} {%$enameLimitlen = 26%} {%$additionalLimitlen = 0%} {%else%} {%$enameLimitlen = ($item.ename|string_display_len > 26) ? 26 : $item.ename|string_display_len%} {%$additionalLimitlen = 32 - $enameLimitlen%} {%/if%} <div class="op_exactqa_item c-gap-bottom c-span12 {%if $item@iteration is div by 2%}c-span-last{%/if%}"> <p> <a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%$item.ename|limitlen:$enameLimitlen|escape:'html'%}</a><span class="op_exactqa_item_additional c-gap-left-small" title="{%if $item.additional%}{%$item.additional|escape:'html'%}{%/if%}">{%if $item.additional%}{%$item.additional|limitlen:$additionalLimitlen|escape:'html'%}{%/if%}</span> </p> </div> {%/foreach%} {%elseif $TemplateView == "M1" && $TextLine == "M1_3" && $Additional == "1"%}  {%foreach array_slice($tplData.result, 0, 15) as $item%} {%if !$item.additional%} {%$enameLimitlen = 14%} {%$additionalLimitlen = 0%} {%else%} {%$enameLimitlen = ($item.ename|string_display_len > 14) ? 14 : $item.ename|string_display_len%} {%$additionalLimitlen = 21 - $enameLimitlen%} {%/if%} <div class="op_exactqa_item c-gap-bottom c-span8 {%if $item@iteration is div by 3%}c-span-last{%/if%}"> <p> <a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%$item.ename|limitlen:$enameLimitlen|escape:'html'%}</a><span class="op_exactqa_item_additional c-gap-left-small" title="{%if $item.additional%}{%$item.additional|escape:'html'%}{%/if%}">{%if $item.additional%}{%$item.additional|limitlen:$additionalLimitlen|escape:'html'%}{%/if%}</span> </p> </div> {%/foreach%} {%elseif $TemplateView == 'M4n'%}  {%foreach array_slice($tplData.result, 0, 12) as $item%} {%$imgSrc = $item[end(explode(',', $tplData.result[0].selpic))]%} <div class="op_exactqa_item c-gap-bottom c-span4 {%if $item@iteration is div by 6%}c-span-last{%/if%}"> <div class="op_exactqa_feedback OP_LOG_BTN">有错误?</div> <p class="op_exactqa_item_img"><a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%if $imgSrc%}<img class="c-img c-img4" src="{%$imgSrc|escape:'html'%}"/>{%else%}<span class="c-img c-img4 op_exactqa_item_noimg"></span>{%/if%}</a></p> <p class="c-gap-top-small"><a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%$item.ename|limitlen:11|escape:'html'%}</a></p> {%if $Additional == "1"%} <p title="{%if $item.additional%}{%$item.additional|escape:'html'%}{%/if%}">{%if $item.additional%}{%$item.additional|limitlen:11|escape:'html'%}{%else%}&nbsp;{%/if%}</p> {%/if%} </div> {%/foreach%} {%elseif $TemplateView == 'M6n'%}  {%foreach array_slice($tplData.result, 0, 8) as $item%} {%$imgSrc = $item[end(explode(',', $tplData.result[0].selpic))]%} <div class="op_exactqa_item c-gap-bottom c-span6 {%if $item@iteration is div by 4%}c-span-last{%/if%}"> <div class="op_exactqa_feedback OP_LOG_BTN">有错误?</div> <p class="op_exactqa_item_img"><a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%if $imgSrc%}<img class="c-img c-img6" src="{%$imgSrc|escape:'html'%}"/>{%else%}<span class="c-img c-img6 op_exactqa_item_noimg"></span>{%/if%}</a></p> <p class="c-gap-top-small"><a href='{%op_exactqa_get_href jumpquery=$item.jumpquery jumplink=$item.jumplink ename=$item.ename%}' title="{%$item.ename|escape:'html'%}" target="_blank">{%$item.ename|limitlen:18|escape:'html'%}</a></p> {%if $Additional == "1"%} <p title="{%if $item.additional%}{%$item.additional|escape:'html'%}{%/if%}">{%if $item.additional%}{%$item.additional|limitlen:18|escape:'html'%}{%else%}&nbsp;{%/if%}</p> {%/if%} </div> {%/foreach%} {%/if%} </div>  <div class="op_exactqa_page" style="display:none"></div>  </div> {%/if%} </div>   <div class="op_exactqa_tools"> {%if ($EntityNumber == 'S' && $tplData.result[0].sourcename) || ($EntityNumber == 'M' && strpos($tplData.result[0].sourcelink, 'http://lvyou.baidu.com') !== false)%}来自<a href="{%if $EntityNumber == 'S'%}{%$tplData.result[0].sourcelink|escape:'html'%}{%elseif $EntityNumber == 'M' && strpos($tplData.result[0].sourcelink, 'http://lvyou.baidu.com') !== false%}http://lvyou.baidu.com{%/if%}" target="_blank">{%$tplData.result[0].sourcename|escape:'html'%}</a><span class="op_exactqa_tools_sep">|</span>{%/if%}<span class="op_exactqa_tools_fb_area"><a class="op_exactqa_tools_fb OP_LOG_BTN" href="javascript:;" data-click="{info:'报错'}">报错</a></span> </div>  {%if $ProcessView == '2' || $ProcessView == '3' || $ProcessView == '4'%}  <div class="op_exactqa_process_ext c-gap-top"> <p class="c-gap-top-small c-gap-bottom-small op_exactqa_process_ext_title">推理过程：</p> <div class="op_exactqa_process_ext_body"> {%if $ProcessView == '2'%} {%function op_exactqa_level levelitem='' itemindex='' levelindex=''%} {%$result = array()%} {%foreach $tplData.trace.level[$levelindex+1] as $item%} {%$uftArr = array_keys(str_split(strrev(decbin($item.uft))),"1")%} {%if in_array($itemindex, $uftArr)%} {%$result[$item@index] = $item%} {%/if%} {%/foreach%} {%***************************************************源码带换行**********************************************
                <a href='{%op_exactqa_get_href ename=$tplData.hash[$levelitem.sign].ename%}' target="_blank">{%$tplData.hash[$levelitem.sign].ename|escape:'html'%}</a>的{%$levelitem.property|escape:'html'%}是
                {%if count($result) == 0%}
                    {%if $EntityNumber == 'M'%}
                        {%$firstIf = true%}
                        {%foreach $tplData.result as $item%}
                            {%$uftArr = array_keys(str_split(strrev(decbin($item.uft))),"1")%}
                            {%if in_array($itemindex, $uftArr)%}
                                {%if !$firstIf%}、{%/if%}<a href='{%op_exactqa_get_href ename=$item.ename%}' target="_blank">{%$item.ename|escape:'html'%}</a>
                                {%$firstIf = false%}
                            {%/if%}
                        {%/foreach%}
                    {%elseif $EntityNumber == 'S'%}
                        <a href='{%op_exactqa_get_href ename=$tplData.result[0].ename%}' target="_blank">{%$tplData.result[0].ename|escape:'html'%}</a>
                    {%/if%}
                    。</li>
                {%elseif count($result) == 1%}
                    {%foreach $result as $item%}
                        <a href='{%op_exactqa_get_href ename=$tplData.hash[$item.sign].ename%}' target="_blank">{%$tplData.hash[$item.sign].ename|escape:'html'%}</a>，
                    {%/foreach%}
                    {%foreach $result as $item%}
                        {%op_exactqa_level levelitem=$item itemindex=$item@key levelindex=$levelindex+1%}
                    {%/foreach%}
                {%else%}
                    {%foreach $result as $item%}
                        <a href='{%op_exactqa_get_href ename=$tplData.hash[$item.sign].ename%}' target="_blank">{%$tplData.hash[$item.sign].ename|escape:'html'%}</a>{%if !$item@last%}、{%/if%}
                    {%/foreach%}。</li><li><ul>
                    {%foreach $result as $item%}
                        <li class="op_exactqa_process_ext_icon">{%op_exactqa_level levelitem=$item itemindex=$item@key levelindex=$levelindex+1%}
                    {%/foreach%}</ul></li>
                {%/if%}
                *************************************************************************************************************%} {%*****以上内容压缩到一行以防止fis压缩出空格*****%} <a href='{%op_exactqa_get_href ename=$tplData.hash[$levelitem.sign].ename%}' target="_blank">{%$tplData.hash[$levelitem.sign].ename|escape:'html'%}</a>的{%$levelitem.property|escape:'html'%}是{%if count($result) == 0%}{%if $EntityNumber == 'M'%}{%$firstIf = true%}{%foreach $tplData.result as $item%}{%$uftArr = array_keys(str_split(strrev(decbin($item.uft))),"1")%}{%if in_array($itemindex, $uftArr)%}{%if !$firstIf%}、{%/if%}<a href='{%op_exactqa_get_href ename=$item.ename%}' target="_blank">{%$item.ename|escape:'html'%}</a>{%$firstIf = false%}{%/if%}{%/foreach%}{%elseif $EntityNumber == 'S'%}<a href='{%op_exactqa_get_href ename=$tplData.result[0].ename%}' target="_blank">{%$tplData.result[0].ename|escape:'html'%}</a>{%/if%}。</li>{%elseif count($result) == 1%}{%foreach $result as $item%}<a href='{%op_exactqa_get_href ename=$tplData.hash[$item.sign].ename%}' target="_blank">{%$tplData.hash[$item.sign].ename|escape:'html'%}</a>，{%/foreach%}{%foreach $result as $item%}{%op_exactqa_level levelitem=$item itemindex=$item@key levelindex=$levelindex+1%}{%/foreach%}{%else%}{%foreach $result as $item%}<a href='{%op_exactqa_get_href ename=$tplData.hash[$item.sign].ename%}' target="_blank">{%$tplData.hash[$item.sign].ename|escape:'html'%}</a>{%if !$item@last%}、{%/if%}{%/foreach%}。</li><li><ul>{%foreach $result as $item%}<li class="op_exactqa_process_ext_icon">{%op_exactqa_level levelitem=$item itemindex=$item@key levelindex=$levelindex+1%}{%/foreach%}</ul></li>{%/if%} {%/function%} <ul class="op_exactqa_process_ext_text"> {%foreach $tplData.trace.level[0] as $item%} <li class="op_exactqa_process_ext_firsticon">{%op_exactqa_level levelitem=$item itemindex=$item@index levelindex=0%} {%/foreach%} </ul> {%else%} <a class="op_exactqa_process_ext_leftbtn OP_LOG_BTN" href="javascript:;" data-click="{'fm':'beha'}"></a> <a class="op_exactqa_process_ext_rightbtn OP_LOG_BTN" href="javascript:;" data-click="{'fm':'beha'}"></a> <div class="op_exactqa_process_ext_show"> <div class="op_exactqa_process_ext_content"> {%foreach array_slice($tplData.trace.level, 0) as $item%} <div class="op_exactqa_process_ext_item"> {%if $ProcessView == '4'%} <p><a href='{%op_exactqa_get_href ename=$tplData.hash[$item[0].sign].ename%}' title="{%$tplData.hash[$item[0].sign].ename|escape:'html'%}" target="_blank"><img class="c-img c-img4" src="{%$tplData.hash[$item[0].sign].normalpic%}"/></a></p> {%/if%} <p class="op_exactqa_process_ext_item_blue"><a href='{%op_exactqa_get_href ename=$tplData.hash[$item[0].sign].ename%}' title="{%$tplData.hash[$item[0].sign].ename|escape:'html'%}" target="_blank">{%$tplData.hash[$item[0].sign].ename|limitlen:11|escape:'html'%}</a></p> </div> <div class="op_exactqa_process_ext_path"> <p>{%$item[0].property|limitlen:9|escape:'html'%}</p> </div> {%/foreach%} <div class="op_exactqa_process_ext_item{%if $tplData.listNum > 1%} op_exactqa_process_ext_item_mult{%/if%}"> {%if $ProcessView == '4'%} <p><a href='{%op_exactqa_get_href ename=$tplData.result[0].ename%}' title="{%$tplData.result[0].ename|escape:'html'%}" target="_blank"><img class="c-img c-img4" src="{%$tplData.result[0].normalpic|escape:'html'%}"/></a></p> {%/if%} <p class="op_exactqa_process_ext_item_red"><a href='{%op_exactqa_get_href ename=$tplData.result[0].ename%}' title="{%$tplData.result[0].ename|escape:'html'%}" target="_blank">{%if $tplData.listNum > 1%}{%$tplData.result[0].ename|limitlen:8|escape:'html'%}&nbsp;等{%else%}{%$tplData.result[0].ename|limitlen:11|escape:'html'%}{%/if%}</a></p> </div> </div> </div> {%/if%} </div> </div>  {%/if%}</div><script type="text/javascript" >
    A.setup({
        OriginQuery: "{%$extData.OriginQuery|escape:'html'|escape:'javascript'%}",
        EndParams: "{%$EndParams|escape:'javascript'%}",
        EntityNumber: "{%$EntityNumber|escape:'javascript'%}",  //实体类型S/M
        TemplateView: "{%$TemplateView|escape:'javascript'%}",  //模版展现类型M1/M4n/M6n
        TextLine: "{%$TextLine|escape:'javascript'%}",          //M1展现时，文字展现样式M1_1/M1_2/M1_3
        Additional: "{%$Additional|escape:'javascript'%}",      //是否展示属性值 0否/1是
        TextEndIndex: "{%$TextEndIndex|escape:'javascript'%}",  //多文本顿号展现截止index
        ListNumber: "{%$tplData.listNum|escape:'javascript'%}", //结果总数
        ProcessView: "{%$ProcessView|escape:'javascript'%}",    //多跳展示样式
        ProcessItemWidth: "{%fe_fn_c_get_img_height col=4 rate=1 border=1%}",   //多跳内容元素宽度
        ProcessShowWidth: "{%fe_fn_c_get_img_height col=24 rate=1 border=1%}"   //多跳显示窗口宽度
    });
</script><script>A.setup(function(){String.prototype.styleFilterPX = function(){ return Number(this.match(/(\-?\d+)/) ? RegExp.$1 : 0);};var Ala = this,ajaxFinished = false;var $dom_tags = Ala.find('.op_exactqa_tag_item'), $dom_tabs = Ala.find('.c-tabs-nav-li'), $dom_pageArea = Ala.find('.op_exactqa_page'), originQuery = Ala.data.OriginQuery,endParams = Ala.data.EndParams,entityNumber = Ala.data.EntityNumber, templateView = Ala.data.TemplateView, textLine = Ala.data.TextLine, additional = Ala.da{%*i*%}ta.Additional, processView = Ala.data.ProcessView, srcid = Ala.srcid; var asynPrm = { sortKey : '', sortType : '1', stat0 : '', stat1 : '', stat2 : '', pn : 0, rn : undefined };var pagePrm = { init : true, listNum : Number(Ala.data.ListNumber), nowPage : 1,endPage : undefined};A.use('page', function(){if (templateView == 'M1' && additional == '0') {asynPrm.rn = Number(Ala.data.TextEndIndex); } else if (templateView == 'M1' && textLine == 'M1_1' && additional == '1') {asynPrm.rn = 5;} else if (te{%*i*%}mplateView == 'M1' && textLine == 'M1_2' && additional == '1'){asynPrm.rn = 10;} else if (templateView == 'M1' && textLine == 'M1_3' && additional == '1'){asynPrm.rn = 15;} else if (templateView == 'M4n') {asynPrm.rn = 12;} else if (templateView == 'M6n'){asynPrm.rn = 8;};getTagStatus(); initPageComp(); initFeedback(); function getTagStatus(){if (Ala.find('.op_exactqa_tag_stat0').length) {asynPrm.stat0 = $('.op_exactqa_tag_selected', Ala.find('.op_exactqa_tag_stat0')).html();if (asynPrm.stat0 =={%*i*%} '全部') {asynPrm.stat0 = ''};};if (Ala.find('.op_exactqa_tag_stat1').length) {asynPrm.stat1 = $('.op_exactqa_tag_selected', Ala.find('.op_exactqa_tag_stat1')).html();if (asynPrm.stat1 == '全部') {asynPrm.stat1 = ''};};if (Ala.find('.op_exactqa_tag_stat2').length) {asynPrm.stat2 = $('.op_exactqa_tag_selected', Ala.find('.op_exactqa_tag_stat2')).html();if (asynPrm.stat2 == '全部') {asynPrm.stat2 = ''};};if (Ala.find('.op_exactqa_tag_sort').length) {asynPrm.sortKey = $('.c-tabs-nav-selected', Ala.find('{%*i*%}.op_exactqa_tag_sort')).attr('sort_key');};}$dom_tags.length && $dom_tags.on('click', function(){var thisType = $(this).parent('p').attr('class').replace('op_exactqa_tag_', ''),thisName = ($(this).html() == '全部') ? '' : $(this).html(),$dom_selectedTag = $('.op_exactqa_tag_selected', $(this).parent('p')); if (!$(this).is($dom_selectedTag)) {$dom_selectedTag.removeClass('op_exactqa_tag_selected');$(this).addClass('op_exactqa_tag_selected');switch (thisType) {case 'stat0':asynPrm.stat0 = thisName; {%*i*%}break;case 'stat1':asynPrm.stat1 = thisName; break;case 'stat2':asynPrm.stat2 = thisName; break;default:return;};pagePrm.nowPage = 1;asynPrm.pn = 0;pagePrm.init = true;asyncGetData(asynPrm.sortKey,asynPrm.sortType,asynPrm.stat0,asynPrm.stat1,asynPrm.stat2,asynPrm.pn,asynPrm.rn);};});$dom_tabs.length && $dom_tabs.on('click', function(){if (!$(this).hasClass('c-tabs-nav-selected')) {Ala.find('.c-tabs-nav-selected').removeClass('c-tabs-nav-selected');$(this).addClass('c-tabs-nav-selected');pagePrm.{%*i*%}nowPage = 1;asynPrm.sortKey = $(this).attr('sort_key');asynPrm.pn = 0;pagePrm.init = true;asyncGetData(asynPrm.sortKey,asynPrm.sortType,asynPrm.stat0,asynPrm.stat1,asynPrm.stat2,asynPrm.pn,asynPrm.rn);};});});function asyncGetData(sortKey,sortType,stat0,stat1,stat2,pn,rn){var asyncUrl = 'http://opendata.baidu.com/api.php?resource_id=' + srcid + '&format=json&ie=utf-8&oe=utf-8&query=' + encodeURIComponent(originQuery) + '&sort_key=' + encodeURIComponent(sortKey) + '&sort_type=' + sortType + '&sta{%*i*%}t0=' + encodeURIComponent(stat0) + '&stat1=' + encodeURIComponent(stat1) + '&stat2=' + encodeURIComponent(stat2) + '&pn=' + pn + '&rownum=' + rn;$.ajax({dataType : 'jsonp',scriptCharset : 'utf-8',jsonp : 'cb',timeout : 6000,url : asyncUrl,success : initData});}function initData(data){ if (ajaxFinished) return;if (data.status == '0' && data.data.length > 0) { var dispData = data.data[0].result,dispHtml = [];if (data.data[0].search_property) {var additionalKey = data.data[0].search_property;} else{%*i*%} if (data.data[0].cmpbrief[0]){var additionalKey = data.data[0].cmpbrief[0];} else {var additionalKey = 'remark';};for (var i = 0; i < dispData.length; i++) {if (additionalKey && dispData[i][additionalKey]) {dispData[i].additional = dispData[i][additionalKey];};};if (templateView == 'M1' && additional == '0') { for (var i = 0; i < dispData.length; i++) {dispHtml = dispHtml.concat(['<div class="op_exactqa_item c-gap-bottom-small">','<p>','<a href="', getJumpLink(dispData[i]), '" title="', dispDat{%*i*%}a[i].ename, '" target="_blank">', $.subByte(dispData[i].ename, 62), '</a>',(i == dispData.length - 1) ? '' : '、','</p>','</div>']);};} else if (templateView == 'M1' && textLine == 'M1_1' && additional == '1') { for (var i = 0; i < dispData.length; i++) {if (!dispData[i].additional) {var enameLimitlen = 50,additionalLimitlen = 0;} else {var enameLimitlen = Math.min($.getByteLength(dispData[i].ename), 50),additionalLimitlen = 63 - enameLimitlen;};dispHtml = dispHtml.concat(['<div class="op_exactqa{%*i*%}_item c-gap-bottom c-span24 c-span-last">','<p>','<a href="', getJumpLink(dispData[i]), '" title="', dispData[i].ename, '" target="_blank">', $.subByte(dispData[i].ename, enameLimitlen), '</a>','<span class="op_exactqa_item_additional c-gap-left-small" title="', dispData[i].additional ? dispData[i].additional : '', '">', dispData[i].additional ? $.subByte(dispData[i].additional, additionalLimitlen) : '&nbsp;', '</span>','</p>','</div>']);};} else if (templateView == 'M1' && textLine == 'M1_2' &&{%*i*%} additional == '1'){ for (var i = 0; i < dispData.length; i++) {if (!dispData[i].additional) {var enameLimitlen = 26,additionalLimitlen = 0;} else {var enameLimitlen = Math.min($.getByteLength(dispData[i].ename), 26),additionalLimitlen = 32 - enameLimitlen;};dispHtml = dispHtml.concat(['<div class="op_exactqa_item c-gap-bottom c-span12 ', (i % 2 == 1) ? 'c-span-last' : '', '">','<p>','<a href="', getJumpLink(dispData[i]), '" title="', dispData[i].ename, '" target="_blank">', $.subByte(dispData[i{%*i*%}].ename, enameLimitlen), '</a>','<span class="op_exactqa_item_additional c-gap-left-small" title="', dispData[i].additional ? dispData[i].additional : '', '">', dispData[i].additional ? $.subByte(dispData[i].additional, additionalLimitlen) : '&nbsp;', '</span>','</p>','</div>']);};} else if (templateView == 'M1' && textLine == 'M1_3' && additional == '1'){ for (var i = 0; i < dispData.length; i++) {if (!dispData[i].additional) {var enameLimitlen = 14,additionalLimitlen = 0;} else {var enameLimit{%*i*%}len = Math.min($.getByteLength(dispData[i].ename), 14),additionalLimitlen = 21 - enameLimitlen;};dispHtml = dispHtml.concat(['<div class="op_exactqa_item c-gap-bottom c-span8 ', (i % 3 == 2) ? 'c-span-last' : '', '">','<p>','<a href="', getJumpLink(dispData[i]), '" title="', dispData[i].ename, '" target="_blank">', $.subByte(dispData[i].ename, enameLimitlen), '</a>','<span class="op_exactqa_item_additional c-gap-left-small" title="', dispData[i].additional ? dispData[i].additional : '', '">', di{%*i*%}spData[i].additional ? $.subByte(dispData[i].additional, additionalLimitlen) : '&nbsp;', '</span>','</p>','</div>']);};} else if (templateView == 'M4n') { for (var i = 0; i < dispData.length; i++) {if (additional == 1) {var additionalHTML;if (dispData[i].additional) {additionalHTML = '<p title="' + dispData[i].additional + '">' + $.subByte(dispData[i].additional, 11) + '</p>';} else {additionalHTML = '<p>&nbsp;</p>';};};var imgSrc = dispData[i][dispData[i].selpic.split(',')[1]],imgHtml = (imgSrc{%*i*%}) ? '<img class="c-img c-img4" src="' + imgSrc + '"/>' : '<span class="c-img c-img4 op_exactqa_item_noimg"></span>';dispHtml = dispHtml.concat(['<div class="op_exactqa_item c-gap-bottom c-span4 ', (i % 6 == 5) ? 'c-span-last' : '', '">','<div class="op_exactqa_feedback OP_LOG_BTN">有错误?</div>','<p class="op_exactqa_item_img"><a href="', getJumpLink(dispData[i]), '" title="', dispData[i].ename, '" target="_blank">', imgHtml, '</a></p>','<p class="c-gap-top-small"><a href="', getJumpLink(dispData[i{%*i*%}]), '" title="', dispData[i].ename, '" target="_blank">', $.subByte(dispData[i].ename, 11), '</a></p>',additionalHTML ? additionalHTML : '','</div>']);};} else if (templateView == 'M6n'){ for (var i = 0; i < dispData.length; i++) {if (additional == 1) {var additionalHTML;if (dispData[i].additional) {additionalHTML = '<p title="' + dispData[i].additional + '">' + $.subByte(dispData[i].additional, 18) + '</p>';} else {additionalHTML = '<p>&nbsp;</p>';};};var imgSrc = dispData[i][dispData[i].selpic{%*i*%}.split(',')[1]],imgHtml = (imgSrc) ? '<img class="c-img c-img6" src="' + imgSrc + '"/>' : '<span class="c-img c-img6 op_exactqa_item_noimg"></span>';dispHtml = dispHtml.concat(['<div class="op_exactqa_item c-gap-bottom c-span6 ', (i % 4 == 3) ? 'c-span-last' : '', '">','<div class="op_exactqa_feedback OP_LOG_BTN">有错误?</div>','<p class="op_exactqa_item_img"><a href="', getJumpLink(dispData[i]), '" title="', dispData[i].ename, '" target="_blank">', imgHtml, '</a></p>','<p class="c-gap-top-small"><a{%*i*%} href="', getJumpLink(dispData[i]), '" title="', dispData[i].ename, '" target="_blank">', $.subByte(dispData[i].ename, 18), '</a></p>',additionalHTML ? additionalHTML : '','</div>']);};};pagePrm.listNum = data.data[0].listNum || pagePrm.listNum; showData(dispHtml.join(''));} else {var $dom_itemsArea = Ala.find('.op_exactqa_itemsArea'),itemsAreaHeight = $dom_itemsArea.innerHeight();$dom_itemsArea.html('<div class="op_exactqa_nodata"><p><i class="c-icon c-icon-warning c-gap-icon-right-small"></i>抱{%*i*%}歉，暂无该类型的结果，请重新筛选！</p></div>');$('.op_exactqa_nodata', $dom_itemsArea).height(itemsAreaHeight).find('p').css({'padding-top':parseInt(itemsAreaHeight / 2.3)}); $dom_pageArea.hide(); };function getJumpLink(dispData){if (dispData.jumpquery) {var jumplink = "http://www.baidu.com/s?wd=" + encodeURIComponent(dispData.jumpquery) + endParams;} else if (dispData.jumplink) {var jumplink = dispData.jumplink;} else {var jumplink = "http://www.baidu.com/s?wd=" + encodeURIComponent(dispData.ename) + endParams;{%*i*%}}return jumplink;}}function showData(data){ var $dom_dataArea = Ala.find('.op_exactqa_itemsArea');$dom_dataArea.html(data);pagePrm.init && initPageComp(); initFeedback(); }function initPageComp(){ if ($dom_pageArea.length) {if (pagePrm.listNum > asynPrm.rn) {$dom_pageArea.css({display: 'block'}); pagePrm.endPage = Math.ceil(pagePrm.listNum / asynPrm.rn);A.ui.page($dom_pageArea[0], pagePrm.nowPage, pagePrm.endPage, {onChange: function(nowPage, endPage){pagePrm.nowPage = nowPage;asynPrm.pn = (page{%*i*%}Prm.nowPage - 1) * asynPrm.rn;pagePrm.init = false;asyncGetData(asynPrm.sortKey,asynPrm.sortType,asynPrm.stat0,asynPrm.stat1,asynPrm.stat2,asynPrm.pn,asynPrm.rn);}});} else {$dom_pageArea.css({display: 'none'}); };};}function initFeedback(){ Ala.find('.op_exactqa_tools_fb_area').html('<a class="op_exactqa_tools_fb OP_LOG_BTN" href="javascript:;" data-click="{info:\'报错\'}">报错</a>');Ala.find('.op_exactqa_tools_fb').on('click', function(){var _this = this;if (entityNumber == 'S' || templateView == {%*i*%}'M1') { $(_this).replaceWith('<span>感谢反馈</span>');} else { $dom_fbBtn = Ala.find('.op_exactqa_feedback');if ($(_this).html() != '取消报错') {$dom_fbBtn.show();$(_this).html('取消报错');$dom_fbBtn.on('mouseover', function(){if ($(this).html() != '已反馈') {$(this).parent('div').css({'background-color':'#fafafa'});};}).on('mouseout', function(){if ($(this).html() != '已反馈') {$(this).parent('div').css({'background-color':'#fff'});};}).on('click', function(){if ($(this).html() != '已反馈') {$(this).css({color:'#cc{%*i*%}c', cursor:'default'}).html('已反馈').parent('div').css({'background-color':'#fff'});$dom_fbBtn.stop().delay(500).hide(200);if ($dom_fbBtn.not(function(){return $(this).html() == '已反馈'}).length != 0) {$(_this).html('感谢，继续报错');} else {$(_this).replaceWith('<span>感谢反馈</span>');};};});} else {$dom_fbBtn.hide(120);$(_this).html('报错');};}});}if (processView == '3' || processView == '4') {var $dom_proList = Ala.find('.op_exactqa_process_ext_content'), $dom_leftBtn = Ala.find('.op_exactqa_process_ext_left{%*i*%}btn'), $dom_rightBtn = Ala.find('.op_exactqa_process_ext_rightbtn'); var ITEM_WIDTH = parseInt(Ala.data.ProcessItemWidth), PATH_WIDTH = 68, SHOW_WIDTH = parseInt(Ala.data.ProcessShowWidth), LIST_WIDTH = $('.op_exactqa_process_ext_item', $dom_proList).length * ITEM_WIDTH + $('.op_exactqa_process_ext_path', $dom_proList).length * PATH_WIDTH; $dom_proList.width(LIST_WIDTH); if (LIST_WIDTH > SHOW_WIDTH) {CheckBtnStatus(); $dom_leftBtn.on('click', function(){var nBegin = $dom_proList.css('left').styl{%*i*%}eFilterPX(), nExpStep = ITEM_WIDTH * 3 + PATH_WIDTH * 3, nEnd = Math.min(nBegin + nExpStep, 0); $dom_proList.not(':animated').animate({left: nEnd + 'px'}, 500, 'swing', CheckBtnStatus);});$dom_rightBtn.on('click', function(){var nBegin = $dom_proList.css('left').styleFilterPX(), nExpStep = ITEM_WIDTH * 3 + PATH_WIDTH * 3, nEnd = Math.max(nBegin - nExpStep, SHOW_WIDTH - LIST_WIDTH); $dom_proList.not(':animated').animate({left: nEnd + 'px'}, 500, 'swing', CheckBtnStatus);});};function CheckBtnStat{%*i*%}us(){var nPositionLeft = $dom_proList.css('left').styleFilterPX();$dom_leftBtn.toggleClass('op_exactqa_process_ext_leftbtn_active', nPositionLeft < 0);$dom_rightBtn.toggleClass('op_exactqa_process_ext_rightbtn_active', LIST_WIDTH + nPositionLeft > SHOW_WIDTH);}};this.dispose = function(){if(!ajaxFinished){ajaxFinished = true;}};});</script>{%/block%}