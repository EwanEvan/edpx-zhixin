<?php 
  class CssJs_Util_right_baby_skill
   {
      private static $cssStr = '.container_l .opr_right_baby_skill_cal{width:270px;}.container_l .opr_right_baby_skill_cal input{width:250px;}.container_s .opr_right_baby_skill_cal{width:180px;}.container_s .opr_right_baby_skill_cal input{width:160px;}.opr_right_baby_skill_progress,.opr_right_baby_skill_progress_val,.opr_right_baby_skill_progress_e,.opr_right_baby_skill_stage_radio i{font-size:0;height:8px;display:block;background-image:url(http://www.baidu.com/aladdin/img/right_baby_skill/e.png);background-repeat:no-repeat;}.opr_right_baby_skill_progress{background-color:#ededed;background-position:100% -24px;margin-right:10px;}.opr_right_baby_skill_progress_val{background-color:#38f;background-position:100% -16px;}.opr_right_baby_skill_progress .opr_right_baby_skill_progress_e{background-position:-10px -8px;}.opr_right_baby_skill_progress .opr_right_baby_skill_progress_val .opr_right_baby_skill_progress_e{background-position:-10px 0;}.opr_right_baby_skill_stage_radio_set{overflow:hidden;zoom:1;}.opr_right_baby_skill_stage_radio{cursor:pointer;margin-right:8px;float:left;}.opr_right_baby_skill_stage_radio i{width:14px;height:14px;display:block;float:left;margin-right:3px;margin-top:3px;background-position:0 -32px;}.opr_right_baby_skill_stage_radio div{float:left;}.opr_right_baby_skill_stage_radio_checked i{background-position:0 -46px;}.opr_right_baby_skill_stage .c-btn{cursor:pointer;}.opr_right_baby_skill_msg{display:none;color:#c00;font-size:1.07em;}.opr_right_baby_skill_a{margin-right:10px;line-height:2em;}.opr_right_baby_skill_a i{font-style:normal;display:none;float:right;padding:0 5px 0 15px;}.opr_right_baby_skill_a.opr_right_baby_skill_get i{display:block;}.opr_right_baby_skill_tip{color:#666;}.opr_right_baby_skill_hold{color:#898989;}.opr_right_baby_skill_hide{display:none;}.opr_right_baby_skill_pregnancy_cf,.opr_right_baby_skill_baby_cf{zoom:1;*margin-left:.25em;}.opr_right_baby_skill_result_title{font-size:18px;font-family:"Microsoft YaHei",微软雅黑,SimHei,黑体;}';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("right_baby_skill",function(){A.setup(function(){var v=this,C={},g={},B=[],h=0,t=v.data.progress;var s=v.find(".opr_right_baby_skill_stage_locator");var e=v.find(".opr_right_baby_skill_choose_pregnancy");var k=v.find(".opr_right_baby_skill_choose_baby");var i=v.find(".opr_right_baby_skill_stage_radio");var D=v.find(".opr_right_baby_skill_pregnancy_cf");var d=v.find(".opr_right_baby_skill_baby_cf");var G=v.find(".opr_right_baby_skill_stage_pregnancy .opr_right_baby_skill_msg");var l=v.find(".opr_right_baby_skill_stage_baby .opr_right_baby_skill_msg");var j=v.find(".opr_right_baby_skill_stage");var q=v.find(".opr_right_baby_skill_total");var r=v.find(".opr_right_baby_skill_got");var w=v.find(".opr_right_baby_skill_remains");var a=v.find(".opr_right_baby_skill_progress_val");var f=v.find(".opr_right_baby_skill_change");var o=v.find(".opr_right_baby_skill_title");var b=v.find(".opr_right_baby_skill_list");var c=v.find(".opr_right_baby_skill_pager");var y=v.find(".opr_right_baby_skill_prev");var z=v.find(".opr_right_baby_skill_next");var F=v.data.babyResult,u=v.data.pregResult;function m(E){return E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;")}function p(E){return E.getFullYear()*10000+(E.getMonth()+1)*100+(E.getDate())}function x(E,H){return E.replace(/#{query}/g,encodeURIComponent(H))}function n(J){var I="";if(0<=J&&J<30*2){var H=Math.ceil(J/7);I="宝宝第"+(H>8?8:H)+"周"}else{if(30*2<=J&&J<30*12){var E=Math.floor(J/30);var H=Math.ceil(J%30/7)==0?1:Math.ceil(J%30/7);I="宝宝"+E+"个月第"+(H>4?4:H)+"周"}else{if(30*12<=J&&J<365*3){var E=Math.floor(J/30);I="宝宝"+(E>35?35:E)+"个月"}else{if(365*3<=J){var K=Math.floor(J/365);var E=Math.floor(J%365/30);if(E==0){I="宝宝"+(K>6?6:K)+"周岁"}else{I="宝宝"+K+"岁"+(E>11?11:E)+"个月"}}}}}return I}A.use("calendar,localstorage",function(){var Q=A.ui.localstorage({fileName:"opr_right_baby_skill_got",expiresDay:7});Q.init();function H(W){var V="opr_right_baby_skill_mark";var X=$.parseJSON(Q.get(V))||[];X.push(W);Q.set(V,$.stringify(X))}function P(W){var V="opr_right_baby_skill_mark";var X=$.parseJSON(Q.get(V))||[];return $.inArray(W,X)!=-1}function O(){return($.parseJSON(Q.get("opr_right_baby_skill_mark"))||[]).length}function E(){var Z=O(),X=Number(t.got)+Z,W=Number(t.remains)-Z,V=Number(t.total);var Y=X>V?1:X/V;r.text(X);w.text(W);a.css("width",Y*100+"%")}function R(V){var W=[];$.each(V,function(Y,X){W.push(\'<div class="opr_right_baby_skill_a\');if(P(X.linkText)){W.push(" opr_right_baby_skill_get")}W.push(\'"><i>get√</i><a href="\'+X.linkUrl+\'" target="_blank">\'+m(X.linkText)+"</a></div>")});b.html(W.join(""))}function J(V,W){v.ajax(V,v.data.srcid,{success:function(Y){if(!Y[0]){return}var Z=Y[0];if(Z.skillProgress&&Z.skillProgress[0]){t=Y[0].skillProgress[0];E()}if(Z.skill&&Z.skill[0]){B=Y[0].skill;h=0;R(B.slice(0,5))}if(Z.skillTitle&&Z.skillTitle[0]){o.text(Y[0].skillTitle[0].text)}if(Z.pageLink&&Z.pageLink[0]){var X="opr_right_baby_skill_hide";if(Z.pageLink[0].prevText){y.text(Z.pageLink[0].prevText).attr("data-q",Z.pageLink[0].prevQuery).removeClass(X)}else{y.addClass(X)}if(Z.pageLink[0].nextText){z.text(Z.pageLink[0].nextText).attr("data-q",Z.pageLink[0].nextQuery).removeClass(X)}else{z.addClass(X)}}W&&W(Y)}})}var I=new Date(),L=1000*60*60*24,T=p(I),N=T,K=T;var S=A.ui.calendar({input:e[0],position:e.closest(".opr_right_baby_skill_cal")[0],count:2,today:p(I),between:[p(I),p(new Date(Number(I)+280*L))],onSelectDay:function(Y){N=Y;var V=String(Y);var W=new Date(Number(V.substr(0,4)),Number(V.substr(4,2))-1,Number(V.substr(6,2)));var X=(Number(I)-Number(W))/L+280;var Z=(Number(W)-Number(I))/L;C.already=Math.floor(X/7);C.distance=Math.ceil(Z);G.hide();D.removeClass("c-btn-disable");e.removeClass("opr_right_baby_skill_hold")},onShow:function(){this.setHtml(N)},onChange:function(){this.setDay(N)}});S.addEvent(e.closest(".opr_right_baby_skill_cal").find("i")[0],"click",function(){S.show()},true);var M=A.ui.calendar({input:k[0],position:k.closest(".opr_right_baby_skill_cal")[0],count:2,between:[p(new Date(Number(I)-365.24219*6*L)),p(new Date())],onSelectDay:function(X){K=X;var W=String(X);var Y=new Date(Number(W.substr(0,4)),Number(W.substr(4,2))-1,Number(W.substr(6,2)));var V=Number(I-Y)/L;g.text=n(V);l.hide();d.removeClass("c-btn-disable");k.removeClass("opr_right_baby_skill_hold")},onShow:function(){this.setHtml(K)},onChange:function(){this.setDay(K)}});M.addEvent(k.closest(".opr_right_baby_skill_cal").find("i")[0],"click",function(){M.show()},true);D.on("click",function(){S.hide();if($(this).hasClass("c-btn-disable")){G.show();return}G.hide();var X="您已怀孕"+C.already+"周，"+(C.distance>=0?"离":"超")+"预产期"+Math.abs(C.distance)+"天";var W="孕"+(C.already==0?1:C.already)+"周";var V=[\'<div class="opr_right_baby_skill_result_title c-gap-bottom"><span>\'+X+"</span></div>"];s.hide();if(u){V.push(\'<div class="c-gap-bottom">\');V.push(u.text);if(u.linkText){V.push(\' <a href="\'+x(u.linkUrl,W)+\'" target="_blank">\'+u.linkText+"</a>")}V.push("</div>")}v.find(".opr_right_baby_skill_stage_pregnancy").html(V.join(""));J(W)});d.on("click",function(){M.hide();if($(this).hasClass("c-btn-disable")){l.show();return}G.hide();s.hide();var V=[\'<div class="opr_right_baby_skill_result_title c-gap-bottom"><span>您的\'+g.text+"了</span></div>"];if(F){V.push(\'<div class="c-gap-bottom">\'+F.text);if(F.linkText){V.push(\' <a href="\'+x(F.linkUrl,g.text)+\'" target="_blank">\'+F.linkText+"</a>")}V.push("</div>")}v.find(".opr_right_baby_skill_stage_baby").html(V.join(""));J(g.text)});i.on("click",function(){var Y=$(this),W=Y.attr("data-val"),X=Y.attr("data-q"),V="opr_right_baby_skill_hide";i.removeClass("opr_right_baby_skill_stage_radio_checked");Y.addClass("opr_right_baby_skill_stage_radio_checked");j.addClass(V);v.find(".opr_right_baby_skill_stage_"+W).removeClass(V);if(X){J(X)}});b.on("mousedown",".opr_right_baby_skill_a a",function(W){var V=$(this).closest(".opr_right_baby_skill_a");var X=$(this).text();if(W.button==2||P(X)){return}H(X);E();V.addClass("opr_right_baby_skill_get")});function U(){total=Math.ceil(B.length/5);h=(h+1)%total;R(B.slice(h*5,(h+1)*5))}f.on("click",function(){if(B.length==0){J(v.data.fetchkey,function(){U()})}else{U()}});c.on("click",".opr_right_baby_skill_prev, .opr_right_baby_skill_next",function(W){var V=$(this).attr("data-q");J(V);W.preventDefault()});v.find(".opr_right_baby_skill_a").each(function(){var W=$(this).find("a");var V=W.text();if(P(V)){$(this).addClass("opr_right_baby_skill_get")}});E()})})});';   // js字串，不含<script标签
      private static $uiList = 'btn,input';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
