<?php 
  class CssJs_Util_img_portrait
   {
      private static $cssStr = '.op-img-portrait-menu{overflow:hidden;display:block;}.op-img-portrait-menu a{color:blue;}.op-img-portrait-menu-label{float:left;font-size:12px;color:#999;_margin-top:2px;}.op-img-portrait-item-con{height:121px;overflow:hidden;position:relative;}.op-img-portrait-cell-bar{position:absolute;bottom:0;_bottom:-1px;display:none;background:rgba(0,0,0,0.6);filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0,StartColorStr=\'#99000000\',EndColorStr=\'#99000000\');width:100%;color:#fff;font-size:12px;padding:2px 0;height:16px;overflow:hidden;}.op-img-portrait-cell-bar span{margin:0 6px;}.op-img-portrait-cell-bar .op-img-portrait-cell-down{float:right;}.op-img-portrait-cell-bar .op-img-portrait-cell-down a{display:block;width:12px;height:12px;background:url(\'http://www.baidu.com/aladdin/img/img_phiz/down.gif\') no-repeat left top;margin-top:2px;text-indent:-99px;overflow:hidden;}.op-img-portrait-cell-bar .op-img-portrait-cell-down a:hover{background-position:right top;}.op-img-portrait-cell-bar .op-img-portrait-cell-num{float:left;}.op-img-portrait-cell-hover .op-img-portrait-cell-bar{display:block;}.op-img-portrait-item-con a:hover img{opacity:.8;}.op-img-portrait-main-menu-con{height:24px;overflow:hidden;}.op-img-portrait-sub-menu-con{height:24px;overflow:hidden;}.op-img-portrait-tool-menu-con{height:24px;overflow:hidden;}.op-img-portrait-pic-more{text-align:center;}.op-img-portrait-pic-more a{font-size:12px;text-decoration:none;}.op-img-portrait-pic-more a:hover{text-decoration:underline;}a.op-img-portrait-tag-more{display:none;text-decoration:underline;}.op-img-portrait-text{text-decoration:none;display:inline-block;height:12px;padding:2px;text-align:center;vertical-align:text-bottom;font-size:12px;line-height:12px;font-style:normal;color:#fff;overflow:hidden;}.op-img-portrait-text-mult{padding-left:5px;padding-right:4px;}.op-img-portrait-menu .op-img-portrait-text-public{color:#fff;background-color:#2b99ff;}';  // css字串，不含<style>和</style>标签
      private static $jsStr  = 'A.merge("img_portrait",function(){A.setup(function(){var E=this.data.query;var H=this.data.key;var c=this.find(".op-img-portrait-menu");var u=this.find(".op-img-portrait-pic-more-btn")[0];var m=this.data.host+"/i?tn=resultjsonaladdin&ie=utf-8&oe=utf-8&pn=0&rn=30&z=0&width=&height=&fr=ala_ava_json";var B=this.data.host+"/i?ct=503316480&tn=baiduimagedetail&statnum=head&ipn=d&s=0&ic=0&lm=-1&ie=utf-8&in=3354&cl=2&st=&rn=1&di=&ln=2000&fr=&&fmq=1378374347070_R&se=&sme=0&tab=&face=&&is=0,0&istype=&ist=&jit=&ala=5&ori_query="+E;var d=this.data.host+"/i?ct=201326592&cl=2&nc=1&lm=-1&st=-1&tn=baiduimage&istype=2&pv=&z=0&ie=utf-8&ala=3&fr=ala_ava2&ori_query="+E;var I="/i?tn=baiduimage&ipn=r&ct=201326592&cl=2&st=-1&sf=1&fmq=1390280702008_R&pv=&nc=1&z=&se=1&showtab=0&fb=0&width=&height=&face=0&istype=2&ie=utf-8&ala=5&fr=ala_touxiang1&alaLink=3&ori_query="+E;var h=this.data.host+"/i?tn=download&ipn=dwnl&word=download&ie=utf8&fr=result";var F=this.data.moreHost;var y=$(".op-img-portrait-tool");var D=$(".op-img-portrait-menu-item",y);var g=/(portrait\\-cell\\-bar\\-disp\\-)\\d+/;var k=/(&word\\=).*$/i;var l={selected:"op-img-portrait-text-public",cellHover:"op-img-portrait-cell-hover"};var i={init:function(){this.items=[];this.curr=0;var N=this;var L=this.$elem.parentNode;var K=$(".op-img-portrait-menu-item",this.$elem);this.label=$(".op-img-portrait-menu-label",L)[0];this.$more=$(".op-img-portrait-tag-more",L)[0];this._clicks=[];this._onClick=function(S){var O=this;S.preventDefault();if(N.getItem(N.curr)===this){return}N.switchTo(O.index);var R=N._clicks;for(var Q=0,P=N._clicks.length;Q<P;Q++){if("function"===typeof R[Q]){R[Q].call(N)}}};this.$sampleItem=K[0]&&K[0].cloneNode(true);$(this.$sampleItem).removeClass(l.selected);for(var M=0,J=K.length;M<J;M++){this.addItem(K[M])}this.focus(this.curr);if(this.items.length<=1){this.hide()}return this},setLabel:function(J){this.label.innerHTML=(J+":")},hasSubTag:function(){var J=this.getItem(this.curr);if($(J).attr("sub")==="no"){return false}else{return true}},click:function(J){this._clicks.push(J);return this},addItem:function(J){$(J).on("click",this._onClick);J.index=this.items.length;this.items.push(J);if($(J).hasClass(l.selected)){this.curr=J.index}return this},appendItem:function(J){this.$elem.appendChild(J);this.addItem(J)},switchTo:function(J){if(this.curr>=0){this.blur(this.curr)}this.focus(J);this.curr=J;return this},focus:function(J){var K=this.getItem(J);if(K){$(K).addClass(l.selected)}return K},blur:function(J){var K=this.getItem(J);K&&$(K).removeClass(l.selected);return K},getItem:function(J){J=J||0;return this.items[J]||null},getValue:function(){var J=this.getItem(this.curr);return J?($(J).attr("val")):""},getItemLabel:function(){var J=this.getItem(this.curr);var K=J.innerHTML;if(K==="全部"){K=this.data.query}return K},clear:function(){var J;while(this.items.length>0){J=this.items.pop();$(J).unbind("click",this._onClick);$(J).remove()}this.$more.style.display="none";return this},show:function(){this.$elem.parentNode.style.display="block";return this},hide:function(){this.$elem.parentNode.style.display="none";return this},findOverFlowPos:function(K){var L=this.items;var O=L[0].offsetTop,N=0;for(var M=0,J=L.length;M<J;M++){N=L[M].offsetTop;if(N>O){O=N;if(--K===0){return M-1}}}return -1}};var b=null,C;var f=function(J){if(b&&C===this){clearTimeout(b)}$(this).addClass(l.cellHover)};var G=function(J){C=this;b=setTimeout(function(){$(C).removeClass(l.cellHover)},0)};var a={init:function(J){this.$elem=J;this.$link=$(".op-img-portrait-item",J,"A")[0];this.$img=$(".op-img-portrait",J,"IMG")[0];this.$cellNum=$(".op-img-portrait-cell-num",J);this.$cellDown=$(".op-img-portrait-cell-down",J).find("a");J.onmouseover=f;J.onmouseout=G;return this},hover:function(J){this._hovers.push(J)},render:function(N){var K=z.getValue();var M=v.getValue();var L=j.getValue();var J=t(L);this.$cellNum.html(N.width+"x"+N.height);this.$cellDown.attr("href",h+"&url="+encodeURIComponent(N.objURL));this.$link.href=B+"&is="+N.ImageSetSign+"&pn="+N.pn+"&word="+encodeURIComponent(K+" "+M)+"&objurl="+encodeURIComponent(N.objURL)+"&"+o(J);this.$img.src=N.thumbURL}};var p=function(N,J){var O=N.findOverFlowPos(J);if(O===-1){N.$more.style.display="none";return}var L=N.getItem(O);var K=N.getItem(O+1);if(K.innerHTML.length<2){L=N.getItem(O-1);K=N.getItem(O)}var M=K;$(N.$more).insertBefore(K);N.$more.style.display="inline-block";if(N.$more.offsetTop!=L.offsetTop){$(N.$more).remove();M=L;$(N.$more).insertBefore(L);N.$more.style.display="inline-block"}if(N.$more.offsetTop==M.offsetTop){$(M).remove()}};var x={init:function(M){var J=$(".op-img-portrait-item-con",M);this.cells=[];for(var L=0,K=J.length;L<K;L++){this.addCell($.extend({},a).init(J[L]))}},addCell:function(J){this.cells.push(J)},render:function(M){M=M.imgs;var L=M.length<this.cells.length?M.length:this.cells.length;for(var K=0,J=L;K<J;K++){this.cells[K].render(M[K])}}};var q=function(K,L){var J=m+"&"+K;$.get(J,L,"jsonp")};var o=function(K){var J=[];K=K||{};var L=/^(?:string|boolean|number)/i;for(var M in K){if(K.hasOwnProperty(M)&&L.test(typeof K[M])){J.push(M+"="+K[M])}}return J.join("&")};var w=function(M){var K=z.getValue();var N=v.getValue();var L=j.getValue();var J=t(L);var O={pn:M||0,word:encodeURIComponent(N?K+" "+N:K)};O=$.extend(O,J);return o(O)};var t=function(K){var L={"红色":1,"黄色":2,"绿色":4,"青色":8,"蓝色":16,"紫色":32,"粉色":64,"棕色":128,"橙色":256,"黑色":512,"白色":1024,"黑白":2048,"动态":6,"静态":7,"带字":9};var J={ic:"",lm:"",s:""};if(K=="动态"||K=="静态"){J.lm=L[K]}else{if(K=="带字"){J.s=L[K]}else{J.ic=L[K]}}return J};var s=function(){for(var K=0,J=D.length;K<J;K++){var L=$(D[K]);var M=L.html();if(M!="全部"&&M!="黑色"&&M!="白色"){L.remove()}}j.switchTo(0)};var n=function(){var K=this;if(K===z){v.clear()}var J=w();q(J,function(P){if(J!=w()){return}x.render(P);if(K===v||K===j){return}if(!z.hasSubTag()){v.hide();return}s();var O=P.ptagTwoList;var N=z.getItemLabel();if(N!="人物形象"&&N!="影视"){O[0].selected=false;var Q={};Q.name="全部";O.unshift(Q)}if(O.length>0){v.show()}else{v.hide();return}O[0].selected=true;for(var M=0,L=O.length;M<L;M++){e(O[M],v)}v.setLabel(z.getItemLabel());v.$more.href=v.$more.href.replace(k,"$1"+encodeURIComponent(z.getValue()));p(v,1)})};var e=function(K,M){var J=M.$sampleItem.cloneNode(true);J.innerHTML=K.name;var L="";if(K.name!=="全部"){L=K.name}$(J).attr("val",L);M.appendItem(J);if(K.selected){M.switchTo(M.items.length-1)}else{M.blur(M.items.length-1)}};var r=function(){var K=j.getValue();var J=t(K);u.href=F+I+"&word="+encodeURIComponent(z.getValue()+" "+v.getValue())+"&"+o(J)};var z=$.extend({$elem:c[0]},i).init().click(n).click(r);var v=$.extend({$elem:c[1]},i).init().click(n).click(r);var j=$.extend({$elem:c[2]},i).init().click(n).click(r);x.init($(".op-img-portrait-con")[0]);p(z,1);p(v,1);this.dispose=function(){clearTimeout(b)}})});';   // js字串，不含<script标签
      private static $uiList = '';   // 包含的组件，以','分割的字符串，比如'input,text,button'这样
      
      public static function getHeadCss()
      {
         if (!is_string(self::$cssStr))
         {
            return '';
         }
         return self::$cssStr;
      }
      
      public static function getFootJs()
      {
         if (!is_string(self::$jsStr))
         {
            return '';
         }
         return self::$jsStr;
      }
      
      // 返回数组
      public static function getCssUI()
      {
		 if ( empty(self::$uiList) ) return array();

         $arr = @explode(',', self::$uiList);
         if (!is_array($arr))
         {
            $arr = array();
         }
         return $arr;
      }
   }
