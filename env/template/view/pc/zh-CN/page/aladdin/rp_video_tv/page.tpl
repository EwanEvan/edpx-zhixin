{%extends 'base.tpl'%} {%block name='content'%}{%$FE_GBVAR.wrapper_prefix%}<style>.op_rpvideo_main{width:636px;border:1px solid #f6f6f6}.op_rpvideo_down{background-position:30px -144px}.op_rpvideo_item{background:#fff url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat right -172px;height:18px;border:1px solid #adadad;-webkit-border-radius:2px;border-radius:2px;padding:0 15px 0 5px;font-size:12px;display:inline-block;float:left;margin:0 10px 10px 0;cursor:pointer}.op_rpvideo_top{background:#fdfdfd;padding:0 20px 10px 20px;font-size:12px}.op_rpvi{%*i*%}deo_condition{padding-top:3px}.op_rpvideo_tags div{line-height:42px;height:42px}.op_rpvideo_tags .gap{color:#d8d8d8}.op_rpvideo_tag{margin:0 8px;color:#00c;cursor:pointer;padding:1px 4px 3px;*padding:3px 4px 2px}.op_rpvideo_select{background-color:#67a5eb;color:#fff;-webkit-border-radius:2px;border-radius:2px}.op_rpvideo_nonpoint{color:#999;cursor:default}.op_rpvideo_fresh{background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat -18px -189px;*background-position-y:-{%*i*%}188px;padding-left:14px;color:#666;white-space:nowrap;margin:0 10px 12px 0;display:inline-block}.op_rpvideo_content{background-color:#fff;padding:0 0 10px;font-size:12px}.op_rpvideo_content_s{height:272px;overflow:hidden;position:relative}.op_rpvideo_cntab{padding:0 20px;border-bottom:1px solid #ebebeb;background:#fdfdfd;font-size:14px}.op_rpvideo_cntab span{position:relative;top:1px;color:#00c;padding:4px 15px;display:inline-block;cursor:pointer}.op_rpvideo_cntab span.op_rpvideo_cntab_sel{font-{%*i*%}weight:bold;color:#000;background:#fff;border:solid 1px;border-color:#ebebeb #EBEBEB #fff #ebebeb}.op_rpvideo_maincnt{padding:0 0 10px 30px}.op_rpvideo_cntwrap{*padding-top:15px}.op_rpvideo_detailcnt{height:220px;float:left;position:relative;margin:15px 16px 0 0;*margin-top:0;cursor:pointer}.op_rpvideo_detailcnt a{text-decoration:none}.op_rpvideo_detailbg{width:120px;height:160px;padding:5px;background:#fff;border:1px solid #fff}.op_rpvideo_detailbg_h{height:208px;background:#fafafa;border:1px s{%*i*%}olid #e5e5e5}.op_rpvideo_cntimg{width:120px;height:160px;overflow:hidden;z-index:4}.op_rpvideo_imgwrap{position:absolute;top:6px;left:6px;overflow:hidden;z-index:4}.op_rpvideo_detailbg_h .op_rpvideo_imgwrap{height:83px}.op_rpvideo_imgangle{position:absolute;top:5px;left:5px;width:31px;height:31px;color:#fff;padding:1px 2px;font-weight:bold;cursor:pointer}.op_rpvideo_imgwrap .op_rpvideo_imgangle{top:0;left:0}.op_rpvideo_new{background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.pn{%*i*%}g") no-repeat -40px -55px}.op_rpvideo_hot{background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat 0 -55px}.op_rpvideo_detailinfo{position:absolute;top:93px;z-index:1;*top:91px}.op_rpvideo_detailinfo div{color:#666;width:120px}.op_rpvideo_othera{font-family:simsun}.op_rpvideo_name{overflow:hidden;width:120px;text-align:center;line-height:26px;height:26px;position:absolute;top:170px;color:#00c}.op_rpvideo_detailbg_h .op_rpvideo_name{font-weight:bold}.op_rpvideo_play{{%*i*%}position:absolute;top:28px;left:47px;width:34px;height:34px;background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat;z-index:1;display:none;filter:alpha(opacity=80);-moz-opacity:.80;-khtml-opacity:.80;opacity:.80;cursor:pointer}.op_rpvideo_detailbg_h .op_rpvideo_play{display:block;z-index:5}.op_rpvideo_star{position:absolute;top:195px;width:120px;text-align:center;color:#666}.op_rpvideo_star span{display:inline-block;height:24px;line-height:24px;float:left}.op_rpvid{%*i*%}eo_starbg{width:75px;background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat 0 5px;margin-right:4px}.op_rpvideo_starft{background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat 0 -23px}.op_rpvideo_lastdiv{clear:both}.op_rpvideo_morebtn{text-align:center;background:#fbfbfb url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat 314px -146px;border:1px solid #ebebeb;margin:0 0 0 30px;width:574px;height:30px;line-height{%*i*%}:30px;cursor:pointer;color:#666}.op_rpvideo_morebtn_wait{color:gray;background:#fbfbfb url("http://www.baidu.com/aladdin/img/videoidea/loading.gif") no-repeat 314px 6px;font-weight:normal}.op_rpvideo_noresult{padding:100px 0 100px 135px}.op_rpvideo_noresult div{height:30px;line-height:30px;font-size:14px;background:url("http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png") no-repeat -36px -92px;padding-left:40px}.op_rpvideo_load{padding:100px 0 100px 218px}.op_rpvideo_load div{height:30px{%*i*%};line-height:30px;font-size:14px;background:url("http://www.baidu.com/aladdin/img/videoidea/loading_L.gif") no-repeat;padding-left:40px}.op_rpvideo_hidden{display:none}.op_rpvideo_bold{font-weight:bold}.op_rpvideo_page{overflow:hidden;text-align:center}.op_rpvideo_page .pagenum{overflow:hidden;display:inline-block;*display:inline;margin:0;height:20px;line-height:20px;padding:0 5px;background:#fdfdfd;border:1px solid #d6d6d6;color:#0000d1;font-size:12px;*zoom:1}.op_rpvideo_page .pagenum a{display{%*i*%}:block;margin:0 -5px;padding:0 5px;text-decoration:none}.op_rpvideo_page .curr,.op_rpvideo_page .pagegap{border:1px solid #fff;color:#303030}.op_rpvideo_page .ico-left,.op_rpvideo_page .ico-right{display:inline-block;*display:inline;width:5px;height:8px;margin:0 3px .2em 0;*margin:.2em 3px .2em 0;background:url(http://www.baidu.com/aladdin/img/rp_video_tv/videoidea.png) -7px -36px no-repeat;vertical-align:middle;*zoom:1}.op_rpvideo_page .ico-right{margin-left:3px;background-position:0 -36px}</st{%*i*%}yle><font size="-1"> <div class="op_rpvideo_main"> <div class="op_rpvideo_top" data-click="{'fm':'beha'}"> <div class="op_rpvideo_tags"> <div class="op_rpvideo_type"> <span style="font-weight:bold;">按类型：</span> <span class="op_rpvideo_tag op_rpvideo_all OP_LOG_BTN">全部</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">爱情</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">喜剧</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">动作</sp{%*i*%}an><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">古装</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">科幻</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">恐怖</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">伦理</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">惊悚</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">战争</span> </div> <div class="op_rpvideo_area"> <sp{%*i*%}an style="font-weight:bold;">按地区：</span> <span class="op_rpvideo_tag op_rpvideo_all OP_LOG_BTN">全部</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">大陆</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">香港</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">台湾</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">美国</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">韩国</span><span class="ga{%*i*%}p">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">日本</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">泰国</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">英国</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">其它</span> </div> <div class="op_rpvideo_time"> <span style="font-weight:bold;">按年代：</span> <span class="op_rpvideo_tag op_rpvideo_all OP_LOG_BTN">全部</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN{%*i*%}">2013</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">2012</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">2011</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">2010</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">00年代</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">90年代</span><span class="gap">|</span> <span class="op_rpvideo_tag OP_LOG_BTN">80年代</span><span class="gap">|{%*i*%}</span> <span class="op_rpvideo_tag OP_LOG_BTN">更早</span> </div> </div> <div class="op_rpvideo_condition"> <span style="font-weight:bold;float:left;margin-right:10px;">当前筛选条件：</span> <a class="op_rpvideo_fresh" href="#" onclick="return false;">重新筛选</a> <div style="clear:both;"></div> </div> </div> <div class="op_rpvideo_content"> <div class="op_rpvideo_cntab"> <span class="op_rpvideo_cntab_sel OP_LOG_BTN">最热电视剧</span> <span class="OP_LOG_BTN">最新电视剧</span>  </div> <div class="op_rpvideo_maincnt">{%*i*%} <div class="op_rpvideo_cntwrap" data-index="0"> <div class="op_rpvideo_lastdiv"></div> </div> <div class="op_rpvideo_cntwrap op_rpvideo_hidden" data-index="1"> <div class="op_rpvideo_lastdiv"></div> </div> </div> <div class="op_rpvideo_load op_rpvideo_hidden"> <div>正在努力的为您加载...</div> </div> <div class="op_rpvideo_noresult op_rpvideo_hidden"> <div>抱歉，没有找到符合条件的电视剧，请尝试其它分类。</div> </div> <div class="op_rpvideo_morebtn OP_LOG_BTN">查看更多</div> <div id="rp_video_tv_pagination" class="op_rpvideo_page op{%*i*%}_rpvideo_hidden OP_LOG_BTN"></div> </div> <div class="op_rpvideo_tempdata" style="display:none;"></div> </div></font><script >
    A.setup(
    	{'data':[
    		{%$loop_maxcount=count($tplData.result)%}
    		{%for $op_loop_count=0 to 12%}
        		{%if $op_loop_count<$loop_maxcount%}
        			{'isNew': '{%$tplData.result[$op_loop_count]['isNew']%}',
                    'isHot':'{%$tplData.result[$op_loop_count]['isHot']%}',
        			'poster':'{%$tplData.result[$op_loop_count]['poster']%}',
        			'videoLink':'{%$tplData.result[$op_loop_count]['videoLink']%}',
        			'total':'{%$tplData.result[$op_loop_count]['total']%}',
        			'displayTime':'{%$tplData.result[$op_loop_count]['displayTime']%}',
        			'title':'{%$tplData.result[$op_loop_count]['title']%}',
        			'displayTitle':'{%$tplData.result[$op_loop_count]['displayTitle']%}',
        			'tipsDirector':'{%$tplData.result[$op_loop_count]['tipsDirector']%}',
                    'displayDirector':'{%$tplData.result[$op_loop_count]['displayDirector']%}',
                    'displayTag':'{%$tplData.result[$op_loop_count]['displayTag']%}',
        			'displayRegion':'{%$tplData.result[$op_loop_count]['displayRegion']%}',
        			'tipsActor':'{%$tplData.result[$op_loop_count]['tipsActor']%}',
        			'displayActor':'{%$tplData.result[$op_loop_count]['displayActor']%}'},
        		{%else%}
        		{%break%}
        		{%/if%}
    		{%/for%}{}
    		].slice(0, -1)
    	}
    );

    A.setup(
    	{'tags':[
    		{%$loop_maxcount=count($tplData.QueryTags)%}
    		{%for $op_loop_count=0 to 30%}
    		{%if $op_loop_count<$loop_maxcount%}
    		'{%$tplData.QueryTags[$op_loop_count]%}',
    		{%else%}
    		{%break%}
    		{%/if%}
    		{%/for%}{}
    		].slice(0, -1),'sid':'{%$extData.resourceid%}'}
    );
</script><script>A.init(function(){var T = A.baidu; var _this = this;var fresh = _this.qq('op_rpvideo_fresh');var tags = _this.q('op_rpvideo_tag');var cnt = _this.qq('op_rpvideo_content');var noresult = _this.qq('op_rpvideo_noresult');var load = _this.qq('op_rpvideo_load');var cntabs = _this.qq('op_rpvideo_cntab').getElementsByTagName('span');var morebtn = _this.qq('op_rpvideo_morebtn');var rpPage = _this.qq('op_rpvideo_page');var urlData = _this.qq('op_rpvideo_tempdata');var index = 0; var tSta{%*i*%}mp = 0; var pageindex = 1; var pn = 0; var nomoreresult = false; var up = true; var hotnum = 0; var newnum = 0; var listNumber = 200; var _queryMatch = false;var wdStr = document.getElementById('kw').value;var ajaxFinished = false;if(wdStr === '%E6%9C%80%E6%96%B0%E7%94%B5%E8%A7%86%E5%89%A7' || wdStr === '最新电视剧'){_queryMatch = true;index = 1;};function initDisplay(){var tagslen = _this.data.tags.length,badTags = ['电视剧','片'],tagMark = {'time':true,'type':true,'area':true};for(var i = 0; i < tagsle{%*i*%}n; i++){var badTag = false;for(var k = 0;k <badTags.length; k++){if( _this.data.tags[i] == badTags[k]){badTag = true;break;}};if (badTag) {continue;};var isIn = false;for(var j = 0;j < tags.length; j++){if (_this.data.tags[i] == tags[j].innerHTML){T.dom.addClass(tags[j], 'op_rpvideo_select');var tagtype = tags[j].parentNode.className.split('_')[2];createItem(tags[j].innerHTML, tagtype);isIn = true;tagMark[tagtype] = false;};};if (!isIn) {createItem(_this.data.tags[i], '');};}if (tagMark['type']){%*i*%}T.dom.addClass(T.dom.q('op_rpvideo_all', _this.qq('op_rpvideo_type'))[0], 'op_rpvideo_select');if (tagMark['time'])T.dom.addClass(T.dom.q('op_rpvideo_all', _this.qq('op_rpvideo_time'))[0], 'op_rpvideo_select');if (tagMark['area'])T.dom.addClass(T.dom.q('op_rpvideo_all', _this.qq('op_rpvideo_area'))[0], 'op_rpvideo_select');var tempData = {'disp_data':_this.data.data,'listNum':_this.data.data.length},arr = [tempData],data = {'status':'0','t':'0','data':arr};addCnt(data);ifCond();};T.event.on(more{%*i*%}btn, 'click', function(){if (T.dom.hasClass(this, 'op_rpvideo_morebtn_wait')) {return;} else {T.dom.addClass(this, 'op_rpvideo_morebtn_wait');getData();}});T.each(cntabs, function(el, i){T.event.on(el, 'click', function(){if(!T.dom.hasClass(this, 'op_rpvideo_cntab_sel')){T.dom.removeClass(_this.qq('op_rpvideo_cntab_sel'), 'op_rpvideo_cntab_sel');T.dom.addClass(this, 'op_rpvideo_cntab_sel');index = i;T.each(_this.q('op_rpvideo_cntwrap'), function(el, i){if (i == index) {T.dom.removeClass(el, 'op_{%*i*%}rpvideo_hidden');} else if ( !T.dom.hasClass(el, 'op_rpvideo_hidden') ){T.dom.addClass(el, 'op_rpvideo_hidden');}});initData();getData();}});});T.each(tags, function(el, i){T.event.on(el, 'click', function(ev){var thisWrap = this.parentNode,type = thisWrap.className.split('_')[2],otherTags = T.dom.q('op_rpvideo_select', thisWrap),items = _this.q('op_rpvideo_item');var allTag = _this.q('op_rpvideo_all');var allNum = 0;if (!T.dom.hasClass(this, 'op_rpvideo_select')) {T.each(otherTags, function(el,{%*i*%} i){T.dom.removeClass(el, 'op_rpvideo_select');});T.each(items, function(el,i){if ( el.getAttribute('data-type') == type) {T.dom.remove(el);}});T.dom.addClass(this, 'op_rpvideo_select');if (!T.dom.hasClass(this, 'op_rpvideo_all')) {createItem(this.innerHTML, type);}initData();getData();ifCond();} else {if (!T.dom.hasClass(this, 'op_rpvideo_all')){T.dom.removeClass(this, 'op_rpvideo_select');var itemlen = items.length;for (var i = 0; i < itemlen; i++){if (items[i].getAttribute('data-cont') == thi{%*i*%}s.innerHTML) {T.dom.remove(items[i]);}}if(T.dom.q('op_rpvideo_select', thisWrap)[0] == undefined){T.dom.addClass(T.dom.q('op_rpvideo_all', thisWrap)[0], 'op_rpvideo_select');}initData();getData();ifCond();}};});});function createItem(cnt, type){var item = document.createElement('div');item.className = 'op_rpvideo_item OP_LOG_BTN';item.innerHTML = cnt;item.setAttribute('data-type', type);item.setAttribute('data-cont', cnt);T.event.on(item, 'click', function(){if (type) {var typewrap = _this.qq('o{%*i*%}p_rpvideo_' + type),typetags = T.dom.q('op_rpvideo_select', typewrap),hasOther = true;T.each(typetags, function(el, i){if( el.innerHTML == item.getAttribute('data-cont') ){T.dom.removeClass(el, 'op_rpvideo_select');} else {hasOther = false;}});if (hasOther) {T.dom.addClass(T.dom.q('op_rpvideo_all', typewrap)[0], 'op_rpvideo_select');}}T.dom.remove(item);initData();getData();ifCond();});T.dom.insertBefore(item, fresh);}T.event.on(fresh, 'click', function(){var items = _this.q('op_rpvideo_item'),s{%*i*%}electTags = _this.q('op_rpvideo_select'),tagAll = _this.q('op_rpvideo_all');T.each(items, function(el){T.dom.remove(el);});T.each(selectTags, function(el){T.dom.removeClass(el, 'op_rpvideo_select');});T.each(tagAll, function(el){T.dom.addClass(el, 'op_rpvideo_select');});T.dom.addClass(morebtn, 'op_rpvideo_hidden');initData();getData();ifCond();});function ifCond() {var items = _this.q('op_rpvideo_item'),cond = _this.qq('op_rpvideo_condition');if ( items.length < 1 ) {if (!T.dom.hasClass(cond, '{%*i*%}op_rpvideo_hidden')) {T.dom.addClass(cond, 'op_rpvideo_hidden');}} else {T.dom.removeClass(cond, 'op_rpvideo_hidden');}}function addCnt(data){if(ajaxFinished) return;T.dom.addClass(load, 'op_rpvideo_hidden');if (data.status == '0' && data.data[0].disp_data ) {var len = data.data[0].disp_data.length;listNumber = data.data[0].listNum;newVideoPage();if (len > 0) {if (len < 12) {T.dom.addClass(morebtn, 'op_rpvideo_hidden');nomoreresult = true;} else {if (up) {T.dom.removeClass(morebtn, 'op_rpvideo_h{%*i*%}idden');}nomoreresult = false;}for(var i = 0; i < len && i < 12; i ++){createCntItem(data.data[0].disp_data[i]);}if (pn >= 12 || data.data[0].listNum == (pn+12)) {T.dom.addClass(morebtn, 'op_rpvideo_hidden');T.dom.removeClass(rpPage, 'op_rpvideo_hidden');}T.dom.removeClass(morebtn, 'op_rpvideo_morebtn_wait');T.dom.addClass(noresult, 'op_rpvideo_hidden');} else {T.dom.addClass(morebtn, 'op_rpvideo_hidden');T.dom.removeClass(noresult, 'op_rpvideo_hidden');}} else {T.dom.removeClass(noresult, 'op_r{%*i*%}pvideo_hidden');} }function createCntItem(data){var cnt = document.createElement('div');cnt.className = 'op_rpvideo_detailcnt OP_LOG_BTN';cnt.setAttribute('data-src',data.videoLink);var cntbg = document.createElement('div');cntbg.className = 'op_rpvideo_detailbg';var actorStr = '';var tagStr = '';var titleStr = '';var regionStr = '';actorStr = cutstr(data.displayActor, 22);tagStr = cutstr(data.displayTag, 10);titleStr = cutstr(data.displayTitle, 16);regionStr = cutstr(data.displayRegion, 12);fun{%*i*%}ction cutstr(str, len){ var str_length = 0;var str_len = 0;str_cut = new String();str_len = str.length;for(var i = 0; i < str_len; i++){ a = str.charAt(i);str_length++;if(escape(a).length > 4){ str_length++;};if(str_length < len){str_cut = str_cut.concat(a); };if(str_length > len){str_cut = str_cut.concat("…");return str_cut;};};if(str_length <= len){ return str;};if(str_length === 0 && typeof(str_length) !== 'undefined'){str = '暂无';return str;};};var bgHtml = ['<div class="op_rpvideo_detailinfo{%*i*%}"><div><table cellpadding="0" cellspacing="0"><tr><td style="width:36px;vertical-align:top;">主演：</td><td><span title="',data.displayActor,'">',actorStr,'</span></td></tr></table></div><div><span>地区：',regionStr,'</span></div>','<div><span>类型：<span title="',data.displayTag,'">',tagStr,'</span></span></div></div>','<div class="op_rpvideo_imgwrap"><img class="op_rpvideo_cntimg"  src="',data.poster,'" /><div class="op_rpvideo_play"></div>'];if (data.isHot == 'true' && hotnum < 6) {bgHtml.push('<span {%*i*%}class="op_rpvideo_imgangle op_rpvideo_hot">热</span></a></div>');hotnum++;} else if (data.isNew == 'true' && newnum < 6) {bgHtml.push('<span class="op_rpvideo_imgangle op_rpvideo_new">新</span></a></div>');newnum++;} else {bgHtml.push('</div>');}var downHtml = [ '<div class="op_rpvideo_name"><span title="',data.displayTitle,'">',titleStr,'</span></div><div class="op_rpvideo_star"><p>',data.total,'</p></div>'];bgHtml = bgHtml.concat(downHtml);cntbg.innerHTML = bgHtml.join('');cnt.appendChild(cntbg){%*i*%};T.event.on(cntbg, 'mouseover', function(){T.dom.addClass(cntbg, 'op_rpvideo_detailbg_h');});T.event.on(cnt, 'mouseout', function(){T.dom.removeClass(cntbg, 'op_rpvideo_detailbg_h');});T.event.on(cnt, 'click', function(){var url = cnt.getAttribute('data-src');urlData.innerHTML = url;window.open(urlData.childNodes[0].nodeValue,'_blank');});var lastdiv = T.dom.q('op_rpvideo_lastdiv',_this.q('op_rpvideo_cntwrap')[index])[0];T.dom.insertBefore(cnt, lastdiv);}function getData(){var type = [],sortkey,{%*i*%}time_more,url = 'http://opendata.baidu.com/api.php?format=json&rn=12&from_mid=1&sort_type=1&ie=utf-8&oe=utf-8&type=#{0}&sort_key=#{1}&pn=#{2}&query=#{3}&time_more=#{4}&t=#{5}&resource_id=#{6}',items = _this.q('op_rpvideo_item');tStamp = new Date().getTime();pn = pageindex++*12;T.each(items, function(el, i){var cont = el.getAttribute('data-cont');type.push(cont);});switch (index) {case 0:sortkey = '';break;case 1:sortkey = '11';break;case 2:sortkey = '12';break;};T.dom.removeClass(load, 'op_rpvid{%*i*%}eo_hidden');T.dom.addClass(noresult, 'op_rpvideo_hidden');T.sio.callByServer(T.format(url, encodeURIComponent(type.join(',')), sortkey, pn, encodeURIComponent('电视剧'), time_more, tStamp, _this.data.sid), addCnt, {'queryField':'cb','charset':'utf-8'});};function initData(){pageindex = 0;hotnum = 0;newnum = 0;pn = 0;nomoreresult = false;T.dom.removeClass(morebtn, 'op_rpvideo_morebtn_wait');T.dom.addClass(morebtn, 'op_rpvideo_hidden');T.dom.addClass(rpPage, 'op_rpvideo_hidden');_this.q('op_rpvideo_c{%*i*%}ntwrap')[index].innerHTML = '<div class="op_rpvideo_lastdiv"></div>';}function pageEventBase() {this.addListener = function ( type, listener ) {getListener( this, type, true ).push( listener );};this.removeListener = function ( type, listener ) {var listeners = getListener( this, type );for( var i = 0; i < listeners.length; i++ ) {if( listeners[ i ] == listener ) {listeners.splice( i, 1 );return;};};}; this.fireEvent = function ( type ) {var listeners = getListener( this, type ),r, t, k;if ( lis{%*i*%}teners ) {k = listeners.length;while ( k -- ) {t = listeners[k].apply( this, arguments );if ( t !== undefined ) {r = t;};}; };if ( t = this['on' + type.toLowerCase()] ) {r = t.apply( this, arguments );};return r;}; };function getListener( obj, type, force ) {var allListeners;type = type.toLowerCase();return ( ( allListeners = ( obj.__allListeners || force && ( obj.__allListeners = {} ) ) )&& ( allListeners[type] || force && ( allListeners[type] = [] ) ));};function rpVideoPage(pageCanvas) {this.{%*i*%}recordCount;this.pageSize;this.numericButtonCount;this.pageCanvas = pageCanvas;this.pageIndex = 1;};rpVideoPage.prototype = new pageEventBase();rpVideoPage.prototype.getPageHtml = function() {this.pageCount = Math.ceil(this.recordCount / this.pageSize);var prev = this.pageIndex == 1 ? "" : " <span class='pagenum page_up'><a class='OP_LOG_BTN' href='javascript:;' pageindex='" + (this.pageIndex - 1) + "'><span class='ico-left'></span>上一页</a></span> ";var next = this.pageCount <= this.pageIndex ? "{%*i*%}" : " <span class='pagenum page_next'><a class='OP_LOG_BTN' href='javascript:;' pageIndex='" + (this.pageIndex + 1) + "'>下一页<span class='ico-right'></span></a></span>";var first = this.pageIndex == 1 ? "<span class='pagenum onthis'>1</span><span class='pagenum pagegap'>…</span>" : "<span class='pagenum'><a class='OP_LOG_BTN' href='javascript:;' pageindex='1'>1</a></span><span class='pagenum pagegap'>…</span>";var last = this.pageCount <= this.pageIndex ? "<span class='pagenum pagegap'>…</span><s{%*i*%}pan class='pagenum onthis'>" + this.pageCount + "</span>" : " <span class='pagenum pagegap'>…</span> <span class='pagenum'><a class='OP_LOG_BTN' href='javascript:;' pageindex='" + (this.pageCount) + "'>" + this.pageCount + "</a></span>";var pageStr = "";var pageMathIndex = Math.floor(this.numericButtonCount / 2);var pageStartIndex;var pageEndIndex;if (this.pageCount < this.numericButtonCount) {pageStartIndex = 1;pageEndIndex = this.pageCount;} else {if (this.pageCount - pageMathIndex < this.page{%*i*%}Index) {pageStartIndex = this.pageCount - this.numericButtonCount + 1;pageEndIndex = this.pageCount;} else {if (this.pageIndex - pageMathIndex < 1) {pageStartIndex = 1;pageEndIndex = this.numericButtonCount;} else {pageStartIndex = this.pageIndex - pageMathIndex;pageEndIndex = this.pageIndex + pageMathIndex;};};};for (var i = pageStartIndex; i <= pageEndIndex; i++) {if (this.pageIndex == i){pageStr += " <span class='pagenum curr onthis'>" + i + "</span>";}else{pageStr += " <span class='pagenum'>{%*i*%}<a class='OP_LOG_BTN' href='javascript:;' pageindex='" + i + "'>" + i + "</a></span>";};};if (pageStartIndex == 1){first = '';}; if (pageEndIndex == this.pageCount){last = '';};pageStr = prev + first + pageStr + last + next;return pageStr;};rpVideoPage.prototype.onPageChanged = function(pageIndex) {this.pageIndex = pageIndex;this.fireEvent('pageChanged');};rpVideoPage.prototype.pageEvent = function(page) {this.onclick = function(e) {e = e || window.event;t = e.target || e.srcElement;if (t.tagNam{%*i*%}e == "A"){pageindex = t.getAttribute('pageindex');page.onPageChanged(parseInt(t.getAttribute("pageindex")));function getData(){var type = [],sortkey,time_more,url = 'http://opendata.baidu.com/api.php?format=json&rn=24&from_mid=1&sort_type=1&ie=utf-8&oe=utf-8&type=#{0}&sort_key=#{1}&pn=#{2}&query=#{3}&time_more=#{4}&t=#{5}&resource_id=#{6}',items = _this.q('op_rpvideo_item');tStamp = new Date().getTime();pn = (pageindex-1)*24;T.each(items, function(el, i){var cont = el.getAttribute('data-cont');t{%*i*%}ype.push(cont);});switch (index) {case 0:sortkey = '';break;case 1:sortkey = '11';break;case 2:sortkey = '12';break;}T.dom.removeClass(load, 'op_rpvideo_hidden');T.dom.addClass(noresult, 'op_rpvideo_hidden');T.sio.callByServer(T.format(url, encodeURIComponent(type.join(',')), sortkey, pn, encodeURIComponent('电视剧'), time_more, tStamp, _this.data.sid), callBack, {'queryField':'cb','charset':'utf-8'});};getData();function callBack(data){if(ajaxFinished) return;_this.q('op_rpvideo_cntwrap')[index].i{%*i*%}nnerHTML = '<div class="op_rpvideo_lastdiv"></div>';T.dom.addClass(load, 'op_rpvideo_hidden');if (data.status == '0' && data.data[0].disp_data) {var len = data.data[0].disp_data.length;if (len > 0) {if (len < 24) {T.dom.addClass(morebtn, 'op_rpvideo_hidden');nomoreresult = true;} else {nomoreresult = false;}for(var i = 0; i < len && i < 24; i ++){createCntItem(data.data[0].disp_data[i]);}T.dom.removeClass(morebtn, 'op_rpvideo_morebtn_wait');T.dom.addClass(noresult, 'op_rpvideo_hidden');} else {T{%*i*%}.dom.addClass(morebtn, 'op_rpvideo_hidden');T.dom.removeClass(noresult, 'op_rpvideo_hidden');}} else {T.dom.removeClass(noresult, 'op_rpvideo_hidden');};document.body.scrollTop = 105;document.documentElement.scrollTop = 105;};};};};rpVideoPage.prototype.render = function() {var pageCanvas = document.getElementById(this.pageCanvas);pageCanvas.innerHTML = this.getPageHtml();this.pageEvent.call(pageCanvas, this);};rpVideoPage.prototype.initialize = function() {this.onPageChanged(this.pageIndex);};f{%*i*%}unction newVideoPage(){var rpNewVideopage = new rpVideoPage( 'rp_video_tv_pagination' );rpNewVideopage.recordCount = listNumber;rpNewVideopage.numericButtonCount = 5;rpNewVideopage.pageSize = 24;rpNewVideopage.addListener( 'pageChanged', function() {rpNewVideopage.render();} );rpNewVideopage.initialize();};(function(){if(_queryMatch == true){for(var i=0;i<cntabs.length;i++){T.dom.removeClass(cntabs[i], 'op_rpvideo_cntab_sel');};T.dom.addClass(cntabs[1], 'op_rpvideo_cntab_sel');T.dom.addClass(_th{%*i*%}is.qq('op_rpvideo_condition'), 'op_rpvideo_hidden');T.dom.removeClass(_this.q('op_rpvideo_cntwrap')[1], 'op_rpvideo_hidden');T.dom.addClass(T.dom.q('op_rpvideo_all', _this.qq('op_rpvideo_type'))[0], 'op_rpvideo_select');T.dom.addClass(T.dom.q('op_rpvideo_all', _this.qq('op_rpvideo_time'))[0], 'op_rpvideo_select');T.dom.addClass(T.dom.q('op_rpvideo_all', _this.qq('op_rpvideo_area'))[0], 'op_rpvideo_select');function initGetData(){var type = [],sortkey,time_more,url = 'http://opendata.baidu.com/ap{%*i*%}i.php?format=json&rn=12&from_mid=1&sort_type=1&ie=utf-8&oe=utf-8&type=#{0}&sort_key=#{1}&pn=#{2}&query=#{3}&time_more=#{4}&t=#{5}&resource_id=#{6}',items = _this.q('op_rpvideo_item');tStamp = new Date().getTime();pn = 0;sortkey = '11';T.sio.callByServer(T.format(url, encodeURIComponent(type.join(',')), sortkey, pn, encodeURIComponent('电视剧'), time_more, tStamp, _this.data.sid), initAddCnt, {'queryField':'cb','charset':'utf-8'});function initAddCnt(data){if(ajaxFinished) return;if (data.status == {%*i*%}'0' && data.data[0].disp_data) {var len = data.data[0].disp_data.length;listNumber = data.data[0].listNum;newVideoPage();if (len > 0) {if (len < 12) {T.dom.addClass(morebtn, 'op_rpvideo_hidden');nomoreresult = true;} else {if (up) {T.dom.removeClass(morebtn, 'op_rpvideo_hidden');}nomoreresult = false;}for(var i = 0; i < len && i < 12; i ++){createCntItem(data.data[0].disp_data[i]);}T.dom.removeClass(morebtn, 'op_rpvideo_morebtn_wait');T.dom.addClass(noresult, 'op_rpvideo_hidden');} else {T.dom.a{%*i*%}ddClass(morebtn, 'op_rpvideo_hidden');T.dom.removeClass(noresult, 'op_rpvideo_hidden');}} else {T.dom.removeClass(noresult, 'op_rpvideo_hidden');} };};initGetData();}else{initDisplay(); };})();this.dispose = function(){if(!ajaxFinished){ajaxFinished = true;}};});</script>{%$FE_GBVAR.wrapper_suffix%}{%/block%}